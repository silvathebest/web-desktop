/**
 * @license
 * Webix UI v.7.1.1
 * This software is covered by Webix Trial License.
 * Usage without proper license is prohibited.
 * (c) XB Software Ltd.
 */

!function (t, i) {
    "object" == typeof exports && "undefined" != typeof module ? i(exports) : "function" == typeof define && define.amd ? define(["exports"], i) : i(t.webix = {})
}(this, function (P) {
    "use strict";

    function M(t) {
        return (M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
            return typeof t
        } : function (t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
        })(t)
    }

    var i = window, e = 1, s = {}, n = !1;

    function f(t) {
        i.setImmediate ? i.setImmediate(t) : i.importScripts || !i.addEventListener ? setTimeout(t) : (s[++e] = t, i.postMessage(e, "*"))
    }

    function m(t) {
        if ("function" != typeof t && t != undefined) throw TypeError();
        if ("object" != M(this) || this && this.then) throw TypeError();
        var i, e, n = this, h = 0, r = 0, s = [];
        (n.promise = n).resolve = function (t) {
            return i = n.fn, e = n.er, h || (r = t, h = 1, f(u)), n
        }, n.reject = function (t) {
            return i = n.fn, e = n.er, h || (r = t, h = 2, f(u)), n
        }, n.i = 1, n.then = function (t, i) {
            if (1 != this.i) throw TypeError();
            var e = new m;
            return e.fn = t, e.er = i, 3 == h ? e.resolve(r) : 4 == h ? e.reject(r) : s.push(e), e
        }, n["finally"] = function (i) {
            var e, t = function (t) {
                return e = t, i()
            }, s = function () {
                var t = new m;
                return 4 == h ? t.reject(e) : t.resolve(e)
            };
            return n.then(t, t).then(s, s)
        }, n["catch"] = function (t) {
            return n.then(null, t)
        }, n.fail = function (t) {
            return n.then(null, t)
        };
        var o = function (t) {
            h = t || 4;
            for (var i = 0; i < s.length; i++) {
                var e = s[i];
                3 == h && e.resolve(r) || e.reject(r)
            }
        };
        try {
            "function" == typeof t && t(n.resolve, n.reject)
        } catch (c) {
            n.reject(c)
        }
        return n;

        function a(t, i, e, s) {
            if (2 == h) return s();
            if ("object" != M(r) && "function" != typeof r || "function" != typeof t) s(); else try {
                var n = 0;
                t.call(r, function (t) {
                    n++ || (r = t, i())
                }, function (t) {
                    n++ || (r = t, e())
                })
            } catch (c) {
                r = c, e()
            }
        }

        function u() {
            var t;
            try {
                t = r && r.then
            } catch (c) {
                return r = c, h = 2, u()
            }
            a(t, function () {
                h = 1, u()
            }, function () {
                h = 2, u()
            }, function () {
                try {
                    1 == h && "function" == typeof i ? r = i(r) : 2 == h && "function" == typeof e && (r = e(r), h = 1)
                } catch (c) {
                    return r = c, o()
                }
                r == n ? (r = TypeError(), o()) : a(t, function () {
                    o(3)
                }, o, function () {
                    o(1 == h && 3)
                })
            })
        }
    }

    !i.setImmediate && i.addEventListener && i.addEventListener("message", function (t) {
        if (t.source == i) if (n) f(s[t.data]); else {
            n = !0;
            try {
                s[t.data]()
            } catch (t) {
            }
            delete s[t.data], n = !1
        }
    }), m.resolve = function (i) {
        if (1 != this.i) throw TypeError();
        return i instanceof m ? i : new m(function (t) {
            t(i)
        })
    }, m.reject = function (e) {
        if (1 != this.i) throw TypeError();
        return new m(function (t, i) {
            i(e)
        })
    }, m.all = function (e) {
        if (1 != this.i) throw TypeError();
        if (!(e instanceof Array)) return m.reject(TypeError());
        var s = new m;
        return function n(t, i) {
            return i ? s.resolve(i) : t ? s.reject(t) : (0 == e.reduce(function (t, i) {
                return i && i.then ? t + 1 : t
            }, 0) && s.resolve(e), void e.map(function (t, i) {
                t && t.then && t.then(function (t) {
                    return e[i] = t, n(), t
                }, n)
            }))
        }(), s
    }, m.race = function (e) {
        if (1 != this.i) throw TypeError();
        if (!(e instanceof Array)) return m.reject(TypeError());
        if (0 == e.length) return new m;
        var s = new m;
        return function n(t, i) {
            return i ? s.resolve(i) : t ? s.reject(t) : (0 == e.reduce(function (t, i) {
                return i && i.then ? t + 1 : t
            }, 0) && s.resolve(e), void e.map(function (t) {
                t && t.then && t.then(function (t) {
                    n(null, t)
                }, n)
            }))
        }(), s
    }, m.i = 1, m.defer = function () {
        return new m(null)
    };
    var h = {};

    function t(t, i) {
        h[t] = i
    }

    function d(t) {
        return h[t]
    }

    var r = {};

    function l(t) {
        var i = l.n;
        return i.prototype = t, new i
    }

    function _(t) {
        var i, e = !!(window.Map && window.Set && window.WeakMap && window.WeakSet);
        for (var s in 1 < arguments.length ? (i = arguments[0], t = arguments[1]) : i = b(t) ? [] : {}, t) {
            var n = t[s];
            !n || "object" != M(n) || n instanceof RegExp ? i[s] = n : y(n) ? i[s] = new Date(n) : e && (n instanceof Map || n instanceof Set || n instanceof WeakMap || n instanceof WeakSet) ? i[s] = n : (i[s] = b(n) ? [] : {}, _(i[s], n))
        }
        return i
    }

    function S(t, i) {
        return function () {
            return t.apply(i, arguments)
        }
    }

    function p(t) {
        window.execScript ? window.execScript(t) : window.eval(t)
    }

    function j(t) {
        return void 0 === t
    }

    function k(i, e, s, t) {
        return window.setTimeout(function () {
            if (!e || !e.$destructed) {
                var t = i.apply(e, s || []);
                return i = e = s = null, t
            }
        }, t || 1)
    }

    function o(t) {
        var i = !0;
        return function () {
            i && (i = !1, t.apply(this, arguments))
        }
    }

    l.n = function () {
    }, P.extend = function (t, i, e) {
        if (t.$protoWait) return x.insertAt.call(t.$protoWait, i, 1), t;
        for (var s in i) s in t && !e || (t[s] = i[s]);
        return i.defaults && P.extend(t.defaults, i.defaults), i.$init && i.$init.call(t), t
    };
    var a = (new Date
    ).valueOf();

    function V() {
        return ++a
    }

    function C(t) {
        return "string" == typeof t ? document.getElementById(t) : t
    }

    function v(t, i) {
        if ("string" != typeof t) return t;
        var e = t.replace("()", "");
        return i && i[e] ? i[e] : window[e] || window.eval(t)
    }

    function b(t) {
        return Array.isArray ? Array.isArray(t) : "[object Array]" === Object.prototype.toString.call(t)
    }

    function y(t) {
        return t instanceof Date
    }

    function g(t) {
        return P.extend(t || [], x, !0)
    }

    var x = {
        removeAt: function (t, i) {
            0 <= t && this.splice(t, i || 1)
        }, remove: function (t) {
            this.removeAt(this.find(t))
        }, insertAt: function (t, i) {
            i || 0 === i ? this.splice(i, 0, t) : this.push(t)
        }, find: function (t) {
            for (var i = 0; i < this.length; i++) if (t == this[i]) return i;
            return -1
        }, each: function (t, i) {
            for (var e = 0; e < this.length; e++) t.call(i || this, this[e])
        }, map: function (t, i) {
            for (var e = 0; e < this.length; e++) this[e] = t.call(i || this, this[e]);
            return this
        }, filter: function (t, i) {
            for (var e = 0; e < this.length; e++) t.call(i || this, this[e]) || (this.splice(e, 1), e--);
            return this
        }
    }, $ = {parseFormat: "%Y-%m-%d %H:%i:%s", parseTimeFormat: "%H:%i:%s"};

    function u(t) {
        var i, e = Date.prototype.toJSON;
        return Date.prototype.toJSON = function () {
            return $.parseFormatStr(this)
        }, i = t instanceof Date ? t.toJSON() : JSON.stringify(t), Date.prototype.toJSON = e, i
    }

    var c = {
        $init: function () {
            this.h || (this.h = {}, this.o = {}, this.u = {})
        }, blockEvent: function () {
            this.h.l = !0
        }, unblockEvent: function () {
            this.h.l = !1
        }, mapEvent: function (t) {
            P.extend(this.u, t, !0)
        }, on_setter: function (t) {
            if (t) for (var i in t) {
                var e = v(t[i], this.$scope), s = i.indexOf("->");
                -1 !== s ? this[i.substr(0, s)].attachEvent(i.substr(s + 2), S(e, this)) : this.attachEvent(i, e)
            }
        }, callEvent: function (t, i) {
            var e = this._ || this;
            if (this.h.l) return !0;
            t = t.toLowerCase();
            var s = this.h[t.toLowerCase()], n = !0;
            if (s) for (var h = 0; h < s.length; h++) !1 === s[h].apply(e, i || []) && (n = !1);
            if (this.u[t]) {
                var r = this.u[t];
                r.$eventSource = this, r.callEvent(t, i) || (n = !1), r.$eventSource = null
            }
            return n
        }, attachEvent: function (t, i, e) {
            t = t.toLowerCase(), e = e || V(), i = v(i, this.$scope);
            var s = this.h[t] || g();
            return arguments[3] ? s.unshift(i) : s.push(i), this.h[t] = s, this.o[e] = {f: i, t: t}, e
        }, detachEvent: function (t) {
            if (this.o[t]) {
                var i = this.o[t].t, e = this.o[t].f;
                this.h[i].remove(e), delete this.o[t]
            } else {
                var s = (t + "").toLowerCase();
                this.h[s] && (this.h[s] = g())
            }
        }, hasEvent: function (t) {
            t = t.toLowerCase();
            var i = this.h[t];
            if (i && i.length) return !0;
            var e = this.u[t];
            return !!e && e.hasEvent(t)
        }
    }, w = {};
    P.extend(w, c, !0);
    var D = function (t, i) {
        return w.callEvent(t, i)
    }, I = function (t, i, e, s) {
        return w.attachEvent(t, i, e, s)
    }, A = function (t) {
        return w.detachEvent(t)
    }, F = {
        m: function (t) {
            return t && t.documentElement ? t.getElementsByTagName("parsererror").length ? null : t : null
        }, toObject: function (t, i) {
            var e = i ? i.rawxml ? i.rawxml() : i : null;
            return this.m(e) ? e : (e = "string" == typeof t ? this.fromString(t.replace(/^[\s]+/, "")) : t, this.m(e) ? e : null)
        }, getRecords: function (t) {
            return this.xpath(t, this.records)
        }, records: "/*/item", child: "item", config: "/*/config", getDetails: function (t) {
            return this.tagToObject(t, {})
        }, getOptions: function () {
            return !1
        }, getInfo: function (t) {
            var i = this.xpath(t, this.config);
            return i = i.length ? this.assignTypes(this.tagToObject(i[0], {})) : null, {
                size: t.documentElement.getAttribute("total_count") || 0,
                from: t.documentElement.getAttribute("pos"),
                parent: t.documentElement.getAttribute("parent") || 0,
                config: i
            }
        }, xpath: function (t, i) {
            if (window.XPathResult) {
                var e = t;
                -1 == t.nodeName.indexOf("document") && (t = t.ownerDocument);
                for (var s = [], n = t.evaluate(i, e, null, XPathResult.ANY_TYPE, null), h = n.iterateNext(); h;) s.push(h), h = n.iterateNext();
                return s
            }
            var r = !0;
            try {
                "undefined" == typeof t.selectNodes && (r = !1)
            } catch (a) {
            }
            if (r) return t.selectNodes(i);
            var o = i.split("/").pop();
            return t.getElementsByTagName(o)
        }, assignTypes: function (t) {
            for (var i in t) {
                var e = t[i];
                if ("object" == M(e)) this.assignTypes(e); else if ("string" == typeof e) {
                    if ("" === e) continue;
                    "true" == e ? t[i] = !0 : "false" == e ? t[i] = !1 : e == 1 * e && (t[i] = 1 * t[i])
                }
            }
            return t
        }, tagToObject: function (t, i) {
            var e = 0;
            if (1 == t.nodeType && t.getAttribute("stack")) {
                i = [];
                for (var s = t.childNodes, n = 0; n < s.length; n++) 1 == s[n].nodeType && i.push(this.tagToObject(s[n], {}))
            } else {
                i = i || {};
                var h = t.attributes;
                if (h && h.length) for (var r = 0; r < h.length; r++) i[h[r].name] = h[r].value, e = 1;
                for (var o = t.childNodes, a = 0; a < o.length; a++
                ) if (1 == o[a].nodeType) {
                    var u = o[a].tagName;
                    i[u] ? ("function" != typeof i[u].push && (i[u] = [i[u]]), i[u].push(this.tagToObject(o[a], {}))) : i[u] = this.tagToObject(o[a], {}), e = 2
                }
                if (!e) return this.nodeValue(t);
                e < 2 && (i.value = i.value || this.nodeValue(t))
            }
            return i
        }, nodeValue: function (t) {
            return t.firstChild ? t.firstChild.wholeText || t.firstChild.data : ""
        }, fromString: function (t) {
            try {
                if (window.DOMParser) return (new DOMParser).parseFromString(t, "text/xml");
                if (window.ActiveXObject) {
                    var i = new ActiveXObject("Microsoft.xmlDOM");
                    return i.loadXML(t), i
                }
            } catch (e) {
                return null
            }
        }
    }, T = {
        toObject: function (t) {
            if (!t) return null;
            if ("string" == typeof t) try {
                if (this.parseDates) {
                    var e = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{1-3})?Z/;
                    t = JSON.parse(t, function (t, i) {
                        return "string" == typeof i && e.test(i) ? new Date(i) : i
                    })
                } else t = JSON.parse(t)
            } catch (i) {
                return null
            }
            return t
        }, getRecords: function (t) {
            return t && t.data && (t = t.data), t && !b(t) ? [t] : t
        }, getDetails: function (t) {
            return "string" == typeof t ? {id: t || V(), value: t} : t
        }, getOptions: function (t) {
            return t.collections
        }, getInfo: function (t) {
            return {size: t.total_count || 0, from: t.pos, parent: t.parent || 0, config: t.config}
        }, child: "data", parseDates: !1
    };

    function z(t, i, e) {
        return 0 !== arguments.length ? (new z).get(t, i, e) : this && this.getXHR ? this : new z
    }

    z.count = 0, z.prototype = {
        master: null, getXHR: function () {
            return new XMLHttpRequest
        }, stringify: function (t) {
            return u(t)
        }, w: function (t, i, s, e) {
            var n;
            i && (b(i) || "function" == typeof (i.success || i.error || i)) && (n = s, s = i, i = null);
            var h = m.defer(), r = this.getXHR(), o = this.S || {};
            if (!D("onBeforeAjax", [e, t, i, r, o, null, h])) return h.reject(r);
            var a = !1;
            if ("GET" !== e) {
                var u = !1;
                for (var c in o) "content-type" == c.toString().toLowerCase() && (u = !0, "application/json" == o[c] && (a = !0));
                u || window.FormData && i instanceof window.FormData || (o["Content-Type"] = "application/x-www-form-urlencoded")
            }
            if ("object" == M(i) && !(window.FormData && i instanceof window.FormData)) if (a) i = this.stringify(i); else {
                var f = [];
                for (var l in i) {
                    var d = i[l];
                    null !== d && d !== undefined || (d = ""), "object" === M(d) && (d = this.stringify(d)), f.push(l + "=" + encodeURIComponent(d))
                }
                i = f.join("&")
            }
            i && "GET" === e && (t = t + (-1 != t.indexOf("?") ? "&" : "?") + i, i = null), r.open(e, t, !this.k);
            var v = this.$;
            for (var _ in v && (r.responseType = v), o) r.setRequestHeader(_, o[_]);
            var p = this;
            return this.master = this.master || n, r.onreadystatechange = function () {
                if (!r.readyState || 4 == r.readyState) {
                    z.count++;
                    var t, i, e = 400 <= r.status || 0 === r.status;
                    i = "blob" == r.responseType || "arraybuffer" == r.responseType ? (t = "", r.response) : (t = r.responseText || "", p.D(r)), e ? (D("onAjaxError", [r]), h.reject(r)) : h.resolve(i), s && z.$callback(p.master || window, s, t, i, r, e)
                }
            }, this.I && (r.timeout = this.I), this.k ? r.send(i || null) : setTimeout(function () {
                r.send(i || null)
            }, 0), this.master && !this.k && h.then(function (t) {
                return p.master = null, s = p = n = null, t
            }), this.k ? r : h
        }, D: function (i) {
            return {
                xml: function () {
                    try {
                        return F.tagToObject(F.toObject(i.responseText, this))
                    } catch (t) {
                        i.responseText, t.toString()
                    }
                }, rawxml: function () {
                    return window.XPathResult ? i.responseXML : F.fromString(i.responseText)
                }, text: function () {
                    return i.responseText
                }, json: function () {
                    return T.toObject(i.responseText, !1)
                }
            }
        }, get: function (t, i, e) {
            return this.w(t, i, e, "GET")
        }, post: function (t, i, e) {
            return this.w(t, i, e, "POST")
        }, put: function (t, i, e) {
            return this.w(t, i, e, "PUT")
        }, del: function (t, i, e) {
            return this.w(t, i, e, "DELETE")
        }, patch: function (t, i, e) {
            return this.w(t, i, e, "PATCH")
        }, sync: function () {
            return this.k = !0, this
        }, timeout: function (t) {
            return this.I = t, this
        }, response: function (t) {
            return this.$ = t, this
        }, headers: function (t) {
            return this.S = P.extend(this.S || {}, t), this
        }, bind: function (t) {
            return this.master = t, this
        }
    }, z.$callback = function (t, i, e, s, n, h) {
        if (!t.$destructed && (h && D("onAjaxError", [n]), i)) {
            var r = i.success || i;
            h && (r = i.error), r && r.call && r.call(t, e, s, n)
        }
    };
    var H = {
        $proxy: !0, load: function () {
            var i = this.source.split("@"), e = i[0].split(".").pop();
            return z().response("arraybuffer").get(i[0]).then(function (t) {
                return {data: t, options: {ext: e, dataurl: i[1]}}
            })
        }
    }, R = {
        $proxy: !0, load: function () {
        }, save: function (t, i, e) {
            k(function () {
                window.console.log("[DP] " + i.id + " -> " + i.operation, i.data);
                var t = {id: i.data.id, newid: i.data.id, status: i.data.operation};
                e.processResult(t, t)
            })
        }
    }, B = {
        $proxy: !0,
        load: function () {
            return z(this.source)
        }, save: function (t, i) {
            return B.F.call(this, i, z())
        }, F: function (t, i) {
            var e = this.source, s = "", n = e.indexOf("?");
            -1 !== n && (s = e.substr(n), e = e.substr(0, n)), e += "/" == e.charAt(e.length - 1) ? "" : "/";
            var h = t.operation, r = t.data;
            return "insert" == h && delete r.id, "update" == h ? i.put(e + r.id + s, r) : "delete" == h ? i.del(e + r.id + s, r) : i.post(e + s, r)
        }
    }, E = {
        $proxy: !0, load: function () {
            return z(this.source)
        }, save: function (t, i) {
            var e = z().headers({"Content-Type": "application/json"});
            return B.F.call(this, i, e)
        }
    }, N = {
        $proxy: !0, load: function (t, i) {
            return i = P.extend(i || {}, this.params || {}, !0), z().post(this.source, i)
        }
    };
    var L = {
        $proxy: !0, save: function (t) {
            return this.load(t)
        }, load: function (t) {
            var i = {query: this.source};
            return 1 === arguments.length && (i.variables = t), z().headers({"Content-type": "application/json"}).post(this.url, i).then(function (t) {
                return function n(t) {
                    if (!t || "object" === !M(t) || Array.isArray(t)) return t;
                    var i = "", e = 0;
                    for (var s in t) {
                        if (2 == ++e) return t;
                        i = s
                    }
                    return t[i]
                }(t.json().data)
            })
        }
    };

    function O(t, i, e) {
        var s = _(O[t]);
        return s.source = i, e && P.extend(s, e, !0), s.init && s.init(), s
    }

    O.$parse = function (t) {
        if ("string" != typeof t || -1 == t.indexOf("->")) return t;
        var i = t.split("->");
        return O(i[0], i[1])
    }, O.binary = H, O.debug = R, O.json = E, O.post = N, O.rest = B, O.GraphQL = L;
    var U = {
        toObject: function (t) {
            return "string" == typeof t ? JSON.parse(t) : t
        }, getRecords: function (t) {
            return t && t.data && (t = t.data), t
        }, getDetails: function (t) {
            for (var i = {}, e = 0; e < t.length; e++) i["data" + e] = t[e];
            return null !== this.idColumn && (i.id = t[this.idColumn]), i
        }, getOptions: function () {
            return !1
        }, getInfo: function () {
            return {size: 0}
        }, idColumn: null
    }, W = {
        toObject: function (t) {
            if ("string" != typeof t) return t;
            var i = null;
            return -1 == t.indexOf("<") && (i = C(t)), i || ((i = document.createElement("DIV")).innerHTML = t), i.firstChild
        }, getRecords: function (t) {
            return t.getElementsByTagName(this.tag)
        }, getDetails: function (t) {
            return F.tagToObject(t)
        }, getOptions: function () {
            return !1
        }, getInfo: function () {
            return {size: 0}
        }, tag: "LI"
    }, Y = {cdn: "//cdn.webix.com/", codebase: "", zIndexBase: 100, scrollSize: 17};
    Y.strict = !!window.webix_strict, Y.https = "https:" === document.location.protocol;
    var q = navigator.userAgent;
    if (Y.isMac = -1 != q.indexOf("Mac"), -1 == q.indexOf("Mobile") && -1 == q.indexOf("Windows Phone") || (Y.mobile = !0), (Y.mobile || -1 != q.indexOf("iPad") || -1 != q.indexOf("Android")) && (Y.touch = !0), !Y.touch && "MacIntel" === navigator.platform && 1 < navigator.maxTouchPoints && (Y.touch = !0), -1 != q.indexOf("Opera")) Y.isOpera = !0; else {
        if (Y.isIE = !!document.all || -1 !== q.indexOf("Trident"), Y.isIE) 8 == parseFloat(navigator.appVersion.split("MSIE")[1]) && (Y.isIE8 = !0);
        Y.isEdge = -1 != q.indexOf("Edge"), Y.isFF = -1 != q.indexOf("Firefox"), Y.isWebKit = -1 != q.indexOf("KHTML"), Y.isSafari = Y.isWebKit && Y.isMac && -1 == q.indexOf("Chrome"), (Y.isIE || Y.isEdge || Y.isFF) && (Y.maxHTMLElementSize = 1e7), Y.isSafari && (Y.maxHTMLElementSize = 1e8)
    }
    -1 != q.toLowerCase().indexOf("android") && (Y.isAndroid = !0, -1 != q.toLowerCase().indexOf("trident") && (Y.isAndroid = !1, Y.isIEMobile = !0)), Y.transform = !1, Y.transition = !1;
    for (var G = -1, X = ["", "webkit", "Moz", "O", "ms"], J = document.createElement("DIV"), K = 0; K < X.length; K++) {
        var Z = X[K] ? X[K] + "Transform" : "transform";
        if ("undefined" != typeof J.style[Z]) {
            G = K;
            break
        }
    }
    if (-1 < G) {
        Y.cssPrefix = ["", "-webkit-", "-Moz-", "-o-", "-ms-"][G];
        var Q = Y.jsPrefix = X[G];
        Y.transform = Q ? Q + "Transform" : "transform", Y.transition = Q ? Q + "Transition" : "transition", Y.transitionDuration = Q ? Q + "TransitionDuration" : "transitionDuration", J.style[Y.transform] = "translate3d(0,0,0)", Y.translate = J.style[Y.transform] ? "translate3d" : "translate", Y.transitionEnd = "-Moz-" == Y.cssPrefix ? "transitionend" : Q ? Q + "TransitionEnd" : "transitionend"
    }
    Y.pointerevents = !Y.isIE || null !== new RegExp("Trident/.*rv:11").exec(q), Y.passiveEventListeners = !1;
    try {
        var tt = Object.defineProperty({}, "passive", {
            get: function () {
                Y.passiveEventListeners = !0
            }
        });
        window.addEventListener("testPassive", null, tt), window.removeEventListener("testPassive", null, tt)
    } catch (Do) {
    }
    Y.svg = document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"), Y.svganimation = document.implementation.hasFeature("https://www.w3.org/TR/SVG11/feature#SVG-animation", "1.1");
    var it = 0, et = {}, st = {};

    function nt() {
        it || (it = document.onselectstart), document.onselectstart = gt
    }

    function ht() {
        0 !== it && (document.onselectstart = it || null), it = 0
    }

    function rt(t) {
        for (var i = 0; t = t.previousSibling;) i++;
        return i
    }

    function ot(t, i) {
        var e = "";
        for (var s in i = i || "", t) e += s + ":" + t[s] + ";";
        var n = st[e + i];
        return n || (at("." + (n = "s" + V()) + (i || "") + "{" + e + "}"), st[e + i] = n), n
    }

    function at(t, i) {
        var e = i ? et[i] : et["default"];
        e || ((e = document.createElement("style")).setAttribute("type", "text/css"), e.setAttribute("media", "screen,print"), document.getElementsByTagName("head")[0].appendChild(e), i ? et[i] = e : et["default"] = e), e.styleSheet ? e.styleSheet.cssText += t : e.appendChild(document.createTextNode(t))
    }

    function ut(t) {
        var i = et[t || "default"];
        i && (i.innerHTML = "")
    }

    function ct(t, i, e) {
        i = i || {};
        var s = document.createElement(t);
        for (var n in i) s.setAttribute(n, i[n]);
        return i.style && (s.style.cssText = i.style), i["class"] && (s.className = i["class"]), e && (s.innerHTML = e), s
    }

    function ft(t) {
        return (t = C(t)) ? j(t.value) ? t.innerHTML : t.value : ""
    }

    function lt(t) {
        if (t instanceof Array) for (var i = 0; i < t.length; i++) lt(t[i]); else t && t.parentNode && t.parentNode.removeChild(t)
    }

    function dt(t, i, e) {
        t && (i && i.parentNode ? i.parentNode.insertBefore(t, i) : e.appendChild(t))
    }

    function vt(t, i) {
        var e;
        for (e = t.tagName ? t : (t = t || event).target || t.srcElement; e;) {
            if (e.getAttribute) {
                var s = e.getAttribute(i);
                if (s) return s
            }
            e = e.parentNode
        }
        return null
    }

    function _t(t) {
        if (t.getBoundingClientRect) {
            var i = t.getBoundingClientRect(), e = document.body, s = document.documentElement,
                n = window.pageYOffset || s.scrollTop || e.scrollTop,
                h = window.pageXOffset || s.scrollLeft || e.scrollLeft, r = s.clientTop || e.clientTop || 0,
                o = s.clientLeft || e.clientLeft || 0, a = i.top + n - r, u = i.left + h - o;
            return {y: Math.round(a), x: Math.round(u), width: t.offsetWidth, height: t.offsetHeight}
        }
        for (var c = 0, f = 0; t;) c += parseInt(t.offsetTop, 10), f += parseInt(t.offsetLeft, 10), t = t.offsetParent;
        return {y: c, x: f, width: t.offsetHeight, height: t.offsetWidth}
    }

    function pt(t) {
        return j((t = t || event).offsetX) ? {x: t.layerX, y: t.layerY} : {x: t.offsetX, y: t.offsetY}
    }

    function mt(t) {
        if ((t = t || event).touches && t.touches[0] && (t = t.touches[0]), t.pageX || t.pageY) return {
            x: t.pageX,
            y: t.pageY
        };
        var i = Y.isIE && "BackCompat" != document.compatMode ? document.documentElement : document.body;
        return {x: t.clientX + i.scrollLeft - i.clientLeft, y: t.clientY + i.scrollTop - i.clientTop}
    }

    function bt(t) {
        return t && t.preventDefault && t.preventDefault(), t && (t.returnValue = !1), gt(t)
    }

    function gt(t) {
        return (t = t || event).stopPropagation && t.stopPropagation(), !(t.cancelBubble = !0)
    }

    function wt(t, i, e) {
        if (document.createEventObject) {
            var s = document.createEventObject();
            t.fireEvent && t.fireEvent("on" + e, s)
        } else {
            var n = document.createEvent(i);
            n.initEvent(e, !0, !0), t.dispatchEvent && t.dispatchEvent(n)
        }
    }

    function xt(t, i, e) {
        e && -1 !== t.className.indexOf(i) || (t.className += " " + i)
    }

    function yt(t, i) {
        t.className = t.className.replace(RegExp(" " + i, "g"), "")
    }

    function Mt(t, i, e) {
        var s = ct("DIV", {"class": "webix_view webix_measure_size " + (i || "")}, "");
        s.style.cssText = "height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;" + (e ? "width:" + e + "px;" : "width:auto;white-space:nowrap;"), document.body.appendChild(s);
        for (var n = "object" !== M(t) ? [t] : t, h = 0, r = 0, o = 0; o < n.length; o++) s.innerHTML = n[o], h = Math.max(h, s.offsetWidth + 1), r = Math.max(r, s.offsetHeight + 1);
        return lt(s), {width: h, height: r}
    }

    function St(t, i) {
        var e = !1;
        if ("object" == M(t)) {
            if (window.navigator.msSaveBlob) return window.navigator.msSaveBlob(t, i);
            t = window.URL.createObjectURL(t), e = !0
        }
        var s = document.createElement("a");
        s.href = t, s.download = i, document.body.appendChild(s), s.click(), k(function () {
            e && window.URL.revokeObjectURL(t), document.body.removeChild(s), s.remove()
        })
    }

    function kt(t) {
        if (!t) return "";
        var i = t.className || "";
        return i.baseVal && (i = i.baseVal), i.indexOf || (i = ""), i
    }

    function Ct(t, i, e) {
        if (i = i || 0, e = e || i, t.focus(), t.setSelectionRange) t.setSelectionRange(i, e); else {
            var s = t.createTextRange();
            s.collapse(!0), s.moveEnd("character", e), s.moveStart("character", i), s.select()
        }
    }

    function $t(t) {
        if ("selectionStart" in t) return {start: t.selectionStart || 0, end: t.selectionEnd || 0};
        t.focus();
        var i = document.selection.createRange().getBookmark(), e = t.createTextRange();
        e.moveToBookmark(i);
        var s = e.text.length
        ;e.collapse(!0), e.moveStart("character", -t.value.length);
        var n = e.text.length;
        return {start: n, end: n + s}
    }

    function Dt(t, i) {
        document.getElementsByTagName("head").item(0).appendChild(ct("meta", {name: t, content: i}))
    }

    var It = {
        toObject: function (t) {
            (t = C(t)).tagName.toLowerCase();
            var i = t.rows;
            return lt(t), i
        }, getRecords: function (t) {
            for (var i = [], e = t[0] && t[0].T ? 1 : 0; e < t.length; e++) i.push(t[e]);
            return i
        }, getDetails: function (t) {
            var i = t.getElementsByTagName("td");
            t = {};
            for (var e = 0; e < i.length; e++) t["data" + e] = i[e].innerHTML;
            return t
        }, getInfo: function () {
            return {size: 0}
        }, getOptions: function () {
        }, getConfig: function (t) {
            var i = [], e = t[0].getElementsByTagName("th");
            e.length && (t[0].T = !0);
            for (var s = 0; s < e.length; s++) {
                var n = {id: "data" + s, header: this.V(e[s].innerHTML)}, h = this.H(e[s]);
                n = P.extend(n, h), i.push(n)
            }
            return i
        }, V: function (t) {
            var i = t.indexOf("json://");
            return -1 != i && (t = JSON.parse(t.substr(i + 7))), t
        }, H: function (t) {
            for (var i = t.attributes, e = {}, s = 0; s < i.length; s++) e[i[s].nodeName] = this.V(i[s].nodeValue);
            return e.width = parseInt(e.width, 10), e
        }
    }, At = {};

    function Ft(e, t, i) {
        var s = m.defer();
        if (t && !0 !== t && (s = s.then(function () {
            t.call(i || this)
        })), Ft.disabled) return s.resolve(), s;
        if ("string" != typeof e) {
            var n = e.length || 0;
            if (n) {
                var h = function () {
                    n ? (n--, Ft(e[e.length - n - 1]).then(h, function () {
                        return s.reject()
                    })) : s.resolve()
                };
                h()
            } else {
                for (var r in e) n++;
                var o = function () {
                    0 === --n && s.resolve()
                };
                for (var a in e) Ft(a).then(o, function () {
                    return s.reject()
                })
            }
            return s
        }
        if (!0 !== At[e]) {
            var u = e;
            if (!0 === t) return p(z().sync().get(u).responseText), At[e] = !0, s.resolve();
            if (At[e]) return At[e].push(s), s;
            At[e] = [s];
            var c = function () {
                var t = At[e];
                At[e] = !1;
                for (var i = 0; i < t.length; i++) t[i].reject()
            }, f = function () {
                var t = At[e];
                At[e] = !0;
                for (var i = 0; i < t.length; i++) t[i].resolve()
            }, l = e.split("?");
            if (".css" == l[0].substr(l[0].length - 4)) {
                var d = ct("LINK", {type: "text/css", rel: "stylesheet", href: u});
                d.onload = f, d.onerror = c, document.getElementsByTagName("head")[0].appendChild(d)
            } else {
                var v = document.createElement("script");
                v.onload = f, v.onerror = c, document.getElementsByTagName("head")[0].appendChild(v), v.src = u
            }
        } else s.resolve();
        return s
    }

    var Tt = P.extend({
            toObject: function (t) {
                if (t.excel) return t;
                var i = t.options || {};
                i.dataurl && P.extend(i, this.R(i.dataurl)), t = t.data || t;
                var e = m.defer();
                if (t.name) {
                    i.ext = t.name.split(".").pop();
                    var s = new FileReader;
                    s.onload = S(function (t) {
                        e.resolve(this.parseData(t.target.result, i))
                    }, this), s.readAsArrayBuffer(t)
                } else e.resolve(this.parseData(t, i));
                return e
            }, parseData: function (t, e) {
                t = new Uint8Array(t);
                for (var s = [], i = 0; i != t.length; ++i) s[i] = String.fromCharCode(t[i]);
                var n = (e.ext || e).toLowerCase();
                return "xls" != n && (n = "xlsx"), Ft(Y.cdn + "/extras/xlsx.core.styles.min.js").then(S(function () {
                    var t = "xls" == n ? XLS.read(s.join(""), {
                        type: "binary",
                        cellStyles: !0,
                        cellDates: !0
                    }) : XLSX.read(s.join(""), {type: "binary", cellStyles: !0, cellDates: !0}), i = {
                        sheets: t.Sheets,
                        names: t.SheetNames,
                        options: e,
                        ranges: t.Workbook && t.Workbook.Names || []
                    };
                    return P.extend(this.getSheet(i, e), i)
                }, this))
            }, getSheet: function (t, i) {
                var e = i.name || t.names[0];
                return t = this.sheetToArray(t.sheets[e], i), i.rows && i.rows.length && (t.data = t.data.splice(i.rows[0], Math.min(i.rows[1], t.data.length) - i.rows[0])), t
            }, sheetToArray: function (t, i) {
                var e = [], s = [], n = [], h = [];
                if (t && t["!ref"]) {
                    var r, o, a, u = XLS.utils.decode_range(t["!ref"]), c = u.s.c, f = u.s.r + (i.rows ? i.rows[0] : 0);
                    for (r = u.s.r; r <= u.e.r; r++) {
                        var l = [];
                        for (o = u.s.c; o <= u.e.c; o++) if (a = t[XLS.utils.encode_cell({r: r, c: o})]) {
                            var d = "";
                            d = i.math && a.f ? "=" == a.f.charAt(0) ? a.f : "=" + a.f : "d" == a.t && y(a.v) ? $.dateFormatStr(a.v) : a.v, l.push(d), a.s && n.push([r - f, o - c, a.s])
                        } else l.push("");
                        e.push(l)
                    }
                    if (t["!merges"]) for (var v = t["!merges"], _ = 0; _ < v.length; _++) {
                        var p = v[_].s, m = v[_].e;
                        (!i.rows || 0 <= p.r - f && m.r - f <= i.rows[1]) && s.push([p.r - f, p.c - c, m.c - p.c + 1, m.r - p.r + 1])
                    }
                    if (t["!cols"]) for (var b = t["!cols"], g = 0; g < b.length; g++) b[g] && h.push(["column", g - c, Math.round(b[g].wch / (8.43 / 70))]);
                    if (t["!rows"]) for (var w = t["!rows"], x = 0; x < w.length; x++) w[x] && h.push(["row", x - f, w[x].hpx])
                }
                return {data: e, spans: s, styles: n, sizes: h, excel: !0}
            }, R: function (t) {
                var i = t.split("["), e = {};
                if (e.name = i[0], i[1]) {
                    var s = i[1].split(/[^0-9]+/g);
                    s[0] = 1 * s[0] || 0, s[1] = 1 * s[1] || 9999999, e.rows = s
                }
                return e
            }
        }, U
        ), Vt = {
            json: T, jsarray: U, xml: F, csv: {
                toObject: function (t) {
                    return t
                }, getRecords: function (t) {
                    return t.split(this.row)
                }, getDetails: function (t) {
                    t = this.stringToArray(t);
                    for (var i = {}, e = 0; e < t.length; e++) i["data" + e] = t[e];
                    return null !== this.idColumn && (i.id = t[this.idColumn]), i
                }, getOptions: function () {
                    return !1
                }, getInfo: function () {
                    return {size: 0}
                }, stringToArray: function (t) {
                    t = t.split(this.cell);
                    for (var i = 0; i < t.length; i++) t[i] = t[i].replace(/^[ \t\n\r]*("|)/g, "").replace(/("|)[ \t\n\r]*$/g, "");
                    return t
                }, idColumn: null, row: "\n", cell: ","
            }, html: W, htmltable: It, excel: Tt
        }, zt = {}, Ht = {
            $init: function (t) {
                this.data = {}, this.waitData = m.defer(), t && (this.B.datatype = t.datatype || "json"), this.$ready.push(this.P)
            }, P: function () {
                this.j = !0, this.B.url && this.url_setter(this.B.url), this.B.data && this.data_setter(this.B.data)
            }, url_setter: function (t) {
                return t = O.$parse(t), this.j && this.load(t, this.B.datatype), t
            }, data_setter: function (t) {
                return this.j ? (this.parse(t, this.B.datatype), !0) : t
            }, load: function (t, i) {
                var e, s = this, n = arguments[2] || null;
                "string" == typeof i && (e = i, i = arguments[2]);
                var h = this.N(t, e, n);
                if (h && h.then) return h.then(function (t) {
                    return s.O(t), i && z.$callback(s, i, "", t, -1), t
                }, function (t) {
                    return s.U(t)
                })
            }, N: function (t, i, e) {
                var s, n = this;
                if (!i && this.data.driver || (this.data.driver = Vt[i || "json"]), !this.callEvent("onBeforeLoad", [])) return m.reject();
                (s = (t = O.$parse(t)).$proxy && t.load ? t.load(this, e) : "function" == typeof t ? t.call(this, e) : z().bind(this).get(t)) && !s.then && (s = m.resolve(s));
                var h = this.W;
                return s && s.then ? s.then(function (t) {
                    return n.$destructed || h && n.W !== h ? m.reject(zt) : t
                }) : s
            }, parse: function (t, i) {
                if (t && "function" == typeof t.then) {
                    var e = this.W;
                    return t.then(S(function (t) {
                        if (this.$destructed || e && this.W !== e) return m.reject();
                        this.parse(t, i)
                    }, this))
                }
                if (t && t.sync && this.sync) this.Y(t); else {
                    if (!this.callEvent("onBeforeLoad", [])) return m.reject();
                    !i && this.data.driver || (this.data.driver = Vt[i || "json"]), this.O(t)
                }
                return m.resolve()
            }, Y: function (t) {
                this.data && this.data.attachEvent && this.data.attachEvent("onSyncApply", S(function () {
                    this.q && this.q()
                }, this)), this.sync(t)
            }, G: function (t) {
                var i, e, s = this.data.driver;
                i = (e = s.getRecords(t)[0]) ? s.getDetails(e) : {}, this.setValues ? this.setValues(i) : this.data = i
            }, X: function (t) {
                t ? this.$onLoad && this.$onLoad(t, this.data.driver) || (this.data && this.data.G ? this.data.G(t) : this.G(t)) : this.U(t), this.q && this.q(), this.callEvent("onAfterLoad", []), this.waitData.resolve()
            }, O: function (t) {
                var i = this;
                t && "function" == typeof t.text && !t.name && (t = t.text()), (t = this.data.driver.toObject(t)) && t.then ? t.then(function (t) {
                    return i.X(t)
                }) : this.X(t)
            }, U: function (t) {
                return t !== zt && (this.$destructed || (this.callEvent("onAfterLoad", []), this.callEvent("onLoadError", arguments)), D("onLoadError", [t, this])), m.reject(t)
            }, J: function (t) {
                if (!this.B.dataFeed || this.K || !t) return !0;
                var i = this.B.dataFeed;
                return "function" == typeof i ? i.call(this, t.id || t, t) : (i = i + (-1 == i.indexOf("?") ? "?" : "&") + "action=get&id=" + encodeURIComponent(t.id || t), this.callEvent("onBeforeLoad", []) && z(i, function (t, i, e) {
                    this.K = !0;
                    var s = Vt.json, n = s.toObject(t, i);
                    n ? this.setValues(s.getDetails(s.getRecords(n)[0])) : this.U(e), this.K = !1, this.callEvent("onAfterLoad", [])
                }, this), !1)
            }
        }, Rt = {
            collapseNames: function (t, i, e, s) {
                if (e = e || {}, i = i || "", s = s || function () {
                    return !0
                }, !t || "object" != M(t)) return null;
                for (var n in t) {
                    var h = t[n], r = i + n;
                    h && "object" == M(h) && !y(h) && !b(h) && s(r) ? Rt.collapseNames(h, r + ".", e, s) : e[r] = h
                }
                return e
            }, expandNames: function (t) {
                var i, e, s, n, h, r = {};
                for (h in t) {
                    for (e = (s = h.split(".")).length - 1, n = r, i = 0; i < e; i++) n[s[i]] || (n[s[i]] = {}), n = n[s[i]];
                    n[s[e]] = t[h]
                }
                return r
            }
        }, Bt = {}, Pt = {}, jt = new RegExp("(\\r\\n|\\n)", "g"), Et = new RegExp('(\\")', "g"),
        Nt = new RegExp("(\\\\)", "g"),
        Lt = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;"}, Ot = /[&<>"'`]/g,
        Ut = function (t) {
            return Lt[t] || "&amp;"
        };

    function Wt(e) {
        if ("function" == typeof e) return e;
        if (Bt[e]) return Bt[e];
        if (-1 != (e = (e || "").toString()).indexOf("->")) {
            var t = e.split("->");
            switch (t[0]) {
                case"html":
                    e = ft(t[1]);
                    break;
                case"http":
                    e = (new z).sync().get(t[1], {uid: V()}).responseText
            }
        }
        if (e = (e || "").toString(), Y.strict) {
            if (!Pt[e]) {
                Pt[e] = [];
                var h = [];
                if (e.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,
                    function (t, i, e, s, n) {
                        h.push({
                            pos: n, str: t, fn: function (t) {
                                return t[i] ? e : s
                            }
                        })
                    }), e.replace(/\{common\.([^}(]*)\}/g, function (t, e, i) {
                    h.push({
                        pos: i, str: t, fn: function (t, i) {
                            return i[e] || ""
                        }
                    })
                }), e.replace(/\{common\.([^}(]*)\(\)\}/g, function (t, e, i) {
                    h.push({
                        pos: i, str: t, fn: function (t, i) {
                            return i[e] ? i[e].apply(this, arguments) : ""
                        }
                    })
                }), e.replace(/\{obj\.([^:}]*)\}/g, function (t, i, e) {
                    h.push({
                        pos: e, str: t, fn: function (t) {
                            return t[i]
                        }
                    })
                }), e.replace("{obj}", function (t, i) {
                    h.push({
                        pos: i, str: t, fn: function (t) {
                            return t
                        }
                    })
                }), e.replace(/#([^#'";, ]+)#/gi, function (t, i, e) {
                    "!" == i.charAt(0) ? (i = i.substr(1), h.push({
                        pos: e, str: t, fn: function (t) {
                            return -1 != i.indexOf(".") && (t = Rt.collapseNames(t)), Wt.escape(t[i])
                        }
                    })) : h.push({
                        pos: e, str: t, fn: function (t) {
                            return -1 != i.indexOf(".") && (t = Rt.collapseNames(t)), t[i]
                        }
                    })
                }), h.sort(function (t, i) {
                    return t.pos > i.pos ? 1 : -1
                }), h.length) {
                    for (var i = 0, s = function (t, i, e) {
                        Pt[t].push(function () {
                            return t.slice(i, e)
                        })
                    }, n = 0; n < h.length; n++) {
                        var r = h[n].pos;
                        s(e, i, r), Pt[e].push(h[n].fn), i = r + h[n].str.length
                    }
                    s(e, i, e.length)
                } else Pt[e].push(function () {
                    return e
                })
            }
            return function () {
                for (var t = "", i = 0; i < Pt[e].length; i++) t += Pt[e][i].apply(this, arguments);
                return t
            }
        }
        var o = !1;
        e = (e = (e = (e = (e = (e = (e = (e = (e = e.replace(Nt, "\\\\")).replace(jt, "\\n")).replace(Et, '\\"')).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g, '"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}(]*)\}/g, "\"+(common.$1||'')+\"")).replace(/\{common\.([^}(]*)\(\)\}/g, '"+(common.$1?common.$1.apply(this, arguments):"")+"')).replace(/\{obj\.([^}]*)\}/g, '"+(obj.$1)+"')).replace("{obj}", '"+obj+"')).replace(/#([^#'";, ]+)#/gi, function (t, i) {
            return "!" == i.charAt(0) ? (o = !0, '"+template.escape(obj.' + i.substr(1) + ')+"') : '"+(obj.' + i + ')+"'
        });
        try {
            if (o) {
                var a = Function("obj", "common", "marks", "value", "template", 'return "' + e + '";');
                Bt[e] = function (t, i, e, s) {
                    return a(t, i, e, s, Wt)
                }
            } else Bt[e] = Function("obj", "common", 'return "' + e + '";')
        } catch (Do) {
        }
        return Bt[e]
    }

    Wt.escape = function (t) {
        return t === undefined || null === t ? "" : (t.toString() || "").replace(Ot, Ut)
    }, Wt.empty = function () {
        return ""
    };
    var Yt = {
        Z: function (t) {
            return t.$empty ? "" : this.B.template(t, this)
        }, render: function () {
            var t = this.B;
            return !!this.isVisible(t.id) && (this.callEvent && !this.callEvent("onBeforeRender", [this.data]) || (this.data && !t.content && (this.Q.innerHTML = "", this.Q.innerHTML = this.Z(this.data)), this.callEvent && this.callEvent("onAfterRender", [])), !0)
        }, sync: function (i) {
            this.tt = !1, "DataStore" != i.name && (i.data && "DataStore" == i.name ? i = i.data : this.tt = !0), this.tt ? i.bind("change", S(function (t) {
                t.id == this.data.id && (this.data = t.attributes, this.refresh())
            }, this)) : i.attachEvent("onStoreUpdated", S(function (t) {
                t && t != this.data.id || (this.data = i.pull[t], this.refresh())
            }, this))
        }, template_setter: Wt
    }, qt = {
        it: function (t) {
            var i, e, s = this.B.dragscroll;
            "string" != typeof s && (s = this.B.layout || "xy"), e = -1 !== s.indexOf("x"), i = -1 !== s.indexOf("y");
            var n = _t(this.et || this.$view),
                h = Math.max((this.B.rowHeight || (this.type && !isNaN(parseFloat(this.type.height)) ? this.type.height : 0)) + 5, 40),
                r = !1;
            i && this.st(t, n, h) && (r = !0), e && this.nt(t, n, h) && (r = !0), r && (this.ht = k(this.it, this, [t], 100))
        }, rt: function (t) {
            var i = this.B.dragscroll;
            if ("string" != typeof i || -1 !== i.indexOf("x")) {
                var e = _t(this.S || this.$view), s = Math.max(this.B.headerRowHeight || 0, 40);
                this.nt(t, e, s) && (this.ht = k(this.rt, this, [t], 100))
            }
        }, st: function (t, i, e) {
            var s = i.y, n = s + i.height, h = this.getScrollState(), r = this.B;
            if (r.topSplit) {
                var o = this.ot(this.getIdByIndex(r.topSplit - 1), this.columnId(0));
                s += o.top + o.height
            }
            return t.y < s + e ? (this.at(h.x, h.y - 2 * e, t), !0) : t.y > n - e && (this.at(h.x, h.y + 2 * e, t), !0)
        }, nt: function (t, i, e) {
            var s = i.x, n = s + i.width, h = this.getScrollState();
            return t.x < s + e ? (this.at(h.x - 2 * e, h.y, t), !0) : t.x > n - e && (this.at(h.x + 2 * e, h.y, t), !0)
        }, at: function (t, i, e) {
            this.callEvent("onBeforeAutoScroll", [e]) && this.scrollTo(t, i)
        }
    }, Gt = {};

    function Xt() {
        for (var t in Gt) Zt(t)
    }

    function Jt(t, i, e, s) {
        (s = s || {}).inner = !0, Kt(t, i, e, s)
    }

    function Kt(t, i, e, s) {
        s = s || {}, t = C(t);
        var n = s.id || V();
        s.bind && (e = S(e, s.bind));
        var h = [t, i, e, s.capture];
        s.inner || (Gt[n] = h);
        var r = !!s.capture;
        return !j(s.passive) && Y.passiveEventListeners && (r = {
            passive: s.passive,
            capture: r
        }), t.addEventListener ? t.addEventListener(i, e, r
        ) : t.attachEvent && t.attachEvent("on" + i, h[2] = function () {
            return e.apply(t, arguments)
        }), n
    }

    function Zt(t) {
        if (t) {
            Gt[t];
            var i = Gt[t];
            i[0].removeEventListener ? i[0].removeEventListener(i[1], i[2], !!i[3]) : i[0].detachEvent && i[0].detachEvent("on" + i[1], i[2]), delete Gt[t]
        }
    }

    function Qt(t, i) {
        if (t.$protoWait) return t.ut || (t.ut = []), void t.ut.push(i);
        "function" == typeof t && (t = t.prototype), t.types || (t.types = {"default": t.type}, t.type.name = "default");
        var e = i.name, s = t.type;
        for (var n in e && (s = t.types[e] = l(i.baseType ? t.types[i.baseType] : t.type)), i) 0 === n.indexOf("template") ? s[n] = Wt(i[n]) : s[n] = i[n];
        return e
    }

    var ti = {
        codebase: "./",
        cdn: "//cdn.webix.com",
        top_views: [],
        ct: null,
        ft: null,
        lt: null,
        dt: null,
        vt: null,
        _t: null,
        pt: null,
        mt: null,
        bt: 0,
        gt: null,
        wt: null,
        xt: [],
        destructors: [],
        yt: null,
        Mt: 0,
        St: g(),
        kt: null
    }, ii = {};

    function ei(t, i, e) {
        var s;
        ti.bt++;
        var n = ti.ct;
        ti.ct = t.$scope || n;
        try {
            s = function l(t, i, e) {
                var s, n = b(t), h = C(t.container || i || document.body);
                h.B && (e = function f(t, i, e) {
                    var s = [t];
                    if (i) s = t.getChildViews(); else if (t.Ct) s = [t.Ct]; else {
                        if ("number" == typeof e) return e;
                        if (e) return ni(s = [ri(e)]), s[0].config.id
                    }
                    return ni(s), e
                }(h, n, e));
                var r = !1, o = h == document.body;
                t.B || h && n ? (s = t, r = !0) : (h && o && (t.$topView = !0), t.$t || (t.$t = {}), i && i.getParentView && (ti.pt = e || 0 === e ? i : i.getParentView()), s = hi(t));
                !o || s.setPosition || s.$apiOnly || d("_fixHeight")();
                if (s.B && s.B.Dt && !h.$view) s.B.It = h; else if (!s.$apiOnly) if (h.appendChild) si(h, s, t); else if (h.destructor) {
                    var a = h;
                    if (e || 0 === e || b(s) || (h = (e = h).getParentView()), h && h.At) {
                        if (r && s.getParentView) {
                            var u = s.getParentView();
                            u && u.Ft && u.Ft(s), s.pt = h, s.$scope = h.$scope
                        }
                        h.At(s, e)
                    } else {
                        var c = a.$view.parentNode;
                        a.destructor(), si(c, s, t)
                    }
                } else t.container;
                return s
            }(t, i, e)
        } finally {
            ti.bt--, ti.ct = n
        }
        return s
    }

    function si(t, i, e) {
        t.appendChild(i.Tt), i.getParentView() || (((!i.setPosition || i.B.fullscreen) && t == document.body || i.B.position) && ti.top_views.push(i.Vt), e.skipResize || i.adjust())
    }

    function ni(t) {
        for (var i = t.length - 1; 0 <= i; i--) {
            var e = t[i];
            delete ii[e.config.id], e.config.id = "x" + V(), (ii[e.config.id] = e).getChildViews && ni(e.getChildViews()), e.zt && ni(e.zt)
        }
    }

    function hi(t) {
        if (t.view) {
            var i = t.view;
            return new ei[i](t)
        }
        if (t.rows || t.cols) {
            for (var e = t.rows || t.cols, s = !1, n = 0; n < e.length; n++) !e[n].body || e[n].view || e[n].align || (s = !0);
            return s ? new ei.headerlayout(t) : new ei.layout(t)
        }
        return t.cells ? new ei.multiview(t) : t.template || t.content ? new ei.template(t) : t.align && t.body ? new ei.align(t) : new ei.spacer(t)
    }

    function ri(t) {
        if (!t) return null;
        if (ii[t]) return ii[t];
        var i = t;
        if ("object" == M(t)) {
            if (t.B) return t;
            i = t.target || t.srcElement || t
        }
        return ii[vt({target: C(i)}, "view_id")]
    }

    ei.views = ii, ei.Ht = hi, "undefined" == typeof window.$$ && (window.$$ = ri), P.protoUI = function () {
        var h = arguments[0].name, r = function (t) {
            if (!r) return ei[h].prototype;
            var i = r.$protoWait;
            if (i) {
                for (var e = [i[0]], s = 1; s < i.length; s++) e[s] = i[s], e[s].$protoWait && (e[s] = e[s].call(-1, e[s].name)), e[s].prototype && e[s].prototype.name && (ei[e[s].prototype.name] = e[s]);
                if (ei[h] = P.proto.apply(-1, e), r.ut) for (var n = 0; n < r.ut.length; n++) Qt(ei[h], r.ut[n]);
                r = i = null
            }
            return -1 != this ? new ei[h](t) : ei[h]
        };
        return r.$protoWait = Array.prototype.slice.call(arguments, 0), ei[h] = r
    }, P.proto = function () {
        for (var t = arguments, i = t[0], e = !!i.$init, s = [], n = t.length - 1; 0 < n; n--) {
            if (t[n], "function" == typeof t[n] && (t[n] = t[n].prototype), t[n].$init && s.push(t[n].$init), t[n].defaults) {
                var h = t[n].defaults;
                for (var r in i.defaults || (i.defaults = {}), h) j(i.defaults[r]) && (i.defaults[r] = h[r])
            }
            if (t[n].type && i.type) for (var o in t[n].type) i.type[o] || (i.type[o] = t[n].type[o]);
            for (var a in t[n]) i[a] || !1 === i[a] || (i[a] = t[n][a])
        }
        e && s.push(i.$init), i.$init = function () {
            for (var t = 0; t < s.length; t++) s[t].apply(this, arguments)
        }, i.$skin && i.$skin();
        var u = function (t) {
            this.$ready = [], this.$init, this.$init(t), this.Rt && this.Rt(t, this.defaults);
            for (var i = 0; i < this.$ready.length; i++) this.$ready[i].call(this)
        };
        return u.prototype = i, i = t = null, u
    }, I("onClick", function (t) {
        var i = ri(t);
        if (i && i.touchable) {
            d("UIManager").applyChanges(i), i.getNode(t);
            var e = t.target || t.srcElement;
            if (i.config.disabled) return;
            var s = "";
            if (e.className && 0 === e.className.toString().indexOf("webix_view")) return;
            for (i && d("UIManager").Bt(i); e && e.parentNode;) {
                if (
                    e.getAttribute) {
                    if (e.getAttribute("view_id")) break;
                    if (s = e.className) {
                        s = s.toString().split(" ");
                        for (var n = 0; n < s.length; n++) {
                            if (i.on_click[s[n]]) if (!1 === i.on_click[s[n]].call(i, t, i.B.id, e)) return
                        }
                    }
                }
                e = e.parentNode
            }
            if (i.B.click) {
                var h = v(i.B.click, i.$scope);
                h && h.call && h.call(i, i.B.id, t)
            }
            var r = i.B.popup;
            i.B.popup && !i.B.readonly && ("object" != M(r) || r.name || (r = i.B.popup = ei(r).B.id), (r = ri(r)).isVisible() || (r.B.master = i.B.id, r.show(i.getInputNode() || i.getNode(), null, !0))), i.callEvent("onItemClick", [i.B.id, t])
        }
    });
    var oi = {
        Pt: g(["dummy"]), jt: 0, delay: 400, addTooltip: function (t, i) {
            var e, s, n = this;
            (t = C(t)) instanceof Element ? (e = t, "string" == typeof i ? e.setAttribute("webix_tooltip", i) : s = i) : (e = t.$view, s = t), s = s || this;
            var h = this.Pt.find(s);
            -1 === h && (h = this.Pt.length, this.Pt.push(s)), e.webix_tooltip = h, this.jt++, this.Et || (this.Et = new ei.tooltip({}), this.Nt = Kt(document, "mousemove", this.Lt, {bind: this}), this.Ot = Kt(document, "mouseleave", this.Ut, {bind: this}), this.Wt = I("onDragMode", function () {
                n.Ut()
            }), this.Yt = I("onClick", function () {
                n.Ut()
            }))
        }, getTooltip: function () {
            return this.Et
        }, Lt: function (t) {
            for (var i, e = t.target || t.srcElement; e instanceof Element && "HTML" != e.tagName;) {
                if (this.Pt[e.webix_tooltip]) return this.qt && this.qt != e ? (this.$tooltipOut(this.qt, e, t), void (this.qt = null)) : (this.qt || (this.qt = this.$tooltipIn(e, t)), void this.$tooltipMove(e, t, i));
                i = i || e.getAttribute("webix_tooltip"), e = e.parentElement
            }
            this.qt && (this.qt = this.$tooltipOut(this.qt, null, t))
        }, Ut: function () {
            clearTimeout(this.Gt), this.Et.hide()
        }, getMaster: function (t) {
            return this.Pt[t.webix_tooltip]
        }, removeTooltip: function (t) {
            var i, e = (i = (t = C(t)) instanceof Element ? t : t.$view).webix_tooltip;
            e && (this.qt == i && (this.Ut(), this.qt = null), delete i.webix_tooltip, this.jt--, this.Pt[e] = null), !this.jt && this.Et && (this.Nt = Zt(this.Nt), this.Ot = Zt(this.Ot), this.Wt = A(this.Wt), this.Yt = A(this.Yt), this.Et.destructor(), this.Et = this.qt = null, this.Pt = g(["dummy"]))
        }, $tooltipIn: function (t, i) {
            var e = this.Pt[t.webix_tooltip];
            return e.$tooltipIn && e != this ? e.$tooltipIn(t, i) : (this.Et.define({
                dx: 20,
                dy: 0,
                template: t.getAttribute("webix_tooltip") || "",
                css: ""
            }), t)
        }, $tooltipOut: function (t, i, e) {
            var s = this.Pt[t.webix_tooltip];
            return s.$tooltipOut && s != this ? s.$tooltipOut(t, i, e) : (this.Ut(), null)
        }, $tooltipMove: function (t, i, e) {
            var s = this.Pt[t.webix_tooltip];
            if (s.$tooltipMove && s != this) return s.$tooltipMove(t, i, e);
            this.Et.hide(), clearTimeout(this.Gt), this.Gt = k(this.Et.show, this.Et, [e || {}, mt(i)], this.delay)
        }
    };

    function ai(t) {
        return "$" + t + (ui[t] = (ui[t] || 0) + 1)
    }

    var ui = {}, ci = !1;

    function fi(t, i) {
        ci = !0;
        var e = t();
        return e && e.then ? e = e.then(function (t) {
            return (ci = !1) !== i && li(), t
        }) : (ci = !1) !== i && li(), e
    }

    function li() {
        if (d("UIManager").applyChanges(), D("onClick", []), ti.Xt = !0, !ci) for (var t = ti.top_views.length - 1; 0 <= t; t--) ti.top_views[t].obj && ti.top_views[t].obj.resize();
        ti.Xt = !1
    }

    function di(t, i, e, s) {
        if (t) for (var n = s ? [t] : t.getChildViews(), h = 0; h < n.length; h++) !1 !== i.call(e, n[h]) && di(n[h], i, e)
    }

    function vi(t) {
        return j(t) ? Y.zIndexBase++ : (Y.zIndexBase = Math.max(Y.zIndexBase, t + 1), t)
    }

    function _i(t) {
        pi ? t.call() : mi.push(t)
    }

    Kt(window, "resize", function () {
        Y.touch && ti.mt && new Date - ti.mt < 1e3 || li()
    });
    var pi = !1, mi = [], bi = document.getElementsByTagName("SCRIPT");
    bi.length, bi.length && ((bi = (bi[bi.length - 1].getAttribute("src") || "").split("/")).splice(bi.length - 1, 1), Y.codebase = bi.slice(0, bi.length).join("/") + "/");
    var gi = function () {
        Y.isIE && (document.body.className += " webix_ie"), D("onReady", [])
    }, wi = function () {
        pi = !0, window.webix_ready && b(webix_ready) && (mi = webix_ready.concat(mi));
        for (var t = 0; t < mi.length; t++) mi[t].call();
        mi = []
    };
    I("onReady", function (t) {
        t ? wi() : k(wi)
    }), "complete" == document.readyState ? gi() : Kt(window, "load", gi), _i(function () {
        Kt(document.body, "click", function (t) {
            D("onClick", [t || window.event])
        })
    });
    var xi = {
        Ht: null,
        Jt: {},
        mt: 0,
        Kt: 0,
        Zt: 0,
        Qt: {
            esc: "escape",
            up: "arrowup",
            down: "arrowdown",
            left: "arrowleft",
            right: "arrowright",
            pgdown: "pagedown",
            pgup: "pageup",
            space: " ",
            multiply: "*",
            add: "+",
            subtract: "-",
            decimal: ".",
            divide: "/",
            pausebreak: "pause",
            "5numlocked": "clear"
        },
        ti: {input: 1, button: 1, textarea: 1, select: 1},
        ii: function () {
            Kt(document, "keydown", this.ei, {bind: this}), Kt(document.body, "click", this.si, {bind: this}
            ), Kt(document.body, "mousedown", function () {
                this.Zt = new Date
            }, {bind: this}), Kt(document.body, "focus", this.ni, {
                capture: !0,
                bind: this
            }), ti.destructors.push({obj: this})
        },
        destructor: function () {
            xi.Ht = null
        },
        getFocus: function () {
            return this.Ht
        },
        Bt: function (t) {
            this.hi = this.hi || t.B.id
        },
        setFocus: function (t, i, e) {
            return (t = ri(t)) && !t.$view && (t = null), this.mt = ti.mt = new Date, this.Ht === t || (this.Ht && this.Ht.callEvent && this.Ht.callEvent("onBlur", [this.Ht]), t && t.callEvent && (t.callEvent("onFocus", [t, this.Ht]), e && t.callEvent("onTabFocus", [t, this.Ht])), D("onFocusChange", [t, this.Ht]), this.Ht && this.Ht.blur && !i && this.Ht.blur(), (this.Ht = t) && t.focus && !i && t.focus()), !0
        },
        applyChanges: function (t) {
            var i = this.getFocus();
            i && i != t && i.ri && i.ri(t)
        },
        hasFocus: function (t) {
            return t === this.Ht
        },
        oi: function (t) {
            var i = vt(t, "view_id") || this.hi;
            return i = ri(i), this.hi = null, ti.mt = new Date, i == this.Ht || (i ? this.canFocus(i) ? this.setFocus(i) : t.target.blur() : this.setFocus(null)), !0
        },
        si: function (t) {
            return new Date - this.mt < 100 ? (this.hi = null, !1) : this.oi(t)
        },
        ni: function (t) {
            return !!this.ti[t.target.nodeName.toLowerCase()] && this.oi(t)
        },
        ai: function (t) {
            return !ti.Mt || ((t.queryView(function (t) {
                return !t.getParentView()
            }, "parent") || t).$view.style.zIndex || 0) >= ti.Mt
        },
        canFocus: function (t) {
            return t.isVisible() && t.isEnabled() && !t.config.disabled && this.ai(t) && !t.queryView({disabled: !0}, "parent")
        },
        ci: function (t) {
            var i = this.getFocus();
            if (t && !this.fi(t, i)) return !1;
            this.li("getPrev", t) || (this.Ht = null)
        },
        fi: function (t, i) {
            if (!t) return !1;
            if (!i) return !1;
            for (; i;) {
                if (i === t) return !0;
                i = i.getParentView()
            }
            return !1
        },
        di: function () {
            this && this.callEvent && this.callEvent("onTimedKeyPress", [])
        },
        ei: function (t) {
            var i = t.which || t.keyCode;
            95 < i && i < 106 && (i -= 48);
            var e = this.getFocus();
            if (e && e.callEvent && (!1 === e.callEvent("onKeyPress", [i, t]) && bt(t), e.hasEvent("onTimedKeyPress") && (clearTimeout(e.vi), e.vi = k(this.di, e, [], e.B.keyPressTimeout || 250))), !1 === this._i(t)) return bt(t), !1
        },
        li: function (t, i) {
            var e = i || this.getFocus();
            if (e) {
                t = t || "getNext";
                for (var s = e, n = V(); ;) {
                    if ((e = this[t](e)) && this.canFocus(e)) return this.setFocus(e);
                    if (e === s || e.$fmarker == n) return i && document.activeElement.blur(), null;
                    e.$fmarker = n
                }
            }
        },
        pi: function (t, i) {
            var e = !i.shiftKey;
            if (xi.Kt = new Date, t && t.mi && !t.mi(e, i)) return !1;
            if (t && t.bi) {
                if (t.editNext) return t.editNext(e);
                if (t.editStop) return t.editStop(), !0
            } else k(function () {
                if ((t = ri(document.activeElement)) && !xi.canFocus(t)) return xi.li(e ? "getNext" : "getPrev", t);
                xi.setFocus(t, !0, !0)
            })
        },
        getTop: function (t) {
            for (var i, e = ri(t); e && (i = e.getParentView());) e = i;
            return e
        },
        getNext: function (t, i) {
            var e = t.getChildViews();
            if (e.length && !i) for (var s = 0; s < e.length; s++) if (this.canFocus(e[s])) return e[s];
            var n = t.getParentView();
            if (!n) return t;
            var h = n.getChildViews();
            if (h.length) for (var r = x.find.call(h, t) + 1; r < h.length;) {
                if (this.canFocus(h[r])) return h[r];
                r++
            }
            return this.getNext(n, !0)
        },
        getPrev: function (t, i) {
            var e = t.getChildViews();
            if (e.length && i) for (var s = e.length - 1; 0 <= s; s--) if (this.canFocus(e[s])) return this.getPrev(e[s], !0);
            if (i && this.canFocus(t)) return t;
            var n = t.getParentView();
            if (!n) return this.canFocus(t) ? this.getPrev(t, !0) : t;
            var h = n.getChildViews();
            if (h) for (var r = x.find.call(h, t) - 1; 0 <= r;) {
                if (this.canFocus(h[r])) return this.getPrev(h[r], !0);
                r--
            }
            return this.getPrev(n, !0)
        },
        addHotKey: function (t, i, e) {
            var s = this.gi(t);
            return e || (e = null), this.Jt[s] || (this.Jt[s] = []), this.Jt[s].push({handler: i, view: e}), t
        },
        removeHotKey: function (t, i, e) {
            var s = this.gi(t);
            if (i || e) {
                var n = this.Jt[s];
                if (n) {
                    for (var h = n.length - 1; 0 <= h; h--) e && n[h].view !== e || i && n[h].handler !== i || n.splice(h, 1);
                    n.length || delete this.Jt[s]
                }
            } else delete this.Jt[s]
        },
        wi: function (t, i, e, s, n) {
            return t.toLowerCase() + "_" + ["", i ? "1" : "0", e ? "1" : "0", s ? "1" : "0", n ? "1" : "0"].join("")
        },
        _i: function (t) {
            var i = t.which || t.keyCode, e = !t.ctrlKey && !t.altKey && !t.metaKey && 9 != i && 27 != i && 13 != i,
                s = this.wi(t.key, t.ctrlKey, t.shiftKey, t.altKey, t.metaKey), n = this.getFocus();
            return this.Jt[s] ? this.xi(this.Jt[s], n, t) : !e || !this.Jt.any_0000 || this.xi(this.Jt.any_0000, n, t)
        },
        xi: function (t, i, e) {
            for (var s = 0; s < t.length; s++) {
                var n = t[s];
                if (null === n.view || i === n.view || "string" == typeof n.view && i && i.name === n.view) {
                    var h = n.handler(i, e);
                    if (!!h === h
                    ) return h
                }
            }
            return !0
        },
        gi: function (t) {
            var i, e, s, n, h = this.Qt, r = t.toLowerCase().split(/[ +\-_]/);
            i = e = s = n = 0;
            for (var o = "", a = 0; a < r.length; a++) "ctrl" === r[a] ? i = 1 : "shift" === r[a] ? e = 1 : "alt" === r[a] ? s = 1 : "command" === r[a] ? n = 1 : o = h[r[a]] || r[a];
            return this.wi(o, i, e, s, n)
        },
        getState: function (t, i) {
            i = i || !1;
            var e = {
                id: (t = ri(t)).config.id,
                width: t.config.width,
                height: t.config.height,
                gravity: t.config.gravity
            };
            if (j(t.config.collapsed) || (e.collapsed = t.config.collapsed), "tabs" !== t.name && "tabbar" !== t.name || (e.activeCell = t.getValue()), i && (e = [e], t.yi)) for (var s = 0; s < t.yi.length; s++) e = e.concat(this.getState(t.yi[s], i));
            return e
        },
        setState: function (t) {
            b(t) || (t = [t]);
            for (var i = 0; i < t.length; i++) {
                var e = t[i], s = ri(e.id);
                s && (j(e.collapsed) || s.define("collapsed", e.collapsed), j(e.activeCell) || s.setValue(e.activeCell), s.define("width", e.width), s.define("height", e.height), s.define("gravity", e.gravity))
            }
            var n = ri(t[0].id);
            n && n.resize()
        }
    };
    _i(function () {
        xi.ii(), xi.addHotKey("enter", function (t, i) {
            if (t && t.callEvent && t.callEvent("onEnter", [i]), t && t.editStop && t.bi) return t.editStop(), !0;
            if (t && t.touchable) {
                var e = t.getFormView();
                e && !t.Mi && e.callEvent("onSubmit", [t, i])
            }
        }), xi.addHotKey("esc", function (t) {
            if (t) {
                if (t.editCancel && t.bi) return t.editCancel(), !0;
                var i = t.getTopParentView();
                i && i.setPosition && i.Si()
            }
        }), xi.addHotKey("shift+tab", xi.pi), xi.addHotKey("tab", xi.pi)
    }), t("UIManager", xi);
    var yi = {
        $init: function () {
            this.B = this.config = {}
        }, define: function (t, i) {
            return "object" == M(t) ? this.ki(t) : this.Ci(t, i)
        }, Ci: function (t, i) {
            var e = this[t + "_setter"];
            return this.B[t] = e ? e.call(this, i, t) : i
        }, ki: function (t) {
            if (t) for (var i in t) this.Ci(i, t[i])
        }, Rt: function (t, i) {
            var e = {};
            i && (e = P.extend(e, i)), "object" != M(t) || t.tagName || P.extend(e, t, !0), this.ki(e)
        }, $i: function (t, i) {
            for (var e in i) switch (M(t[e])) {
                case"object":
                    t[e] = this.$i(t[e] || {}, i[e]);
                    break;
                case"undefined":
                    t[e] = i[e]
            }
            return t
        }
    }, Mi = {
        $init: function () {
            var t = this.Vt = this.Vt || {obj: this};
            ti.destructors.push(t)
        }, destructor: function () {
            var t = this.B;
            if (this.Di && this.editCancel(), this.callEvent && this.callEvent("onDestruct", []), this.destructor = function () {
            }, this.Vt.obj = null, this.getChildViews) {
                var i = this.getChildViews();
                if (i) for (var e = 0; e < i.length; e++) i[e].destructor();
                if (this.zt) for (var s = 0; s < this.zt.length; s++) this.zt[s].destructor()
            }
            if (delete ei.views[t.id], t.$id) {
                var n = this.getTopParentView();
                n && n.Ii && n.Ii(t.$id)
            }
            this.Ai = null, this.Fi = null, this.Ti = null, this.Vi && (this.Vi.innerHTML = "", this.Vi.Ai = null), this.Tt && this.Tt.parentNode && this.Tt.parentNode.removeChild(this.Tt), this.data && this.data.destructor && this.data.destructor(), this.unbind && this.unbind(), this.data = null, this.Tt = this.$view = this.Vi = this.Q = null, this.h = this.o = {}, xi.Ht == this && (xi.Ht = null);
            var h = t.url;
            h && h.$proxy && h.release && h.release(), this.$scope = null, this.$destructed = !0
        }
    };
    Kt(window, "unload", function () {
        D("unload", []), ti.wt = !0;
        for (var t = 0; t < ti.destructors.length; t++) {
            var i = ti.destructors[t].obj;
            i && i.destructor()
        }
        ti.destructors = [], ti.St = g(), Xt()
    });
    var Si = {
        $init: function () {
            this.zi = null, this.attachEvent("onSelectChange", function () {
                var t = this.getSelectedId();
                this.setCursor(t ? t.id || t : null)
            }), this.attachEvent("onAfterCursorChange", this.Hi), this.attachEvent("onAfterDelete", function (t) {
                t == this.getCursor() && this.setCursor(null)
            }), this.data.attachEvent("onStoreUpdated", S(function (t, i, e) {
                t && t == this.getCursor() && "paint" != e && "delete" != e && this.Hi()
            }, this)), this.data.attachEvent("onClearAll", S(function () {
                this.zi = null
            }, this)), this.data.attachEvent("onIdChange", S(function (t, i) {
                this.zi == t && (this.zi = i, this.Hi())
            }, this))
        }, refreshCursor: function () {
            this.zi && this.callEvent("onAfterCursorChange", [this.zi])
        }, setCursor: function (t) {
            t == this.zi || null !== t && !this.getItem(t) || (this.callEvent("onBeforeCursorChange", [this.zi]), this.zi = t, this.callEvent("onAfterCursorChange", [t]))
        }, getCursor: function () {
            return this.zi
        }, Ri: function (t, i, e) {
            if ("$level" == i && this.data.getBranch) return (t.data || t).importData(this.data.getBranch(this.getCursor()));
            var s = this.getItem(this.getCursor()) || this.B.defaultData || null;
            "$data" == i ? ("function" == typeof e ? e.call(t, s, this) : t.data.importData(s ? s[e] : []), t.callEvent("onBindApply", [s, i, this])) : (e && (s = e(s)), this.Bi(t, i,
                s))
        }
    }, ki = {
        $init: function () {
            this.attachEvent("onChange", this.Hi)
        }, Ri: function (t, i, e) {
            i = i || "value";
            var s = this.getValue() || "";
            if (e && (s = e(s)), t.setValue) t.setValue(s); else if (t.filter) t.data.silent(function () {
                this.filter(i, s)
            }); else {
                var n = {};
                n[i] = s, t.J(s) && t.setValues(n)
            }
            t.callEvent("onBindApply", [s, i, this])
        }
    }, Ci = {
        $init: function () {
            this.attachEvent("onChange", this.Hi)
        }, Ri: function (t, i, e) {
            var s = this.getValues() || null;
            e && (s = e(s)), this.Bi(t, i, s)
        }
    }, $i = {
        $init: function () {
            this.Pi = {}, this.ji = {}, this.Ei = {}, this.Ni(this)
        }, saveBatch: function (t) {
            this.Li = !0, t.call(this), this.Li = !1, this.Hi()
        }, setBindData: function (t, i) {
            if (i && (this.Ei[i] = !0), this.setValue) this.setValue(t); else if (this.setValues) this.setValues(t); else {
                var e = this.getCursor();
                e ? this.updateItem(e, t) : this.add(t)
            }
            this.callEvent("onBindUpdate", [t, i]), this.save && this.save(), i && (this.Ei[i] = !1)
        }, getBindData: function (t, i) {
            if (this.ji[t]) return !1;
            var e = ri(t);
            e.isVisible(e.B.id) && (this.ji[t] = !0, this.Ri(e, this.Pi[t][0], this.Pi[t][1]), i && e.filter && e.refresh())
        }, addBind: function (t, i, e) {
            this.Pi[t] = [i, e]
        }, removeBind: function (t) {
            delete this.Pi[t], delete this.ji[t], delete this.Ei[t]
        }, Ni: function (t) {
            t.filter ? P.extend(this, Si) : t.setValue ? P.extend(this, ki) : P.extend(this, Ci)
        }, Hi: function () {
            if (!this.Li) for (var t in this.Pi) this.Ei[t] || (this.ji[t] = !1, this.getBindData(t, !0))
        }, Bi: function (t, i, e) {
            t.setValue ? t.setValue(e && i ? e[i] : e) : t.filter ? t.data.silent(function () {
                this.filter(i, e)
            }) : !e && t.clear ? t.clear() : t.J(e) && t.setValues(l(e)), t.callEvent("onBindApply", [e, i, this])
        }
    }, Di = {
        bind: function (t, i, e) {
            this.attachEvent || P.extend(this, c), "string" == typeof t && (t = ri(t)), t.Oi && t.Oi(), this.Oi && this.Oi(), t.getBindData || P.extend(t, $i), this.Ui(), t.addBind(this.B.id, i, e), this.Wi = t.B.id, this.Yi = this.B.id, this.qi = this.attachEvent(this.touchable ? "onAfterRender" : "onBindRequest", function () {
                return t.getBindData(this.Yi)
            }), this.refresh && this.isVisible(this.Yi) && this.refresh()
        }, unbind: function () {
            if (this.Wi) {
                var t = ri(this.Wi);
                t && t.removeBind(this.Yi), this.detachEvent(this.qi), this.Wi = this.qi = null
            }
        }, Ui: function () {
            var t = this.B;
            if (this.filter) {
                var i = t.id;
                this.data.Gi = S(function () {
                    ri(this.Wi).ji[i] = !1
                }, this)
            }
            var e = this.render;
            this.render = function () {
                if (!this.Xi) {
                    this.Xi = !0;
                    var t = this.callEvent("onBindRequest");
                    return this.Xi = !1, e.apply(this, !1 === t ? arguments : [])
                }
            }, (this.getValue || this.getValues) && (this.save = function (t) {
                var i = ri(this.Wi);
                if (t) i.setBindData(t); else {
                    if (this.validate && !this.validate()) return !1;
                    var e = this.getValue ? this.getValue : this.getValues();
                    i.setBindData(e, this.B.id), this.setDirty && this.setDirty(!1)
                }
            }), this.Ui = function () {
            }
        }
    }, Ii = window.webix_view || {}, Ai = {
        name: "baseview", $init: function (t) {
            t.id || (t.id = ai(this.name)), this.pt = ti.pt, ti.pt = null, this.$scope = t.$scope || (this.pt ? this.pt.$scope : ti.ct), this.Tt || (this.Vi = this.Tt = ct("DIV", {"class": "webix_view"}), this.$view = this.Tt)
        }, $skin: !1, defaults: {width: 0, height: 0, gravity: 1}, getNode: function () {
            return this.Tt
        }, $setNode: function (t) {
            this.Tt = this.Q = this.$view = t
        }, getParentView: function () {
            return this.pt || null
        }, getTopParentView: function () {
            var t = this.getParentView();
            return t ? t.getTopParentView() : this
        }, getFormView: function () {
            var t = this.getParentView();
            return !t || t.Ji ? t : t.getFormView()
        }, getChildViews: function () {
            return []
        }, queryView: function (s, t) {
            var i;
            if ("string" == typeof s && (s = {view: s}), i = "object" === M(s) ? function (t) {
                var i = t.config;
                for (var e in s) if (i[e] != s[e]) return !1;
                return !0
            } : s, "self" === t && i(this)) return this;
            var e = "all" === t && [], n = "parent" === t ? this.Ki : this.Zi, h = this.Qi(i, n, e);
            return "all" === t ? e : h
        }, Zi: function (t) {
            return t.getChildViews()
        }, Ki: function (t) {
            var i = t.getParentView();
            return i ? [i] : []
        }, Qi: function (t, i, e) {
            for (var s = i(this), n = 0; n < s.length; n++) {
                if (t(s[n])) {
                    if (!e) return s[n];
                    e.push(s[n])
                }
                var h = s[n].Qi(t, i, e);
                if (h && !e) return h
            }
            return null
        }, isVisible: function (t) {
            if (this.B.hidden) return t && (this.te || (this.te = [], this.ie = {}), this.ie[t] || (this.ie[t] = !0, this.te.push(t))), !1;
            var i = this.getParentView();
            return !i || i.isVisible(t, this.B.id)
        }, isEnabled: function () {
            if (this.ee) return !1;
            var t = this.getParentView();
            return !t || t.isEnabled()
        }, disable: function () {
            lt(this.ee), this.B.disabled = !0, this.ee = ct("div", {
                "class": "webix_disabled"
            }), this.Tt.appendChild(this.ee), this.Tt.setAttribute("aria-disabled", "true"), xt(this.Tt, "webix_disabled_view", !0), xi.ci(this)
        }, enable: function () {
            this.B.disabled = !1, this.ee && (lt(this.ee), yt(this.Tt, "webix_disabled_view"), this.Tt.removeAttribute("aria-disabled"), this.ee = null)
        }, disabled_setter: function (t) {
            return t ? this.disable() : this.enable(), t
        }, container_setter: function (t) {
            return C(t), !0
        }, css_setter: function (t) {
            return "object" == M(t) && (t = ot(t)), this.Tt.className += " " + t, t
        }, id_setter: function (t) {
            if (ti.ft && (ti.ft != this || this.se)) {
                var i = this.config.$id = t;
                t = ai(((this.se || ti.ft).ne[t] = this).name), (this.se || ti.ft).he[t] = i
            }
            return ei.views[t], (ei.views[t] = this).Tt.setAttribute("view_id", t), t
        }, $setSize: function (t, i) {
            var e = this.re;
            return (!e || e[0] != t || e[1] != i) && (this.re = [t, i], this.$width = this.oe = t - (this.ae ? Y.scrollSize : 0), this.$height = this.ue = i - (this.ce ? Y.scrollSize : 0), this.B.flex || (this.Tt.style.width = t + "px", this.Tt.style.height = i + "px"), !0)
        }, $getSize: function (t, i) {
            var e = this.B,
                s = [1 * (e.width || e.minWidth || 0), 1 * (e.width || e.maxWidth || 1e5), 1 * (e.height || e.minHeight || 0), 1 * (e.height || e.maxHeight || 1e5), e.gravity];
            return (isNaN(s[0]) || isNaN(s[1]) || isNaN(s[2]) || isNaN(s[3])) && (this.B.id, e.width = e.height = e.maxWidth = e.maxHeight = e.minWidth = e.minHeight = 0, s = [0, 0, 1e5, 1e5, 1]), s[0] += t, s[1] += t, s[2] += i, s[3] += i, s
        }, show: function (t, i) {
            var e = this.getParentView(), s = !arguments[2];
            e ? (!i && !1 !== i && this.B.animate && e.B.animate && (i = P.extend(e.B.animate ? P.extend({}, e.B.animate) : {}, this.B.animate, !0)), (s ? e.fe : e.Si) && (s ? e.fe : e.Si).call(e, this, i), s && this.le(), t && s && e.show(!e.$$ && t)) : this.B.hidden ? s && (C(this.B.It || document.body).appendChild(this.Tt), this.B.hidden = !1, this.adjust(), this.callEvent && (this.callEvent("onViewShow", []), this.de && di(this, this.de)), this.le()) : s || (this.B.hidden = this.B.Dt = !0, this.Tt && (this.B.It = this.Tt.parentNode, lt(this.Tt)))
        }, le: function () {
            if (this.te) {
                for (var t = 0; t < this.te.length; t++) {
                    var i = ri(this.te[t]);
                    i && i.render()
                }
                this.te = [], this.ie = {}
            }
        }, ve: function (t, i) {
            var e = i.srcElement || i.target, s = e.getAttribute("role");
            13 !== t && 32 !== t || "button" != s && "tab" != s || this.B.disabled || (wt(e, "MouseEvents", "click"), bt(i))
        }, hidden_setter: function (t) {
            return t && this.hide(), this.B.hidden
        }, hide: function () {
            this.show(null, null, !0), xi.ci(this)
        }, adjust: function () {
            if (!this.Tt.parentNode) return !1;
            var t = this.Tt.parentNode.clientWidth || 0, i = this.Tt.parentNode.clientHeight || 0,
                e = this.$getSize(0, 0), s = this.Tt.parentNode == document.body && !this.setPosition;
            e[0] > t && (t = e[0]), e[2] > i && (i = e[2]), (!s || this.B.width) && t > e[1] && (t = e[1]), (!s || this.B.height) && i > e[3] && (i = e[3]), this.$setSize(t, i), ti.dt && (ti.dt = !1, this.adjust())
        }, resize: function () {
            if (!(ti.lt || ti._t || ti.vt)) {
                var t = this.getParentView();
                t ? t.resizeChildren ? t.resizeChildren() : t.resize() : (this.adjust(), D("onResize", []))
            }
        }
    }, Fi = {api: Ai, view: P.protoUI(Ai, yi, Mi, Di, Ii)}, Ti = {
        name: "view", $init: function (t) {
            this._e(t)
        }, _e: function (t) {
            var i = j(t.borderless);
            i && !this.setPosition && t.$topView && (i = !(t.borderless = !0)), i && this.defaults.borderless || t.borderless ? t.$t = {
                top: !0,
                left: !0,
                bottom: !0,
                right: !0
            } : (t.$t || (t.$t = {}), this.Vi.style.borderWidth = "1px")
        }, $getSize: function (t, i) {
            var e = this.B.$t;
            return e && (t += (e.left ? 0 : 1) + (e.right ? 0 : 1), i += (e.top ? 0 : 1) + (e.bottom ? 0 : 1)), Fi.api.$getSize.call(this, t, i)
        }, $setSize: function (t, i) {
            var e = this.B.$t;
            return e && (t -= (e.left ? 0 : 1) + (e.right ? 0 : 1), i -= (e.top ? 0 : 1) + (e.bottom ? 0 : 1)), Fi.api.$setSize.call(this, t, i)
        }
    }, Vi = P.protoUI(Ti, Fi.view), zi = {api: Ti, view: Vi};
    Vi.call(-1);
    var Hi = P.proto({
        template_setter: function (t) {
            this.type.template = Wt(t)
        }, Z: function (t) {
            var i = this.type;
            return (i.templateStart ? i.templateStart(t, i) : "") + i.template(t, i) + (i.templateEnd ? i.templateEnd(t, i) : "")
        }, customize: function (t) {
            Qt(this, t)
        }
    }, Yt), Ri = {
        name: "tooltip", defaults: {dy: 0, dx: 20}, $init: function (t) {
            "string" == typeof t && (t = {template: t}), this.$view = this.Tt = this.Vi = this.Q = ct("DIV", {
                role: "alert",
                "aria-atomic": "true"
            }), this.Vi.className = "webix_tooltip", dt(this.Vi, document.body.firstChild, document.body)
        }, adjust: function () {
        }, isVisible: function () {
            return this.pe
        }, me: function (t) {
            this.callEvent("onBeforeRender", [t]) && (this.Q.innerHTML = "", this.Q.innerHTML = t,
                this.callEvent("onAfterRender", []))
        }, css_setter: function (t) {
            return "object" === M(t) && (t = ot(t)), this.Tt.className = "webix_tooltip " + t, t
        }, show: function (t, i) {
            if (!this.be) if (this.pe = !0, "string" == typeof t ? this.me(t) : (this.data = P.extend({}, t), this.render()), this.Q.firstChild) {
                var e = Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
                    s = Math.max(document.documentElement.clientHeight, window.innerHeight || 0), n = e - i.x,
                    h = s - i.y;
                this.Vi.style.display = "block", n - this.B.dx > this.Vi.offsetWidth ? n = i.x : (n = i.x - 2 * this.B.dx - this.Vi.offsetWidth) < 0 && (n = 0), h - this.B.dy > this.Vi.offsetHeight ? h = i.y : (h = i.y - 2 * this.B.dy - this.Vi.offsetHeight) < 0 && (h = 0), this.Vi.style.left = n + this.B.dx + "px", this.Vi.style.top = h + this.B.dy + "px"
            } else this.hide()
        }, hide: function () {
            this.pe && (this.data = null, this.Vi.style.display = "none", this.pe = !1)
        }, disable: function () {
            this.be = !0
        }, enable: function () {
            this.be = !1
        }, type: {template: Wt("{obj.value}"), templateStart: Wt.empty, templateEnd: Wt.empty}
    }, Bi = (P.protoUI(Ri, Hi, yi, c, zi.view), {
        tooltip_setter: function (t) {
            if (t) return "function" != typeof t && "string" != typeof t || (t = {template: t}), "object" !== M(t) && (t = {}), this.ge(), t
        }, ge: function () {
            oi.addTooltip(this), this.attachEvent("onDestruct", function () {
                oi.removeTooltip(this)
            }), this.attachEvent("onAfterScroll", function () {
                oi.jt && oi.Ut()
            }), this.ge = function () {
            }
        }, $tooltipIn: function (t) {
            var i = oi.Et, e = P.extend({dx: 20, dy: 0, template: "{obj.value}", css: ""}, this.B.tooltip, !0);
            return i.define(e), t
        }, $tooltipOut: function () {
            return oi.Ut(), null
        }, $tooltipMove: function (t, i, e) {
            oi.Et.hide(), clearTimeout(oi.Gt), oi.Gt = k(this.we, this, [t, i, e], oi.delay)
        }, we: function (t, i, e) {
            var s = e || this.xe(t, i);
            s && this.isVisible() && oi.Et.show(s, mt(i))
        }, xe: function (t, i) {
            if (this.locate && this.getItem) {
                var e = this.locate(i);
                return e ? this.getItem(e) : null
            }
            return this.B
        }
    }), Pi = P.proto({
        $init: function (t) {
            this.ye = [], this.Me = j(t.series) ? t.name : t.series, this.Se = C(t.container || t);
            var i = t.width * (window.devicePixelRatio || 1), e = t.height * (window.devicePixelRatio || 1),
                s = t.style || "";
            s += ";width:" + t.width + "px;height:" + t.height + "px;", this.ke(t.name, s, i, e, t.title)
        }, ke: function (t, i, e, s, n) {
            return this.Ce = ct("canvas", {
                title: n,
                width: e,
                height: s,
                canvas_id: t,
                style: i || ""
            }), this.Se.appendChild(this.Ce), this.Ce
        }, getCanvas: function (t) {
            var i = (this.Ce || this.ke(this.Vi)).getContext(t || "2d");
            return this.$e || (this.$e = !0, i.scale(window.devicePixelRatio || 1, window.devicePixelRatio || 1)), i
        }, De: function (t, i) {
            this.Ce && (this.Ce.setAttribute("width", t * (window.devicePixelRatio || 1)), this.Ce.setAttribute("height", i * (window.devicePixelRatio || 1)), this.Ce.style.width = t + "px", this.Ce.style.height = i + "px", this.$e = !1)
        }, renderText: function (t, i, e, s, n) {
            if (e) {
                n && (n = Math.max(n, 0)), i && (i = Math.max(i, 0));
                var h = ct("DIV", {
                    "class": "webix_canvas_text" + (s ? " " + s : ""),
                    style: "left:" + t + "px; top:" + i + "px;",
                    "aria-hidden": "true"
                }, e);
                return this.Se.appendChild(h), this.ye.push(h), n && (h.style.width = n + "px"), h
            }
        }, renderTextAt: function (t, i, e, s, n, h, r) {
            var o = this.renderText.call(this, e, s, n, h, r);
            return o && (t && (o.style.top = "middle" == t ? parseInt(s - o.offsetHeight / 2, 10) + "px" : s - o.offsetHeight + "px"), i && (o.style.left = "left" == i ? e - o.offsetWidth + "px" : parseInt(e - o.offsetWidth / 2, 10) + "px")), o
        }, clearCanvas: function (t) {
            var i = [];
            if (lt(this.ye), this.ye = [], !t && this.Se.Ai) {
                for (i = this.Ie(); i.length;) i[0].parentNode.removeChild(i[0]), i.splice(0, 1);
                i = null, this.Se.Ai.getElementsByTagName("AREA").length || (this.Se.Ai.parentNode.removeChild(this.Se.Ai), this.Se.Ai = null)
            }
            this.getCanvas().clearRect(0, 0, this.Ce.offsetWidth || Math.floor(this.Ce.width / (window.devicePixelRatio || 1)), this.Ce.offsetHeight || Math.floor(this.Ce.height / (window.devicePixelRatio || 1)))
        }, toggleCanvas: function () {
            this.Ae("none" == this.Ce.style.display)
        }, showCanvas: function () {
            this.Ae(!0)
        }, hideCanvas: function () {
            this.Ae(!1)
        }, Ae: function (t) {
            var i, e;
            for (e = 0; e < this.ye.length; e++) this.ye[e].style.display = t ? "" : "none";
            if (this.Se.Ai) for (i = this.Ie(), e = 0; e < i.length; e++) t ? i[e].removeAttribute("disabled") : i[e].setAttribute("disabled", "true");
            this.Ce.style.display = t ? "" : "none"
        }, Ie: function () {
            var t, i, e = [];
            for (t = this.Se.Ai.getElementsByTagName("AREA"), i = 0; i < t.length; i++) t[i].getAttribute("userdata") == this.Me && e.push(
                t[i]);
            return e
        }
    }), ji = function (t, i) {
        var e = i;
        if (b(t)) for (var s = 0; s < t.length; s++) {
            if (b(i) && (e = i[s]), "slide" == e.type) {
                if ("out" == e.subtype && 0 === s) continue;
                if ("in" == e.subtype && 1 == s) continue
            }
            if ("flip" != e.type) ji(t[s], e); else {
                var n = l(e);
                0 === s && (n.type = "flipback"), 1 == s && (n.callback = null), ji(t[s], n)
            }
        } else {
            var h = C(t);
            h.Fe ? ji.end(h, e) : ji.start(h, e)
        }
    };
    ji.end = function (t, i) {
        t.style[Y.transitionDuration] = "1ms", t.Fe = null, ti.kt && window.clearTimeout(ti.kt), ti.kt = k(ji, this, [t, i], 10)
    }, ji.isSupported = function () {
        return Y.transform && Y.transition && !Y.isOpera
    }, ji.formLine = function (t, i, e) {
        var s = e.direction;
        i.parentNode && (i.parentNode.style.position = "relative"), i.style.position = "absolute", t.style.position = "absolute";
        var n = Y.isFF ? "top" == s || "left" == s ? -1 : 1 : 0;
        return "top" == s || "bottom" == s ? (t.style.left = "0px", t.style.top = (e.top || n) + ("top" == s ? 1 : -1) * i.offsetHeight + "px") : (t.style.top = (e.top || 0) + "px", t.style.left = n + ("left" == s ? 1 : -1) * i.offsetWidth + "px"), i.parentNode == t.parentNode && e.keepViews ? t.style.display = "" : dt(t, i.nextSibling, i.parentNode), "slide" == e.type && "out" == e.subtype && (t.style.left = "0px", t.style.top = (e.top || 0) + "px", i.parentNode.removeChild(i), dt(i, t.nextSibling, t.parentNode)), [t, i]
    }, ji.breakLine = function (t) {
        arguments[1] ? t[1].style.display = "none" : lt(t[1]), ji.clear(t[0]), ji.clear(t[1]), t[0].style.position = ""
    }, ji.clear = function (t) {
        t.style[Y.transform] = "none", t.style[Y.transition] = "none", t.style.top = t.style.left = ""
    }, ji.defaults = {
        type: "slide",
        delay: "0",
        duration: "500",
        timing: "ease-in-out",
        x: 0,
        y: 0
    }, ji.start = function (s, t) {
        "string" == typeof t && (t = {type: t}), t = yi.$i(t, ji.defaults);
        var i, e, n = Y.cssPrefix, h = s.Fe = t;
        switch ("slide" == h.type && h.direction) {
            case"right":
                h.x = s.offsetWidth;
                break;
            case"left":
                h.x = -s.offsetWidth;
                break;
            case"top":
                h.y = -s.offsetHeight;
                break;
            case"bottom":
            default:
                h.y = h.y || s.offsetHeight
        }
        "flip" != h.type && "flipback" != h.type || (i = [0, 0], e = "scaleX", "vertical" == h.subtype ? (i[0] = 20, e = "scaleY") : i[1] = 20, "right" != h.direction && "bottom" != h.direction || (i[0] *= -1, i[1] *= -1));
        var r = h.duration + "ms " + h.timing + " " + h.delay + "ms", o = n + "TransformStyle: preserve-3d;", a = "",
            u = "";
        switch (h.type) {
            case"fade":
                a = "opacity " + r, o = "opacity: 0;";
                break;
            case"show":
                a = "opacity " + r, o = "opacity: 1;";
                break;
            case"flip":
                r = h.duration / 2 + "ms " + h.timing + " " + h.delay + "ms", u = "skew(" + i[0] + "deg, " + i[1] + "deg) " + e + "(0.00001)", a = "all " + r;
                break;
            case"flipback":
                h.delay += h.duration / 2, r = h.duration / 2 + "ms " + h.timing + " " + h.delay + "ms", s.style[Y.transform] = "skew(" + -1 * i[0] + "deg, " + -1 * i[1] + "deg) " + e + "(0.00001)", s.style.left = "0", u = "skew(0deg, 0deg) " + e + "(1)", a = "all " + r;
                break;
            case"slide":
                var c = h.x + "px", f = h.y + "px";
                u = Y.translate + "(" + c + ", " + f + ("translate3d" == Y.translate ? ", 0" : "") + ")", a = n + "transform " + r
        }
        k(function () {
            s.style[Y.transition] = a, k(function () {
                o && (s.style.cssText += o), u && (s.style[Y.transform] = u);
                var i = !1, e = Kt(s, Y.transitionEnd, function (t) {
                    s.Fe = null, h.callback && h.callback.call(h.master || window, s, h, t), i = !0, Zt(e)
                });
                window.setTimeout(function () {
                    if (!i) {
                        var t = h.master || window;
                        s.Fe = null, !t.$destructed && h.callback && h.callback.call(t, s, h), i = !0, Zt(e)
                    }
                }, 1.3 * (1 * h.duration + 1 * h.delay))
            })
        })
    };
    var Ei, Ni;

    function Li(t) {
        if (Oi[t], Ni !== t) for (var i in Oi.$active = Ei = Oi[t], Oi.$name = Ni = t, ei) {
            var e = ei[i];
            e && e.prototype && e.prototype.$skin && e.prototype.$skin(e.prototype)
        }
    }

    var Oi = {
        set: Li,
        material: {
            topLayout: "space",
            barHeight: 44,
            tabbarHeight: 42,
            sidebarTitleHeight: 44,
            rowHeight: 36,
            toolbarHeight: 44,
            listItemHeight: 36,
            inputHeight: 38,
            buttonHeight: 38,
            inputPadding: 3,
            menuHeight: 36,
            labelTopHeight: 22,
            propertyItemHeight: 28,
            timelineItemHeight: 70,
            unitHeaderHeight: 36,
            inputSpacing: 4,
            borderWidth: 1,
            sliderHandleWidth: 14,
            sliderPadding: 10,
            sliderBorder: 1,
            vSliderPadding: 15,
            vSliderHeight: 100,
            switchHeight: 22,
            switchWidth: 50,
            layoutMargin: {space: 10, wide: 10, clean: 0, head: 4, line: -1, toolbar: 4, form: 8, accordion: 2},
            layoutPadding: {space: 10, wide: 0, clean: 0, head: 0, line: 0, toolbar: 2, form: 17, accordion: 0},
            tabMargin: 0,
            tabOffset: 0,
            tabBottomOffset: 0,
            tabTopOffset: 0,
            tabBorder: !0,
            customCheckbox: !0,
            customRadio: !0,
            sidebarMarkAll: !0,
            popupNoPoint: !0,
            borderlessPopup: !0,
            popupPadding: 0,
            dataPadding: 12,
            calendarWeekHeaderHeight: 18,
            padding: 0,
            accordionType: "accordion",
            optionHeight: 32,
            organogramLineColor: "#CCD7E6",
            timelineColor: "#1CA1C1"
        },
        mini: {
            topLayout: "space",
            barHeight: 36,
            tabbarHeight: 34,
            sidebarTitleHeight: 36,
            rowHeight: 28,
            toolbarHeight: 36,
            listItemHeight: 28,
            inputHeight: 30,
            buttonHeight: 30,
            inputPadding: 3,
            menuHeight: 28,
            labelTopHeight: 16,
            propertyItemHeight: 24,
            unitHeaderHeight: 28,
            timelineItemHeight: 50,
            inputSpacing: 4,
            borderWidth: 1,
            sliderHandleWidth: 12,
            sliderPadding: 10,
            sliderBorder: 1,
            vSliderPadding: 13,
            vSliderHeight: 100,
            switchHeight: 20,
            switchWidth: 40,
            layoutMargin: {space: 5, wide: 5, clean: 0, head: 4, line: -1, toolbar: 4, form: 8, accordion: 2},
            layoutPadding: {space: 5, wide: 0, clean: 0, head: 0, line: 0, toolbar: 2, form: 12, accordion: 0},
            tabMargin: 0,
            tabOffset: 0,
            tabBottomOffset: 0,
            tabTopOffset: 0,
            tabBorder: !0,
            customCheckbox: !0,
            customRadio: !0,
            sidebarMarkAll: !0,
            popupNoPoint: !0,
            borderlessPopup: !0,
            popupPadding: 0,
            dataPadding: 12,
            calendarWeekHeaderHeight: 18,
            padding: 0,
            accordionType: "accordion",
            optionHeight: 24,
            organogramLineColor: "#CCD7E6",
            timelineColor: "#1CA1C1"
        },
        flat: {
            topLayout: "space",
            barHeight: 46,
            tabbarHeight: 46,
            rowHeight: 34,
            toolbarHeight: 46,
            sidebarTitleHeight: 45,
            listItemHeight: 34,
            inputHeight: 38,
            buttonHeight: 38,
            inputPadding: 3,
            menuHeight: 34,
            labelTopHeight: 22,
            unitHeaderHeight: 20,
            propertyItemHeight: 28,
            timelineItemHeight: 70,
            inputSpacing: 4,
            borderWidth: 1,
            sliderHandleWidth: 14,
            sliderPadding: 10,
            sliderBorder: 1,
            vSliderPadding: 15,
            vSliderHeight: 100,
            switchHeight: 22,
            switchWidth: 50,
            layoutMargin: {space: 10, wide: 10, clean: 0, head: 4, line: -1, toolbar: 4, form: 8, accordion: 10},
            layoutPadding: {space: 10, wide: 0, clean: 0, head: 0, line: 0, toolbar: 3, form: 17, accordion: 0},
            tabMargin: 4,
            tabOffset: 0,
            tabBottomOffset: 6,
            tabTopOffset: 1,
            customCheckbox: !0,
            customRadio: !0,
            popupPadding: 8,
            dataPadding: 10,
            calendarWeekHeaderHeight: 24,
            padding: 0,
            accordionType: "accordion",
            optionHeight: 32,
            timelineColor: "#3498db"
        },
        compact: {
            topLayout: "space",
            barHeight: 34,
            tabbarHeight: 34,
            sidebarTitleHeight: 34,
            rowHeight: 24,
            toolbarHeight: 34,
            listItemHeight: 28,
            unitHeaderHeight: 20,
            propertyItemHeight: 24,
            timelineItemHeight: 50,
            inputHeight: 30,
            buttonHeight: 30,
            inputPadding: 3,
            menuHeight: 28,
            labelTopHeight: 16,
            inputSpacing: 4,
            borderWidth: 1,
            sliderHandleWidth: 12,
            sliderPadding: 10,
            sliderBorder: 1,
            vSliderPadding: 13,
            vSliderHeight: 100,
            switchHeight: 20,
            switchWidth: 40,
            layoutMargin: {space: 5, wide: 5, clean: 0, head: 4, line: -1, toolbar: 4, form: 4, accordion: 5},
            layoutPadding: {space: 5, wide: 0, clean: 0, head: 0, line: 0, toolbar: 1, form: 12, accordion: 0},
            tabMargin: 3,
            tabOffset: 0,
            tabBottomOffset: 3,
            tabTopOffset: 1,
            customCheckbox: !0,
            customRadio: !0,
            popupPadding: 8,
            dataPadding: 10,
            calendarWeekHeaderHeight: 24,
            padding: 0,
            accordionType: "accordion",
            optionHeight: 23,
            timelineColor: "#3498db"
        },
        contrast: {
            topLayout: "space",
            barHeight: 46,
            tabbarHeight: 46,
            rowHeight: 34,
            toolbarHeight: 46,
            sidebarTitleHeight: 45,
            listItemHeight: 34,
            unitHeaderHeight: 20,
            inputHeight: 38,
            buttonHeight: 38,
            inputPadding: 3,
            menuHeight: 34,
            labelTopHeight: 22,
            propertyItemHeight: 28,
            timelineItemHeight: 70,
            inputSpacing: 4,
            borderWidth: 1,
            sliderHandleWidth: 14,
            sliderPadding: 10,
            sliderBorder: 1,
            vSliderPadding: 15,
            vSliderHeight: 100,
            switchHeight: 22,
            switchWidth: 50,
            layoutMargin: {space: 10, wide: 10, clean: 0, head: 4, line: -1, toolbar: 8, form: 8, accordion: 10},
            layoutPadding: {space: 10, wide: 0, clean: 0, head: 0, line: 0, toolbar: 3, form: 17, accordion: 0},
            tabMargin: 4,
            tabOffset: 0,
            tabBottomOffset: 6,
            tabTopOffset: 1,
            customCheckbox: !0,
            customRadio: !0,
            popupPadding: 8,
            dataPadding: 10,
            calendarWeekHeaderHeight: 24,
            padding: 0,
            accordionType: "accordion",
            optionHeight: 32,
            timelineColor: "#b300b3"
        }
    };
    Li(window.webix_skin || "material");
    var Ui = {
        config: {
            longTouchDelay: 1e3,
            scrollDelay: 150,
            gravity: 500,
            deltaStep: 30,
            speed: "0ms",
            finish: 1500,
            ellastic: !0
        }, limit: function (t) {
            Ui.Te = !1 !== t
        }, disable: function () {
            Ui.be = !0
        }, enable: function () {
            Ui.be = !1
        }, $init: function () {
            Ui.$init = function () {
            }, Kt(document.body, Yi.down, Ui.Ve, {passive: !1}), Kt(document.body, Yi.move, Ui.ze, {passive: !1}), Kt(document.body, Yi.up, Ui.He), Kt(document.body, "dragstart", function (t) {
                if (!Ui.be && !Ui.Te) return bt(t)
            }), Ui.Re(), Ui.Be = [null, null], Ui.$active = !0
        }, Re: function () {
            Ui.Pe = Ui.je = Ui.Ee = Ui.Ne = null, Ui.Le = Ui.Oe = Ui.Ue = Ui.We = null, Ui.Ye = {
                qe: 0,
                Ge: 0,
                Xe: 0
            }, Ui.Je && (yt(Ui.Je, "webix_touch"), Ui.Je = null), window.clearTimeout(Ui.Ke), Ui.Ze = !0, Ui.Qe = !0, Ui.ts = !0, Ui.es || Ui.ss()
        }, He: function (t) {
            if (Ui.Pe
            ) {
                if (Ui.Le) {
                    var i = Ui.ns(Ui.Oe), e = i.e, s = i.f, n = Ui.config.finish, h = Ui.hs(t, !0), r = ri(Ui.Oe),
                        o = r && r.$scroll ? r.$scroll.gravity : Ui.config.gravity;
                    if (h.Xe) {
                        var a = e + o * h.qe / h.Xe, u = s + o * h.Ge / h.Xe,
                            c = Ui.Be[0] ? Ui.rs(a, !1, !1, Ui.Ue.dx, Ui.Ue.px) : e,
                            f = Ui.Be[1] ? Ui.rs(u, !1, !1, Ui.Ue.dy, Ui.Ue.py) : s,
                            l = Math.max(Math.abs(c - e), Math.abs(f - s));
                        l < 150 && (n = n * l / 150), c == e && f == s || (n = Math.round(n * Math.max((c - e) / (a - e), (f - s) / (u - s))));
                        var d = {e: c, f: f};
                        (r = ri(Ui.Oe)) && r.adjustScroll && r.adjustScroll(d), n = Math.max(100, n), e != d.e || s != d.f ? (Ui.os(Ui.Oe, d.e, d.f, n + "ms"), Ui.us && Ui.us.cs(d.e, d.f, n + "ms"), Ui.fs(d.e, d.f, n + "ms")) : Ui.ss()
                    } else Ui.ss()
                } else Ui.We || (Ui.ts && !Ui.Qe ? Ui.ls("onSwipeX") : Ui.Qe && !Ui.ts && Ui.ls("onSwipeY"));
                Ui.ls("onTouchEnd"), Ui.Re()
            }
        }, ze: function (t) {
            if (Ui.Ne && Ui.Pe) {
                var i = Ui.hs(t);
                if (Ui.ls("onTouchMove"), Ui.Le) Ui.ds(i); else if (Ui.Qe = Ui.vs(i._s, "x", Ui.Qe), Ui.ts = Ui.vs(i.ps, "y", Ui.ts), Ui.Le) {
                    var e = Ui.ms("onBeforeScroll", !0);
                    if (e) {
                        var s = {};
                        e.callEvent("onBeforeScroll", [s]), s.update && (Ui.config.speed = s.speed, Ui.config.scale = s.scale)
                    }
                    Ui.bs(i)
                } else if (Y.isMac) {
                    var n = ri(Ui.Pe);
                    if (n && n.$hasYScroll && n.$hasYScroll()) return bt(t)
                }
                return Ui.Le ? bt(t) : void 0
            }
        }, ds: function () {
            if (Ui.Oe) {
                var t = Ui.ns(Ui.Oe), i = Ui.Ee || Ui.Pe, e = ri(Ui.Oe),
                    s = e && e.$scroll ? e.$scroll.ellastic : Ui.config.ellastic;
                Ui.Be[0] && (t.e = Ui.rs(t.e - i.x + Ui.je.x, s, t.e, Ui.Ue.dx, Ui.Ue.px)), Ui.Be[1] && (t.f = Ui.rs(t.f - i.y + Ui.je.y, s, t.f, Ui.Ue.dy, Ui.Ue.py)), Ui.os(Ui.Oe, t.e, t.f, "0ms"), Ui.us && Ui.us.cs(t.e, t.f, "0ms"), Ui.fs(t.e, t.f, "0ms")
            }
        }, fs: function (t, i, e) {
            var s = Ui.Ue.px / Ui.Ue.dx * -t, n = Ui.Ue.py / Ui.Ue.dy * -i;
            Ui.Be[0] && Ui.os(Ui.Be[0], s, 0, e), Ui.Be[1] && Ui.os(Ui.Be[1], 0, n, e)
        }, scrollTo: function (t, i, e, s) {
            Ui.os(t, i, e, s)
        }, os: function (t, i, e, s) {
            if (s) {
                if (Ui.es = !0, t) {
                    var n = Ui.config.translate || Y.translate;
                    t.style[Y.transform] = n + "(" + Math.round(i) + "px, " + Math.round(e) + "px" + ("translate3d" == n ? ", 0" : "") + ")", t.style[Y.transitionDuration] = s
                }
            } else t.style[Y.transform] = ""
        }, ns: function (t) {
            var i, e = window.getComputedStyle(t)[Y.transform];
            if ("none" == e) i = {
                e: 0,
                f: 0
            }; else if (window.WebKitCSSMatrix) i = new WebKitCSSMatrix(e); else if (window.MSCSSMatrix) i = new MSCSSMatrix(e); else {
                var s = e.replace(/(matrix\()(.*)(\))/gi, "$2");
                s = (s = s.replace(/\s/gi, "")).split(","), i = {};
                for (var n = ["a", "b", "c", "d", "e", "f"], h = 0; h < n.length; h++) i[n[h]] = parseInt(s[h], 10)
            }
            return Ui.us && Ui.us.gs(i), i
        }, rs: function (t, i, e, s, n) {
            if (t === e) return t;
            var h = Math.abs(t - e);
            if (0 < t) return i ? e + h / (t - e) * Math.sqrt(h) : 0;
            var r = s - n;
            return r + t < 0 ? i ? e - Math.sqrt(-(t - e)) : -r : t
        }, ws: function (t) {
            if (!t.scroll_enabled) {
                t.scroll_enabled = !0, t.parentNode.style.position = "relative";
                var i = Y.cssPrefix;
                t.style.cssText += i + "transition: " + i + "transform; " + i + "user-select:none; " + i + "transform-style:flat;", t.addEventListener(Y.transitionEnd, Ui.ss, !1)
            }
        }, bs: function () {
            -1 != Ui.Le.indexOf("x") && (Ui.Be[0] = Ui.xs("x", Ui.Ue.dx, Ui.Ue.px, "width")), -1 != Ui.Le.indexOf("y") && (Ui.Be[1] = Ui.xs("y", Ui.Ue.dy, Ui.Ue.py, "height")), Ui.ws(Ui.Oe), window.setTimeout(function () {
                Ui.ds(), Ui.Ue.hidden || (Ui.Be[0] && (Ui.Be[0].style.visibility = "visible"), Ui.Be[1] && (Ui.Be[1].style.visibility = "visible"))
            }, 0)
        }, xs: function (t, i, e, s) {
            if (i - e < 2) {
                var n = Ui.ns(Ui.Oe), h = "y" == t ? n.e : 0, r = "y" == t ? 0 : n.f;
                return Ui.us || Ui.os(Ui.Oe, h, r, "0ms"), Ui.Le = Ui.Le.replace(t, ""), ""
            }
            var o = ct("DIV", {"class": "webix_scroll_" + t}, "");
            return o.style.visibility = "hidden", o.style[s] = Math.max(e * e / i - 7, 10) + "px", Ui.Ue.left && ("x" === t ? o.style.left = Ui.Ue.left + "px" : o.style.right = -Ui.Ue.left + "px"), Ui.Oe.parentNode.appendChild(o), o
        }, vs: function (t, i, e) {
            return t > Ui.config.deltaStep ? (Ui.Ze && (Ui.ys(i), Ui.Ms(i), -1 == (Ui.Le || "").indexOf(i) && (Ui.Le = "")), !1) : e
        }, ss: function () {
            var t, i, e;
            (e = ri(Ui.Oe || this)) && (Ui.Oe ? t = Ui.ns(Ui.Oe) : e.getScrollState && (t = {
                e: -(i = e.getScrollState()).x,
                f: -i.y
            }), D("onAfterScroll", [t]), e.callEvent && e.callEvent("onAfterScroll", [t])), Ui.Le || (lt(Ui.Be), Ui.Be = [null, null]), Ui.es = !1
        }, ys: function () {
            window.clearTimeout(Ui.Ke), Ui.Ze = !1
        }, Ss: function (t) {
            if (!Ui.Be[0] && !Ui.Be[1]) return !0;
            Ui.ks(t, Ui.Be[0] ? "x" : "y")
        }, Ve: function (t) {
            var i = t.target || window.event.srcElement;
            if (Ui.be || i.tagName && "textarea" == i.tagName.toLowerCase() && i.offsetHeight < i.scrollHeight) return bt(t);
            Ui.We = null, Ui.Ne = Ui.Pe = Yi.context(t);
            var e = ri(t)
            ;!Ui.Te || Ui.Cs() || e && e.$touchCapture || (Ui.Ne = null), Ui.ls("onTouchStart"), Ui.Ss(t) && (Ui.Ke = window.setTimeout(Ui.$s, Ui.config.longTouchDelay)), !e || !e.touchable || i.className && 0 === i.className.indexOf("webix_view") || (Ui.Je = e.getNode(t), xt(Ui.Je, "webix_touch"))
        }, $s: function () {
            Ui.Pe && (Ui.We = !0, Ui.ls("onLongTouch"), D("onClick", [Ui.Pe]))
        }, ks: function (t, i) {
            Ui.Ms(i);
            var e = Ui.Be[0] || Ui.Be[1];
            if (e) {
                var s = Ui.ms("onBeforeScroll", !0);
                s && s.callEvent("onBeforeScroll", [Ui.Pe, Ui.je])
            }
            !e || Ui.Oe && e.parentNode == Ui.Oe.parentNode || (Ui.Re(), Ui.ss(), Ui.Pe = Yi.context(t)), Ui.ze(t)
        }, hs: function (t) {
            return Ui.Ee = Ui.je, Ui.je = Yi.context(t), Ui.Ye._s = Math.abs(Ui.Pe.x - Ui.je.x), Ui.Ye.ps = Math.abs(Ui.Pe.y - Ui.je.y), Ui.Ee && (Ui.je.time - Ui.Ee.time < Ui.config.scrollDelay ? (Ui.Ye.qe = Ui.Ye.qe / 1.3 + Ui.je.x - Ui.Ee.x, Ui.Ye.Ge = Ui.Ye.Ge / 1.3 + Ui.je.y - Ui.Ee.y) : Ui.Ye.Ge = Ui.Ye.qe = 0, Ui.Ye.Xe = Ui.Ye.Xe / 1.3 + (Ui.je.time - Ui.Ee.time)), Ui.Ye
        }, Ds: function (t) {
            Ui.Ue = {dx: t.offsetWidth, dy: t.offsetHeight, px: t.parentNode.offsetWidth, py: t.parentNode.offsetHeight}
        }, Cs: function (t) {
            var i = Ui.Pe.target;
            if (!Y.touch && !Y.transition && !Y.transform) return null;
            for (; i && "BODY" != i.tagName;) {
                if (i.getAttribute) {
                    var e = i.getAttribute("touch_scroll");
                    if (e && (!t || -1 != e.indexOf(t))) return [i, e]
                }
                i = i.parentNode
            }
            return null
        }, Ms: function (t) {
            var i = this.Cs(t);
            return i && (Ui.Le = i[1], Ui.Oe = i[0], Ui.Ds(i[0])), i
        }, ls: function (t) {
            D(t, [Ui.Pe, Ui.je]);
            var i = Ui.ms(t);
            i && i.callEvent(t, [Ui.Pe, Ui.je])
        }, ms: function (t, i) {
            var e = ri(i ? Ui.Oe : Ui.Pe);
            if (!e) return null;
            for (; e;) {
                if (e.hasEvent && e.hasEvent(t)) return e;
                e = e.getParentView()
            }
            return null
        }, Is: function (t) {
            if (t.touches[0]) return {target: t.target, x: t.touches[0].pageX, y: t.touches[0].pageY, time: new Date};
            var i = Ui.je;
            return i.time = new Date, i
        }, As: function (t) {
            return {target: t.target || t.srcElement, x: t.pageX, y: t.pageY, time: new Date}
        }
    };

    function Wi(t) {
        t.down = "touchstart", t.move = "touchmove", t.up = "touchend", t.context = Ui.Is
    }

    _i(function Io() {
        if (Y.touch) Ui.$init(), -1 == document.body.className.indexOf("webix_full_screen") && Ui.limit(!0), Y.isSafari && at(".webix_view{ -webkit-overflow-scrolling: touch; }"), window.MSCSSMatrix && at(".webix_view{ -ms-touch-action: none; }"); else var s = Kt(document.body, "touchstart", function (t) {
            if (t.touches.length && 4 < t.touches[0].radiusX) for (var i in Y.touch = !0, Wi(Yi), Io(), ei.views) {
                var e = ei.views[i];
                e && e.$touch && e.$touch()
            }
            Zt(s)
        }, {capture: !0})
    });
    var Yi = Y.mouse = {down: "mousedown", up: "mouseup", move: "mousemove", context: Ui.As};
    window.navigator.pointerEnabled ? (Yi.down = "pointerdown", Yi.move = "pointermove", Yi.up = "pointerup") : window.navigator.msPointerEnabled ? (Yi.down = "MSPointerDown", Yi.move = "MSPointerMove", Yi.up = "MSPointerUp") : Y.touch && Wi(Yi);
    var qi = {
        Fs: g(["dummy"]), addDrop: function (t, i, e) {
            (t = C(t)).webix_drop = this.Ts(i), e && (t.webix_master = !0)
        }, Ts: function (t) {
            t = t || qi;
            var i = this.Fs.find(t);
            return i < 0 && (i = this.Fs.length, this.Fs.push(t), t.attachEvent && t.attachEvent("onDestruct", function () {
                return qi.unlink(t)
            })), i
        }, unlink: function (t) {
            var i = this.Fs.find(t);
            -1 < i && (qi.Vs && qi.Vs.webix_drag == i && qi.zs(), qi.qt && qi.qt.webix_drop == i && (qi.qt = null), this.Fs[i] = null)
        }, Hs: function (t) {
            var i = qi, e = this.Rs();
            if (e && e.Bs) {
                i.Ti || i.createDrag(t);
                var s = i.Ps;
                i.Ti.style.left = t.x + i.left + (s.x_offset || 0) + "px", i.Ti.style.top = t.y + i.top + (s.y_offset || 0) + "px"
            }
        }, addDrag: function (t, i) {
            (t = C(t)).webix_drag = this.Ts(i), Jt(t, Y.mouse.down, this.js, {bind: t}), Jt(t, "dragstart", bt)
        }, js: function (t) {
            if (qi.Vs) {
                if (qi.Es == t) return;
                qi.Ns(t), qi.destroyDrag(t)
            }
            qi.Vs = this;
            var i = Y.mouse.context(t);
            qi.Ls = i, qi.Es = t;
            var e = Y.touch ? {passive: !1} : e;
            qi.Os = Kt(document.body, Y.mouse.move, qi.Us, e), qi.Ws = Kt(document, Y.mouse.up, qi.Ns), xt(document.body, "webix_noselect", 1)
        }, Ns: function (t) {
            qi.Ys(), qi.qs = !t.cancelable
        }, Us: function (t) {
            if (qi.qs = !t.cancelable, Y.touch && qi.qs) return qi.Ys(), qi.destroyDrag(t);
            var i = Y.mouse.context(t), e = qi.Rs();
            if (!(e && Y.touch && e.Bs && !Ui.We || Math.abs(i.x - qi.Ls.x) < 5 && Math.abs(i.y - qi.Ls.y) < 5) && (qi.Ys(!0), qi.Ti || qi.createDrag(qi.Es))) {
                qi.sendSignal("start");
                var s = Y.touch ? {passive: !1} : s;
                qi.Os = Kt(document.body, Y.mouse.move, qi.Gs, s), qi.Ws = Kt(document, Y.mouse.up, qi.zs), qi.Gs(t)
            }
        }, zs: function (t) {
            qi.Ys(), qi.Es = null, qi.qt && t && (qi.$drop(qi.Vs, qi.qt, t),
                qi.$dragOut(qi.Vs, qi.qt, null, t)), qi.destroyDrag(t), qi.sendSignal("stop")
        }, Ys: function (t) {
            this.Os = Zt(this.Os), this.Ws = Zt(this.Ws), t || yt(document.body, "webix_noselect")
        }, Gs: function (s) {
            var t = qi, i = mt(s), e = t.$dragPos(i, s), n = t.Ps;
            t.Ti.style.top = i.y + t.top + (e || !n.y_offset ? 0 : n.y_offset) + "px", t.Ti.style.left = i.x + t.left + (e || !n.x_offset ? 0 : n.x_offset) + "px";
            var h = s;
            if (t.Xs) t.Xs = !1; else {
                if (Y.touch) {
                    var r = Y.mouse.context(s), o = document.elementFromPoint(r.x, r.y);
                    h = new Proxy(s, {
                        get: function (t, i) {
                            if ("target" === i) return o;
                            var e = t[i];
                            return "function" == typeof e ? e.bind(s) : e
                        }
                    })
                }
                t.Js(h.target || h.srcElement, h)
            }
            return bt(s)
        }, Js: function (t, i) {
            for (; t && "BODY" != t.tagName;) {
                if (t.webix_drop) return this.qt && (this.qt != t || t.webix_master) && this.$dragOut(this.Vs, this.qt, t, i), !this.qt || this.qt != t || t.webix_master ? (this.qt = null, this.Ks = this.$dragIn(qi.Vs, t, i), void (this.Ks && (this.qt = t))) : void 0;
                t = t.parentNode
            }
            this.qt && (this.qt = this.Ks = this.$dragOut(this.Vs, this.qt, null, i))
        }, sendSignal: function (t) {
            qi.active = "start" == t, D("onDragMode", [t])
        }, getMaster: function (t) {
            return this.Fs[t.webix_drag || t.webix_drop]
        }, getContext: function () {
            return this.Ps
        }, getNode: function () {
            return this.Ti
        }, createDrag: function (t) {
            var i = qi, e = i.Vs;
            i.Ps = {};
            var s, n = this.Fs[e.webix_drag];
            if (n.$dragCreate) {
                if (!(s = n.$dragCreate(e, t))) return !1;
                this.Zs(t), s.style.position = "absolute"
            } else {
                var h = i.$drag(e, t);
                if (i.Zs(t), !h) return !1;
                (s = document.createElement("DIV")).innerHTML = h, s.className = "webix_drag_zone", document.body.appendChild(s);
                var r = i.Ps;
                r.html && Y.pointerevents && (r.x_offset = -Math.round(.5 * s.offsetWidth), r.y_offset = -Math.round(.75 * s.offsetHeight))
            }
            return s.style.zIndex = Math.max(s.style.zIndex, vi()), qi.Qs = Kt(s, Y.mouse.move, qi.tn), qi.Ps.from || (qi.Ps = {
                source: e,
                from: e
            }), qi.Ti = s, !0
        }, tn: function () {
            qi.Xs = !0
        }, destroyDrag: function (t) {
            var i = qi.Vs, e = this.Fs[i.webix_drag];
            e && e.$dragDestroy ? (qi.Qs = Zt(qi.Qs), qi.Ti && e.$dragDestroy(i, qi.Ti, t)) : lt(qi.Ti), e && e.ht && (e.ht = window.clearTimeout(e.ht)), qi["in"] && lt(qi["in"]), qi.Ks = qi.Vs = qi.qt = qi.Ti = qi["in"] = null, qi.Ps = null
        }, Rs: function () {
            return qi.Fs[qi.Vs.webix_drag]
        }, top: 0, left: 0, Zs: function (t) {
            var i = qi, e = i.Ls, s = i.Ps;
            if ("undefined" != typeof s.x_offset && "undefined" != typeof s.y_offset) return null;
            if (s.x_offset = s.y_offset = 0, Y.pointerevents) {
                var n = qi.Rs();
                if (n.Bs && n !== this) {
                    var h = n.Bs(e, t);
                    h && (s.x_offset = h.x - e.x, s.y_offset = h.y - e.y)
                }
            }
        }, $dragPos: function (t, i) {
            var e = this.Fs[qi.Vs.webix_drag];
            if (e.$dragPos && e != this) return e.$dragPos(t, i, qi.Ti), !0
        }, $dragIn: function (t, i, e) {
            var s = this.Fs[i.webix_drop];
            return s.$dragIn && s != this ? s.$dragIn(t, i, e) : (i.className = i.className + " webix_drop_zone", i)
        }, $dragOut: function (t, i, e, s) {
            var n = this.Fs[i.webix_drop];
            return n.$dragOut && n != this ? n.$dragOut(t, i, e, s) : (i.className = i.className.replace("webix_drop_zone", ""), null)
        }, $drop: function (t, i, e) {
            var s = this.Fs[i.webix_drop];
            if (qi.Ps.from = qi.getMaster(t), s.$drop && s != this) return s.$drop(t, i, e);
            i.appendChild(t)
        }, $drag: function (t, i) {
            var e = this.Fs[t.webix_drag];
            return e.$drag && e != this ? e.$drag(t, i) : "<div style='" + t.style.cssText + "'>" + t.innerHTML + "</div>"
        }
    };
    I("onLongTouch", function (t) {
        qi.Vs && !qi.qs && qi.Hs(t)
    });
    var Gi = {
        move_setter: function (t) {
            return t && qi.addDrag(this.en ? this.en : this.$view, this), t
        }, $dragCreate: function (t, i) {
            if (this.config.move) {
                var e = _t(t), s = mt(i);
                return qi.top = e.y - s.y, qi.left = e.x - s.x, C(this.Tt)
            }
        }, $dragDestroy: function (t, i) {
            this.B && (this.B.top = parseInt(i.style.top, 10), this.B.left = parseInt(i.style.left, 10)), qi.top = qi.left = 0, this.callEvent("onViewMoveEnd", [])
        }, $dragPos: function (t, i) {
            this.callEvent("onViewMove", [t, i])
        }
    }, Xi = {
        sn: function (t) {
            if (t) {
                if (!this.nn) {
                    this.nn = ct("div", {"class": "webix_modal"});
                    var i = vi(this.B.zIndex);
                    this.hn = ti.Mt, ti.Mt = i, this.nn.style.zIndex = i - 1, this.Tt.style.zIndex = i, document.body.appendChild(this.nn), document.body.style.overflow = "hidden", Jt(this.nn, "click", S(this.rn, this))
                }
            } else this.nn && (lt(this.nn), this.nn = null, ti.Mt = this.hn, ti.Mt || (document.body.style.overflow = ""));
            return t
        }
    }, Ji = {
        resize_setter: function (t) {
            return t && !this.an && this.un(), t
        }, un: function () {
            if (!this.cn) {
                var t = this.Tt;
                t.firstChild && ((t = t.firstChild).style.position = "relative"), this.cn = ct("DIV", {
                    "class": "webix_resize_handle", webix_disable_drag: "true"
                }), t.appendChild(this.cn), Jt(this.cn, Y.mouse.down, this.ln, {bind: this})
            }
        }, dn: function (t, i) {
            if (!this.vn) {
                this.vn = ct("div", {"class": "webix_resize_frame"}, ""), document.body.appendChild(this.vn);
                var e = _t(this.Tt);
                this.vn.style.left = e.x + "px", this.vn.style.top = e.y + "px", this.vn.style.zIndex = vi()
            }
            this.vn.style.width = t + "px", this.vn.style.height = i + "px"
        }, ln: function () {
            this.config.resize && (xt(document.body, "webix_noselect webix_resize_cursor"), this._n = _t(this.Tt), this.pn = Kt(document.body, Y.mouse.move, this.mn, {bind: this}), this.bn = Kt(document.body, Y.mouse.up, this.gn, {bind: this}))
        }, mn: function (t) {
            if (!1 !== this._n) {
                var i = mt(t), e = {x: i.x - this._n.x, y: i.y - this._n.y};
                if (this.$resizeMove) this.$resizeMove(e); else {
                    var s = this.config, n = s.minWidth || 100, h = s.minHeight || 100;
                    e.x < n ? e.x = n : e.x > s.maxWidth && (e.x = s.maxWidth), e.y < h ? e.y = h : e.y > s.maxHeight && (e.y = s.maxHeight)
                }
                this.wn = e, this.dn(e.x, e.y)
            }
        }, gn: function () {
            this.vn && (this.vn = lt(this.vn)), yt(document.body, "webix_resize_cursor"), yt(document.body, "webix_noselect"), Zt(this.pn), Zt(this.bn), this.wn && (this.$resizeEnd ? this.$resizeEnd(this.wn) : (this.config.width = this.wn.x, this.config.height = this.wn.y, this.resize())), this._n = this.wn = !1, this.callEvent("onViewResize", [])
        }
    }, Ki = {
        name: "window",
        $init: function (t) {
            this.Tt.innerHTML = "<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>", this.Vi = this.Tt.firstChild, this.en = this.Vi.childNodes[0], this.Q = this.xn = this.Vi.childNodes[1], this.Tt.className += " webix_window", this.Tt.setAttribute("role", "dialog"), this.Tt.setAttribute("tabindex", "0"), this.yn = this.Ct = null, t.$t = {
                top: !1,
                left: !1,
                right: !1,
                bottom: !1
            }, t.id || (t.id = V()), Jt(this.Vi, "click", this.rn, {bind: this}), Jt(this.Vi, "click", function () {
                !this.B.zIndex && this.B.toFront && (this.Tt.style.zIndex = vi())
            }, {
                bind: this,
                capture: !0
            }), t.modal && (this.Mn = !0), t.close && (this.B.close = t.close), this.attachEvent("onViewMoveEnd", function () {
                this.B.position && delete this.B.position
            })
        },
        rn: function (t) {
            var i = ti.St, e = i.find(this);
            -1 == e && (e = i.length - 1), t.click_view = e
        },
        getChildViews: function () {
            return this.yn ? [this.yn, this.Ct] : [this.Ct]
        },
        zIndex_setter: function (t) {
            return this.Tt.style.zIndex = t
        },
        Ft: function () {
            this.body_setter()
        },
        At: function (t, i) {
            var e = (i = i || this.Ct) == this.Ct;
            i.destructor(), e ? this.Ct = t : this.yn = t, (e ? this.xn : this.en).appendChild(t.Tt);
            var s = t.Tt.style, n = {top: !0, left: !0, right: !0, bottom: !0}, h = "0px";
            !1 === t.config.borderless && (n = l(this.B.$t), h = "1px"), t.B.$t = n, s.borderTopWidth = s.borderBottomWidth = s.borderLeftWidth = s.borderRightWidth = h, this.resize(!0)
        },
        show: function (t, i, e) {
            if (!0 === t) {
                if (!this.B.hidden) return;
                t = null
            }
            if (!this.callEvent("onBeforeShow", arguments)) return !1;
            var s, n, h;
            if (this.B.hidden = !1, this.Tt.style.zIndex = vi(this.B.zIndex), (this.B.modal || this.Mn) && (this.sn(!0), this.Mn = null), (i = i || {}).pos || (i.pos = this.B.relative), t) {
                "object" != M(t) || t.tagName ? s = _t(t = C(t)) : t.target || t.srcElement ? (s = mt(t), n = 20, h = 5) : s = t;
                var r = Math.max(window.innerWidth || 0, document.body.offsetWidth),
                    o = Math.max(window.innerHeight || 0, document.body.offsetHeight);
                n = n || t.offsetWidth || 0, h = h || t.offsetHeight || 0;
                var a = this.re, u = s.x, c = s.y, f = 0, l = 0, d = 0, v = 0, _ = this.B.autofit;
                if (_) {
                    var p = "node" === _, m = 6, b = 6, g = 6;
                    this.B.point || (m = b = g = 0), e = "top", u = c = 0, d = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft, r - s.x - n < a[0] && "right" == i.pos && !p && (i.pos = "left"), l = "right" == i.pos ? (u = s.x + m + n, b = -h, e = "left", f = Math.round(s.y + h / 2), u - g) : "left" == i.pos ? (u = s.x - m - a[0] - 1, b = -h, e = "right", f = Math.round(s.y + h / 2), u + a[0] + 1) : (u = s.x < d ? d : r + d - s.x > a[0] ? s.x : r + d - m - a[0], l = Math.round(s.x + n / 2), Math.min(l, u + a[0] - 3 * g)), v = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop, (!a[1] || o + v - h - s.y - b > a[1] || p) && "top" != i.pos ? (c = h + s.y + b - (this.B.point ? 4 : 0), f || (e = "top", f = c - g)) : (c = s.y - b - a[1]) < 0 ? (c = 0, "top" == e && (e = !1)) : f || (e = "bottom", f = --c + a[1] + 1)
                }
                var w = i.x || 0, x = i.y || 0, y = this.Sn();
                this.$view.style.position = y ? "fixed" : "absolute", y && (c -= v, f -= v), this.setPosition(u + w, c + x), this.kn && (e && this.B.point ? this.kn(e, l + w, f + x, y) : this.Cn())
            } else this.$n(this.B.left, this.B.top);
            this.Tt.style.display = "block",
                this.Dn = 1, k(function () {
                this.Dn = 0
            }, this, [], Y.touch ? 400 : 100), this.le(), this.config.autofocus && (this.In = xi.getFocus(), xi.setFocus(this)), -1 == ti.St.find(this) && ti.St.push(this), this.callEvent("onShow", [])
        },
        Si: function (t) {
            if (!(this.B.hidden || this.B.modal || this.Dn || t && t.showpopup && (t.showpopup == this.B.id || this.getTopMenu && this.getTopMenu().B.id == t.showpopup) || ti.Mt && this.Tt.style.zIndex <= ti.Mt)) {
                if (t) {
                    var i = t.click_view;
                    if (i || 0 === i || (i = -1), ti.St.find(this) <= i) return
                }
                this.An()
            }
        },
        hidden_setter: function (t) {
            return t ? this.hide() : this.show(), !!t
        },
        hide: function () {
            var t = this.An();
            this.Fn(t)
        },
        An: function () {
            if (!this.$destructed && !this.B.hidden) {
                if (this.B.modal && this.sn(!1), this.Tn(), this.B.autofocus) {
                    var t = document.activeElement;
                    t && this.Tt && (this.Tt.contains(t) || t === document.body) && (xi.setFocus(this.In), this.In = null)
                }
                var i = ti.St.find(this);
                return -1 < i && ti.St.removeAt(i), i
            }
        },
        Tn: function () {
            "top" == this.B.position ? ji(this.Tt, {
                type: "slide",
                x: 0,
                y: -(this.ue + 20),
                duration: 300,
                callback: this.Vn,
                master: this
            }) : this.Vn()
        },
        Fn: function (t) {
            if (-1 < t) for (var i = ti.St, e = i.length - 1; t <= e; e--) i[e].Cn && i[e].An()
        },
        destructor: function () {
            this.hide(), Mi.destructor.apply(this, [])
        },
        Vn: function () {
            this.$destructed || (this.Tt.style.display = "none", this.B.hidden = !0, this.callEvent("onHide", []))
        },
        close: function () {
            this.destructor()
        },
        zn: function (t) {
            "undefined" == typeof t.borderless && (t.borderless = !0)
        },
        body_setter: function (t) {
            return "object" != M(t) && (t = {template: t}), this.zn(t), (ti.pt = this).Ct = ei.Ht(t), this.xn.appendChild(this.Ct.Tt), t
        },
        head_setter: function (t) {
            var i = this;
            if (!1 === t) return t;
            var e = "string" == typeof t;
            return e && (this.Tt.setAttribute("aria-label", t), t = {template: t}), ("template" == t.view || !t.view && t.template) && P.extend(t, {
                padding: 0,
                css: "webix_win_title",
                type: "header",
                borderless: !0
            }), e && this.config.close ? t = {
                padding: {left: Ei.inputHeight + 2, right: 2},
                cols: [t, {
                    view: "icon", icon: "wxi-close", click: function () {
                        i.hide()
                    }
                }]
            } : P.extend(t, {borderless: !0}), (ti.pt = this).yn = ei.Ht(t), this.en.appendChild(this.yn.Tt), t
        },
        getBody: function () {
            return this.Ct
        },
        getHead: function () {
            return this.yn
        },
        adjust: function () {
            return this.resize()
        },
        resizeChildren: function () {
            this.Ct && this.resize()
        },
        resize: function () {
            Fi.api.adjust.call(this), D("onResize", []), this.isVisible() && this.$n(this.B.left, this.B.top)
        },
        Sn: function () {
            if (this.B.master) {
                var t = ri(this.B.master).getTopParentView().$view;
                return t && "fixed" === t.style.position
            }
            return !1
        },
        $n: function (t, i) {
            if (this.B.position || this.Sn()) {
                this.$view.style.position = "fixed";
                var e = this.oe, s = this.ue;
                if (e <= 0 || s <= 0) return;
                var n = window.innerWidth || document.documentElement.offsetWidth,
                    h = window.innerHeight || document.documentElement.offsetHeight, r = Math.round((n - e) / 2),
                    o = Math.round((h - s) / 2);
                if ("function" == typeof this.B.position) {
                    var a = {left: r, top: o, width: e, height: s, maxWidth: n, maxHeight: h};
                    this.B.position.call(this, a), a.width == e && a.height == s || this.$setSize(a.width, a.height), this.setPosition(a.left, a.top)
                } else "top" == this.B.position && (o = ji.isSupported() ? -1 * s : 10), this.B.position || (r = this.B.left || r, o = this.B.top || o), this.setPosition(r, o);
                "top" == this.B.position && ji(this.Tt, {
                    type: "slide",
                    x: 0,
                    y: s - 2 * (this.B.padding || 0),
                    duration: 300,
                    callback: this.Hn,
                    master: this
                })
            } else this.setPosition(t, i)
        },
        Hn: function (t) {
            ji.clear(t), this.B.top = -2 * (this.B.padding || 0), this.setPosition(this.B.left, this.B.top)
        },
        setPosition: function (t, i) {
            this.Tt.style.top = i + "px", this.Tt.style.left = t + "px", this.B.left = t, this.B.top = i
        },
        $getSize: function (t, i) {
            var e = this.B.$t;
            e && (t += (e.left ? 0 : 1) + (e.right ? 0 : 1), i += (e.top ? 0 : 1) + (e.bottom ? 0 : 1)), this.B.head && (i += 1);
            var s = this.Ct.$getSize(0, 0), n = 0;
            if (this.yn) {
                var h = this.yn.$getSize(0, 0);
                h[3] == h[2] && (this.B.headHeight = h[3]), i += this.B.headHeight, n = h[0]
            }
            if (this.B.fullscreen) {
                var r = window.innerWidth || document.body.clientWidth,
                    o = window.innerHeight || document.body.clientHeight;
                return [r, r, o, o]
            }
            var a = zi.api.$getSize.call(this, 0, 0);
            return n && 1e5 < s[1] && (s[0] = Math.max(n, s[0])), a[1] = Math.min(a[1], (1e5 <= s[1] && 1e5 <= a[1] ? Math.max(s[0], a[0]) : s[1]) + t), a[3] = Math.min(a[3], (1e5 <= s[3] && 1e5 <= a[3] ? Math.max(s[2], a[2]) : s[3]) + i), a[0] = Math.min(Math.max(a[0], s[0] + t), a[1]), a[2] = Math.min(Math.max(a[2], s[2] + i), a[3]), a
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i), t = this.oe, i = this.ue, !1 === this.B.head ? (this.en.style.display = "none", this.Ct.$setSize(t, i)) : (this.yn.$setSize(t, this.B.headHeight), this.Ct.$setSize(t, i - this.B.headHeight))
        },
        $skin: function () {
            this.defaults.headHeight = Ei.barHeight
        },
        defaults: {
            top: 0,
            left: 0,
            autofit: !0,
            relative: "bottom",
            body: "",
            head: "",
            hidden: !0,
            autofocus: !0,
            minWidth: 300,
            minHeight: 200
        }
    }, Zi = {api: Ki, view: P.protoUI(Ki, zi.view, Gi, Xi, c, Ji)}, Qi = {
        defaults: {padding: "4", hidden: !0}, body_setter: function (t) {
            return t = Zi.api.body_setter.call(this, t), this.Ct.Tt.style.borderWidth = "0px", t
        }, attachTo: function (t) {
            var i;
            i = t.on_context ? t.attachEvent("onAfterContextMenu", S(this.Rn, this)) : Kt(t, "contextmenu", this.Bn, {bind: this}), this.attachEvent("onDestruct", function () {
                t.callEvent ? t.detachEvent(i) : Zt(i), t = null
            })
        }, getContext: function () {
            return this.Pn
        }, setContext: function (t) {
            this.Pn = t
        }, Bn: function (t) {
            return this.Pn = C(t || Zi.event), this.jn(t)
        }, Rn: function (t, i) {
            return this.Pn = {obj: ri(i), id: t}, this.jn(i)
        }, jn: function (t) {
            var i = this.show(t, null, !0);
            return !1 === i ? i : (D("onClick", []), bt(t))
        }, En: !0, master_setter: function (t) {
            return this.attachTo(t), null
        }
    }, te = {
        Pn: null, Nn: null, Ln: 0, init: function () {
            return null !== this.Pn || (ti.destructors.push({obj: this}), this.Pn = document.createElement("textarea"), this.Pn.className = "webix_clipbuffer", this.Pn.setAttribute("webixignore", 1), this.Pn.setAttribute("spellcheck", "false"), this.Pn.setAttribute("autocapitalize", "off"), this.Pn.setAttribute("autocorrect", "off"), this.Pn.setAttribute("autocomplete", "off"), document.body.appendChild(this.Pn), Kt(document.body, "keydown", S(function (t) {
                var i = t.keyCode, e = !(!t.ctrlKey && !t.metaKey);
                86 === i && e && (this.Pn.value = "", k(this.On, this, [t], 100))
            }, this))), this.Pn
        }, destructor: function () {
            this.Pn = null
        }, set: function (t) {
            this.init(), t = "" === t ? "\n" : t, this.Pn.value = t, this.focus()
        }, focus: function () {
            this.Un() || (this.init(), this.Pn.focus(), this.Pn.select())
        }, Un: function () {
            var t = "";
            return "undefined" != typeof window.getSelection ? t = window.getSelection().toString() : "undefined" != typeof document.selection && "Text" == document.selection.type && (t = document.selection.createRange().text), !!t
        }, On: function (t) {
            if ((t.target || t.srcElement) === this.Pn) {
                var i = this.Pn.value, e = xi.getFocus();
                !e || e.getEditor && e.getEditor() || (e.callEvent("onPaste", [i]), this.Pn.select())
            }
        }
    }, ie = {
        clipboard_setter: function (t) {
            return !0 !== t && 1 !== t || (t = "modify"), this.attachEvent("onAfterSelect", function (t) {
                var i = this.getItem(t), e = this.type.templateCopy(i);
                te.set(e, this), te.focus(), xi.setFocus(this)
            }), this.attachEvent("onPaste", function (t) {
                j(this.On[this.B.clipboard]) || this.On[this.B.clipboard].call(this, t)
            }), this.attachEvent("onFocus", function () {
                te.focus()
            }), this.attachEvent("onItemClick", function (t) {
                this.Wn && -1 === this.Wn.find(t) || (te.focus(), xi.setFocus(this))
            }), t
        }, On: {
            insert: function (t) {
                this.add({value: t})
            }, modify: function (t) {
                for (var i = this.getSelectedId(!0), e = 0; e < i.length; e++) this.getItem(i[e]).value = t, this.refresh(i[e])
            }, custom: function () {
            }
        }, templateCopy_setter: function (t) {
            this.type.templateCopy = Wt(t)
        }, type: {
            templateCopy: function (t) {
                return this.template(t)
            }
        }
    }, ee = {
        $customPrint: function (t, i) {
            if (this.Yn(t, i)) return !0;
            var e = this.qn(t), s = this.Gn(e, t);
            if (i) return s;
            var n = ct("div", {"class": "webix_ui_print"});
            n.appendChild(s), dt(n, t.docFooter, document.body), window.print(), lt(n)
        }, Yn: function (t, i) {
            if (!i && ("y" == this.config.layout || t.scroll || this.config.prerender || this.config.autoheight)) return !0;
            "x" == this.config.layout && P.extend(t || {}, {xCount: this.count(), nobreaks: !0}, !0)
        }, Xn: function (t) {
            if ("page" == t.fit) return Infinity;
            var i = t.size["portrait" == t.mode ? "width" : "height"];
            return Math.min(i * Y.printPPI - 2 * Y.printMargin)
        }, qn: function (t, i, e) {
            var s, n, h = this.Xn(t), r = t.xCount || this.Kn().Jn, o = [], a = [], u = 0;
            e = e || 0, i = i || [];
            for (var c = 0; c < this.data.order.length;) {
                var f = this.data.pull[this.data.order[c]];
                if (n = c - parseInt(c / r) * r, f && e <= n) {
                    if (h < (u += this.type.width) && e < n) {
                        s = a.length + e, o.push(a), c += r - a.length, a = [], u = 0;
                        continue
                    }
                    var l = this.type.template(f, this.type), d = this.Zn,
                        v = {display: "table-cell", height: this.type.height + "px", width: this.type.width + "px"};
                    a.push({
                        txt: l,
                        className: d + " " + (f.$css || ""), style: v
                    }), (c + 1) % r == 0 && (o.push(a), a = [], u = 0)
                }
                c++
            }
            return i.push(o), s && this.qn(t, i, s), i
        }, Gn: function (n, h) {
            var r = ct("div");
            return n.forEach(S(function (t, i) {
                var e = ct("table", {
                    "class": "webix_table_print " + this.$view.className,
                    style: "border-collapse:collapse"
                });
                if (t.forEach(function (t) {
                    var s = ct("tr");
                    t.forEach(function (i) {
                        var e = ct("td");
                        (i.txt && (e.innerHTML = i.txt), i.className && (e.className = i.className), i.style) && Object.keys(i.style).forEach(function (t) {
                            i.style[t] && (e.style[t] = i.style[t])
                        });
                        i.span && (1 < i.span.colspan && (e.colSpan = i.span.colspan), 1 < i.span.rowspan && (e.rowSpan = i.span.rowspan)), s.appendChild(e)
                    }), e.appendChild(s)
                }), r.appendChild(e), !h.nobreaks && i + 1 < n.length) {
                    var s = ct("DIV", {"class": "webix_print_pagebreak"});
                    r.appendChild(s)
                }
            }, this)), r
        }
    }, se = {
        scrollStep: 40, init: function () {
            this.Qn(), Y.$customScroll = !0, Y.scrollSize = 0, ti.destructors.push({
                obj: {
                    destructor: function () {
                        this.th = null
                    }
                }
            }), I("onReconstruct", se.ih), I("onResize", se.ih), I("onClick", se.ih)
        }, resize: function () {
            this.ih()
        }, eh: function (t) {
            t.et.sh = t.B.id, t.attachEvent("onAfterRender", function () {
                var t = se.nh(this), i = Math.max(t.dy - t.py, 0), e = Math.max(t.dx - t.px, 0);
                this.hh && this.rh > i ? this.hh.scrollTo(i) : this.oh && this.ah > e && this.oh.scrollTo(e), se.th == this.et && se.ih()
            }), Jt(t.et, "mouseover", se.uh), Jt(t.et, "mouseout", se.ch)
        }, enable: function (t, i) {
            if (se.Qn(), t.mapCells) return this.eh(t);
            var e = t;
            t.Q && (e = t.Q.parentNode), e.fh = i || "xy", Jt(e, "mouseover", se.uh), Jt(e, "mouseout", se.ch), Jt(e, "mousewheel", se.lh, {passive: !1}), Jt(e, "DOMMouseScroll", se.lh, {passive: !1}), this.dh(t)
        }, ih: function () {
            var t = se.th;
            t && t.vh && (se._h.call(t), se.uh.call(t))
        }, Qn: function () {
            Kt(document.body, "mousemove", function (t) {
                se.ph && se.mh(se.ph, se.ph.bh, mt(t))
            }), se.Qn = function () {
            }
        }, uh: function () {
            if (se.th = this, clearTimeout(this.gh), !this.vh && !se.ph) {
                var t = ri(this);
                if (!t || t.isEnabled()) {
                    var i;
                    if (this.sh) {
                        if (!(t = ri(this.sh))) return;
                        i = se.nh(t)
                    } else (i = {
                        dx: this.scrollWidth,
                        dy: this.scrollHeight,
                        px: this.clientWidth,
                        py: this.clientHeight
                    }).ce = i.dx > i.px && -1 != this.fh.indexOf("x"), i.ae = i.dy > i.py && -1 != this.fh.indexOf("y");
                    (this.vh = i).ce && (i.wh = se.xs(this, "x", i.dx, i.px, "width", "height"), i.xh = i.px - i.wh.offsetWidth - 4, i.yh = i.dx - i.px, se.trackBar && (i.Mh = se.Sh(this, "x"))), i.ae && (i.kh = se.xs(this, "y", i.dy, i.py, "height", "width"), i.Ch = i.py - i.kh.offsetHeight - 4, i.$h = i.dy - i.py, se.trackBar && (i.Dh = se.Sh(this, "y"))), se.Ih(this)
                }
            }
        }, Sh: function (t, i) {
            var e = ct("DIV", {webixignore: "1", "class": "webix_c_scroll_bar_" + i}, "");
            return t.appendChild(e), e
        }, mh: function (t, i, e) {
            var s = t.vh, n = t.sh;
            if (n && (n = ri(n)), s.wh == t.Ah) {
                var h = (e.x - i.x) * s.yh / s.xh;
                n ? n.oh.scrollTo(n.ah + h) : se.Fh(t, "scrollLeft", h)
            }
            if (s.kh == t.Ah) {
                var r = (e.y - i.y) * s.$h / s.Ch;
                n ? n.hh.scrollTo(n.rh + r) : se.Fh(t, "scrollTop", r)
            }
            t.bh = e, se.Ih(t)
        }, nh: function (t) {
            var i = {};
            return t.oh && t.B.scrollX && (i.dx = t.oh.getSize(), i.px = t.oh.Th || 1, i.ce = 1 < i.dx - i.px), t.hh && t.B.scrollY && (i.dy = t.hh.getSize(), i.py = t.hh.Th || 1, i.ae = 1 < i.dy - i.py), i
        }, ch: function () {
            clearTimeout(this.gh), this.gh = k(se._h, this, [], 200)
        }, Vh: function (t) {
            t && (lt(t), t.zh && (Zt(t.zh), Zt(t.Hh), Zt(t.Rh)))
        }, _h: function () {
            if (this.vh) {
                if (this.Ah) return void (this.Bh = !0);
                var t = this.vh;
                se.Vh(t.wh), se.Vh(t.kh), t.Mh && lt(t.Mh), t.Dh && lt(t.Dh), this.vh = null
            }
        }, lh: function (t) {
            var i = this.vh, e = t.wheelDelta / -40, s = !1;
            if (!e && t.detail && j(t.wheelDelta) && (e = t.detail), i) {
                t.scrolledBy || (t.scrolledBy = i.ae ? "y" : "x");
                var n = t.wheelDeltaX && Math.abs(t.wheelDeltaX) > Math.abs(t.wheelDeltaY);
                if (i.wh && ("y" !== t.scrolledBy && (t.wheelDeltaX || e) || n)) {
                    var h = t.wheelDeltaX / -40 || e;
                    s = se.Fh(this, "scrollLeft", h * se.scrollStep)
                } else !n && e && i.kh && (s = se.Fh(this, "scrollTop", e * se.scrollStep))
            }
            if (se.Ih(this), !1 !== s) return bt(t)
        }, Fh: function (t, i, e) {
            var s = t.vh, n = "scrollLeft" == i ? s.dx - s.px : s.dy - s.py, h = t[i];
            return n < h + e && (e = n - h), !(!e || h + e < 0 && 0 === h) && (Y.isIE && se.Ih(t, i, e + h), t[i] += e, !0)
        }, xs: function (t, i, e, s, n) {
            var h = ct("DIV", {webixignore: "1", "class": "webix_c_scroll_" + i}, "<div></div>");
            return h.style[n] = Math.max(s * s / e - 7, 40) + "px", h.style["height" == n ? "top" : "left"] = "0px", t.style.position = "relative", t.appendChild(h), t.zh = Kt(h, "mousedown", se.Ph(t)), t.Hh = Kt(document.body, "mouseup", S(se.jh, t)), t.Rh = Kt(document.body,
                "mouseleave", S(se.jh, t)), h
        }, Ph: function (i) {
            return function (t) {
                xt(document.body, "webix_noselect", 1), this.className += " webix_scroll_active", (se.ph = i).Ah = this, i.bh = mt(t)
            }
        }, jh: function () {
            this.Ah && (yt(document.body, "webix_noselect"), this.Ah.className = this.Ah.className.toString().replace(" webix_scroll_active", ""), this.Ah = !1, se.ph = 0, this.Bh && (se._h.call(this), this.Bh = !1))
        }, Ih: function (t, i, e) {
            var s = t.vh;
            if (s && (s.wh || s.kh)) {
                var n = t.sh, h = "scrollLeft" == i ? e : t.scrollLeft, r = n ? ri(n).ah : h, o = n ? 0 : r,
                    a = "scrollTop" == i ? e : t.scrollTop, u = n ? ri(n).rh : a, c = n ? 0 : u;
                s.wh && (s.wh.style.bottom = 1 - c + "px", s.wh.style.left = Math.round(s.xh * r / (s.dx - s.px)) + o + 1 + "px", s.Mh && (s.Mh.style.bottom = 1 - c + "px", s.Mh.style.left = o + "px")), s.kh && (s.kh.style.right = 0 - o + "px", s.kh.style.top = Math.round(s.Ch * u / (s.dy - s.py)) + c + 1 + "px", s.Dh && (s.Dh.style.right = 0 - o + "px", s.Dh.style.top = c + "px"))
            }
        }, dh: function (t) {
            var i = this;
            t.attachEvent && t.attachEvent("onViewShow", function () {
                return i.Eh(t)
            }), t.data && t.data.attachEvent && t.data.attachEvent("onStoreUpdated", function () {
                return i.Eh(t)
            })
        }, Eh: function (t) {
            var i = se.th;
            i && t.$view.contains(i) ? se.ih() : se._h.call(t.$view)
        }
    }, ne = {
        addCss: function (t, i, e) {
            if (!this.addRowCss && !e && !this.hasCss(t, i)) {
                var s = this.getItemNode(t);
                s && (s.className += " " + i, e = !0)
            }
            return this.data.addMark(t, i, 1, 1, e)
        }, removeCss: function (t, i, e) {
            if (!this.addRowCss && !e && this.hasCss(t, i)) {
                var s = this.getItemNode(t);
                s && (s.className = s.className.replace(i, "").replace("  ", " "), e = !0)
            }
            return this.data.removeMark(t, i, 1, e)
        }, hasCss: function (t, i) {
            return this.data.getMark(t, i)
        }, clearCss: function (t, i) {
            return this.data.clearMark(t, 1, i)
        }
    }, he = {
        copy: function (t, i, e, s) {
            var n = (s = s || {}).newId || t;
            e = e || this;
            var h = this.getItem(t);
            return e && (h = e.Nh(h)), e.data.add(e.Nh(h, n), i, s.parent || 0)
        }, Lh: function (t, i, e) {
            if (i && t) {
                var s = this.getIndexById(t);
                return s + (e == this && e.getIndexById(i) < s ? 0 : 1)
            }
        }, move: function (t, i, e, s) {
            var n = (s = s || {}).newId || t;
            if ((e = e || this).data, e.data) {
                if (b(t)) {
                    3 < t.length && (this.$blockRender = e.$blockRender = !0);
                    for (var h = 0; h < t.length; h++) {
                        var r = this.move(t[h], i, e, s);
                        i = e.Lh(r, t[h + 1], this)
                    }
                    return this.$blockRender = e.$blockRender = !1, void (3 < t.length && (this.refresh(), e != this && e.refresh()))
                }
                var o = t, a = this.getItem(t);
                return e && e != this ? (o = e.data.add(e.Nh(a, n), i, s.parent || 0), this.data.remove(t)) : (i < 0 && (i = this.data.order.length - 1), this.data.move(this.getIndexById(t), i), this.data.callEvent("onDataMove", [t, i, null, this.data.order[i + 1]])), o
            }
        }, moveUp: function (t, i) {
            var e = this.getIndexById(t) - (i || 1);
            return this.move(t, e < 0 ? 0 : e)
        }, moveDown: function (t, i) {
            return this.moveUp(t, -1 * (i || 1))
        }, moveTop: function (t) {
            return this.move(t, 0)
        }, moveBottom: function (t) {
            return this.move(t, this.data.count() - 1)
        }, Nh: function (t, i) {
            var e = P.extend({}, t);
            return e.id = !i || this.data.pull[i] ? V() : i, e.$template = null, this.B.externalData && (e = this.B.externalData.call(this, e, i, t)), e
        }
    }, re = {
        isEmail: function (t) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test((t || "").toString())
        }, isNumber: function (t) {
            return parseFloat(t) == t
        }, isChecked: function (t) {
            return !!t || "0" === t
        }, isNotEmpty: function (t) {
            return 0 === t || t
        }
    }, oe = {
        $init: function () {
            this.xt && this.attachEvent("onChange", this.clearValidation)
        }, clearValidation: function () {
            if (this.elements) for (var t in this.elements) this.Oh(t)
        }, validate: function (t, i) {
            this.callEvent, this.callEvent("onBeforeValidate", []);
            var e = this.Uh = {}, s = !0, n = this.B.rules, h = this.isVisible && !this.isVisible(), r = t && t.hidden,
                o = t && t.disabled, a = {}, u = {};
            for (var c in this.elements) {
                var f = this.elements[c].config.name;
                (h || this.elements[c].isVisible() || r) && (this.elements[c].isEnabled() || o) ? a[f] = this.elements[c] : u[f] = !0
            }
            if ((n || a) && !i && this.getValues && (i = this.getValues()), n) {
                n.$obj && (s = this.Wh(n.$obj, i, i, "") && s);
                var l = n.$all, d = i;
                if (this.B.complexData && (d = Rt.collapseNames(i, "", {}, function (t) {
                    return !n[t]
                })), l) for (var v in i) if (!u[v]) {
                    var _ = this.Wh(l, d[v], i, v);
                    _ || (e[v] = !0), s = _ && s
                }
                for (var p in n) if (!u[p] && 0 !== p.indexOf("$") && !e[p]) {
                    n[p];
                    var m = this.Wh(n[p], d[p], i, p);
                    m || (e[p] = !0), s = m && s
                }
            }
            if (a) for (var b in a) if (!e[b]) {
                var g = a[b];
                if (g.validate) {
                    var w = g.validate();
                    s = w && s, w || (e[b] = !0)
                } else {
                    var x = g.B;
                    if (x) {
                        var y = x.validate;
                        if (!y && x.required && (y = n.isNotEmpty), y) {
                            var M = this.Wh(y, i[b], i, b);
                            M || (
                                e[b] = !0), s = M && s
                        }
                    }
                }
            }
            return this.callEvent("onAfterValidation", [s, this.Uh]), s
        }, Wh: function (t, i, e, s) {
            return "string" == typeof t && (t = re[t]), t.call(this, i, e, s) ? (this.callEvent("onValidationSuccess", [s, e]) && this.Oh && this.Oh(s), !0) : (this.callEvent("onValidationError", [s, e]) && this.Yh && this.Yh(s), !1)
        }
    }, ae = {};

    function ue(t, i) {
        if ("object" == M(t) && t.B && (t = t.B.id), ae[t] || i) return ae[t];
        "string" != typeof t && "number" != typeof t || (t = {master: ri(t)});
        var e = new ce(t), s = e.B.master.B.id;
        return ae[s] = e, ri(s).attachEvent("onDestruct", function () {
            ae[this.B.id] = null, delete ae[this.B.id]
        }), e
    }

    t("dp", ue), ue.$$ = function (t) {
        return ae[t]
    };
    var ce = P.proto({
        defaults: {
            autoupdate: !0,
            updateFromResponse: !1,
            mode: "post",
            operationName: "webix_operation",
            trackMove: !1
        }, $init: function () {
            this.reset(), this.qh = !1, this.name = "DataProcessor", this.$ready.push(this.Gh)
        }, reset: function () {
            this.Xh = []
        }, url_setter: function (t) {
            var i = "";
            if ("string" == typeof t) {
                var e = t.split("->");
                1 < e.length && (t = e[1], i = e[0])
            } else t && t.mode && (i = t.mode, t = t.url);
            return i ? O(i, t) : t
        }, master_setter: function (t) {
            var i = t;
            return "DataStore" != t.name && (i = t.data), this.B.store = i, t
        }, Jh: function (t) {
            var i = this.Kh;
            this.Kh = [], t();
            var e = Promise.all(this.Kh);
            return (this.Kh = i) && i.push(e), e
        }, Gh: function () {
            var t = this.B.store;
            t && (t.attachEvent("onStoreUpdated", S(this.Zh, this)), t.attachEvent("onDataMove", S(this.Qh, this)))
        }, ignore: function (t, i) {
            var e = this.qh;
            this.qh = !0, t.call(i || this), this.qh = e
        }, off: function () {
            this.qh = !0
        }, on: function () {
            this.qh = !1
        }, ir: function (t) {
            var i = {};
            for (var e in t) 0 !== e.indexOf("$") && (i[e] = t[e]);
            return i
        }, save: function (t, i, e) {
            return i = i || "update", this.sr(t, e, i, !0)
        }, sr: function (t, i, e, s) {
            if ("object" == M(t) && (t = t.toString()), t && !0 !== this.qh && e && "paint" != e) {
                var n = this.B.store;
                n && (i = i || this.B.store.getItem(t), n.nr && (i = n.nr(i)));
                var h = {id: t, data: this.ir(i), operation: e};
                if (j(i.$parent) || (h.data.parent = i.$parent), "delete" != h.operation) {
                    var r = this.B.master;
                    r && r.data && r.data.getMark && r.data.getMark(t, "webix_invalid") && (h.hr = !0), this.validate(null, h.data) || (h.hr = !0)
                }
                return this.rr(h) && this.Xh.push(h), this.B.autoupdate || s ? this.or(t) : void 0
            }
        }, Qh: function (t, i, e, s) {
            if (this.B.trackMove) {
                var n = _(this.B.store.getItem(t));
                n.webix_move_index = i, n.webix_move_id = s, n.webix_move_parent = e, this.sr(t, n, "order")
            }
        }, Zh: function (t, i, e) {
            switch (e) {
                case"save":
                case"update":
                    e = "update";
                    break;
                case"add":
                    e = "insert";
                    break;
                case"delete":
                    e = "delete";
                    break;
                default:
                    return !0
            }
            return this.sr(t, i, e)
        }, rr: function (t) {
            for (var i = 0; i < this.Xh.length; i++) {
                var e = this.Xh[i];
                if (e.id == t.id && !e.ar) return "delete" == t.operation && ("insert" == e.operation ? this.Xh.splice(i, 1) : e.operation = "delete"), e.data = t.data, e.hr = t.hr, !1
            }
            return !0
        }, send: function () {
            return this.or()
        }, or: function (t) {
            if (this.B.url) {
                for (var i, e = this.Xh, s = [], n = this.B.url, h = 0; h < e.length; h++) {
                    var r = e[h];
                    if (!r.ar && !r.hr) {
                        var o = r.id;
                        if (this.B.autoupdate || !t || t == o) {
                            var a = r.operation, u = O.$parse("object" != M(n) || n.$proxy ? n : n[a]),
                                c = u && (u.$proxy || "function" == typeof u);
                            if (u) {
                                var f = this.B.store;
                                if (f && f.ur && f.ur(r.data), this.callEvent("onBefore" + a, [o, r])) {
                                    if (r.ar = !0, !this.callEvent("onBeforeDataSend", [r])) return;
                                    r.data = this.cr(r.data);
                                    var l = void 0;
                                    u.$proxy ? (u.save && (l = u.save(this.config.master, r, this)), s.push(r)) : ("insert" == a && delete r.data.id, l = c ? u.call(this.config.master, r.id, r.operation, r.data) : (r.data[this.B.operationName] = a, this.w(u, r.data, this.B.mode))), l && (l = this.fr(l, {
                                        id: r.id,
                                        status: r.operation
                                    }), t && o === t && (i = l)), this.callEvent("onAfterDataSend", [r])
                                }
                            }
                        }
                    }
                }
                if (n.$proxy && n.saveAll && s.length) {
                    var d = n.saveAll(this.config.master, s, this);
                    d && (d = this.fr(d, null), i || (i = d))
                }
                return i
            }
        }, fr: function (t, e) {
            var s = this;
            if (t) return t.then || (t = m.resolve(t)), t = t.then(function (t) {
                var i;
                if (t && "function" == typeof t.json && (t = t.json()), !(i = null === e ? s.lr(t) : s.lr(e, "", t, -1))) throw i;
                return i
            }, function (t) {
                throw s.dr(e, "", null, t), t
            }), this.Kh && this.Kh.push(t), t
        }, cr: function (t) {
            var i = {};
            for (var e in t) 0 !== e.indexOf("$") && (i[e] = t[e]);
            return i
        }, w: function (t, i, e) {
            return z()[e](t, i)
        }, attachProgress: function (t, i, e) {
            this.attachEvent("onBeforeDataSend", t), this.attachEvent("onAfterSync", i), this.attachEvent("onAfterSaveError", e), this.attachEvent("onLoadError", e)
        },
        dr: function (t, i, e, s) {
            t ? this.vr(!0, t.id, !1, t.status, !1, {
                text: i,
                data: e,
                loader: s
            }) : (this.callEvent("onLoadError", arguments), D("onLoadError", [i, e, s, this]))
        }, vr: function (t, i, e, s, n, h) {
            var r = this.B.master, o = this.getItemState(i);
            if (o.ar = !1, !t) {
                this.setItemState(i, !1);
                var a = this.B.store;
                return a && a.exists(i) && (e && i != e && a.changeId(i, e), n && "delete" != s && this.B.updateFromResponse && this.ignore(function () {
                    a.updateItem(e || i, n)
                })), this.B.undoOnError && r.B.undo && r.removeUndo(e || i), this.callEvent("onAfterSave", [n, i, h]), this.callEvent("onAfter" + s, [n, i, h]), n || {}
            }
            this.callEvent("onBeforeSaveError", [i, s, n, h]) && (o.hr = !0, this.B.undoOnError && r.B.undo && (this.ignore(function () {
                r.undo(i)
            }), this.setItemState(i, !1)), this.callEvent("onAfterSaveError", [i, s, n, h]))
        }, processResult: function (t, i, e) {
            var s = i && ("error" == i.status || "invalid" == i.status), n = !!i && (i.newid || i.id);
            return this.vr(s, t.id, n, t.status, i, e)
        }, lr: function (t, i, e, s) {
            var n, h = this;
            if (this.callEvent("onBeforeSync", [t, i, e, s]), b(t)) n = [], t.forEach(function (t) {
                n.push(h.processResult(t, t, {}))
            }); else if (-1 === s) n = this.processResult(t, e, {}); else {
                var r, o = this.B.url;
                if (o.$proxy && o.result) n = o.result(t, this.B.master, this, i, e, s) || {}; else i && (r = e.json(), i && null == r && (r = {status: "error"})), n = this.processResult(t, r, {
                    text: i,
                    data: e,
                    loader: s
                })
            }
            return this.callEvent("onAfterSync", [t, i, e, s]), n
        }, escape: function (t) {
            return this.B.escape ? this.B.escape(t) : encodeURIComponent(t)
        }, getState: function () {
            if (!this.Xh.length) return !1;
            for (var t = this.Xh.length - 1; 0 <= t; t--) if (this.Xh[t].ar) return "saving";
            return !0
        }, getItemState: function (t) {
            var i = this._r(t);
            return this.Xh[i] || null
        }, setItemState: function (t, i) {
            if (i) this.sr(t, null, "update"); else {
                var e = this._r(t);
                -1 < e && this.Xh.splice(e, 1)
            }
        }, _r: function (t) {
            for (var i = -1, e = 0; e < this.Xh.length; e++) if (this.Xh[e].id == t) {
                i = e;
                break
            }
            return i
        }
    }, yi, c, oe);

    function fe() {
        this.name = "DataStore", P.extend(this, c), this.setDriver("json"), this.pull = {}, this.order = g(), this.pr = {}
    }

    fe.prototype = {
        setDriver: function (t) {
            Vt[t], this.driver = Vt[t]
        }, G: function (t) {
            this.callEvent("onParse", [this.driver, t]), this.mr && this.filter();
            var i = this.driver.getInfo(t);
            i.config && this.callEvent("onServerConfig", [i.config]);
            var e = this.driver.getOptions(t);
            e && this.callEvent("onServerOptions", [e]);
            var s = this.driver.getRecords(t);
            this.gr(i, s), this.wr && this.xr && !this.yr && this.xr(this.wr), this.Mr && (this.blockEvent(), this.sort(this.Mr), this.unblockEvent()), this.callEvent("onStoreLoad", [this.driver, t]), this.refresh()
        }, gr: function (t, i) {
            var e = t.from, s = !0, n = !1;
            if (!e && 0 !== e && this.order[0]) {
                if (this.Sr) {
                    n = {};
                    for (var h = 0; h < this.order.length; h++) n[this.order[h]] = !0
                }
                s = !1, e = this.order.length
            } else e = 1 * (e || 0);
            for (var r = 0, o = 0; o < i.length; o++) {
                var a = this.driver.getDetails(i[o]), u = this.id(a);
                this.pull[u] ? s && this.order[r + e] && r++ : (this.order[r + e] = u, r++), this.pull[u] ? (P.extend(this.pull[u], a, !0), this.kr && this.kr(this.pull[u]), n && delete n[u]) : (this.pull[u] = a, this.Cr && this.Cr(a))
            }
            if (n) {
                for (var c in this.blockEvent(), n) this.remove(c);
                this.unblockEvent()
            }
            var f = 1 * t.size;
            f && (this.order[f - 1] || (this.order[f - 1] = undefined), f < this.order.length && (this.order = this.order.slice(0, f)))
        }, id: function (t) {
            return t.id || (t.id = V())
        }, changeId: function (t, i) {
            t != i && (this.pull[t] && (this.pull[i] = this.pull[t]), this.pull[i].id = i, this.order[this.order.find(t)] = i, this.mr && (this.mr[this.mr.find(t)] = i), this.pr[t] && (this.pr[i] = this.pr[t], delete this.pr[t]), this.callEvent("onIdChange", [t, i]), this.Dr && this.Dr(t, i), delete this.pull[t])
        }, getItem: function (t) {
            return this.pull[t]
        }, updateItem: function (t, i, e) {
            "object" === M(t) && (t = t.toString());
            var s = this.getItem(t), n = null, h = this.hasEvent("onDataUpdate");
            !i || !i.id || i.id, j(i) || s === i || (h && (n = _(s)), t = s.id, P.extend(s, i, !0), s.id = t), this.kr && this.kr(s), this.callEvent("onStoreUpdated", [t, s, e || "update"]), h && this.callEvent("onDataUpdate", [t, s, n])
        }, refresh: function (t) {
            this.Ir || (t ? this.exists(t) && this.callEvent("onStoreUpdated", [t, this.pull[t], "paint"]) : this.callEvent("onStoreUpdated", [null, null, null]))
        }, silent: function (t, i) {
            this.Ir = !0, t.call(i || this), this.Ir = !1
        }, getRange: function (t, i) {
            if (t = t ? this.getIndexById(t) : this.$min || this.startOffset || 0, i ? i = this.getIndexById(i) : (
                i = 0 === this.$max ? 0 : Math.min(this.$max ? this.$max - 1 : this.endOffset || Infinity, this.count() - 1)) < 0 && (i = 0), i < t) {
                var e = i;
                i = t, t = e
            }
            return this.getIndexRange(t, i)
        }, getIndexRange: function (t, i) {
            i = Math.min(0 === i ? 0 : i || Infinity, this.count() - 1);
            for (var e = g(), s = t || 0; s <= i; s++) e.push(this.getItem(this.order[s]));
            return e
        }, count: function () {
            return this.order.length
        }, exists: function (t) {
            return !!this.pull[t]
        }, move: function (t, i) {
            if (t != i) {
                var e = this.getIdByIndex(t), s = this.getItem(e);
                this.mr && this.Ar(this.mr, 0, 0, this.getIdByIndex(t), this.getIdByIndex(i)), this.Ar(this.order, t, i), this.callEvent("onStoreUpdated", [e, s, "move"])
            }
        }, Ar: function (t, i, e, s, n) {
            if (s || n) {
                i = e = -1;
                for (var h = 0; h < t.length; h++) t[h] == s && i < 0 && (i = h), t[h] == n && e < 0 && (e = h)
            }
            var r = t[i];
            t.removeAt(i), t.insertAt(r, Math.min(t.length, e))
        }, scheme: function (t) {
            for (var i in this.Fr = {}, this.ur = t.$save, this.Cr = t.$init || t.$change, this.kr = t.$update || t.$change, this.nr = t.$serialize, this.wr = t.$group, this.Mr = t.$sort, this.Tr = t.$export, t) "$" != i.substr(0, 1) && (this.Fr[i] = t[i])
        }, importData: function (t, i) {
            var e = t ? t.data || t : [];
            if (this.mr = null, "function" == typeof e.serialize) {
                if (this.order = g([].concat(e.order)), this.Vr) {
                    this.Vr = !1;
                    var s = this.pull;
                    for (var n in this.pull = {}, e.pull) {
                        var h = s[n];
                        this.pull[n] = _(e.pull[n]), h && h.open && (this.pull[n].open = !0)
                    }
                } else for (var r in this.pull = {}, e.pull) this.pull[r] = e.pull[r];
                e.branch && this.branch && (this.branch = _(e.branch), this.zr = null)
            } else {
                var o, a;
                if (this.order = g(), this.pull = {}, b(t)) for (var u = 0; u < t.length; u++) "object" == M(a = o = t[u]) ? a.id = a.id || V() : a = {
                    id: o,
                    value: o
                }, this.order.push(a.id), this.Cr && this.Cr(a), this.pull[a.id] = a; else for (var c in e) this.order.push(c), this.pull[c] = {
                    id: c,
                    value: e[c]
                }
            }
            if (this.Hr && !e.branch) {
                this.branch = {0: []}, this.Rr || this.Br("data");
                for (var f = 0; f < this.order.length; f++) {
                    var l = this.order[f];
                    this.Hr(this.pull[l], 0, 0, !1)
                }
            }
            this.callEvent("onStoreLoad", []), i || this.callEvent("onStoreUpdated", [])
        }, sync: function (s, n, h) {
            this.unsync();
            var t = M(s);
            if ("string" == t && (s = ri(s)), "function" != t && "object" != t && (h = n, n = null), "DataStore" != s.name && "TreeStore" != s.name) {
                if (!s.data || "DataStore" !== s.data.name && "TreeStore" !== s.data.name) return this.Pr = s, D("onSyncUnknown", [this, s, n]);
                s = s.data
            }
            var i = S(function (t, i, e) {
                this.jr || (n && this.branch && (this.Vr = !0), this.importData(s, !0), n && this.silent(n), this.Gi && this.Gi(), t && i && e || (this.pr = {}), "delete" == e && this.pr[t] && delete this.pr[t], this.callEvent("onSyncApply", []), h ? h = !1 : this.refresh())
            }, this);
            this.Er = [s.attachEvent("onStoreUpdated", i), s.attachEvent("onIdChange", S(function (t, i) {
                this.changeId(t, i), this.refresh(i)
            }, this))], this.Pr = s, this.Nr = this.attachEvent("onStoreUpdated", function (t, i, e) {
                "update" != e && "save" != e || (this.jr = 1, s.updateItem(t, i), this.jr = 0)
            }), i()
        }, unsync: function () {
            if (this.Pr) {
                var t = this.Pr;
                if ("DataStore" == t.name || "TreeStore" == t.name || t.data && "DataStore" == t.data.name && "TreeStore" == t.data.name) {
                    for (var i = 0; i < this.Er.length; i++) t.detachEvent(this.Er[i]);
                    this.detachEvent(this.Nr)
                } else D("onUnSyncUnknown", [this, t]);
                this.Pr = null
            }
        }, destructor: function () {
            this.unsync(), this.pull = this.order = this.pr = null, this.h = this.o = {}
        }, add: function (t, i) {
            if (this.Fr) for (var e in this.Fr) j(t[e]) && (t[e] = this.Fr[e]);
            this.Cr && this.Cr(t);
            var s = this.id(t), n = arguments[2] || this.order, h = n.length;
            if ((j(i) || i < 0) && (i = h), h < i && (i = Math.min(n.length, i)), !1 === this.callEvent("onBeforeAdd", [s, t, i])) return !1;
            if (this.exists(s), this.pull[s] = t, n.insertAt(s, i), this.mr) {
                var r = this.mr.length;
                this.order.length && (r = Math.min(i || 0, r)), this.mr.insertAt(s, r)
            }
            return this.callEvent("onStoreUpdated", [s, t, "add"]), this.callEvent("onAfterAdd", [s, i]), t.id
        }, remove: function (t) {
            if (b(t)) for (var i = 0; i < t.length; i++) this.remove(t[i]); else {
                if (!1 === this.callEvent("onBeforeDelete", [t])) return !1;
                this.exists(t);
                var e = this.getItem(t);
                this.order.remove(t), this.mr && this.mr.remove(t), delete this.pull[t], this.pr[t] && delete this.pr[t], this.callEvent("onStoreUpdated", [t, e, "delete"]), this.callEvent("onAfterDelete", [t])
            }
        }, clearAll: function (t) {
            this.pull = {}, this.pr = {}, this.order = g(), this.mr = null, t || (this.url = null), this.callEvent("onClearAll", [t]), this.refresh()
        }, getIdByIndex: function (t) {
            return this.order[t]
        },
        getIndexById: function (t) {
            return this.pull[t] ? this.order.find(t) : -1
        }, getNextId: function (t, i) {
            return this.order[this.getIndexById(t) + (i || 1)]
        }, getFirstId: function () {
            return this.order[0]
        }, getLastId: function () {
            return this.order[this.order.length - 1]
        }, getPrevId: function (t, i) {
            return this.order[this.getIndexById(t) - (i || 1)]
        }, sort: function (t, i, e) {
            var s = t;
            "function" == typeof t ? s = {as: t, dir: i} : "string" == typeof t && (s = {
                by: t,
                dir: i,
                as: e
            }), "string" == typeof s.by && (s.by = s.by.replace(/#/g, ""));
            var n = [s.by, s.dir, s.as, s];
            this.callEvent("onBeforeSort", n) && (this.order = this.Lr(s, this.order), this.mr && this.mr.length != this.order.length && (this.mr = this.Lr(s, this.mr)), this.refresh(), this.callEvent("onAfterSort", n))
        }, Lr: function (t, i) {
            var e = this.sorting.create(t);
            if (this.order.length) {
                for (var s = i.splice(0, this.$freeze), n = g(), h = i.length - 1; 0 <= h; h--) n[h] = this.pull[i[h]];
                return n.sort(e), g(s.concat(n.map(function (t) {
                    return this.id(t)
                }, this)))
            }
            return i
        }, Or: function (t) {
            this.mr && !t && (this.order = this.mr, delete this.mr)
        }, Ur: function (t, i, e) {
            for (var s = g(), n = this.$freeze || 0, h = 0; h < this.order.length; h++) {
                var r = this.order[h];
                (h < n || t(this.getItem(r), i)) && s.push(r)
            }
            e && this.mr || (this.mr = this.order), this.order = s
        }, find: function (t, i) {
            var e = [];
            for (var s in this.pull) {
                var n = this.pull[s], h = !0;
                if ("object" == M(t)) {
                    for (var r in t) if (n[r] != t[r]) {
                        h = !1;
                        break
                    }
                } else t(n) || (h = !1);
                if (h && e.push(n), i && e.length) return e[0]
            }
            return i ? null : e
        }, filter: function (e, i, t) {
            if ((e || this.mr || this.zr) && this.callEvent("onBeforeFilter", [e, i]) && (this.Or(t), this.order.length)) {
                if (e) {
                    var s = e;
                    i = i || "", "string" == typeof e && (e = e.replace(/#/g, ""), s = "function" == typeof i ? function (t) {
                        return i(t[e])
                    } : (i = i.toString().toLowerCase(), function (t, i) {
                        return -1 != (t[e] || "").toString().toLowerCase().indexOf(i)
                    })), this.Ur(s, i, t, this.Wr)
                }
                this.refresh(), this.callEvent("onAfterFilter", [])
            }
        }, Yr: function () {
            for (var t = [], i = this.order.length - 1; 0 <= i; i--) t[i] = this.pull[this.order[i]];
            return t
        }, each: function (t, i, e) {
            var s = this.order;
            e && (s = this.mr || s);
            for (var n = 0; n < s.length; n++) s[n] && t.call(i || this, this.getItem(s[n]), n)
        }, qr: function (t, i) {
            return function () {
                return t[i].apply(t, arguments)
            }
        }, provideApi: function (t, i) {
            i && this.mapEvent({
                onbeforesort: t,
                onaftersort: t,
                onbeforeadd: t,
                onafteradd: t,
                onbeforedelete: t,
                onafterdelete: t,
                ondataupdate: t
            });
            for (var e = ["sort", "add", "remove", "exists", "getIdByIndex", "getIndexById", "getItem", "updateItem", "refresh", "count", "filter", "find", "getNextId", "getPrevId", "clearAll", "getFirstId", "getLastId", "serialize", "sync"], s = 0; s < e.length; s++) t[e[s]] = this.qr(this, e[s])
        }, addMark: function (t, i, e, s, n) {
            var h = this.pr[t] || {};
            if (!(this.pr[t] = h)[i]) {
                if (h[i] = s || !0, e) {
                    var r = h.$css || "";
                    h.$css = r + " " + i
                }
                n || this.refresh(t)
            }
            return h[i]
        }, removeMark: function (t, i, e, s) {
            var n = this.pr[t];
            if (n) {
                if (n[i] && delete n[i], e) {
                    var h = n.$css;
                    h && (n.$css = h.replace(i, "").replace("  ", " "))
                }
                s || this.refresh(t)
            }
        }, getMark: function (t, i) {
            var e = this.pr[t];
            return !!e && e[i]
        }, clearMark: function (t, i, e) {
            for (var s in this.pr) {
                var n = this.pr[s];
                n[t] && (delete n[t], i && n.$css && (n.$css = n.$css.replace(t, "").replace("  ", " ")), e || this.refresh(s))
            }
        }, serialize: function (t) {
            var i = this.order;
            t && this.mr && (i = this.mr);
            for (var e = [], s = 0; s < i.length; s++) {
                var n = this.pull[i[s]];
                this.nr && !1 === (n = this.nr(n)) || e.push(n)
            }
            return e
        }, sorting: {
            create: function (t) {
                return this.Gr(t.dir, this.Xr(t.by, t.as))
            }, as: {
                server: function () {
                    return !1
                }, date: function (t, i) {
                    return t -= 0, i -= 0, isNaN(i) ? 1 : isNaN(t) ? -1 : i < t ? 1 : t < i ? -1 : 0
                }, "int": function (t, i) {
                    return t *= 1, i *= 1, isNaN(i) ? 1 : isNaN(t) ? -1 : i < t ? 1 : t < i ? -1 : 0
                }, string_strict: function (t, i) {
                    return i ? t ? (t = t.toString(), (i = i.toString()) < t ? 1 : t < i ? -1 : 0) : -1 : 1
                }, string: function (t, i) {
                    return i ? t ? (t = t.toString().toLowerCase(), (i = i.toString().toLowerCase()) < t ? 1 : t < i ? -1 : 0) : -1 : 1
                }, raw: function (t, i) {
                    return i < t ? 1 : t < i ? -1 : 0
                }
            }, Xr: function (e, s) {
                return e ? ("function" != typeof s && (s = this.as[s || "string"]), function (t, i) {
                    return s(t[e], i[e])
                }) : s
            }, Gr: function (t, e) {
                return "asc" != t && t ? function (t, i) {
                    return -1 * e(t, i)
                } : e
            }
        }
    };
    var le = P.proto({
        $init: function (t) {
            t = t || "", this.Jr = {}, this.W = 1, this.data = new fe, this.data.attachEvent("onClearAll", S(this.Kr, this)), this.data.attachEvent("onServerConfig", S(this.Zr, this)), this.attachEvent(
                "onDestruct", this.Kr), this.data.feed = this.Qr, this.data.owner = t.id
        }, Qr: function (t, i, e, s) {
            return this.io ? (s = m.defer(), this.io = [t, i, e, s], s) : (this.io = !0, this.Jr.from = t, this.Jr.count = i, this.eo.call(this, t, i, e, !1, !1, s))
        }, eo: function (t, i, e, s, n, h) {
            var r = this, o = null;
            if (s = s || this.data.url, t < 0 && (t = 0), n || (n = {
                start: t,
                count: i
            }), this.count() && (n["continue"] = "true"), this.getState && (o = this.getState()), s && "string" != typeof s) return o && (o.sort && (n.sort = o.sort), o.filter && (n.filter = o.filter)), this.load(s, 0, n).then(function (t) {
                return r.so(t, e, h)
            }, function () {
                return r.no()
            });
            s += -1 == s.indexOf("?") ? "?" : "&";
            var a = [];
            for (var u in n) a.push(u + "=" + n[u]);
            if (o && (o.sort && a.push("sort[" + o.sort.id + "]=" + encodeURIComponent(o.sort.dir)), o.filter)) for (var c in o.filter) {
                var f = o.filter[c];
                "object" == M(f) && (f = z().stringify(f)), a.push("filter[" + c + "]=" + encodeURIComponent(f))
            }
            return s += a.join("&"), this.Jr.url !== s ? (this.Jr.url = s, this.load(s).then(function (t) {
                return r.so(t, e, h)
            }, function () {
                return r.no()
            })) : (this.io = !1, m.reject())
        }, so: function (t, i, e) {
            var s = this;
            return k(function () {
                return s.no()
            }, "", "", 100), i && z.$callback(this, i, t), e && e.resolve(t), t
        }, no: function () {
            var t = this.io;
            this.io = !1, "object" == M(t) && this.data.feed.apply(this, t)
        }, load: function (t) {
            t = O.$parse(t);
            var i = Ht.load.apply(this, arguments);
            return this.data.url || (this.data.url = t), i
        }, loadNext: function (t, i, e, s, n) {
            var h = this.B;
            if (!h.datathrottle || n) return i || 0 === i || (i = this.count()), t || (t = h.datafetch || this.count()), this.data.url = this.data.url || s, this.callEvent("onDataRequest", [i, t, e, s]) && this.data.url ? this.data.feed.call(this, i, t, e) : m.reject();
            this.ho && window.clearTimeout(this.ho);
            var r = m.defer();
            return this.ho = k(function () {
                r.resolve(this.loadNext(t, i, e, s, !0))
            }, this, 0, h.datathrottle), r
        }, ro: function (t, i) {
            var e = this.Jr;
            return !!(this.io && e.url && e.from <= i && e.count + e.from >= t + i)
        }, removeMissed_setter: function (t) {
            return this.data.Sr = t
        }, oo: function () {
            var t = this.B.save;
            !0 === t && (t = this.B.save = this.B.url);
            var i = {master: this};
            t && t.url ? P.extend(i, t) : i.url = t, ue(i)
        }, save_setter: function (t) {
            return t && this.$ready.push(this.oo), t
        }, waitSave: function (t) {
            var i = this;
            return ue(this).Jh(function () {
                t.call(i)
            }).then(function (t) {
                return 1 == t.length ? t[0] : t
            })
        }, scheme_setter: function (t) {
            this.data.scheme(t)
        }, dataFeed_setter: function (t) {
            return t = O.$parse(t), this.data.attachEvent("onBeforeFilter", S(function (t, i) {
                var e, s = this;
                if ("function" == typeof t) return !0;
                if (this.B.dataFeed && (t || i)) {
                    t = t || "id", i && "object" == M(i) && (i = i.id);
                    var n = this.B.dataFeed;
                    if ("string" == typeof n) {
                        var h = "filter[" + t + "]=" + encodeURIComponent(i);
                        e = this.N(n + (n.indexOf("?") < 0 ? "?" : "&") + h, this.B.datatype)
                    } else {
                        var r = {};
                        r[t] = i, "function" == typeof n ? e = n.call(this, i, r) : n.$proxy && n.load && (e = n.load(this, {filter: r}))
                    }
                    return e && (e.then || (e = m.resolve(e)), e.then(function (t) {
                        s.clearAll(), s.O(t)
                    }, function (t) {
                        return s.U(t)
                    })), !1
                }
            }, this)), t
        }, q: function () {
            if (this.B.ready && !this.ao) {
                var t = v(this.B.ready, this.$scope);
                t && k(t, this, arguments), this.callEvent && k(this.callEvent, this, ["onReady", []]), this.ao = !0
            }
        }, Kr: function (t) {
            this.W++, t || (this.io = !1, this.Jr = {}, this.waitData = m.defer())
        }, Zr: function (t) {
            this.ki(t)
        }
    }, Ht), de = {
        getState: function () {
            for (var t = this.config.columns.length, i = this.config.columns, e = {
                ids: [],
                size: [],
                select: this.getSelectedId(!0),
                scroll: this.getScrollState()
            }, s = 0; s < t; s++) {
                var n = i[s];
                e.ids.push(n.id), e.size.push(n.fillspace || n.adjust ? -1 : n.width)
            }
            if (e.order = [].concat(this.uo.length ? this.uo : e.ids), this.co && (e.sort = {
                id: this.co,
                dir: this.fo
            }), this.lo && this["do"]) {
                var h = {}, r = 0;
                for (var o in this.lo) if (!this.vo[o]) {
                    var a = this.lo[o];
                    a[1].value = h[o] = a[2].getValue(a[0]), r = 1
                }
                r && (e.filter = h)
            }
            for (var u in e.hidden = [], this.vo) e.hidden.push(u);
            return e
        }, setState: function (t) {
            var i = this.config.columns;
            if (t) {
                if (this.co = null, this.blockEvent(), t.order && t.order.length && (this.uo = [].concat(t.order), this._o = [this.B.leftSplit, t.order.length - this.B.rightSplit]), t.hidden) {
                    for (var e = {}, s = 0; s < t.hidden.length; s++) e[t.hidden[s]] = !0, this.uo.length || this.hideColumn(t.hidden[s]);
                    if (this.uo.length) for (var n = 0; n < this.uo.length; n++) {
                        var h = this.uo[n];
                        !!e[h] == !this.vo[h] && this.hideColumn(h, {}, !1, !!e[h])
                    }
                }
                if (t.ids) {
                    for (var r = !1,
                             o = this.config.columns, a = 0; a < o.length; a++) o[a].id != t.ids[a] && (r = !0);
                    if (r) {
                        for (var u = 0; u < t.ids.length; u++) o[u] = this.getColumnConfig(t.ids[u]) || o[u];
                        this.refreshColumns()
                    }
                }
                if (t.size) for (var c = Math.min(t.size.length, i.length), f = 0; f < c; f++) {
                    var l = i[f];
                    l && 0 < t.size[f] && l.width != t.size[f] && (delete l.fillspace, delete l.adjust, this.po(f, t.size[f], !0))
                }
                this.unblockEvent();
                var d = !(this.B.leftSplit || this.B.rightSplit);
                if (this.mo(d), this.callEvent("onStructureUpdate", []), t.sort) {
                    var v = i[this.getColumnIndex(t.sort.id)];
                    v && this.bo(t.sort.id, t.sort.dir, v.sort)
                }
                if (t.filter) {
                    var _ = this.filterByAll;
                    for (var p in this.filterByAll = function () {
                    }, t.filter) {
                        var m = t.filter[p];
                        if (m && this.lo[p]) {
                            var b = this.lo[p];
                            b[2].setValue(b[0], m);
                            var g = b[1].contentId;
                            g && (this.go[g].value = m)
                        }
                    }
                    for (var w in this.lo) if (!t.filter[w]) {
                        var x = this.lo[w];
                        x[2].setValue(x[0], "")
                    }
                    this.filterByAll = _, this.filterByAll()
                }
                if (t.select && this.select) {
                    var y = t.select;
                    this.unselect();
                    for (var M = 0; M < y.length; M++) y[M].row && !this.exists(y[M].row) || this.wo(y[M], !0)
                }
                t.scroll && this.scrollTo(t.scroll.x, t.scroll.y)
            }
        }
    }, ve = {
        xo: function (t, i, e) {
            i || qi.addDrop(t.Vi, t, !0), e || qi.addDrag(t.Vi, t), this.attachEvent("onDragOut", function (t, i) {
                this.$dragMark(t, i)
            }), this.attachEvent("onBeforeAutoScroll", function () {
                var t = qi.getContext();
                return !(!qi.Vs || !t || t.to !== this && !this.yo)
            })
        }, drag_setter: function (t) {
            return t && (P.extend(this, qt, !0), "order" != t && "move" != t || P.extend(this, d("DragOrder"), !0), "inner" != t && "order" != t || (this.Mo = !0), this.xo(this, "source" == t, "target" == t), delete this.drag_setter), t
        }, $dragIn: function (t, i, e) {
            var s = this.locate(e) || null, n = qi.Ps;
            if ((this.Mo || n.from.Mo) && n.from !== this) return !1;
            var h = qi.getMaster(i), r = this.getItemNode(s, e) || this.Q;
            if (r == qi.Ks) return r;
            n.target = s, n.to = h, this.ht && (this.ht = window.clearTimeout(this.ht));
            var o = this.addRowCss && Y.touch && !this.B.prerender;
            return !1 === this.B.dragscroll || o || (this.ht = k(function (t, i) {
                this.So(i), this.it(t, i)
            }, this, [mt(e), s], 250)), this.$dropAllow(n, e) && this.callEvent("onBeforeDragIn", [n, e]) ? (this.$dragMark(n, e), r) : (n.to = n.target = null, this.ht && (this.ht = window.clearTimeout(this.ht)), null)
        }, $dropAllow: function () {
            return !0
        }, So: function () {
        }, ko: function (t) {
            return t && "object" === M(t) ? t.toString() : t
        }, $dragOut: function (t, i, e, s) {
            var n = (this.Tt.contains(e) ? this.locate(s) : null) || null, h = qi.Ps;
            return (h.target || "").toString() == (n || "").toString() || (this.ht && (this.ht = window.clearTimeout(this.ht)), h.target = h.to = null, this.callEvent("onDragOut", [h, s])), null
        }, $drop: function (t, i, e) {
            var s = qi.Ps;
            (s.to = this).Co(t, i, s), this.$dragMark({}, e), s.from && s.from != s.to && s.from.callEvent && !s.from.callEvent("onBeforeDropOut", [s, e]) || this.callEvent("onBeforeDrop", [s, e]) && (this.$o(s, e), this.callEvent("onAfterDrop", [s, e]))
        }, Co: function (t, i, e) {
            var s = this.ko(e.target);
            this.getBranchIndex ? e.index = s ? (e.parent = this.getParentId(s), this.getBranchIndex(s)) : -1 : e.index = s ? this.getIndexById(s) : this.count()
        }, $o: function (t) {
            if (t.from, t.from && t.from.move) {
                var i = {parent: t.parent, mode: t.pos};
                t.from.move(t.source, t.index, t.to, i)
            }
        }, Bs: function (t, i) {
            if (this.getItemNode) {
                var e = this.locate(i, !0), s = e ? this.getItemNode(e) : null;
                return s ? _t(s) : s
            }
        }, $drag: function (t, i) {
            var e = this.locate(i, !0);
            if (e) {
                var s = [e];
                if (this.getSelectedId) {
                    var n = this.getSelectedId(!0, !0);
                    if (n && 1 < n.length && -1 != x.find.call(n, e)) {
                        var h = {};
                        s = [];
                        for (var r = 0; r < n.length; r++) h[n[r]] = !0;
                        for (var o = 0; o < this.data.order.length; o++) {
                            var a = this.data.order[o];
                            h[a] && s.push(a)
                        }
                    }
                }
                var u = qi.Ps = {source: s, start: e};
                if ((u.from = this).callEvent("onBeforeDrag", [u, i])) return Ui && (Ui.Pe = null), u.html || this.$dragHTML(this.getItem(e), i, u)
            }
            return null
        }, $dragHTML: function (t, i, e) {
            var s = this.Z(t);
            return b(e.source) && 1 < e.source.length && (s = this.Do(s, e.source.length)), s
        }, Do: function (t, i) {
            var e = "<div class='webix_drag_multiple'></div>";
            return 2 < i && (e = "<div class='webix_drag_multiple_last'></div>" + e), e + (t = "<div class='webix_drag_main'>" + t + "</div>") + "<span class='webix_badge'>" + i + "</span>"
        }, $dragMark: function (t) {
            var i = null;
            return t.target && (i = this.ko(t.target)), this.Io && this.Io != i && (this.Ao([this.Io], "webix_drag_over", !0), this.Io = null), !this.Io && i ? (this.Io = i, this.Fo([i], "webix_drag_over", !0), i
            ) : !!t.to
        }, Fo: function (t, i) {
            for (var e = 0; e < t.length; e++) this.addCss(t[e], i)
        }, Ao: function (t, i) {
            for (var e = 0; e < t.length; e++) this.removeCss(t[e], i)
        }, $dropHTML: function () {
            return ""
        }, To: function (t, i) {
            var e = this.getItemNode(t);
            e ? e.parentNode.insertBefore(qi["in"][0], e) : i.children[0].appendChild(qi["in"][0])
        }
    }, _e = {
        $drag: function (t, i) {
            var e = ve.$drag.apply(this, arguments);
            if (!e) return e;
            var s = qi.Ps;
            return this.Vo && this.Vo(s), this.Mo && this.getBranchIndex && (this.zo = this.Ho ? 20 * (this.getItem(s.start).$level + 1) + 8 : 0), b(s.source) && (qi.Zs(i), this.Fo(s.source, "webix_invisible")), e
        }, $dragIn: function (t, i, e) {
            var s = ve.$dragIn.apply(this, arguments);
            if (!s) return s;
            qi["in"] || (qi["in"] = this.Ro());
            var n = qi.Ps, h = "$webix-last";
            if (n.target && (h = this.ko(n.target)), "$webix-last" != h && "$webix-drop" != h) {
                var r = {direction: this.B.layout || this.Bo || "y", x: "width", y: "height"}, o = _t(s);
                2 * (mt(e)[r.direction] - o[r.direction]) > o[r[r.direction]] && (h = this.getNextId(h) || "$webix-last")
            }
            return h == this.Po || "$webix-drop" == h || (this.Po = h, this.To(h, i)), s
        }, $dragPos: function (t) {
            if (!this.Mo) {
                var i = qi.Ps;
                return t.y += i.y_offset, void (t.x += i.x_offset)
            }
            var e = _t(this.$view);
            if ("x" == this.B.layout) if (e.x -= 12, t.y = e.y - 8, t.x = t.x - 18, t.x < e.x) t.x = e.x; else {
                var s = e.x + e.width;
                t.x > s && (t.x = s)
            } else if (e.y += (this.jo || 0) - 12, t.x = e.x + 8 + (this.zo || 0), t.y = t.y - 18, t.y < e.y) t.y = e.y; else {
                var n = e.y + e.height - (this.jo || 0);
                t.y > n && (t.y = n)
            }
        }, $dragOut: function (t, i, e) {
            return i != e && (lt(qi["in"]), this.Po = qi["in"] = null), ve.$dragOut.apply(this, arguments)
        }, Co: function (t, i, e) {
            var s = "$webix-last" == this.Po ? null : this.Po;
            this.getBranchIndex ? s ? (e.parent = this.getParentId(s), e.index = this.getBranchIndex(s), t == i && this.getParentId(e.start) == e.parent && this.getBranchIndex(e.start) < e.index && (e.index -= 1)) : e.index = -1 : (e.index = s ? this.getIndexById(s) : this.count(), e.index -= t == i && this.getIndexById(e.start) < e.index ? 1 : 0)
        }, $dragDestroy: function () {
            var t = qi.Ps;
            b(t.source) && this.Ao(t.source, "webix_invisible"), lt(qi.Ti)
        }, Ro: function () {
            var t = document.createElement("div");
            return t.className = "webix_drop_area", t.style.width = this.type.width + "px", t.style.height = this.type.height + "px", t.innerHTML = this.$dropHTML(), t.setAttribute(this.Eo, "$webix-drop"), [t]
        }, $dragMark: function () {
            return !1
        }
    };
    t("DragOrder", _e);
    var pe = {
        $init: function () {
            this.No = P.extend([], x, !0), this.Lo = -1
        }, undo_setter: function (t) {
            return t && (this.Oo(), this.Oo = function () {
            }), t
        }, Oo: function () {
            var n = this;
            this.attachEvent("onBeforeDrop", function (t) {
                if (t.from == t.to) {
                    var i = n.Uo = _(this.getItem(t.start));
                    this.data.branch ? i.$index = this.getBranchIndex(i.id) : i.$index = this.getIndexById(i.id)
                }
            }), this.data.attachEvent("onDataMove", function (t) {
                if (n.Uo && n.Uo.id == t) {
                    var i = n.Uo;
                    n.Uo = null, n.Wo(t, i, "move")
                }
            }), this.data.attachEvent("onBeforeDelete", function (t) {
                if (this.getItem(t)) {
                    var i = n.Yo = _(this.getItem(t));
                    this.branch ? (i.$index = this.getBranchIndex(t), this.branch[t] && (i.$branch = _(this.serialize(t)))) : i.$index = this.getIndexById(t)
                }
            }), this.data.attachEvent("onDataUpdate", function (t, i, e) {
                n.Wo(t + "", e, "update")
            }), this.data.attachEvent("onStoreUpdated", function (t, i, e) {
                var s = null;
                t && ("add" == e ? s = _(i) : "delete" == e && (s = n.Yo), s && n.Wo(t, s, e))
            }), this.data.attachEvent("onIdChange", function (t, i) {
                "object" == M(t) && (t = t.row);
                for (var e = 0; e < n.No.length; e++) n.No[e].id == t && (n.No[e].id = i)
            })
        }, Wo: function (t, i, e) {
            !this.qo && this.B.undo && (this.No.push({
                id: t,
                action: e,
                data: i
            }), 20 == this.No.length && this.No.splice(0, 1), this.Go || (this.Lo = this.No.length - 1))
        }, ignoreUndo: function (t, i) {
            this.qo = !0, t.call(i || this), this.qo = !1
        }, removeUndo: function (t) {
            for (var i = this.No.length - 1; 0 <= i; i--) this.No[i].id == t && ("id" == this.No[i].action && (t = this.No[i].data), this.No.removeAt(i));
            this.Lo = this.No.length - 1
        }, undo: function (e) {
            if (e) this.ignoreUndo(function () {
                var t, i;
                for (i = this.No.length - 1; !t && 0 <= i; i--) this.No[i].id == e && (t = this.No[i]);
                t && (this.Xo(t), this.No.removeAt(i + 1), this.Lo = this.No.length - 1)
            }); else {
                var t = this.No[this.Lo];
                t && (this.ignoreUndo(function () {
                    this.Xo(t), this.No.removeAt(this.Lo)
                }), this.Lo--)
            }
        }, Xo: function (t) {
            if ("delete" == t.action) {
                var i = null, e = t.data.$parent;
                t.data.$branch && (i = {
                    parent: t.id,
                    data: _(t.data.$branch)
                }, delete t.data.$branch, e && !this.data.branch[e] && (e = 0)),
                    this.add(t.data, t.data.$index, e), i && this.parse(i)
            } else "add" == t.action ? this.remove(t.id) : "update" == t.action ? this.updateItem(t.id, t.data) : "move" == t.action && (t.data.$parent ? this.getItem(t.data.$parent) && this.move(t.id, t.data.$index, null, {parent: t.data.$parent}) : this.move(t.id, t.data.$index))
        }
    };

    function me(t) {
        return "string" == typeof t ? t : t.linkInput ? t.B.id : ("object" == M(t) ? (b(t) && (t = {data: t}), t.view = t.view || "suggest") : !0 === t && (t = {view: "suggest"}), ei(t).config.id)
    }

    function be(t) {
        return ((t.header && t.header[0] ? t.header[0].text : t.editValue || t.label) || "").toString().replace(/<[^>]*>/g, "")
    }

    var ge = {
        text: {
            focus: function () {
                this.getInputNode(this.node).focus(), this.getInputNode(this.node).select()
            }, getValue: function () {
                return this.getInputNode(this.node).value
            }, setValue: function (t) {
                var i = this.getInputNode(this.node);
                i.value = t, function n(t, i) {
                    var e = t.config.suggest;
                    if (e) {
                        var s = ri(t.config.suggest = me(e));
                        s && i && s.linkInput(i)
                    }
                }(this, i)
            }, getInputNode: function () {
                return this.node.firstChild
            }, render: function () {
                return ct("div", {"class": "webix_dt_editor"}, "<input type='text' aria-label='" + be(this.config) + "'>")
            }
        }, "inline-checkbox": {
            render: function () {
                return {}
            }, getValue: function () {
                return this.node.checked
            }, setValue: function () {
            }, focus: function () {
                this.node.focus()
            }, getInputNode: function () {
            }, $inline: !0
        }, "inline-text": {
            render: function () {
                return {}
            }, getValue: function () {
                return this.node.value
            }, setValue: function () {
            }, focus: function () {
                try {
                    this.node.select(), this.node.focus()
                } catch (Do) {
                }
            }, getInputNode: function () {
            }, $inline: !0
        }, checkbox: {
            focus: function () {
                this.getInputNode().focus()
            }, getValue: function () {
                return this.getInputNode().checked
            }, setValue: function (t) {
                this.getInputNode().checked = !!t
            }, getInputNode: function () {
                return this.node.firstChild.firstChild
            }, render: function () {
                return ct("div", {"class": "webix_dt_editor"}, "<div><input type='checkbox' aria-label='" + be(this.config) + "'></div>")
            }
        }, select: {
            focus: function () {
                this.getInputNode().focus()
            }, getValue: function () {
                return this.getInputNode().value
            }, setValue: function (t) {
                this.getInputNode().value = t
            }, getInputNode: function () {
                return this.node.firstChild
            }, render: function () {
                var i = "", t = this.config.options || this.config.collection;
                if (t.data && t.data.each) t.data.each(function (t) {
                    i += "<option value='" + t.id + "'>" + t.value + "</option>"
                }); else if (b(t)) for (var e = 0; e < t.length; e++) {
                    var s = t[e], n = j(s.id), h = n ? s : s.id, r = n ? s : s.value;
                    i += "<option value='" + h + "'>" + r + "</option>"
                } else for (var o in t) i += "<option value='" + o + "'>" + t[o] + "</option>";
                return ct("div", {"class": "webix_dt_editor"}, "<select aria-label='" + be(this.config) + "'>" + i + "</select>")
            }
        }, popup: {
            focus: function () {
                this.getInputNode().focus()
            }, destroy: function () {
                this.getPopup().hide()
            }, getValue: function () {
                return this.getInputNode().getValue() || ""
            }, setValue: function (t) {
                this.getPopup().show(this.node), this.getInputNode().setValue(t)
            }, getInputNode: function () {
                return this.getPopup().getChildViews()[0]
            }, getPopup: function () {
                return this.config.$popup || (this.config.$popup = this.createPopup()), ri(this.config.$popup)
            }, createPopup: function () {
                var t, i = this.config.popup || this.config.suggest;
                if (i) return (t = "object" != M(i) || i.name ? ri(i) : (i.view = i.view || "suggest", ei(_(i)))).Jo || (t.linkInput ? t.linkInput(document.body) : this.linkInput && this.linkInput(document.body), t.Jo = !0), t;
                var e = ge.$popup[this.popupType];
                return "string" == typeof e || e.name || (e = ge.$popup[this.popupType] = ei(e), this.popupInit(e), e.linkInput || this.linkInput(document.body)), e.B.id
            }, linkInput: function (t) {
                Jt(C(t), "keydown", S(function (t) {
                    if (this.config.$popup) {
                        var i, e = t.which || t.keyCode, s = this.getInputNode();
                        if (s.isVisible()) if (s.moveSelection && e < 41 && 32 < e) 33 == e && (i = "pgup"), 34 == e && (i = "pgdown"), 35 == e && (i = "bottom"), 36 == e && (i = "top"), 37 == e && (i = "left"), 38 == e && (i = "up"), 39 == e && (i = "right"), 40 == e && (i = "down"), s.moveSelection(i); else 13 !== e || "TEXTAREA" === t.target.nodeName && t.shiftKey || D("onEditEnd", [])
                    }
                }, this))
            }, popupInit: function () {
            }, popupType: "text", render: function () {
                return {}
            }, $inline: !0
        }
    };
    ge.color = P.extend({
        focus: function () {
        }, popupType: "color", popupInit: function (t) {
            t.getChildViews()[0].attachEvent("onItemClick", function (t) {
                D("onEditEnd", [t])
            })
        }
    }, ge.popup), ge.date = P.extend({
        focus: function () {
        }, popupType: "date", setValue: function (t) {
            this.Ko = this.config.stringResult || t && "string" == typeof t, ge.popup.setValue.call(this, t)
        }, getValue: function () {
            return this.getInputNode().getValue(this.Ko ? $.parseFormatStr : "") || ""
        }, popupInit: function (t) {
            t.getChildViews()[0].attachEvent("onDateSelect", function (t) {
                D("onEditEnd", [t])
            })
        }
    }, ge.popup), ge.combo = P.extend({
        Zo: function (t) {
            return this.config.popup ? this.config.popup.config.id : t ? me(t) : this.Qo(t)
        }, Qo: function () {
            var t = ge.combo;
            return t.ta = t.ta || this.Zo(!0)
        }, render: function () {
            var t = ct("div", {"class": "webix_dt_editor"}, "<input type='text' role='combobox' aria-label='" + be(this.config) + "'>"),
                i = this.config.suggest = this.Zo(this.config.suggest);
            return i && (ri(i).linkInput(t.firstChild, !0), Jt(t.firstChild, "click", S(this.showPopup, this))), t
        }, getPopup: function () {
            return ri(this.config.suggest)
        }, showPopup: function () {
            var t = this.getPopup(), i = t.getList(), e = this.getInputNode(), s = this.ia;
            t.show(e), e.setAttribute("aria-expanded", "true"), s ? (i.exists(s), i.exists(s) && (i.select(s), i.showItem(s))) : (i.unselect(), i.showItem(i.getFirstId())), t.ea = e
        }, afterRender: function () {
            this.showPopup()
        }, setValue: function (t) {
            if (this.ia = t, this.config.suggest) {
                var i = ri(this.config.suggest), e = this.config.collection || this.config.options;
                e && i.getList().data.importData(e), this.getInputNode(this.node).value = i.getItemText(t)
            }
        }, getValue: function () {
            var t = this.getInputNode().value;
            if (this.config.suggest) {
                var i = ri(this.config.suggest), e = i.getList();
                (t || e.getSelectedId && e.getSelectedId()) && (t = i.getSuggestion(t))
            }
            return t
        }
    }, ge.text), ge.richselect = P.extend({
        focus: function () {
        }, getValue: function () {
            return this.getPopup().getValue()
        }, setValue: function (t) {
            var i = this.config.collection || this.config.options;
            this.getInputNode(), i && this.getPopup().getList().data.importData(i), this.getPopup().show(this.node), this.getPopup().setValue(t)
        }, getInputNode: function () {
            return this.getPopup().getList()
        }, popupInit: function (t) {
            t.sa = function () {
            }, t.linkInput(document.body)
        }, popupType: "richselect"
    }, ge.popup), ge.password = P.extend({
        render: function () {
            return ct("div", {"class": "webix_dt_editor"}, "<input type='password' aria-label='" + be(this.config) + "'>")
        }
    }, ge.text), ge.$popup = {
        text: {view: "popup", width: 250, height: 150, body: {view: "textarea"}},
        color: {view: "popup", body: {view: "colorboard"}},
        date: {view: "popup", width: 250, height: 250, padding: 0, body: {view: "calendar", icons: !0, borderless: !0}},
        richselect: {view: "suggest", body: {view: "list", select: !0}},
        multiselect: {view: "multisuggest", suggest: {button: !0}}
    };
    var we = {
        defaults: {editaction: "click"}, $init: function (t) {
            this.na = {}, this.bi = 0, this.gt = 0, this.Vi.style.position = "relative", t && (t.onDblClick = t.onDblClick || {}), this.attachEvent("onAfterRender", this.ha), this.B.editable && this.ra(), P.extend(this, pe)
        }, oa: function (t) {
            try {
                if ("number" == typeof t.selectionStart) t.selectionStart = t.selectionEnd = t.value.length; else if ("undefined" != typeof t.createTextRange) {
                    var i = t.createTextRange();
                    i.collapse(!1), i.select()
                }
            } catch (Do) {
            }
        }, ha: function () {
            var t = this.getEditor();
            if (t && t.$inline && !t.getPopup) {
                var i = this.aa(t);
                if (i && i != t.node) {
                    var e = t.node.value;
                    (t.node = i).value = e, i.focus(), this.oa(i)
                } else this.editStop()
            }
        }, editable_setter: function (t) {
            return t && this.ra(), t
        }, ra: function () {
            var t = I("onEditEnd", S(function () {
                this.bi && this.editStop()
            }, this)), i = I("onClick", S(function (t) {
                this.bi && 200 < new Date - this.gt && (this.Di && !this.Di.popupType && t && this.Di.node && this.Di.node.contains(t.target || t.srcElement) || this.editStop())
            }, this));
            this.attachEvent("onDestruct", function () {
                A(t), A(i)
            }), this.data.attachEvent && this.data.attachEvent("onIdChange", S(function (t, i) {
                this.ua(t, i)
            }, this)), this.attachEvent("onItemClick", function (t) {
                this.B.editable && "click" == this.B.editaction && this.edit(t)
            }), this.attachEvent("onItemDblClick", function (t) {
                this.B.editable && "dblclick" == this.B.editaction && this.edit(t)
            }), this.ca = S(function () {
                this.gt = new Date
            }, this), this.ra = function () {
            }, this.fa && this.fa()
        }, la: function () {
            k(function () {
                var t = this.getEditor();
                if (t && t.config.liveEdit) {
                    var i = {value: t.getValue(), old: t.value};
                    if (i.value == i.old) return;
                    t.value = i.value, this.da(t, i.value, !1), this.callEvent(
                        "onLiveEdit", [i, t])
                }
            }, this)
        }, va: function (t) {
            var i = this.B.form;
            "string" != typeof i && (this.B.form = i = ei(i).config.id);
            var e = (i = ri(i)).setValues ? i : i.getChildViews()[0];
            e.setValues(this.getItem(t.row || t)), i.config.master = this.config.id, i.show(this.getItemNode(t));
            var s = e.getChildViews()[0];
            s.focus && s.focus()
        }, edit: function (t, i, e) {
            if (this.B.editable && this.callEvent("onBeforeEditStart", [t])) {
                if (this.B.form) return this.va(t);
                var s = this._a(t);
                if (s) {
                    if (this.getEditor(t)) return;
                    i || this.editStop(), ge[s];
                    var n = P.extend({}, ge[s]), h = this.pa(t, n, e);
                    n.config.liveEdit && (this.ma = this.attachEvent("onKeyPress", this.la));
                    var r = n.getPopup ? n.getPopup(h).Tt : h;
                    return r && Jt(r, "click", this.ca), h && Jt(h, "change", this.ba, {
                        bind: {
                            view: this,
                            id: t
                        }
                    }), !1 !== e && n.focus(), this.$fixEditor && this.$fixEditor(n), this.gt = ti.edit_open_time = new Date, xi.setFocus(this, !0), this.callEvent("onAfterEditStart", [t]), n
                }
                return null
            }
        }, getEditor: function (t) {
            return t ? this.na[t] : this.Di
        }, ua: function (t, i) {
            var e = this.na[t];
            e && ((this.na[i] = e).id = i, delete this.na[t])
        }, ba: function () {
            this.view.hasEvent("onEditorChange") && this.view.callEvent("onEditorChange", [this.id, this.view.getEditorValue(this.id)])
        }, ga: function () {
            return this.B
        }, pa: function (t, i, e) {
            i.config = this.ga(t);
            var s = i.render();
            i.$inline && (s = this.aa(t)), i.node = s;
            var n = this.getItem(t), h = n[this.B.editValue || "value"];
            return j(h) && (h = ""), i.setValue(h, n), i.value = h, this.wa(t, i), !1 !== e && this.showItem(t), i.$inline || this.xa(t, s, !0), i.afterRender && i.afterRender(), s
        }, ya: function (t) {
            return this.getItemNode(t)
        }, aa: function (t) {
            var i = this.ya(t);
            return i && (i = i.getElementsByTagName("input")[0] || i), i
        }, _a: function () {
            return this.B.editor
        }, wa: function (t, i) {
            i.id = t, this.na[t] = this.Di = i, this.bi++
        }, Ma: function (t) {
            this.Di == t && (this.Di = 0), t.destroy && t.destroy(), delete t.popup, delete t.node, delete this.na[t.id], this.bi--
        }, focusEditor: function () {
            var t = this.getEditor.apply(this, arguments);
            t && t.focus && t.focus()
        }, editCancel: function () {
            this.editStop(null, null, !0)
        }, ri: function (t) {
            if (t) {
                var i = this.getEditor();
                if (i && i.getPopup && i.getPopup() == t.getTopParentView()) return
            }
            this.editStop()
        }, editStop: function (t) {
            if (!this.Sa) {
                this.Sa = 1;
                var i = arguments[2], e = 1;
                return t ? e = this.ka(this.na[t], i) : this.Ca(function (t) {
                    e *= this.ka(t, i)
                }), this.Sa = 0, e
            }
        }, ot: function (t) {
            var i = this.getItemNode(t);
            return {left: i.offsetLeft, top: i.offsetTop, height: i.offsetHeight, width: i.offsetWidth, parent: this.Vi}
        }, xa: function (t, i, e) {
            if (i.style) {
                var s = this.ot(t);
                return i.style.top = s.top + "px", i.style.left = s.left + "px", i.style.width = s.width - 1 + "px", i.style.height = s.height - 1 + "px", i.top = s.top, e && s.parent.appendChild(i), s
            }
        }, Ca: function (t) {
            for (var i in this.na) t.call(this, this.na[i])
        }, ka: function (t, i) {
            if (t && !ti.wt) {
                var e = {value: this.$a(t), old: t.value};
                if (this.callEvent("onBeforeEditStop", [e, t, i])) {
                    if (!i) {
                        var s = e.old;
                        if ("string" == typeof e.value && (s += ""), s != e.value || t.config.liveEdit) {
                            var n = this.da(t, e.value, !0);
                            this.updateItem(t.row || t.id, n)
                        }
                    }
                    t.$inline ? t.node = null : lt(t.node);
                    var h = t.config.suggest;
                    return h && "string" == typeof h && ri(h).hide(), this.Ma(t), this.ma && this.detachEvent(this.ma), this.callEvent("onAfterEditStop", [e, t, i]), 1
                }
                return 0
            }
        }, validateEditor: function (t) {
            var i = !0;
            if (this.B.rules) {
                var e = this.getEditor(t), s = e.column || this.B.editValue || "value", n = this.B.rules[s],
                    h = this.B.rules.$all;
                if (n || h) {
                    var r = this.data.getItem(e.row || e.id), o = e.getValue(), a = e.getInputNode();
                    n && (i = n.call(this, o, r, s)), h && (i = h.call(this, o, r, s) && i), i ? yt(a, "webix_invalid") : xt(a, "webix_invalid"), D("onLiveValidation", [e, i, r, o])
                }
            }
            return i
        }, getEditorValue: function (t) {
            var i;
            if (i = 0 === arguments.length ? this.Di : this.getEditor(t)) return i.getValue()
        }, getEditState: function () {
            return this.Di || !1
        }, editNext: function (t, i) {
            if (t = !1 !== t, 1 == this.bi || i) {
                var e = this.Da(this.Di || i, function (t) {
                    return !!this._a(t)
                }, t);
                if (this.editStop()) return e && (this.edit(e), this.Ia(e)), !1
            }
        }, Ia: function () {
        }, Da: function (t, i, e) {
            var s = this.getIndexById(t.id), n = this.data.order;
            if (e) {
                for (var h = s + 1; h < n.length; h++) if (i.call(this, n[h])) return n[h]
            } else for (var r = s - 1; 0 <= r; r--) if (i.call(this, n[r])) return n[r];
            return null
        }, $a: function (t) {
            return t.getValue()
        }, da: function (t, i, e) {
            var s = e ? {} : this.getItem(t.id);
            return s[this.B.editValue || "value"] = i, s
        }
    }, xe = {
        $init: function () {
            this.$view.className += " webix_flexlayout"
        }, Aa: function () {
        }, Fa: function () {
        }, Ta: function () {
        }, $getSize: function () {
            var t = 0, i = 0, e = this.B.gravity;
            this.Va = [];
            for (var s = 0; s < this.yi.length; s++) {
                var n = this.yi[s].$getSize(0, 0);
                this.Va.push(n), t = Math.max(t, n[0]), i = Math.max(i, n[2])
            }
            return t += this.za.left + this.za.right, i += this.za.top + this.za.bottom, this.B.width && (t = Math.max(t, this.B.width)), this.B.height && (i = Math.max(i, this.B.height)), [t, 1e5, i, 1e5, e]
        }, render: function () {
            this.resize()
        }, Ha: function () {
            if (this.isVisible(this.B.id)) {
                var t = this.$view.style, i = Math.round(this.Ra / 2);
                t.paddingTop = this.za.top - i + "px", t.paddingBottom = this.za.bottom - i + "px", t.paddingLeft = this.za.left - i + "px", t.paddingRight = this.za.right - i + "px";
                for (var e = 0; e < this.yi.length; e++) if (!this.yi[e].B.hidden) {
                    var s = this.yi[e].$view, n = this.Va[e], h = this.yi[e].B;
                    s && (s.style.minWidth = n[0] + "px", n[1] < 1e5 && n[1] != n[0] && (s.style.maxWidth = n[1] + "px"), s.style.flexBasis = h.flexBasis || n[0] + "px", s.style.flexGrow = h.flexGrow || (n[1] != n[0] ? n[4] : 0), s.style.height = n[3] != n[2] ? "auto" : n[2] + "px", s.style.minHeight = n[2] + "px", n[3] < 1e5 && n[3] != n[2] && (s.style.maxHeight = n[3] + "px"), s.style.margin = i + "px")
                }
                for (var r = [], o = 0; o < this.yi.length; o++) if (!this.yi[o].B.hidden) {
                    var a = this.yi[o].$view;
                    r[o] = [a.offsetWidth, a.offsetHeight]
                }
                for (var u = 0; u < this.yi.length; u++) if (!this.yi[u].B.hidden) {
                    var c = this.yi[u];
                    if (c.$view) {
                        c.B.flex = !0;
                        var f = this.Va[u], l = f[2] == f[3] ? f[2] : r[u][1];
                        c.$setSize(r[u][0], l), c.B.flex = !1
                    }
                }
                this.$height = this.ue = this.$view.scrollHeight, this.$view.style.height = this.ue + "px"
            }
        }
    }, ye = {
        sum: function (t, i) {
            i = i || this;
            for (var e = 0, s = 0; s < i.length; s++) {
                var n = parseFloat(t(i[s]), 10);
                isNaN(n) || (e += n)
            }
            return e
        }, min: function (t, i) {
            i = i || this;
            for (var e = Infinity, s = 0; s < i.length; s++) {
                var n = parseFloat(t(i[s]), 10);
                isNaN(n) || n < e && (e = n)
            }
            return e === Infinity ? 0 : 1 * e
        }, max: function (t, i) {
            i = i || this;
            for (var e = -Infinity, s = 0; s < i.length; s++) {
                var n = parseFloat(t(i[s]), 10);
                isNaN(n) || e < n && (e = n)
            }
            return e === -Infinity ? 0 : 1 * e
        }, count: function (t, i) {
            for (var e = 0, s = 0; s < i.length; s++) {
                var n = t(i[s]);
                null != n && e++
            }
            return e
        }, any: function (t, i) {
            return t(i[0])
        }, string: function (t) {
            return t.$name
        }
    }, Me = {
        $init: function () {
            var t = this;
            this.attachEvent("onClearAll", function () {
                return t.yr = null
            }), this.attachEvent("onSyncApply", function () {
                return t.yr = null
            })
        }, ungroup: function (t) {
            if (this.getBranchIndex) {
                if (!this.Ba(t)) return
            } else {
                if (!this.yr) return;
                this.order = this.yr, this.pull = this.Pa
            }
            this.callEvent("onStoreUpdated", [])
        }, Ba: function (t) {
            for (var i = this, e = t || 0, s = "0" == e ? 1 : this.getItem(e).$level + 1, n = !1, h = this.branch[e], r = [], o = 0; o < h.length; o++) {
                var a = h[o];
                if (this.pull[a].$group) {
                    n = !0;
                    var u = this.branch[a];
                    u && (this.branch[a] = u.filter(function (t) {
                        if (!i.pull[t].$footer) return t;
                        i.ja(t)
                    })), r = r.concat(this.branch[a] || []), this.ja(a)
                } else r.push(a)
            }
            return !!n && (this.branch[e] = r, this.Ea(this.branch[e], e, s), void 0 === t && this.Ba(), !0)
        }, ja: function (t) {
            delete this.pull[t], delete this.branch[t]
        }, xr: function (t) {
            this.blockEvent(), this.group(t), this.unblockEvent()
        }, Na: function (i) {
            if ("function" == typeof i) return i;
            var t = function (t) {
                return t[i]
            };
            return t.$name = i, t
        }, group: function (e, t) {
            var i;
            if ("string" == typeof e ? (i = e, e = {by: this.Na(e), map: {}}) : "function" == typeof e ? e = {
                by: e,
                map: {}
            } : "string" == typeof e.by && (i = e.by, e.by = this.Na(e.by)), e.map = e.map || {}, i && !e.map[i] && (e.map[i] = [i]), e.missing = e.missing === undefined || e.missing, this.getBranchIndex) return this.La(e, t);
            this.yr || (this.yr = this.order, this.Pa = this.pull);
            var s = {}, n = [], h = [], r = e.missing;
            this.each(function (t) {
                var i = e.by(t);
                if (!i && 0 !== i) {
                    if (!1 === r) return;
                    if (!0 === r) return void h.push(t);
                    i = r
                }
                s[i] || (n.push({id: i, value: i, $group: !0, $row: e.row}), s[i] = g()), s[i].push(t)
            });
            for (var o = 0; o < n.length; o++) {
                var a = n[o];
                this.Oa(e.map, a, s[n[o].id]), this.hasEvent("onGroupCreated") && this.callEvent("onGroupCreated", [a.id, a.value, s[n[o].id]])
            }
            this.order = g(), this.pull = {}, this.Ua(n), this.Ua(h), this.callEvent("onStoreUpdated", [])
        }, Ua: function (t) {
            for (var i = 0; i < t.length; i++) {
                var e = this.id(t[i]);
                this.pull[e] && (e = t[i].id = V()), this.pull[e] = t[i], this.order.push(e), this.Cr && this.Cr(t[i])
            }
        }, Oa: function (t, i,
                         e) {
            for (var s in t) {
                var n = t[s][1] || "any", h = this.Na(t[s][0]);
                "function" != typeof n && (ye[n], n = ye[n]), i[s] = n.call(this, h, e)
            }
        }, La: function (t, i) {
            var e = 0;
            i ? e = this.getItem(i).$level : i = 0;
            for (var s = [], n = [], h = [], r = this.branch[i], o = 0; o < r.length; o++) {
                var a = this.getItem(r[o]), u = t.by(a);
                if (!u && 0 !== u) {
                    if (!1 === t.missing) continue;
                    if (!0 === t.missing) {
                        h.push(a.id);
                        continue
                    }
                    u = t.missing
                }
                var c = e + "$" + u, f = this.branch[c];
                if (!f) {
                    var l = this.pull[c] = {id: c, value: u, $group: !0, $row: t.row};
                    this.Cr && this.Cr(l), n.push(l), (f = this.branch[c] = []).Wa = [], s.push(c)
                }
                f.push(a.id), f.Wa.push(a)
            }
            this.branch[i] = s.concat(h);
            for (var d = 0; d < n.length; d++) {
                var v = n[d];
                if (this.Oa(t.map, v, this.branch[n[d].id].Wa), this.hasEvent("onGroupCreated") && this.callEvent("onGroupCreated", [v.id, v.value, this.branch[v.id].Wa]), t.footer) {
                    var _ = "footer$" + v.id, p = this.pull[_] = {
                        id: _,
                        $footer: !0,
                        value: v.value,
                        $level: e,
                        $count: 0,
                        $parent: v.id,
                        $row: t.footer.row
                    };
                    this.Oa(t.footer, p, this.branch[n[d].id].Wa), this.branch[v.id].push(p.id), this.callEvent("onGroupFooter", [p.id, p.value, this.branch[v.id].Wa])
                }
                delete this.branch[v.id].Wa
            }
            this.Ea(this.branch[i], i, e + 1), this.callEvent("onStoreUpdated", [])
        }, Ea: function (t, i, e) {
            i && (this.getItem(i).$count = t.length);
            for (var s = 0; s < t.length; s++) {
                var n = this.pull[t[s]];
                n.$level = e, n.$parent = i;
                var h = this.branch[n.id];
                h && this.Ea(h, n.id, e + 1)
            }
        }
    }, Se = {
        $init: function () {
            P.extend(this.data, Me)
        }, group: function (t, i) {
            i || 0 === i || (this.$blockRender = !0, this.data.ungroup(), this.$blockRender = !1), this.data.group(t, i)
        }, ungroup: function (t) {
            this.data.ungroup(t)
        }
    }, ke = {
        $init: function () {
            var t = this;
            this.$ready.push(function () {
                t.customRadio_setter && !t.config.customRadio || Jt(t.$view, "keydown", t.Ya, {bind: t})
            })
        }, oi: function () {
            if (!xi.canFocus(this)) return !1;
            var t = this.qa();
            if (t) for (var i = 0; i < t.length; i++) if ("0" == t[i].getAttribute("tabindex")) return t[i].focus()
        }, Ga: function () {
            var t = this.qa();
            if (t) for (var i = 0; i < t.length; i++) if ("0" == t[i].getAttribute("tabindex")) return t[i].blur()
        }, Ya: function (t) {
            var i = t.which || t.keyCode;
            if (34 < i && i < 41) {
                var e = this.qa(), s = !1;
                if (!e.length) return;
                bt(t);
                var n = 37 === i || 38 === i || 35 === i ? -1 : 1;
                if (35 === i) s = e.length - 1; else if (36 === i) s = 0; else for (var h = 0; h < e.length; h++) if ("0" == e[h].getAttribute("tabindex")) {
                    s = h + n;
                    break
                }
                if (!1 !== s) {
                    var r = s;
                    do {
                        if (r >= e.length && (r = 0), r < 0 && (r = e.length - 1), e[r].getAttribute("webix_disabled")) r += n; else {
                            var o = e[r].getAttribute("button_id");
                            this.setValue(o), e[r].focus(), r = "success"
                        }
                    } while ("success" !== r && r !== s)
                }
            }
        }, xe: function (t, i) {
            for (var e, s = i.target || i.srcElement; s && !s.webix_tooltip;) {
                if (e = s.getAttribute("webix_t_id")) return this.getOption(e);
                s = s.parentNode
            }
            return null
        }, optionIndex: function (t) {
            for (var i = this.B.options, e = 0; e < i.length; e++) if (i[e].id == t) return e;
            return -1
        }, getOption: function (t) {
            var i = this.optionIndex(t);
            return -1 !== i ? this.B.options[i] : null
        }, addOption: function (t, i, e, s) {
            var n = t;
            "object" != M(t) ? n = {
                id: t,
                value: i = i || t
            } : (t = n.id, s = e, e = i), -1 === this.optionIndex(t) && (x.insertAt.call(this.B.options, n, s), this.refresh(), this.callEvent("onOptionAdd", [t, n])), e && this.setValue(t)
        }, removeOption: function (t) {
            var i = this.optionIndex(t);
            if (-1 !== i) {
                var e = this.B.options;
                x.removeAt.call(e, i), this.refresh(), this.B.value == t && this.Xa(e, i), this.callEvent("onOptionRemove", [t, this.B.value])
            }
        }, Xa: function (t, i) {
            var e = t.length;
            if (e && !this.customRadio_setter) {
                for (var s = i = Math.min(i, e - 1); s < e; s++) if (!t[s].hidden) return this.setValue(t[s].id);
                for (var n = i; 0 <= n; n--) if (!t[n].hidden) return this.setValue(t[n].id)
            }
            this.setValue("")
        }, Ja: function (t) {
            var i = this.B.options;
            if (i.length) {
                for (var e = 0; e < i.length; e++) if (!i[e].hidden && !i[e].disabled) return i[e].id;
                if (t) return i[0].id
            }
            return ""
        }, Ka: function (t) {
            for (var i = [], e = 0; e < t.length; e++) t[e].hidden || i.push(t[e]);
            return i
        }, Za: function (t, i, e) {
            var s = this.B.options, n = this.optionIndex(t);
            s[n] && e != !!s[n][i] && ((s[n][i] = e) && "hidden" === i && this.B.value == t && this.Xa(s, n), this.refresh())
        }, hideOption: function (t) {
            this.Za(t, "hidden", !0)
        }, showOption: function (t) {
            this.Za(t, "hidden", !1)
        }, disableOption: function (t) {
            this.Za(t, "disabled", !0)
        }, enableOption: function (t) {
            this.Za(t, "disabled", !1)
        }
    }, Ce = P.proto({
        $init: function (t) {
            this.Eo = "map_" + V(), this.Qa = t, this.tu = [], this.iu = []
        },
        addRect: function (t, i, e) {
            this.eu(t, "RECT", i, e)
        }, addPoly: function (t, i, e) {
            this.eu(t, "POLY", i, e)
        }, eu: function (t, i, e, s) {
            var n = "";
            4 == arguments.length && (n = "userdata='" + s + "'"), this.tu.push("<area " + this.Qa + "='" + t + "' shape='" + i + "' coords='" + e.join() + "' " + n + "></area>"), this.iu.push({
                index: s,
                points: e
            })
        }, addSector: function (t, i, e, s, n, h, r, o) {
            var a = [];
            a.push(s), a.push(Math.floor(n * r));
            for (var u = i; u < e; u += Math.PI / 18) a.push(Math.floor(s + h * Math.cos(u))), a.push(Math.floor((n + h * Math.sin(u)) * r));
            return a.push(Math.floor(s + h * Math.cos(e))), a.push(Math.floor((n + h * Math.sin(e)) * r)), a.push(s), a.push(Math.floor(n * r)), this.addPoly(t, a, o)
        }, hide: function (t, i, e) {
            if (t.querySelectorAll) for (var s = t.querySelectorAll('area[userdata="' + i + '"]'), n = 0; n < s.length; n++) {
                var h = s[n];
                e ? h.getAttribute("coords") && (h.coordsdis = h.getAttribute("coords"), h.setAttribute("coords", ""), h.coords = "") : e || h.coordsdis && (h.setAttribute("coords", h.coordsdis), h.coords = h.coordsdis, h.coordsdis = ""), s[n].style.display = e ? "none" : ""
            }
        }, render: function (t) {
            var i = ct("DIV");
            i.style.cssText = "position:absolute; width:100%; height:100%; top:0px; left:0px;", t.appendChild(i);
            var e = Y.isIE ? "" : "src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";
            i.innerHTML = "<map id='" + this.Eo + "' name='" + this.Eo + "'>" + this.tu.join("\n") + "</map><img " + e + " class='webix_map_img' usemap='#" + this.Eo + "'>", t.Ai = i, this.tu = []
        }
    }), $e = {
        $init: function () {
            this.ne = {}, this.he = {}, this.getTopParentView = this.su = S(function () {
                return this
            }, this), this.nu(), this.$ready.push(this.hu)
        }, $$: function (t) {
            return this.ne[t]
        }, innerId: function (t) {
            return this.he[t]
        }, nu: function () {
            this.se = ti.ft, ti.ft = this
        }, hu: function () {
            for (var t in this.ne) {
                var i = this.ne[t];
                this.callEvent && i.mapEvent && !i.u.onitemclick && i.mapEvent({onitemclick: this}), i.getTopParentView = this.su
            }
            ti.ft = this.se, this.se = 0
        }, Ii: function (t) {
            delete this.ne[t]
        }, ui: function () {
            this.nu();
            var t = ei.apply(this, arguments);
            return this.hu(), t
        }
    }, De = {
        $init: function () {
            this.getSelectedId && this.attachEvent("onAfterRender", this.ru), this.moveSelection && this.attachEvent("onTabFocus", this.ou)
        }, ou: function () {
            if (this.getSelectedId) {
                var t = this.getSelectedId(!0);
                t.length && this.getItemNode(t[0]) || this.moveSelection("down")
            }
        }, ru: function () {
            var t = this.getSelectedId(!0);
            if (!t.length || !this.getItemNode(t[0])) {
                var i = this.Q.querySelector("[" + this.Eo + "]");
                i && i.setAttribute("tabindex", "0")
            }
        }, au: function (n) {
            return function (t, i) {
                var e = i.srcElement || i.target;
                if (!e.getAttribute("webixignore")) {
                    var s = e.tagName;
                    if ("INPUT" == s || "TEXTAREA" == s || "SELECT" == s) return !0
                }
                if (t && t.moveSelection && t.config.navigation && !t.bi) return bt(i), t.moveSelection(n, {
                    shift: i.shiftKey,
                    ctrl: i.ctrlKey
                })
            }
        }, moveSelection: function (t, i, e) {
            var s = this.B;
            if (!s.disabled) {
                var n = this.getSelectedId(!0), h = this.count && ("x" == s.layout || 1 < s.xCount);
                if (("right" == t || "left" == t) && this.uu) {
                    var r = ri(this.uu);
                    return r.cu(!0), void ("x" === r.config.layout ? r.moveSelection(t) : xi.setFocus(r))
                }
                if (!n.length && this.count()) {
                    if ("down" == t || "right" == t && h) t = "top"; else {
                        if (!("up" == t || "left" == t && h)) return;
                        t = "bottom"
                    }
                    n = [this.getFirstId()]
                }
                if (1 == n.length) {
                    var o = n = n[0];
                    if ("left" == t && this.close) return this.close(n);
                    if ("right" == t && this.open) return this.open(n);
                    if ("top" == t) n = this.getFirstId(); else if ("bottom" == t) n = this.getLastId(); else if ("up" == t || "left" == t || "pgup" == t) {
                        var a = this.getIndexById(n), u = "pgup" == t ? 10 : 1;
                        n = this.getIdByIndex(Math.max(0, a - u))
                    } else {
                        if ("down" != t && "right" != t && "pgdown" != t) return;
                        var c = this.getIndexById(n), f = "pgdown" == t ? 10 : 1;
                        n = this.getIdByIndex(Math.min(this.count() - 1, c + f))
                    }
                    var l = "up" == t || "left" == t || "pgdown" == t || "bottom" == t ? -1 : 1;
                    if (this.fu && (n = this.fu(n, o, l)), this.showItem(n), this.select(n), this.getSubMenu && this.getSubMenu(n) && this.lu(n, this.getItemNode(n)), !this.config.clipboard && !1 !== e) {
                        var d = this.getItemNode(n);
                        d && d.focus()
                    }
                }
                return !1
            }
        }, navigation_setter: function (t) {
            return t && !xi.du && (xi.du = !0, xi.addHotKey("up", this.au("up")), xi.addHotKey("down", this.au("down")), xi.addHotKey("right", this.au("right")), xi.addHotKey("left", this.au("left")), xi.addHotKey("shift+up", this.au("up")), xi.addHotKey("shift+down", this.au("down")), xi.addHotKey(
                "shift+right", this.au("right")), xi.addHotKey("shift+left", this.au("left")), xi.addHotKey("ctrl+shift+up", this.au("up")), xi.addHotKey("ctrl+shift+down", this.au("down")), xi.addHotKey("ctrl+shift+right", this.au("right")), xi.addHotKey("ctrl+shift+left", this.au("left")), xi.addHotKey("pageup", this.au("pgup")), xi.addHotKey("pagedown", this.au("pgdown")), xi.addHotKey("home", this.au("top")), xi.addHotKey("end", this.au("bottom"))), t
        }
    }, Ie = {
        $init: function () {
            this.$ready.push(this.vu), this.attachEvent("onStructureUpdate", this.vu), this.attachEvent("onStructureLoad", function () {
                this._u.length || this.vu()
            })
        }, vu: function () {
            var e = this._u = [], t = this.B;
            t.columns && this.pu(t.columns), this.B.map && this.mu(t.map), e.length && (this.data.Cr = function (t) {
                for (var i = 0; i < e.length; i++) e[i](t)
            })
        }, mu: function (t) {
            for (var i in t) this._u.push(this.bu(i, t[i]))
        }, bu: function (e, t, i) {
            var s, n = t.replace(/^(\s|)\((date|number)\)/, "");
            return s = "" === n ? function (t) {
                return t[e]
            } : (-1 === n.indexOf("#") && -1 === n.indexOf("{") && (n = "#" + n + "#"), Wt(n)), 0 === t.indexOf("(date)") ? (i && !i.format && (i.format = $.dateFormatStr), function (t) {
                var i = (s(t) || "").toString();
                t[e] = $.parseFormatDate(i)
            }) : 0 === t.indexOf("(number)") ? function (t) {
                t[e] = 1 * s(t)
            } : function (t) {
                t[e] = s(t) || ""
            }
        }, pu: function (t) {
            for (var i = 0; i < t.length; i++) {
                var e = t[i].map, s = t[i].id;
                s || (s = t[i].id = "i" + V(), t[i].header || (t[i].header = "")), e && this._u.push(this.bu(s, e, t[i])), this.gu(t[i])
            }
        }, wu: function (t) {
            if ("string" == typeof t) {
                var i = ri(t);
                i ? t = i : (t = new (d("DataCollection"))({url: t}), this.zt.push(t)), t.getBody && (t = i.getBody())
            } else if ("function" == typeof t || t.$proxy) t = new (d("DataCollection"))({url: t}), this.zt.push(t); else if (!t.loadNext) {
                var e = b(t), s = [];
                if (e && "object" !== M(t[0])) {
                    for (var n = 0; n < t.length; n++) s.push({id: t[n], value: t[n]});
                    t = s
                } else if (!e) {
                    for (var h in t) s.push({id: h, value: t[h]});
                    t = s
                }
                t = new (d("DataCollection"))({data: t}), this.zt.push(t)
            }
            return t
        }, gu: function (t) {
            var i = t.options || t.collection;
            i && (i = this.wu(i), this.xu(i, t)), t.header && (this.yu(t.header), this.yu(t.footer))
        }, yu: function (n) {
            var h = this;
            n = n || [];
            for (var t = function (t) {
                var i = n[t];
                if (i && i.options) {
                    var e = i.options;
                    e.loadNext || (e = i.options = h.wu(e));
                    var s = e.data.attachEvent("onStoreUpdated", function () {
                        h.refreshFilter && h.refreshFilter(i.columnId)
                    });
                    h.attachEvent("onDestruct", function () {
                        e.$destructed || e.data.detachEvent(s)
                    })
                }
            }, i = 0; i < n.length; i++) t(i)
        }, xu: function (t, i) {
            var e = this;
            if (i) {
                delete i.options, i.collection = t, i.template = i.template || this.Mu(t, i.id, i.optionslist);
                var s = t.data.attachEvent("onStoreUpdated", function () {
                    e.refresh(), e.refreshFilter && e.refreshFilter(i.id)
                });
                this.attachEvent("onDestruct", function () {
                    t.$destructed || t.data.detachEvent(s)
                })
            }
        }, Mu: function (h, r, t) {
            if (r = this.getColumnConfig ? r : "value", t) {
                var o = "string" == typeof t ? t : ",";
                return function (t) {
                    var i = t[r];
                    if (!i) return "";
                    for (var e = i.toString().split(o), s = 0; s < e.length; s++) {
                        var n = h.data.pull[e[s]];
                        e[s] = n && n.value || ""
                    }
                    return e.join(", ")
                }
            }
            return function (t) {
                var i = h.data.pull[t[r]];
                return i && (i.value || 0 === i.value) ? i.value : ""
            }
        }
    }, Ae = {
        $init: function (t) {
            t = t || {}, this.Su = 0, this.ku = 300, this.Cu = null, this.$u(t.onClick, "on_click"), this.$u(t.onContext, "on_context"), this.$u(t.onDblClick, "on_dblclick"), this.$u(t.onMouseMove, "on_mouse_move"), this.on_click && (Jt(this.Vi, "click", this.Du, {bind: this}), Y.isIE8 && this.on_dblclick && Jt(this.Vi, "dblclick", this.Iu, {bind: this})), this.on_context && Jt(this.Vi, "contextmenu", this.Au, {bind: this}), this.on_mouse_move && this.Fu()
        }, Fu: function () {
            this.Tu || (this.on_mouse_move = this.on_mouse_move || {}, Jt(this.Vi, "mousemove", this.Vu, {bind: this}), Jt(this.Vi, Y.isIE ? "mouseleave" : "mouseout", this.Vu, {bind: this}), this.Tu = 1, this.attachEvent("onDestruct", function () {
                this.zu && window.clearTimeout(this.zu)
            }))
        }, $u: function (t, i) {
            if (t) {
                var e = this[i], s = e ? P.extend({}, e) : {};
                this[i] = P.extend(s, t)
            }
        }, Du: function (t) {
            if (!this.isEnabled()) return !1;
            if (xi.Bt(this), this.on_dblclick) {
                var i = (new Date).valueOf();
                if (i - this.Su <= this.ku && this.locate) if ("" + this.locate(t) == "" + this.Cu) return this.Su = 0, this.Iu(t);
                this.Su = i
            }
            return this.Hu(t, this.on_click, "ItemClick")
        }, Iu: function (t) {
            return this.Hu(t, this.on_dblclick, "ItemDblClick")
        }, Au: function (t) {
            this.Hu(t,
                this.on_context, "BeforeContextMenu", "AfterContextMenu")
        }, Vu: function (t) {
            this.$destructed || (document.createEventObject && (t = document.createEventObject(event)), this.zu && window.clearTimeout(this.zu), this.callEvent("onMouseMoving", [t]), this.zu = k(function (t) {
                "mousemove" == t.type ? this.Ru(t) : this.Bu(t)
            }, this, [t], this.B.mouseEventDelay || 500))
        }, Ru: function (t) {
            this.Hu(t, this.on_mouse_move, "MouseMove") || this.Bu(t)
        }, Bu: function (t) {
            this.callEvent("onMouseOut", [t || event])
        }, Hu: function (t, i, e, s) {
            if (!(t = t || event).processed && this.Tt) {
                t.processed = !0;
                var n = t.target || t.srcElement;
                if (Y.isIE8) {
                    var h = this.B.id, r = n.w_view;
                    if (r) {
                        if (r !== h) return
                    } else n.w_view = h
                }
                for (var o = "", a = null, u = !1; n && n.parentNode && this.Tt && n != this.Tt.parentNode;) {
                    if (!u && n.getAttribute && (a = n.getAttribute(this.Eo))) {
                        if (n.getAttribute("webix_disabled")) return void (this.Cu = null);
                        if (this.Cu = a, this.callEvent) {
                            if (!this.callEvent("on" + e, [a, t, n])) return;
                            s && this.callEvent("on" + s, [a, t, n])
                        }
                        u = !0
                    }
                    if (o = kt(n)) {
                        o = o.toString().split(" ");
                        for (var c = 0; c < o.length; c++) {
                            if (i[o[c]]) if (!1 === v(i[o[c]], this.$scope).call(this, t, a || vt(t, this.Eo), n)) return u
                        }
                    }
                    n = n.parentNode
                }
                return u
            }
        }
    }, Fe = {
        $init: function () {
            this.$ready.push(function () {
                this.attachEvent("onKeyPress", this.ve)
            })
        }, Pu: function (t, i) {
            if (37 === t || 39 === t) {
                bt(i), this.ju(37 === t ? -1 : 1);
                var e = this.Eu.querySelector("[tabindex='0']");
                e && e.focus()
            }
        }, Nu: function () {
            lt(this.Eu), this.Eu = ct("DIV", {
                "class": "webix_nav_panel webix_nav_panel_" + this.B.navigation.type,
                role: "tablist"
            }, ""), this.Tt.appendChild(this.Eu), this.Lu(), this.Ou(), this.Uu()
        }, Uu: function () {
            var i = [];
            this.Eu && (i[0] = Kt(this.Eu, "click", S(function (t) {
                for (var i = t.srcElement || t.target, e = !1; i != this.Eu && !e;) {
                    var s = i.getAttribute(this.Wu);
                    s && (e = !0, this.Yu(s)), i = i.parentNode
                }
            }, this))), this.qu && (i[1] = Kt(this.qu, "click", S(function () {
                this.ju(-1)
            }, this))), this.Gu && (i[1] = Kt(this.Gu, "click", S(function () {
                this.ju(1)
            }, this))), this.attachEvent("onDestruct", function () {
                for (var t = 0; t < i.length; t++) this.detachEvent(i[t]);
                i = null
            })
        }, ju: function (t) {
            if (this.yi) {
                var i = this.Xu + t;
                (i >= this.yi.length || i < 0) && (i = i < 0 ? this.yi.length - 1 : 0), this.setActiveIndex(i)
            }
        }, Yu: function (t) {
            this.yi && ri(t).show()
        }, Lu: function () {
            var t, i;
            if ((i = this.B.navigation).items) {
                this.Wu = i.linkAttr || "bind_id", this.Eu ? this.Ju() : this.Nu();
                var e = this.yi ? this.yi : this.data.order;
                if (1 < e.length) for (var s = 0; s < e.length; s++) {
                    t = ct("DIV", {
                        "class": "webix_nav_item webix_nav_" + (s == this.Xu ? "active" : "inactive"),
                        role: "tab",
                        tabindex: s == this.Xu ? "0" : "-1"
                    });
                    var n = this.yi ? this.yi[s].B.id : e[s];
                    n && t.setAttribute(this.Wu, n), this.Eu.appendChild(t)
                }
            }
        }, Ju: function () {
            if (this.Eu) for (var t = this.Eu.childNodes, i = t.length - 1; 0 <= i; i--) lt(t[i])
        }, Ou: function () {
            var t = this.B.navigation;
            t.buttons && (this.qu && lt(this.qu), this.qu && lt(this.Gu), this.qu = ct("DIV", {"class": "webix_nav_button_" + t.type + " webix_nav_button_prev "}, '<div role="button" tabindex="0" aria-label="' + $.aria.prevTab + '" class="webix_nav_button_inner"></div>'), this.Tt.appendChild(this.qu), this.Gu = ct("DIV", {"class": "webix_nav_button_" + t.type + " webix_nav_button_next "}, '<div role="button" tabindex="0" aria-label="' + $.aria.prevTab + '" class="webix_nav_button_inner"></div>'), this.Tt.appendChild(this.Gu))
        }
    }, Te = {
        showOverlay: function (t) {
            this.Ku ? this.Ku.innerHTML = t : (this.Ku = ct("DIV", {"class": "webix_overlay"}, t || ""), dt(this.Ku, this.Tt.firstChild, this.Tt), this.Tt.style.position = "relative")
        }, hideOverlay: function () {
            this.Ku && (lt(this.Ku), this.Ku = null)
        }
    }, Ve = {
        pager_setter: function (s) {
            if ("string" == typeof s) {
                var t = ri(s);
                if (!t) return this.$blockRender = !0, k(function () {
                    var t = ri(s);
                    this.B.pager = this.pager_setter(t);
                    var i = t.B;
                    i.count = this.data.Zu(i.level), t.refresh(), this.$blockRender = !1, this.render()
                }, this), null;
                s = t
            }
            return this.attachEvent("onBeforeRender", function n(t) {
                if (s.config.autosize && this.getVisibleCount) {
                    var i = this.getVisibleCount();
                    isNaN(i) ? (s.config.size = 1, k(n, this, [!0])) : i != s.config.size && (s.config.size = i, s.refresh(), !0 === t && this.refresh())
                }
                var e = this.B.pager;
                return -1 != e.page && (this.data.$min = this.Qu(0, e.page * e.size), this.data.$max = this.Qu(this.data.$min, e.size), this.data.$pagesize = this.data.$max - this.data.$min, !0)
            }), s.$view || (s.view = "pager", s = ei(s)), ((
                this.tc = s).$master = this).data.attachEvent("onStoreUpdated", function () {
                var t = s.B;
                t.count = this.Zu(t.level), s.refresh()
            }), this.data.Zu = this.Zu, s.B
        }, Zu: function (i) {
            if (i && 0 !== i) {
                var e = 0;
                return this.each(function (t) {
                    t.$level == i && e++
                }), e
            }
            return this.count()
        }, Qu: function (t, i) {
            var e = this.B.pager;
            if (e.level && 0 !== e.level) {
                var s = t, n = this.data.order.length;
                if (i) for (; s < n;) {
                    if (this.data.order[s] && this.data.getItem(this.data.order[s]).$level == e.level) {
                        if (0 === i) break;
                        i--
                    }
                    s++
                }
                return s
            }
            return t + i
        }, setPage: function (t) {
            this.tc && this.tc.select(t)
        }, getPage: function () {
            return this.tc.B.page
        }, getPager: function () {
            return this.tc
        }
    }, ze = {
        $init: function () {
            var t = this;
            j(this.ic) && this.attachEvent && (this.attachEvent("onBeforeLoad", function () {
                return t.showProgress()
            }), this.attachEvent("onAfterLoad", function () {
                return t.hideProgress()
            }), this.ic = null)
        }, showProgress: function (t) {
            var i;
            if (!this.ic) {
                var e = "icon" == (t = P.extend({
                    position: 0,
                    delay: 2e3,
                    type: "icon",
                    icon: "wxi-sync",
                    hide: !1
                }, t || {}, !0)).type ? t.icon + " webix_spin" : "";
                if (this.ic = ct("DIV", {
                    "class": "webix_progress_" + t.type,
                    role: "progressbar",
                    "aria-valuemin": "0",
                    "aria-valuemax": "100",
                    tabindex: "0"
                }, "<div class='webix_progress_state " + e + "'></div>"), this.setPosition || (this.Tt.style.position = "relative"), dt(this.ic, this.Tt.firstChild, this.Tt), this.Tt.setAttribute("aria-busy", "true"), (!Ui.$active || "native" == this.ec) && this.getScrollState) {
                    var s = this.getScrollState();
                    this.Tt.scrollWidth != this.$width && (this.ic.style.left = s.x + "px"), this.Tt.scrollHeight != this.$height && ("bottom" != t.type ? this.ic.style.top = s.y + "px" : this.ic.style.top = s.y + this.$height - this.ic.offsetHeight + "px")
                }
                this.sc = "icon" != t.type
            }
            if (t) {
                if (this.sc) {
                    var n = t.position || 1;
                    if (this.ic.style[Y.transitionDuration] === undefined && t.delay) {
                        var h = 0, r = 0, o = n / t.delay * 30, a = this;
                        this.nc && (window.clearInterval(this.nc), r = this.ic.firstChild.offsetWidth / this.ic.offsetWidth * 100), this.nc = window.setInterval(function () {
                            30 * h == t.delay ? window.clearInterval(a.nc) : (a.ic && a.ic.firstChild && (a.ic.firstChild.style.width = r + h * o * n * 100 + "%"), h++)
                        }, 30)
                    } else t.delay && (i = this.Tt.firstChild.offsetWidth, this.ic.firstChild.style[Y.transitionDuration] = t.delay + "ms"), this.ic.firstChild.style.width = 100 * n + "%"
                }
                return this.hc && clearTimeout(this.hc), t.hide && (this.hc = k(this.hideProgress, this, [1], t.delay)), i
            }
        }, hideProgress: function (t) {
            this.ic && (t || !this.sc ? (this.nc && window.clearInterval(this.nc), lt(this.ic), this.ic = null, this.Tt.removeAttribute("aria-busy")) : this.showProgress({
                position: 1.1,
                delay: 300,
                hide: !0
            }))
        }
    }, He = {
        $init: function () {
            this.data, this.Ti = document.createElement("DIV"), this.data.attachEvent("onIdChange", S(this.Dr, this)), this.attachEvent("onItemClick", this.rc), this.types || (this.types = {"default": this.type}, this.type.name = "default"), this.type = l(this.type)
        }, customize: function (t) {
            Qt(this, t)
        }, item_setter: function (t) {
            return this.type_setter(t)
        }, type_setter: function (t) {
            return this.types[t] ? (this.type = l(this.types[t]), this.type.css && (this.Vi.className += " " + this.type.css)) : this.customize(t), this.type.on_click && P.extend(this.on_click, this.type.on_click), t
        }, template_setter: function (t) {
            this.type.template = Wt(t)
        }, Z: function (t) {
            var i = this.data.pr[t.id];
            return !t.$template || this.type["template" + t.$template], t.$template, this.callEvent("onItemRender", [t]), this.type.templateStart(t, this.type, i) + (t.$template ? this.type["template" + t.$template] : this.type.template)(t, this.type, i) + this.type.templateEnd(t, this.type, i)
        }, oc: function (t) {
            return this.Ti.innerHTML = this.Z(t), this.Ti.firstChild
        }, Dr: function (t, i) {
            var e = this.getItemNode(t);
            e && (e.setAttribute(this.Eo, i), this.Ai[i] = this.Ai[t], delete this.Ai[t])
        }, rc: function () {
            if (this.B.click) {
                var t = v(this.B.click, this.$scope);
                t && t.call && t.apply(this, arguments)
            }
        }, getItemNode: function (t) {
            if (this.Ai) return this.Ai[t];
            this.Ai = {};
            for (var i = this.Q.childNodes, e = 0; e < i.length; e++) {
                var s = i[e].getAttribute(this.Eo);
                s && (this.Ai[s] = i[e])
            }
            return this.getItemNode(t)
        }, locate: function (t) {
            return vt(t, this.Eo)
        }, showItem: function (t) {
            var i = this.getItemNode(t);
            if (i && this.scrollTo) {
                var e = i.offsetLeft, s = e + i.offsetWidth, n = i.offsetTop, h = n + i.offsetHeight,
                    r = this.getScrollState(), o = r.x;
                (e < o || o + this.oe < s) && (o = e)
                ;var a = r.y;
                (n < a || a + this.ue < h) && (a = n), this.scrollTo(o, a), this.ac && this.ac(t)
            }
        }, render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) if (t) {
                var s = this.getItemNode(t);
                switch (e) {
                    case"paint":
                    case"update":
                        if (!s) return;
                        dt(this.Ai[t] = this.oc(i), s), lt(s);
                        break;
                    case"delete":
                        if (!s) return;
                        lt(s), delete this.Ai[t];
                        break;
                    case"add":
                        dt(this.Ai[t] = this.oc(i), this.getItemNode(this.data.getNextId(t)), this.Q);
                        break;
                    case"move":
                        dt(this.getItemNode(t), this.getItemNode(this.data.getNextId(t)), this.Q)
                }
            } else this.callEvent("onBeforeRender", [this.data]) && ((this.uc || this.Q).innerHTML = this.data.getRange().map(this.Z, this).join(""), this.Ai = null, this.callEvent("onAfterRender", []))
        }
    }, Re = {
        $init: function (t) {
            if (t && !t.scroll && this.cc) return this.Q = this.Q || this.Vi;
            (this.Q || this.Vi).appendChild(ct("DIV", {"class": "webix_scroll_cont"}, "")), this.Q = (this.Q || this.Vi).firstChild, !this.callEvent || Y.touch && "native" != this.ec || Jt(this.Tt, "scroll", function () {
                k(function () {
                    this.callEvent("onAfterScroll", [])
                }, this)
            }, {bind: this})
        }, ec: "native", scroll_setter: function (t) {
            if (!t) return !1;
            var i = "auto" === t, e = "x" == t ? "x" : "xy" == t ? "xy" : i ? "xy" : "y";
            if (Ui.$active && "touch" == this.ec) this.Q.setAttribute("touch_scroll", e), this.attachEvent && this.attachEvent("onAfterRender", S(this.fc, this)); else if (Y.$customScroll) se.enable(this, e); else {
                var s = this.Q.parentNode.style;
                i ? s.overflowX = s.overflowY = "auto" : (-1 != e.indexOf("x") && (this.ce = !0, s.overflowX = "scroll"), -1 != e.indexOf("y") && (this.ae = !0, s.overflowY = "scroll"))
            }
            return e
        }, lc: function (t, i) {
            if (!!this.B.scroll != !!t) {
                if (!Y.$customScroll) this.Q.parentNode.style["x" === i ? "overflowX" : "overflowY"] = t ? "auto" : "hidden";
                "x" === i ? this.ce = t : this.ae = t, this.B.scroll = !!t && i
            }
        }, getScrollState: function () {
            return {x: this.Q.parentNode.scrollLeft, y: this.Q.parentNode.scrollTop}
        }, scrollTo: function (t, i) {
            this.Q.parentNode.scrollLeft = t, this.Q.parentNode.scrollTop = i
        }, fc: function () {
            Ui.Re(), Ui.ss();
            var t = this.getScrollState(), i = this.Q.offsetWidth - this.$width - t.x,
                e = this.Q.offsetHeight - this.$height - t.y;
            if (i < 0 || e < 0) {
                var s = i < 0 ? Math.min(-i - t.x, 0) : -t.x, n = e < 0 ? Math.min(-e - t.y, 0) : -t.y;
                Ui.os(this.Q, s, n, 0)
            }
        }
    }, Be = {
        $init: function () {
            this.Wn = g(), this.data, this.data.attachEvent("onStoreUpdated", S(this.dc, this)), this.data.attachEvent("onStoreLoad", S(this.vc, this)), this.data.attachEvent("onAfterFilter", S(this._c, this)), this.data.attachEvent("onSyncApply", S(this.pc, this)), this.data.attachEvent("onIdChange", S(this.mc, this)), this.$ready.push(this.bc)
        }, bc: function () {
            ("multiselect" == this.B.select || this.B.multiselect || "area" == this.B.select) && Jt(this.$view, "mousedown", function (t) {
                (t || window.event).shiftKey && xt(ti.yt = this, "webix_noselect", 1)
            })
        }, mc: function (t, i) {
            for (var e = this.Wn.length - 1; 0 <= e; e--) this.Wn[e] == t && (this.Wn[e] = i)
        }, _c: function () {
            for (var t = this.Wn.length - 1; 0 <= t; t--) if (this.data.getIndexById(this.Wn[t]) < 0) {
                var i = this.Wn[t];
                this.removeCss(i, "webix_selected", !0), this.Wn.splice(t, 1), this.callEvent("onSelectChange", [i])
            }
        }, dc: function (t, i, e) {
            "delete" == e ? this.loadBranch ? this.pc() : this.Wn.remove(t) : t || this.data.count() || this.data.mr || this.data.zr || (this.Wn = g())
        }, vc: function () {
            this.B.select && this.data.each(function (t) {
                t && t.$selected && this.select(t.id)
            }, this)
        }, pc: function () {
            for (var t = this.Wn.length - 1; 0 <= t; t--) this.exists(this.Wn[t]) || this.Wn.splice(t, 1)
        }, gc: function (t, i, e, s) {
            var n = i ? "onBeforeSelect" : "onBeforeUnSelect";
            if (!this.callEvent(n, [t, i])) return !1;
            s && (this.wc = !0, this.unselectAll(), this.wc = !1), i ? this.addCss(t, "webix_selected", !0) : this.removeCss(t, "webix_selected", !0), e ? e.push(t) : (i ? this.Wn.push(t) : this.Wn.remove(t), this.xc(t));
            var h = i ? "onAfterSelect" : "onAfterUnSelect";
            return this.callEvent(h, [t]), !0
        }, select: function (t, i) {
            var e = arguments[2], s = arguments[3];
            if (!t) return this.selectAll();
            if (b(t)) for (var n = 0; n < t.length; n++) this.select(t[n], n ? 1 : i, e, s); else {
                if (this.data.exists(t), s && this.Wn.length) return this.selectAll(this.Wn[this.Wn.length - 1], t);
                var h = !1;
                e || i || 1 == this.Wn.length && this.Wn[0] == t || (h = !0), h || !this.isSelected(t) ? this.gc(t, !0, null, h) : e && this.unselect(t)
            }
        }, unselect: function (t) {
            if (!t) return this.unselectAll();
            this.isSelected(t) && this.gc(t, !1)
        }, selectAll: function (t, i) {
            var e = [];
            (
                t || i ? this.data.getRange(t || null, i || null) : this.data.getRange()).each(function (t) {
                this.data.getMark(t.id, "webix_selected") || (this.Wn.push(t.id), this.gc(t.id, !0, e))
            }, this), this.xc(e)
        }, unselectAll: function () {
            var i = [];
            this.Wn.each(function (t) {
                this.gc(t, !1, i)
            }, this), this.Wn = g(), this.xc(i)
        }, isSelected: function (t) {
            return -1 != this.Wn.find(t)
        }, getSelectedId: function (t) {
            switch (this.Wn.length) {
                case 0:
                    return t ? [] : "";
                case 1:
                    return t ? [this.Wn[0]] : this.Wn[0];
                default:
                    return [].concat(this.Wn)
            }
        }, getSelectedItem: function (t) {
            var i = this.getSelectedId(!0);
            if (1 < i.length || t) {
                for (var e = i.length - 1; 0 <= e; e--) i[e] = this.getItem(i[e]);
                return i
            }
            if (i.length) return this.getItem(i[0])
        }, yc: function (t) {
            return 100 < t.length || t.length > this.data.count / 2
        }, xc: function (t) {
            if ("object" != M(t) && (t = [t]), t.length) {
                if (this.yc(t)) this.data.refresh(); else for (var i = 0; i < t.length; i++) this.render(t[i], this.data.getItem(t[i]), "update");
                this.wc || this.callEvent("onSelectChange", [t])
            }
        }
    };
    _i(function () {
        Kt(document.body, "mouseup", function () {
            ti.yt && (yt(ti.yt, "webix_noselect"), ti.yt = null)
        })
    });
    var Pe = {
        Mc: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F"], toHex: function (t, i) {
            t = parseInt(t, 10);
            for (var e = ""; 0 < t;) e = this.Mc[t % 16] + e, t = Math.floor(t / 16);
            for (; e.length < i;) e = "0" + e;
            return e
        }, rgbToHex: function (t) {
            var i = [];
            return "string" == typeof t ? t.replace(/[\d+.]+/g, function (t) {
                i.push(parseFloat(t))
            }) : b(t) && (i = t), 0 === i[3] ? "" : i.slice(0, 3).map(function (t) {
                return Pe.toHex(Math.floor(t), 2)
            }).join("")
        }, hexToDec: function (t) {
            return parseInt(t, 16)
        }, toRgb: function (t) {
            var i, e, s, n;
            return s = "string" != typeof t ? (i = t[0], e = t[1], t[2]) : -1 != t.indexOf("rgb") ? (i = (n = t.substr(t.indexOf("(") + 1, t.lastIndexOf(")") - t.indexOf("(") - 1).split(","))[0], e = n[1], n[2]) : ("#" == t.substr(0, 1) && (t = t.substr(1)), i = this.hexToDec(t.substr(0, 2)), e = this.hexToDec(t.substr(2, 2)), this.hexToDec(t.substr(4, 2))), ((i = parseInt(i, 10) || 0) < 0 || 255 < i) && (i = 0), ((e = parseInt(e, 10) || 0) < 0 || 255 < e) && (e = 0), ((s = parseInt(s, 10) || 0) < 0 || 255 < s) && (s = 0), [i, e, s]
        }, hsvToRgb: function (t, i, e) {
            var s, n, h, r, o, a, u, c;
            switch (h = e * (1 - i), r = e * (1 - (n = t / 60 - (s = Math.floor(t / 60) % 6)) * i), o = e * (1 - (1 - n) * i), c = u = a = 0, s) {
                case 0:
                    a = e, u = o, c = h;
                    break;
                case 1:
                    a = r, u = e, c = h;
                    break;
                case 2:
                    a = h, u = e, c = o;
                    break;
                case 3:
                    a = h, u = r, c = e;
                    break;
                case 4:
                    a = o, u = h, c = e;
                    break;
                case 5:
                    a = e, u = h, c = r
            }
            return [a = Math.floor(255 * a), u = Math.floor(255 * u), c = Math.floor(255 * c)]
        }, rgbToHsv: function (t, i, e) {
            var s, n, h, r, o, a, u;
            return s = t / 255, n = i / 255, h = e / 255, r = Math.min(s, n, h), a = 0, (u = o = Math.max(s, n, h)) == r ? a = 0 : o == s && h <= n ? a = 60 * (n - h) / (o - r) + 0 : o == s && n < h ? a = 60 * (n - h) / (o - r) + 360 : o == n ? a = 60 * (h - s) / (o - r) + 120 : o == h && (a = 60 * (s - n) / (o - r) + 240), [a, 0 === o ? 0 : 1 - r / o, u]
        }
    };

    function je(t) {
        var i = " ";
        if (t) for (var e in t) i += e + '="' + t[e] + '" ';
        return i
    }

    var Ee = {
        draw: function (t, i, e, s) {
            return "<svg " + je({
                xmlns: "http://www.w3.org/2000/svg",
                version: "1.1",
                height: "100%",
                width: "100%",
                viewBox: "0 0 " + i + " " + e,
                "class": s || ""
            }) + ">" + t + "</svg>"
        }, styleMap: {lineColor: "stroke", color: "fill"}, group: function (t) {
            return "<g>" + t + "</g>"
        }
    };
    Ee.Sc = {
        M: function (t) {
            return " M " + t.x + " " + t.y
        }, L: function (t) {
            return " L " + t.x + " " + t.y
        }, C: function (t, i, e) {
            return " C " + t.x + " " + t.y + " " + i.x + " " + i.y + " " + e.x + " " + e.y
        }, A: function (t, i, e, s) {
            var n = t.x + Math.cos(s) * i, h = t.y + Math.sin(s) * i;
            return " A " + i + " " + i + " 0 " + (s - e >= Math.PI ? 1 : 0) + " 1 " + n + " " + h
        }
    }, Ee.definePath = function (t, i) {
        for (var e = "", s = 0; s < t.length; s++) {
            t[s][0] && t[s][0];
            var n = t[s][0].toUpperCase();
            this.Sc[n], e += this.Sc[n].apply(this, t[s].slice(1))
        }
        return i && (e += " Z"), e
    }, Ee.kc = function (t) {
        for (var i = [], e = 0; e < t.length; e++) i.push([e ? "L" : "M", t[e]]);
        return i
    }, Ee.setOpacity = function (t, i) {
        var e = Pe.toRgb(t);
        return e.push(i), "rgba(" + e.join(",") + ")"
    }, Ee.Cc = function (t) {
        for (var i = [], e = 0; e < t.length; e++) {
            var s = t[e];
            e || i.push(["M", s[0]]), i.push(["C", s[1], s[2], s[3]])
        }
        return i
    }, Ee.getPath = function (t, i, e) {
        return '<path class="' + i + '" vector-effect="non-scaling-stroke" d="' + t + '" ' + (e = je(e)) + "/>"
    }, Ee.getSector = function (t, i, e, s, n, h) {
        h = je(h);
        var r = [["M", t], ["L", {x: t.x + Math.cos(e) * i, y: t.y + Math.sin(e) * i}], ["A", t, i, e, s], ["L", t]];
        return '<path class="' + n + '" vector-effect="non-scaling-stroke" d="' + Ee.definePath(r, !0) + '" ' + h + "/>"
    }, Ee.getCurve = function (t, i, e) {
        return e = je(e),
        '<path fill="none" class="' + i + '" vector-effect="non-scaling-stroke" d="' + this.definePath(this.Cc(t)) + '" ' + e + "/>"
    }, Ee.getLine = function (t, i, e, s) {
        return this.getPath(this.definePath(this.kc([t, i]), !0), e, s)
    }, Ee.getCircle = function (t, i, e, s) {
        return s = je(s), '<circle class="' + e + '" cx="' + t.x + '" cy="' + t.y + '" r="' + i + '" ' + s + "/>"
    }, Ee.getRect = function (t, i, e, s, n, h) {
        return '<rect class="' + n + '" rx="0" ry="0" x="' + t + '" y="' + i + '" width="' + e + '" height="' + s + '" ' + (h = je(h)) + "/>"
    };
    var Ne = {paddingX: 6, paddingY: 6, radius: 2, minHeight: 4, eventRadius: 8};

    function Le(t) {
        this.config = P.extend(_(Ne), t || {}, !0)
    }

    Le.prototype.draw = function (t, i, e) {
        var s = this.getPoints(t, i, e), n = this.config, h = Ee, r = n.color ? this.Dc(h, n.color) : null,
            o = h.definePath(this.Ic(s)), a = h.group(h.getPath(o, "webix_sparklines_line" + (r ? " " + r.line : "")));
        a += this.Ac(h, s, n.radius, "webix_sparklines_item" + (r ? " " + r.item : ""));
        var u = Math.min(t.length ? (i - 2 * (n.paddingX || 0)) / t.length : 0, n.eventRadius);
        return a += this.Fc(h, s, u), h.draw(a, i, e, "webix_sparklines_line_chart" + (n.css ? " " + n.css : ""))
    }, Le.prototype.Dc = function (t, i) {
        var e = {line: {}, item: {}}, s = t.styleMap;
        if (i) for (var n in e.line[s.lineColor] = i, e.item[s.color] = i, e) e[n] = ot(e[n]);
        return e
    }, Le.prototype.Ac = function (t, i, e, s, n) {
        for (var h = [], r = 0; r < i.length; r++) h.push(t.getCircle(i[r], e, s, n));
        return t.group(h.join(""))
    }, Le.prototype.Fc = function (t, i, e) {
        for (var s = [], n = 0; n < i.length; n++) s.push(t.getCircle(i[n], e, "webix_sparklines_event_area", {webix_area: n}));
        return t.group(s.join(""))
    }, Le.prototype.Ic = function (t) {
        var i, e, s = [];
        for (i = 0; i < t.length; i++) e = i ? "L" : "M", s.push([e, t[i]]);
        return s
    }, Le.prototype.getPoints = function (t, i, e) {
        var s = this.config, n = Math.min.apply(null, t);
        "undefined" != typeof s.origin && (n = Math.min(s.origin, n));
        var h = Math.max.apply(null, t), r = [], o = s.paddingX || 0, a = s.paddingY || 0;
        i = (i || 100) - 2 * o;
        var u = s.minHeight || 0;
        if (e = (e || 100) - 2 * a, t.length) if (1 == t.length) r.push({x: i / 2 + o, y: e / 2 + o}); else {
            var c = i / (t.length - 1), f = s.scale || h - n, l = (e - u) / (f || 1);
            f || (e /= 2);
            for (var d = 0; d < t.length; d++) r.push({
                x: Math.ceil(c * d) + o,
                y: e - Math.ceil(l * (t[d] - n)) + a - u
            })
        }
        return r
    };
    var Oe = {paddingX: 3, paddingY: 4, radius: 1, minHeight: 4, eventRadius: 8};

    function Ue(t) {
        this.config = P.extend(_(Oe), t || {}, !0)
    }

    Ue.prototype.draw = function (t, i, e) {
        var s, n, h, r, o, a = this.config, u = Le.prototype, c = Ee;
        return r = this.getPoints(t, i, e), h = c.definePath(u.Ic(r), !0), a.color && (o = this.Dc(c, a.color)), n = c.group(c.getPath(h, "webix_sparklines_area" + (o ? " " + o.area : ""))), r.splice(r.length - 3, 3), h = c.definePath(u.Ic(r)), n += c.group(c.getPath(h, "webix_sparklines_line" + (o ? " " + o.line : ""))), n += u.Ac(c, r, a.radius, "webix_sparklines_item" + (o ? " " + o.item : "")), s = Math.min(t.length ? (i - 2 * (a.paddingX || 0)) / t.length : 0, a.eventRadius), n += u.Fc(c, r, s), c.draw(n, i, e, "webix_sparklines_area_chart" + (a.css ? " " + a.css : ""))
    }, Ue.prototype.Dc = function (t, i) {
        var e = {area: {}, line: {}, item: {}}, s = t.styleMap;
        if (i) for (var n in e.area[s.color] = t.setOpacity(i, .2), e.line[s.lineColor] = i, e.item[s.color] = i, e) e[n] = ot(e[n]);
        return e
    }, Ue.prototype.getPoints = function (t, i, e) {
        var s = Le.prototype.getPoints.call(this, t, i, e), n = this.config.paddingX || 0,
            h = this.config.paddingY || 0;
        return s.push({x: i - n, y: e - h}, {x: n, y: e - h}, {x: n, y: s[0].y}), s
    };
    var We = {
        paddingX: 3,
        paddingY: 4,
        width: 20,
        margin: 4,
        minHeight: 4,
        eventRadius: 8,
        origin: 0,
        itemCss: function (t) {
            return t < (this.config.origin || 0) ? " webix_sparklines_bar_negative" : ""
        }
    };

    function Ye(t) {
        this.config = P.extend(_(We), t || {}, !0)
    }

    Ye.prototype.draw = function (t, i, e) {
        var s, n, h, r, o, a = this.config, u = "", c = [], f = this.getPoints(t, i, e), l = Ee;
        for (s = 0; s < f.length; s++) n = "function" == typeof a.itemCss ? a.itemCss.call(this, t[s]) : a.itemCss || "", a.negativeColor && t[s] < a.origin ? n += " " + this.Dc(l, a.negativeColor) : a.color && (n += " " + this.Dc(l, a.color)), h = f[s], c.push(l.getRect(h.x, h.y, h.width, h.height, "webix_sparklines_bar " + n));
        u += l.group(c.join("")), r = parseInt(this.Tc(t, i, e), 10) + .5, o = a.paddingX || 0, u += l.group(l.getLine({
            x: o,
            y: r
        }, {x: i - o, y: r}, "webix_sparklines_origin"));
        var d = this.Vc(t, i, e), v = [];
        for (s = 0; s < d.length; s++) h = d[s], v.push(l.getRect(h.x, h.y, h.width, h.height, "webix_sparklines_event_area ", {webix_area: s}));
        return u += l.group(v.join("")), l.draw(u, i, e, "webix_sparklines_bar_chart" + (a.css ? " " + a.css : ""))
    },
        Ye.prototype.Dc = function (t, i) {
            var e = {}, s = t.styleMap;
            return i && (e[s.color] = i), ot(e)
        }, Ye.prototype.Tc = function (t, i, e) {
        var s = this.config, n = s.paddingY || 0, h = n + (e = (e || 100) - 2 * n);
        if (!1 !== s.origin) {
            var r = Math.min.apply(null, t), o = Math.max.apply(null, t), a = s.origin || -1e-6;
            if (o <= a) h = n; else if (r < a) {
                h -= e / (o - r) * (a - r)
            }
        }
        return h
    }, Ye.prototype.Vc = function (t, i, e) {
        var s = [], n = this.config.paddingX || 0, h = this.config.paddingY || 0;
        if (i = (i || 100) - 2 * n, e = (e || 100) - 2 * h, t.length) for (var r = i / t.length, o = 0; o < t.length; o++) s.push({
            x: Math.ceil(r * o) + n,
            y: h,
            height: e,
            width: r
        });
        return s
    }, Ye.prototype.getPoints = function (t, i, e) {
        var s = this.config, n = Math.min.apply(null, t);
        s.origin < n && (n = s.origin);
        var h = Math.max.apply(null, t), r = [], o = s.paddingX, a = s.paddingY, u = s.margin, c = s.width || 20,
            f = this.Tc(t, i, e);
        if (i = (i || 100) - 2 * o, e = (e || 100) - 2 * a, t.length) {
            var l = i / t.length, d = s.scale || h - n;
            u = l - (c = Math.min(l - u, c));
            var v = 0, _ = n;
            !1 !== s.origin && s.origin > n ? _ = s.origin || 0 : v = s.minHeight;
            for (var p = (e - v) / (d || 1), m = 0; m < t.length; m++) {
                var b = Math.ceil(p * (t[m] - _));
                r.push({
                    x: Math.ceil(l * m) + o + u / 2,
                    y: f - (t[m] >= _ ? b : 0) - v,
                    height: Math.abs(b) + v,
                    width: c
                })
            }
        }
        return r
    };
    var qe = {paddingY: 2};

    function Ge(t) {
        this.config = P.extend(qe, t || {}, !0)
    }

    Ge.prototype.zc = 0, Ge.prototype.Hc = ["#f55b50", "#ff6d3f", "#ffa521", "#ffc927", "#ffee54", "#d3e153", "#9acb61", "#63b967", "#21a497", "#21c5da", "#3ea4f5", "#5868bf", "#7b53c0", "#a943ba", "#ec3b77", "#9eb0b8"], Ge.prototype.Rc = function (t, i) {
        var e = i.length, s = this.Hc.length;
        return e < s ? (t && (t = t < s - e ? this.zc + 2 : this.zc + 1), this.zc = t) : t %= s, this.Hc[t]
    }, Ge.prototype.draw = function (t, i, e) {
        var s, n, h, r, o = this.config, a = o.color || this.Rc, u = this.getAngles(t), c = Ee,
            f = e / 2 - (o.paddingY || 0), l = i / 2, d = e / 2;
        for ("function" != typeof a && (a = function () {
            return a
        }), r = "", h = 0; h < u.length; h++) (s = {})[c.styleMap.color] = a.call(this, h, t, this.Bc), r += c.getSector({
            x: l,
            y: d
        }, f, u[h][0], u[h][1], "webix_sparklines_sector", s);
        for (n = c.group(r), r = "", h = 0; h < u.length; h++) r += c.getSector({
            x: l,
            y: d
        }, f, u[h][0], u[h][1], "webix_sparklines_event_area", {webix_area: h});
        return n += c.group(r), c.draw(n, i, e, "webix_sparklines_pie_chart" + (o.css ? " " + o.css : ""))
    }, Ge.prototype.getAngles = function (t) {
        var i, e, s = -Math.PI / 2, n = [], h = this.Pc(t);
        for (e = 0; e < t.length; e++) i = -Math.PI / 2 + h[e] - 1e-4, n.push([s, i]), s = i;
        return n
    }, Ge.prototype.jc = function (t) {
        for (var i = 0, e = 0; e < t.length; e++) i += 1 * t[e];
        return i
    }, Ge.prototype.Pc = function (t) {
        var i, e, s = [], n = 0, h = this.jc(t);
        for (i = 0; i < t.length; i++) e = 1 * t[i], s[i] = 2 * Math.PI * (h ? (e + n) / h : 1 / t.length), n += e;
        return s
    };
    var Xe = {paddingX: 3, paddingY: 6, radius: 2, minHeight: 4, eventRadius: 8};

    function Je(t) {
        this.config = P.extend(_(Xe), t || {}, !0)
    }

    Je.prototype.draw = function (t, i, e) {
        var s = this.config, n = "", h = Le.prototype, r = this.getPoints(t, i, e), o = Ee,
            a = s.color ? this.Dc(o, s.color) : null;
        n += o.group(o.getCurve(r, "webix_sparklines_line" + (a ? " " + a.line : "")));
        var u = h.getPoints.call(this, t, i, e);
        n += h.Ac(o, u, s.radius, "webix_sparklines_item" + (a ? " " + a.item : ""));
        var c = Math.min(t.length ? (i - 2 * (s.paddingX || 0)) / t.length : 0, s.eventRadius);
        return n += h.Fc(o, u, c), o.draw(n, i, e, "webix_sparklines_line_chart" + (s.css ? " " + s.css : ""))
    }, Je.prototype.Dc = function (t, i) {
        var e = {line: {}, item: {}}, s = t.styleMap;
        if (i) for (var n in e.line[s.lineColor] = i, e.item[s.color] = i, e) e[n] = ot(e[n]);
        return e
    }, Je.prototype.getPoints = function (t, i, e) {
        var s, n, h, r, o = [], a = [], u = [];
        for (n = Le.prototype.getPoints.call(this, t, i, e), s = 0; s < n.length; s++) a.push(n[s].x), u.push(n[s].y);
        for (h = this.Ec(a), r = this.Ec(u), s = 0; s < n.length - 1; s++) o.push([n[s], {
            x: h[0][s],
            y: r[0][s]
        }, {x: h[1][s], y: r[1][s]}, n[s + 1]]);
        return o
    }, Je.prototype.Ec = function (t) {
        var i, e, s = [], n = [], h = [], r = [], o = [], a = [], u = t.length - 1;
        for (n[s[0] = 0] = 2, h[0] = 1, r[0] = t[0] + 2 * t[1], i = 1; i < u - 1; i++) s[i] = 1, n[i] = 4, h[i] = 1, r[i] = 4 * t[i] + 2 * t[i + 1];
        for (s[u - 1] = 2, n[u - 1] = 7, h[u - 1] = 0, r[u - 1] = 8 * t[u - 1] + t[u], i = 1; i < u; i++) e = s[i] / n[i - 1], n[i] = n[i] - e * h[i - 1], r[i] = r[i] - e * r[i - 1];
        for (o[u - 1] = r[u - 1] / n[u - 1], i = u - 2; 0 <= i; --i) o[i] = (r[i] - h[i] * o[i + 1]) / n[i];
        for (i = 0; i < u - 1; i++) a[i] = 2 * t[i + 1] - o[i + 1];
        return a[u - 1] = .5 * (t[u] + o[u - 1]), [o, a]
    };
    var Ke = {paddingX: 3, paddingY: 6, radius: 1, minHeight: 4, eventRadius: 8};

    function Ze(t) {
        this.config = P.extend(_(Ke), t || {}, !0)
    }

    function Qe() {
    }

    (Ze.prototype = _(Je.prototype)).draw = function (t, i, e) {
        var s = this.config, n = Le.prototype, h = Ee,
            r = s.color ? this.Dc(h, s.color) : null, o = this.getPoints(t, i, e), a = o.splice(o.length - 3, 3),
            u = h.kc(a);
        u[0][0] = "L";
        var c = h.Cc(o).concat(u),
            f = h.group(h.getPath(h.definePath(c), "webix_sparklines_area" + (r ? " " + r.area : ""), !0));
        f += h.group(h.getPath(h.definePath(h.Cc(o)), "webix_sparklines_line" + (r ? " " + r.line : "")));
        var l = n.getPoints.call(this, t, i, e);
        f += n.Ac(h, l, s.radius, "webix_sparklines_item" + (r ? " " + r.item : ""));
        var d = Math.min(t.length ? (i - 2 * (s.paddingX || 0)) / t.length : 0, s.eventRadius);
        return f += n.Fc(h, l, d), h.draw(f, i, e, "webix_sparklines_splinearea_chart" + (s.css ? " " + s.css : ""))
    }, Ze.prototype.Dc = function (t, i) {
        var e = {area: {}, line: {}, item: {}}, s = t.styleMap;
        if (i) for (var n in e.area[s.color] = t.setOpacity(i, .2), e.line[s.lineColor] = i, e.item[s.color] = i, e) e[n] = ot(e[n]);
        return e
    }, Ze.prototype.getPoints = function (t, i, e) {
        var s = Je.prototype.getPoints.call(this, t, i, e), n = this.config.paddingX || 0,
            h = this.config.paddingY || 0;
        return s.push({x: i - n, y: e - h}, {x: n, y: e - h}, {x: n, y: s[0][0].y}), s
    }, Qe.types = {}, Qe.getTemplate = function (t) {
        var i = t || {};
        "string" == typeof t && (i = {type: t}), P.extend(i, {type: "line"});
        var e = this.types[i.type];
        return S(this.Nc, new e(i))
    }, Qe.Nc = function (t, i, e, s) {
        return s ? this.draw(function n(t) {
            for (var i = [], e = t.length - 1; 0 <= e; e--) {
                var s = t[e];
                i[e] = "object" === M(s) ? s.value : s
            }
            return i
        }(e), s.width, 33) : this.draw(t.data || t, i.width, i.height)
    }, I("onDataTable", function (t) {
        t.type.sparklines = Qe.getTemplate()
    }), Qe.types.area = Ue, Qe.types.bar = Ye, Qe.types.line = Le, Qe.types.pie = Ge, Qe.types.spline = Je, Qe.types.splineArea = Ze;
    var ts = {
        escape: !0, delimiter: {rows: "\n", cols: "\t"}, parse: function (t, i) {
            if (i = i || this.delimiter, !this.escape) return this.Lc(t, i);
            for (var e = t.replace(/\n$/, "").split(i.rows), s = 0; s < e.length - 1;) this.Oc(e[s], '"') % 2 == 1 && (e[s] += i.rows + e[s + 1], delete e[s + 1], s++), s++;
            var n = [];
            for (s = 0; s < e.length; s++) if ("undefined" != typeof e[s]) {
                for (var h = e[s], r = 0, o = [], a = !1, u = 0; u <= h.length; u++) {
                    if (!a && h[u] === i.cols || u === h.length) {
                        var c = h.substr(r, u - r);
                        c[0] === c[c.length - 1] && '"' === c[0] && (c = c.substr(1, c.length - 2).replace('""', '"')), o.push(c), r = u + 1
                    }
                    '"' !== h[u] || (a = !a)
                }
                n.push(o)
            }
            return n
        }, Lc: function (t, i) {
            for (var e = t.split(i.rows), s = 0; s < e.length; s++) e[s] = e[s].split(i.cols);
            return e
        }, Oc: function (t, i) {
            return t.split(i).length - 1
        }, stringify: function (t, i) {
            if (i = i || this.delimiter, !this.escape) {
                for (var e = 0; e < t.length; e++) t[e] = t[e].join(i.cols);
                return t.join(i.rows)
            }
            for (var s = /\n|"|;|,/, n = 0; n < t.length; n++) {
                for (var h = 0; h < t[n].length; h++) {
                    var r = t[n][h];
                    r instanceof Date ? t[n][h] = $.parseFormatStr(r) : s.test(r) && (t[n][h] = '"' + r.toString().replace(/"/g, '""') + '"')
                }
                t[n] = t[n].join(i.cols)
            }
            return t = t.join(i.rows)
        }
    }, is = {
        clipboard_setter: function (t) {
            return !0 !== t && 1 !== t || (t = "block"), te.init(), this.attachEvent("onSelectChange", this.Uc), this.attachEvent("onItemClick", function () {
                document.activeElement && this.$view.contains(document.activeElement) && (te.focus(), xi.setFocus(this))
            }), this.attachEvent("onPaste", this.Wc), t
        }, templateCopy_setter: Wt, Uc: function () {
            var t = this.Yc();
            te.set(t), xi.setFocus(this)
        }, Yc: function () {
            var h = [], r = this.B.templateCopy;
            return this.mapSelection(function (t, i, e, s) {
                h[s] || (h[s] = []);
                var n = r ? r(t, i, e) : t;
                return h[s].push(n), t
            }), 1 === h.length && 1 === h[0].length ? h[0][0] : ts.stringify(h, this.B.delimiter)
        }, Wc: function (t) {
            if (!j(this.On[this.B.clipboard])) {
                var i = ts.parse(t, this.B.delimiter);
                this.On[this.B.clipboard].call(this, i)
            }
        }, On: {
            block: function (h) {
                var t = this.mapSelection(null);
                t && (this.mapCells(t.row, t.column, h.length, null, function (t, i, e, s, n) {
                    return h[s] && h[s].length > n ? h[s][n] : t
                }), this.render())
            }, selection: function (h) {
                this.mapSelection(function (t, i, e, s, n) {
                    return h[s] && h[s].length > n ? h[s][n] : t
                }), this.render()
            }, repeat: function (h) {
                this.mapSelection(function (t, i, e, s, n) {
                    return (i = h[s % h.length])[n % i.length]
                }), this.render()
            }, custom: function () {
            }
        }
    }, es = {
        open: function (t, i) {
            if (t) {
                var e = this.getItem(t);
                e.$count && !e.open && (this.callEvent("onBeforeOpen", [t]) && (e.open = !0, this.data.callEvent("onStoreUpdated", [t, 0, "branch"]), this.callEvent("onAfterOpen", [t])), i && "0" != t && this.open(this.getParentId(t), i))
            }
        }, close: function (t) {
            if (t) {
                var i = this.getItem(t);
                i.open && this.callEvent("onBeforeClose", [t]) && (i.open = !1, this.data.callEvent(
                    "onStoreUpdated", [t, 0, "branch"]), this.callEvent("onAfterClose", [t]))
            }
        }, openAll: function (t) {
            this.data.eachSubItem(t || 0, function (t, i) {
                i && (t.open = !0)
            }), this.data.refresh()
        }, closeAll: function (t) {
            this.data.eachSubItem(t || 0, function (t, i) {
                i && (t.open = !1)
            }), this.data.refresh()
        }, qc: function (t, i, e) {
            if (this.B.threeState) return this.Gc(t, null !== i ? i : "");
            var s, n = this.getItem(t), h = e ? e.target || e.srcElement : null;
            s = h && "checkbox" == h.type ? !!h.checked : null !== i ? i : !n.checked, n.checked = s, this.callEvent("onItemCheck", [t, n.checked, e])
        }, isBranchOpen: function (t) {
            if ("0" == t) return !0;
            var i = this.getItem(t);
            return !!i.open && this.isBranchOpen(i.$parent)
        }, getOpenItems: function () {
            var t = [];
            for (var i in this.data.branch) this.exists(i) && this.getItem(i).open && t.push(i);
            return t
        }, getState: function () {
            return {open: this.getOpenItems(), select: this.getSelectedId(!0)}
        }, Xc: function (t, i) {
            var e = this.data.attachEvent("onStoreLoad", function () {
                t.setState.call(t, i), t.data.detachEvent(e), t = null
            })
        }, setState: function (t) {
            if (t.open) {
                this.closeAll();
                for (var i = t.open, e = 0; e < i.length; e++) {
                    var s = this.getItem(i[e]);
                    if (s && s.$count && (s.open = !0, -1 == s.$count)) return this.Xc(this, t), this.refresh(), 0
                }
                this.refresh()
            }
            if (t.select && this.select) {
                var n = t.select;
                this.unselect();
                for (var h = 0; h < n.length; h++) this.exists(n[h]) && this.select(n[h], !0)
            }
            return 1
        }
    }, ss = {
        webix_tree_open: function (t, i) {
            return this.close(i), !1
        }, webix_tree_close: function (t, i) {
            return this.open(i), !1
        }, webix_tree_checkbox: function (t, i) {
            return this.qc(i, null, t), !1
        }
    }, ns = {
        $init: function () {
            this.data.attachEvent("onStoreUpdated", S(this.Jc, this), null, !0), this.eo = this.Kc
        }, Kc: function (t, i, e, s) {
            var n = 0 === i ? {parent: encodeURIComponent(t)} : null;
            return le.prototype.eo.call(this, t, i, e, s, n)
        }, loadBranch: function (t, i, e) {
            return t = t || 0, this.data.url = e || this.data.url, this.callEvent("onDataRequest", [t, i, this.data.url]) && this.data.url ? this.data.feed.call(this, t, 0, i, e) : m.reject()
        }, Jc: function (t, i, e) {
            e && "add" != e && "delete" != e && "branch" != e || this.data.Zc(this)
        }
    }, hs = {
        $init: function () {
            this.data
        }, copy: function (t, i, e, s) {
            return (s = s || {}).copy = !0, this.move(t, i, e, s)
        }, Lh: function (t, i, e) {
            if (i && t) {
                var s = this.getBranchIndex(t);
                return s + (e == this && this.getParentId(t) == this.getParentId(i) && e.getBranchIndex(i) < s ? 0 : 1)
            }
        }, Qc: function (t, i) {
            var e = this.data.branch[t];
            if (e && e.length) for (var s = 0; s < e.length; s++) {
                if (e[s] == i) return !0;
                if (this.Qc(e[s], i)) return !0
            }
            return !1
        }, tf: function (t) {
            for (var i = 0; i < t.length; i++) for (var e = t[i]; this.getParentId(e);) e = this.getParentId(e), -1 == x.find.call(t, e) || (t.splice(i, 1), i--);
            return t
        }, move: function (t, i, e, s) {
            i = i || 0;
            var n = (s = s || {}).newId || t, h = s.parent || 0;
            if ((e = e || this).data, e.data) {
                if (!b(t)) {
                    if (this != e || s.copy) {
                        if (n = e.data.add(e.Nh(this.getItem(t), n), i, h || 0), this.data.branch[t] && e.getBranchIndex) {
                            var r = this.data.nr;
                            this.data.nr = function (t) {
                                var i = _(t);
                                return delete i.$parent, delete i.$level, delete i.$child, e.data.pull[i.id] && (i.id = V()), i
                            };
                            var o = {data: this.serialize(t, !0), parent: n};
                            this.data.nr = r, e.parse(o)
                        }
                        s.copy || this.data.remove(t)
                    } else {
                        if (t == h || this.Qc(t, h)) return;
                        var a = this.getItem(t), u = this.data.branch[h];
                        u || (u = this.data.branch[h] = []);
                        var c = this.data.branch[a.$parent], f = x.find.call(c, t);
                        if (i < 0 && (i = u.length), c === u && i === f) return n;
                        if (x.removeAt.call(c, f), x.insertAt.call(u, t, Math.min(u.length, i)), c.length || delete this.data.branch[a.$parent], a.$parent && "0" != a.$parent && this.getItem(a.$parent).$count--, h && "0" != h) {
                            var l = e.getItem(h);
                            l.$count++, this["if"](a, l.$level + 1)
                        } else this["if"](a, 1);
                        a.$parent = h, e.data.callEvent("onDataMove", [t, i, h, u[i + 1]])
                    }
                    return this.refresh(), n
                }
                this.tf(t);
                for (var d = 0; d < t.length; d++) {
                    var v = this.move(t[d], i, e, s);
                    i = e.Lh(v, t[d + 1], this)
                }
            }
        }, "if": function (t, i) {
            t.$level = i;
            var e = this.data.branch[t.id];
            if (e) for (var s = 0; s < e.length; s++) this["if"](this.getItem(e[s]), i + 1)
        }, So: function (t) {
            t && !t.header && this.exists(t) && this.ko(t) != qi.Ps.start && this.open(t)
        }, $dropAllow: function (t) {
            if (t.from != t.to) return !0;
            for (var i = 0; i < t.source.length; i++) if (this.Qc(t.source, t.target)) return !1;
            return !0
        }, Nh: function (t, i) {
            var e = he.Nh.call(this, t, i);
            return delete e.open, e
        }
    }, rs = {
        $init: function () {
            this.render
        }, ef: function (t) {
            var i = this.data.pr[t.id];
            return this.callEvent(
                "onItemRender", [t]), this.type.templateStart(t, this.type, i) + (t.$template ? this.type["template" + t.$template](t, this.type, i) : this.type.template(t, this.type, i)) + this.type.templateEnd()
        }, sf: function (t) {
            return this.Ti.innerHTML = this.ef(t), this.Ti.firstChild
        }, Z: function (t) {
            !t.$template || this.type["template" + t.$template], t.$template;
            var i = "<div role='presentation' class='webix_tree_branch_" + t.$level + "'>" + this.ef(t);
            return t.open && (i += this.nf(t.id)), i += "</div>"
        }, nf: function (t) {
            var i = "", e = this.data.branch[t];
            if (e) {
                i += "<div role='presentation' class='webix_tree_leaves'>";
                for (var s = e.length - 1, n = 0; n <= s; n++) {
                    var h = this.getItem(e[n]), r = this.type.hf;
                    0 !== r && (r[h.$level] = n == s), i += this.Z(h)
                }
                i += "</div>"
            }
            return i
        }, render: function (t, i, e) {
            if ((rs.Se = this).isVisible(this.B.id) && !this.$blockRender) {
                if (t) {
                    var s, n, h = this.getItem(t);
                    if ("add" != e && !(s = this.getItemNode(t))) return;
                    switch (e) {
                        case"branch":
                            var r = s.parentNode;
                            dt(n = this.oc(h), r), lt(r), this.Ai = null;
                            break;
                        case"paint":
                        case"update":
                            dt(n = this.Ai[t] = this.sf(h), s), lt(s);
                            break;
                        case"delete":
                            lt(s.parentNode);
                            break;
                        case"add":
                            var o;
                            if (0 == h.$parent) o = this.Q.firstChild; else if (this.getItem(h.$parent).open && (o = this.getItemNode(h.$parent))) {
                                if (!o.nextSibling) {
                                    var a = ct("DIV", {"class": "webix_tree_leaves"}, "");
                                    o.parentNode.appendChild(a)
                                }
                                o = o.nextSibling
                            }
                            if (o) {
                                var u = this.data.getNextSiblingId(t);
                                (u = this.getItemNode(u)) && (u = u.parentNode), n = this.oc(h), this.Ai[t] = n.firstChild, dt(n, u, o)
                            }
                            break;
                        default:
                            return !1
                    }
                    this.callEvent("onPartialRender", [t, i, e])
                } else this.callEvent("onBeforeRender", [this.data]) && (this.type.hf = [], this.Q.innerHTML = this.nf(0), this.Ai = null, this.callEvent("onAfterRender", []));
                return this.type.hf = 0, !(rs.Se = null)
            }
        }, getItemNode: function (t) {
            if (this.Ai) return this.Ai[t];
            this.Ai = {};
            for (var i = this.Q.getElementsByTagName("DIV"), e = 0; e < i.length; e++) {
                var s = i[e].getAttribute(this.Eo);
                s && (this.Ai[s] = i[e])
            }
            return this.getItemNode(t)
        }, rf: 1
    }, os = {
        af: function () {
            if (this.rf) {
                var s = this.render;
                this.render = function (t, i) {
                    var e = s.apply(this, arguments);
                    this.B.threeState && e && "checkbox" != i && this.uf.apply(this, arguments)
                }, this.af = function () {
                }
            }
        }, threeState_setter: function (t) {
            return t && this.af(), t
        }, uf: function (t) {
            var i, e, s, n, h;
            if (s = [], h = this, t && !h.data.pull[t] && (t = 0), !t || h.data.pull[t].$count) for ((e = this.cf(t)).sort(function (t, i) {
                return h.data.pull[i].$level - h.data.pull[t].$level
            }), i = 0; i < e.length; i++) i && h.data.pull[e[i]].$parent == h.data.pull[e[i - 1]].$parent || (s = s.concat(h.ff(e[i]))); else s = s.concat(h.ff(t));
            for (n = {}, i = 0; i < s.length; i++) n[s[i]] || (n[s[i]] = 1, this.lf(s[i]));
            h = null
        }, lf: function (t) {
            var i;
            this.getItemNode(t) && (this.render(t, "checkbox", "update"), this.getItem(t).indeterminate && (i = this.getItemNode(t).getElementsByTagName("input")[0]) && (i.indeterminate = this.getItem(t).indeterminate))
        }, ff: function (t) {
            var i, e, s, n, h, r, o;
            for (n = this.getParentId(t), h = []; n && "0" != n;) {
                e = r = 0, this.data.eachChild(n, function (t) {
                    t.indeterminate ? r++ : t.checked && e++
                }), i = s = o = !1;
                var a = this.getItem(n);
                e == a.$count ? i = !0 : (0 < e || 0 < r) && (s = !0), (s || s != a.indeterminate) && (o = !0), a.indeterminate = s, (i || a.checked != i) && (o = !0), a.checked = i, n = o ? (h.push(n), this.getParentId(n)) : 0
            }
            return h
        }, getChecked: function () {
            var i = [], e = this;
            return this.data.eachSubItem(0, function (t) {
                e.isChecked(t.id) && i.push(t.id)
            }), i
        }, Gc: function (t, i) {
            var e = this.getItem(t);
            if (e && ("" === i && (i = !e.checked), e.checked != i || e.indeterminate)) {
                e.checked = i, this.df(t);
                var s = this.ff(t);
                if (this.rf && s.length < 5) for (var n = 0; n < s.length; n++) this.lf(s[n]); else this.refresh();
                this.callEvent("onItemCheck", [t, i])
            }
        }, checkItem: function (t) {
            this.qc(t, !0), this.updateItem(t)
        }, uncheckItem: function (t) {
            this.qc(t, !1), this.updateItem(t)
        }, vf: function (t, i, e) {
            var s = i ? "checkItem" : "uncheckItem";
            t ? this[s](t) : t = 0, this.B.threeState ? t || this.data.eachChild(0, function (t) {
                this[s](t.id)
            }, this, e) : this.data.each(function (t) {
                this[s](t.id)
            }, this, e, t)
        }, checkAll: function (t, i) {
            this.vf(t, !0, i)
        }, uncheckAll: function (t, i) {
            this.vf(t, !1, i)
        }, df: function (t) {
            var i, e = this.getItem(t);
            e.indeterminate = !1, i = e.checked, this.data.eachSubItem(t, function (t) {
                t.indeterminate = !1, t.checked = i
            }), this.rf && this.isBranchOpen(e.$parent) && this.render(t, 0, "branch")
        }, isChecked: function (t) {
            return this.getItem(t).checked
        }, cf: function (t) {
            var e = [];
            return this.data.eachSubItem(t, function (t, i) {
                i || e.push(t.id)
            }), e
        }
    }, as = {
        name: "TreeStore", $init: function () {
            this.Wr = {showSubItems: !0}, this.branch = {0: []}, this.attachEvent("onParse", function (t) {
                this.Br(t.child)
            }), this.attachEvent("onClearAll", S(function () {
                this.zr = null
            }, this))
        }, filterMode_setter: function (t) {
            return P.extend(this.Wr, t, !0)
        }, Or: function (t) {
            if (this.zr && !t) {
                for (var i in this.branch = this.zr, this.order = g(_(this.branch[0])), this.branch) "0" != i && (this.getItem(i).$count = this.branch[i].length);
                delete this.zr
            }
        }, Ur: function (t, i, e, s) {
            e && this.zr || (this.zr = this.branch, this.branch = l(this.branch)), this.branch[0] = this._f(t, i, this.branch[0], 1, s || {})
        }, _f: function (t, i, e, s, n) {
            for (var h = [], r = n.level && n.level != s, o = 0; o < e.length; o++) {
                var a = e[o], u = this.getItem(a), c = !1, f = this.branch[a];
                if (r) c = !0; else if (t(this.getItem(a), i)) {
                    if (h.push(a), !1 !== n.openParents) for (var l = this.getParentId(a); l && "0" != l;) this.getItem(l).open = 1, l = this.getParentId(l);
                    if (n.level || n.showSubItems) continue
                } else c = !0;
                if ((r || !n.level) && f) {
                    var d = this.branch[a] = this._f(t, i, f, s + 1, n);
                    u.$count = d.length, c && d.length && h.push(a)
                }
            }
            return h
        }, count: function () {
            if (this.order.length) return this.order.length;
            var t = 0;
            return this.eachOpen(function () {
                t++
            }), t
        }, pf: function (t, i, e, s) {
            if (t[e]) {
                for (var n = t[s] = t[e], h = 0; h < n.length; h++) this.getItem(n[h]).$parent = s;
                delete t[e]
            }
            if (t[i]) {
                var r = x.find.call(t[i], e);
                0 <= r && (t[i][r] = s)
            }
        }, changeId: function (t, i) {
            if (t != i) {
                var e = this.getItem(t).$parent;
                return this.pf(this.branch, e, t, i), this.zr && this.pf(this.zr, e, t, i), fe.prototype.changeId.call(this, t, i)
            }
        }, clearAll: function (t) {
            this.branch = {0: []}, fe.prototype.clearAll.call(this, t)
        }, getPrevSiblingId: function (t) {
            var i = this.branch[this.getItem(t).$parent], e = x.find.call(i, t) - 1;
            return 0 <= e ? i[e] : null
        }, getNextSiblingId: function (t) {
            var i = this.branch[this.getItem(t).$parent], e = x.find.call(i, t) + 1;
            return e < i.length ? i[e] : null
        }, getParentId: function (t) {
            return this.getItem(t).$parent
        }, getFirstChildId: function (t) {
            var i = this.branch[t];
            return i && i.length ? i[0] : null
        }, isBranch: function (t) {
            return !!this.branch[t]
        }, getBranchIndex: function (t) {
            var i = this.branch[this.pull[t].$parent];
            return x.find.call(i, t)
        }, Br: function (e) {
            this.Rr = "string" == typeof e ? function (t) {
                var i = t[e];
                return i && delete t[e], i
            } : e
        }, gr: function (t, i) {
            for (var e = t.parent || 0, s = 0; s < i.length; s++) {
                var n = this.driver.getDetails(i[s]), h = this.id(n), r = !!this.pull[h];
                r ? (n = P.extend(this.pull[h], n, !0), this.kr && this.kr(n)) : (this.Cr && this.Cr(n), this.pull[h] = n), this.Hr(n, e, 0, r, t.from ? 1 * t.from + s : 0)
            }
            var o = this.pull[e] || {}, a = this.branch[e] || [];
            o.$count = a.length, delete o.webix_kids, t.size && t.size != a.length && (a[t.size - 1] = undefined)
        }, Hr: function (t, i, e, s, n) {
            t.$count = 0, t.$parent = "0" != i ? i : 0, t.$level = e || ("0" != i ? this.pull[i].$level + 1 : 1);
            var h = this.branch[t.$parent];
            (h || (h = this.branch[t.$parent] = []), this.zr && (this.zr[t.$parent] = h), s) || (h[n || h.length] = t.id);
            var r = this.Rr(t);
            if (t.webix_kids) return t.$count = -1;
            if (!r) return t.$count = 0;
            b(r) || (r = [r]);
            for (var o = 0; o < r.length; o++) {
                var a = Vt.json.getDetails(r[o]), u = this.id(a);
                (s = !!this.pull[u]) ? (a = P.extend(this.pull[u], a, !0), this.kr && this.kr(a)) : (this.Cr && this.Cr(a), this.pull[u] = a), this.Hr(a, t.id, t.$level + 1, s)
            }
            var c = this.branch[t.id];
            c && (t.$count = c.length)
        }, Zc: function (t) {
            this.order = g(), this.mf(this.order, 0, t)
        }, mf: function (t, i, e) {
            for (var s = this.branch[i], n = 0; n < s.length; n++) {
                var h = s[n];
                t.push(h);
                var r = this.pull[h];
                r && r.open && (-1 == r.$count ? e.loadBranch(h) : r.$count && this.mf(t, h, e))
            }
        }, provideApi: function (t, i) {
            for (var e = ["getPrevSiblingId", "getNextSiblingId", "getParentId", "getFirstChildId", "isBranch", "getBranchIndex", "filterMode_setter"], s = 0; s < e.length; s++) t[e[s]] = this.qr(this, e[s]);
            t.getIndexById || fe.prototype.provideApi.call(this, t, i)
        }, getTopRange: function () {
            return g([].concat(this.branch[0])).map(function (t) {
                return this.getItem(t)
            }, this)
        }, eachChild: function (t, i, e, s) {
            var n = this.branch;
            s && this.zr && (n = this.zr);
            var h = n[t];
            if (h) for (var r = 0; r < h.length; r++) h[r] && i.call(e || this, this.getItem(h[r]))
        }, each: function (e, s, n, t) {
            this.eachChild(t || 0, function (t) {
                var i = this.branch;
                e.call(s || this, t), n && this.zr && (i = this.zr),
                t && i[t.id] && this.each(e, s, n, t.id)
            }, this, n)
        }, eachOpen: function (i, e, t) {
            this.eachChild(t || 0, function (t) {
                i.call(e || this, t), this.branch[t.id] && t.open && this.eachOpen(i, e, t.id)
            })
        }, eachSubItem: function (t, i) {
            var e = this.branch[t || 0];
            if (e) for (var s = 0; s < e.length; s++) {
                var n = e[s];
                this.branch[n] ? (i.call(this, this.getItem(n), !0), this.eachSubItem(n, i)) : i.call(this, this.getItem(n), !1)
            }
        }, eachLeaf: function (t, i) {
            var e = this.branch[t || 0];
            if (e) for (var s = 0; s < e.length; s++) {
                var n = e[s];
                this.branch[n] ? this.eachLeaf(n, i) : i.call(this, this.getItem(n), !1)
            }
        }, Lr: function (t, i) {
            var e = this.sorting.create(t);
            for (var s in this.branch) {
                for (var n = this.branch[s], h = [], r = 0; r < n.length; r++) h.push(this.pull[n[r]]);
                h.sort(e);
                for (var o = 0; o < n.length; o++) h[o] = h[o].id;
                this.branch[s] = h
            }
            return i
        }, add: function (t, i, e) {
            var s = !1, n = this.getItem(e || 0);
            if (n && (this.branch[n.id] || (s = !0), n.$count++, n.$count || (n.$count = 1)), this.branch[e || 0] = this.order = g(this.branch[e || 0]), t.$count = t.webix_kids ? -1 : 0, t.$level = n ? n.$level + 1 : 1, t.$parent = n ? n.id : 0, this.zr) {
                var h = this.zr[e || 0];
                if (h || (h = this.zr[e] = this.order), this.order !== h) {
                    var r = h.length;
                    !i && this.branch[e || 0].length && (r = 0), h = g(h), t.id = t.id || V(), h.insertAt(t.id, r)
                }
            }
            var o = fe.prototype.add.call(this, t, i);
            return s && this.refresh(e), o
        }, bf: function (t) {
            var i = this.pull[t];
            if (this.branch[i.id] && 0 < this.branch[i.id].length) for (var e = this.branch[t], s = 0; s < e.length; s++) this.bf(e[s], !0);
            delete this.branch[t], this.zr && delete this.zr[t], delete this.pull[t], this.pr[t] && delete this.pr[t]
        }, gf: function (t, i, e) {
            var s = t[i];
            1 == s.length && s[0] == e && i ? delete t[i] : g(s).remove(e)
        }, remove: function (t) {
            if (b(t)) for (var i = 0; i < t.length; i++) this.remove(t[i]); else {
                this.exists(t);
                var e = this.pull[t], s = e.$parent || 0;
                if (!1 === this.callEvent("onBeforeDelete", [t])) return !1;
                this.bf(t), this.callEvent("onAfterDelete", [t]);
                var n = this.pull[s];
                this.gf(this.branch, s, t), this.zr && this.gf(this.zr, s, t);
                var h = 0;
                n && (n.$count--, n.$count <= 0 && (n.$count = 0, n.open = 0, h = 1)), this.callEvent("onStoreUpdated", [t, e, "delete"]), h && this.refresh(n.id)
            }
        }, getBranch: function (t) {
            var i = [], e = (this.zr || this.branch)[t];
            if (e) for (var s = 0; s < e.length; s++) i[s] = this.pull[e[s]];
            return i
        }, serialize: function (t, i) {
            var e = this.branch;
            i && this.zr && (e = this.zr);
            for (var s = e[t || 0], n = [], h = 0; h < s.length; h++) {
                var r, o = this.pull[s[h]];
                if (this.nr) {
                    if (!1 === (r = this.nr(o))) continue
                } else r = _(o);
                e[o.id] && (r.data = this.serialize(o.id, i)), n.push(r)
            }
            return n
        }
    }, us = {
        insert: function (t) {
            for (var i = this.getSelectedId(!0, !0), e = 0; e < t.length; e++) {
                for (var s = {}, n = 0; n < this.B.columns.length; n++) s[this.B.columns[n].id] = t[e][n] || "";
                !j(s.id) && this.exists(s.id) && (s.id = V()), this.add(s, null, i[0])
            }
        }
    }, cs = {
        space: function (t) {
            for (var i = "", e = 1; e < t.$level; e++) i += "<div class='webix_tree_none'></div>";
            return i
        }, icon: function (t) {
            return t.$count ? t.open ? "<div class='webix_tree_open'></div>" : "<div class='webix_tree_close'></div>" : "<div class='webix_tree_none'></div>"
        }, checkbox: function (t) {
            return t.nocheckbox ? "" : "<input type='checkbox' class='webix_tree_checkbox' " + (t.checked ? "checked" : "") + (t.disabled ? " disabled" : "") + ">"
        }, folder: function (t) {
            return t.icon ? "<div class='webix_tree_file webix_tree_" + t.icon + "'></div>" : t.$count ? t.open ? "<div class='webix_tree_folder_open'></div>" : "<div class='webix_tree_folder'></div>" : "<div class='webix_tree_file'></div>"
        }
    }, fs = {
        $render: function () {
            if (this.wf) this.Vi.firstChild.appendChild(this.wf); else {
                this.files.attachEvent("onBeforeDelete", this.xf);
                var t = {type: "file", "class": "webix_hidden_upload", tabindex: -1};
                this.B.accept && (t.accept = this.B.accept), this.B.multiple && (t.multiple = "true"), this.B.directory && (t.webkitdirectory = "true", t.mozdirectory = "true", t.directory = "true");
                var i = ct("input", t);
                this.wf = this.Vi.firstChild.appendChild(i), Jt(this.Tt, "drop", S(function (t) {
                    this.$drop(t), bt(t)
                }, this)), Jt(i, "change", S(function () {
                    if (this.yf(i.files), Y.isIE) {
                        var t = document.createElement("form");
                        t.appendChild(this.wf), t.reset(), this.Vi.firstChild.appendChild(i)
                    } else i.value = ""
                }, this)), Jt(this.Tt, "click", S(function () {
                    250 < new Date - (this.Mf || 0) && this.fileDialog()
                }, this)), Jt(this.Tt, "dragenter", bt), Jt(this.Tt, "dragexit", bt), Jt(this.Tt, "dragover", bt)
            }
        }, Sf: function (t) {
            return t.isDirectory
        }, kf: function (e, s, n) {
            if (e.isFile) e.file(function (t) {
                s.addFile(t, null, null, {name: n + "/" + t.name})
            }); else if (e.isDirectory) {
                e.createReader().readEntries(function (t) {
                    for (var i = 0; i < t.length; i++) s.kf(t[i], s, (n ? n + "/" : "") + e.name)
                })
            }
        }, $drop: function (t) {
            var i = t.dataTransfer.files, e = t.dataTransfer.items;
            if (i.length) {
                if (this.callEvent("onBeforeFileDrop", [i, t])) {
                    e = e || i;
                    for (var s = 0; s < e.length; s++) {
                        var n = e[s];
                        n.webkitGetAsEntry && (n = n.webkitGetAsEntry()).isDirectory ? this.kf(n, this, "") : this.addFile(i[s])
                    }
                }
                this.callEvent("onAfterFileDrop", [i, t])
            }
        }, fileDialog: function (t) {
            this.Mf = new Date, this.Cf = t;
            var i = this.Tt.getElementsByTagName("INPUT");
            i[i.length - 1].click()
        }, send: function (i) {
            if ("function" == typeof i && (this.$f = i, i = 0), i) {
                var t = this.files.getItem(i);
                if ("client" !== t.status) return !1;
                this.B.upload, t.status = "transfer";
                var e = new FormData;
                e.append(this.config.inputName, t.file, t.name), e.append(this.config.inputName + "_fullpath", t.name);
                var s = {}, n = this.B.formData || {};
                "function" == typeof n && (n = n.call(this));
                var h = P.extend(t.formData || {}, n), r = new XMLHttpRequest, o = this.Df(t);
                if (D("onBeforeAjax", ["POST", o, h, r, s, e])) {
                    for (var a in h) e.append(a, h[a]);
                    for (var u in (t.xhr = r).upload.addEventListener("progress", S(function (t) {
                        this.$updateProgress(i, t.loaded / t.total * 100)
                    }, this), !1), r.onload = S(function () {
                        r.aborted || this.If(i)
                    }, this), r.open("POST", o, !0), s) r.setRequestHeader(u, s[u]);
                    r.send(e)
                }
                return this.$updateProgress(i, 0), !0
            }
            var c = this.files.data.order, f = !0;
            if (c.length) for (var l = 0; l < c.length; l++) f = !this.send(c[l]) && f;
            f && this.Af()
        }, If: function (t) {
            var i = this.files.getItem(t);
            if (i) {
                var e = null;
                if (i.xhr.status < 400) {
                    var s = Vt[this.B.datatype || "json"];
                    (e = s.toObject(i.xhr.responseText)) && (e = s.getDetails(e))
                }
                e && "error" != e.status ? (!e.status || e.status, this.Ff(t, e)) : (i.status = "error", delete i.percent, this.files.updateItem(t), this.callEvent("onFileUploadError", [i, e])), delete i.xhr
            }
        }, stopUpload: function (t) {
            S(this.xf, this.files)(t)
        }, xf: function (t) {
            var i = this.getItem(t);
            "undefined" != typeof i.xhr && (i.xhr.aborted = !0, i.xhr.abort(), delete i.xhr, i.status = "client")
        }
    }, ls = {
        Tf: function () {
            this.data.attachEvent("onStoreUpdated", S(function (t, i, e) {
                !t || "add" != e && "update" != e || this.validate(t)
            }, this)), this.data.attachEvent("onClearAll", S(this.clearValidation, this)), this.Tf = function () {
            }
        }, rules_setter: function (t) {
            return t && this.Tf(), t
        }, clearValidation: function () {
            this.data.clearMark("webix_invalid", !0)
        }, validate: function (t) {
            var i = !0;
            if (t) {
                this.Uh = {};
                var e = this.getItem(t);
                (i = oe.validate.call(this, null, e)) ? this.callEvent("onValidationSuccess", [t, e]) && this.Oh(t) : this.callEvent("onValidationError", [t, e, this.Uh]) && this.Yh(t, this.Uh)
            } else for (var s in this.data.pull) i = this.validate(s) && i;
            return i
        }, Wh: function (t, i, e, s) {
            "string" == typeof t && (t = re[t]);
            var n = t.call(this, i, e, s);
            return n || (this.Uh[s] = !0), n
        }, Oh: function (t) {
            this.data.removeMark(t, "webix_invalid", !0)
        }, Yh: function (t) {
            this.data.addMark(t, "webix_invalid", !0)
        }
    }, ds = {
        $init: function () {
            this.elements = {}
        }, focus: function (t) {
            if (t) this.elements[t], this.oi(this.elements[t]); else for (var i in this.elements) if (!1 !== this.oi(this.elements[i])) return !0;
            return !1
        }, oi: function (t) {
            return !(!t || !t.focus) && t.focus()
        }, setValues: function (t, i) {
            var e = this;
            this.B.complexData && (t = Rt.collapseNames(t, "", {}, function (t) {
                return !e.elements[t]
            })), this.Vf(t, i)
        }, Vf: function (t, i) {
            for (var e in this.zf = i, this.blockEvent(), i && this.Hf || (this.Hf = {}), t) this.elements[e] || (this.Hf[e] = t[e]);
            for (var s in this.elements) {
                var n = this.elements[s];
                n && (j(t[s]) ? !i && n.$allowsClear && n.setValue("") : n.setValue(t[s]), this.Hf[s] = n.getValue())
            }
            this.unblockEvent(), this.callEvent("onValues", [])
        }, isDirty: function () {
            return !!this.zf || 1 === this.getDirtyValues(1)
        }, setDirty: function (t) {
            (this.zf = t) || (this.Hf = this.Rf())
        }, getDirtyValues: function () {
            var t = {};
            if (this.Hf) for (var i in this.elements) {
                var e = this.elements[i].getValue();
                if (this.Hf[i] != e && (t[i] = e, arguments[0])) return 1
            }
            return t
        }, getCleanValues: function () {
            return this.Hf
        }, getValues: function (t) {
            var i = this.Rf(t);
            return this.B.complexData && (i = Rt.expandNames(i)), i
        }, Rf: function (t) {
            var i, e = null, s = this.Hf ? _(this.Hf) : {};
            for (var n in this.elements
                ) e = this.elements[n], i = !0, t && ("object" == M(t) ? (!1 === t.hidden && (i = e.isVisible()), i && !1 === t.disabled && (i = e.isEnabled())) : i = t.call(this, e)), i ? s[n] = e.getValue() : delete s[n];
            return s
        }, clear: function () {
            this.zf = !1;
            var t = {};
            for (var i in this.elements) this.elements[i].$allowsClear && (t[i] = "");
            this.Vf(t)
        }, markInvalid: function (t, i) {
            if (!1 === i) this.Oh(t); else {
                if ("string" == typeof i) {
                    var e = this.elements[t];
                    e && (e.B.invalidMessage = i)
                }
                this.Uh && (this.Uh[t] = !0), this.Yh(t)
            }
        }, Yh: function (t) {
            var i = this.elements[t];
            t && i && (this.Oh(t, !0), xt(i.Tt, "webix_invalid"), i.B.invalid = !0, "string" == typeof i.B.invalidMessage && i.setBottomText && i.setBottomText())
        }, Oh: function (t, i) {
            var e = this.elements[t];
            t && e && e.$view && e.B.invalid && (yt(e.Tt, "webix_invalid"), e.B.invalid = !1, "string" == typeof e.B.invalidMessage && !i && e.setBottomText && e.setBottomText())
        }
    }, vs = {
        $init: function () {
            this.render, this.Ai = {}, Jt(this.Tt, "scroll", S(this.Bf, this)), this.Pf = []
        }, getItemNode: function (t) {
            return this.Ai[t]
        }, showItem: function (t) {
            var i = this.Kn(), e = this.data.getIndexById(t), s = Math.floor(e / i.Jn) * i.ps,
                n = this.getScrollState();
            (s < n.y || s + this.B.height >= n.y + this.ue) && this.scrollTo(0, s)
        }, render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) if (t) {
                var s = this.getItemNode(t);
                switch (e) {
                    case"update":
                        if (!s) return;
                        dt(this.Ai[t] = this.oc(i), s), lt(s);
                        break;
                    default:
                        this.jf()
                }
            } else this.callEvent("onBeforeRender", [this.data]) && (this.Ai = {}, this.Bf(null, !0), this.Ef = !1, this.callEvent("onAfterRender", []))
        }, jf: function () {
            this.Ef || (this.Ef = !0, window.setTimeout(S(function () {
                this.render()
            }, this), 1))
        }, Nf: function (t) {
            Y.maxHTMLElementSize && (t = Math.min(Y.maxHTMLElementSize, t));
            var i = document.createElement("DIV");
            return i.style.cssText = "height:" + t + "px; width:100%; overflow:hidden;", i
        }, Bf: function (t, i) {
            this.Pf = [];
            var e = this.Kn();
            this.Q.firstChild && !i || (this.Q.innerHTML = "", this.Q.appendChild(this.Nf(e.Lf)), this.Fi = [this.Q.firstChild]);
            for (var s = e.Of; s <= e.Uf;) {
                for (; this.Fi[s] && this.Fi[s].Wf && s <= e.Uf;) s++;
                if (s > e.Uf) break;
                for (var n = s; !this.Fi[n];) n--;
                var h = this.Fi[n], r = s * e.Jn + (this.data.$min || 0);
                if (r > (this.data.$max || Infinity)) break;
                var o = Math.min(r + e.Jn - 1, this.data.$max ? this.data.$max - 1 : Infinity), a = this.Nf(e.ps),
                    u = this.data.getIndexRange(r, o);
                if (!u.length) break;
                for (var c = {$template: "Loading"}, f = 0; f < u.length; f++) u[f] || this.Pf.push(r + f), u[f] = this.Z(u[f] || c);
                a.innerHTML = u.join("");
                for (var l = 0; l < u.length; l++) this.Ai[this.data.getIdByIndex(r + l)] = a.childNodes[l];
                var d = parseFloat(h.style.height, 10), v = (s - n) * e.ps, _ = d - v - e.ps;
                if (dt(a, v ? h.nextSibling : h, this.Q), (this.Fi[s] = a).Wf = !0, v <= 0 && 0 < _) h.style.height = _ + "px", this.Fi[s + 1] = h; else if (v < 0 ? lt(h) : h.style.height = v + "px", 0 < _) dt(this.Fi[s + 1] = this.Nf(_), a.nextSibling, this.Q);
                s++
            }
            if (this.Pf.length) {
                var p = this.Pf[0], m = this.Pf.pop() + 1;
                if (p < m) {
                    var b = m - p;
                    if (this.ro(b, p)) return;
                    b = Math.max(b, this.B.datafetch || this.B.loadahead || 0), this.loadNext(b, p)
                }
            }
        }, Kn: function () {
            var t = this.getScrollState(), i = Math.max(0, t.y), e = this.oe, s = this.ue, n = this.type,
                h = Math.floor(e / n.width) || 1, r = Math.floor(i / n.height), o = Math.ceil((s + i) / n.height) - 1,
                a = this.data.$max ? this.data.$max - this.data.$min : this.data.count();
            return {Of: r, Uf: o, Yf: i, Lf: Math.ceil(a / h) * n.height, ps: n.height, Jn: h}
        }, ot: function (t) {
            var i = this.getItemNode(t);
            return i || (this.showItem(t), this.Bf(), i = this.getItemNode(t)), {
                left: i.offsetLeft,
                top: i.offsetTop,
                height: i.offsetHeight,
                width: i.offsetWidth,
                parent: this.Vi
            }
        }
    }, _s = {
        $init: function () {
            this.Ai = {}, Jt(this.Tt, "scroll", S(function () {
                this.render(null, null, "paint")
            }, this))
        }, cs: function (t, i, e) {
            this.B.footer && Ui.os(this.qf.childNodes[1].firstChild, t, 0, e), this.callEvent("onSyncScroll", [t, i, e])
        }, getItemNode: function (t) {
            return this.Ai && this.Ai[t]
        }, showItem: function (t) {
            var i = this.data.getIndexById(t);
            if (-1 < i) {
                var e = i * this.type.height, s = e + this.type.height, n = this.getScrollState(), h = _t(this.$view);
                e < n.y ? this.scrollTo(0, e) : s > n.y + h.height && this.scrollTo(0, s - h.height)
            }
        }, render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) {
                var s = this.uc || this.Q;
                if (!t || "paint" != e && "update" != e) {
                    if ("paint" != e && (this.Ai = {}, s.innerHTML = ""), this.callEvent("onBeforeRender", [this.data])) {
                        var n = this.data.count(),
                            h = this.getScrollState(), r = _t(this.Tt), o = Math.floor(h.y / this.type.height) - 2,
                            a = Math.ceil((h.y + r.height) / this.type.height) + 2;
                        o = Math.max(0, o), a = Math.min(this.data.count() - 1, a);
                        for (var u = [], c = o; c <= a; c++) {
                            var f = this.data.order[c];
                            if (this.Ai[f]) u.push("<div></div>"); else {
                                var l = this.data.getItem(f);
                                if (!l) {
                                    this.Gf({count: a - c + (this.B.loadahead || 0), start: c});
                                    break
                                }
                                u.push(this.Z(l))
                            }
                        }
                        this.Ti.innerHTML = u.join(""), s.style.position = "relative", s.style.height = n * this.type.height + "px";
                        for (var d = this.Ti.childNodes, v = d.length - 1; 0 <= v; v--) {
                            var _ = d[v], p = _.getAttribute(this.Eo);
                            p && (_.style.position = "absolute", _.style.top = (o + v) * this.type.height + "px", _.style.left = 0, _.style.width = "100%", s.appendChild(_), this.Ai[p] = _)
                        }
                        this.callEvent("onAfterRender", [])
                    }
                } else {
                    var m = this.getItemNode(t);
                    if (m) {
                        var b = this.Ai[t] = this.oc(i);
                        return b.style.top = m.style.top, b.style.position = "absolute", b.style.left = 0, b.style.width = "100%", dt(b, m), void lt(m)
                    }
                }
            }
        }, $setSize: function () {
            zi.api.$setSize.apply(this, arguments) && this.render(null, null, "paint")
        }, Gf: function (t) {
            var i = Math.max(t.count, this.B.datafetch || this.B.loadahead || 0);
            this.ro(t.count, t.start) || this.loadNext(i, t.start)
        }
    }, ps = "non-existing view for export";

    function ms(i, e, t) {
        return !t && e.format ? function (t) {
            return e.format(t[i])
        } : function (t) {
            return t[i]
        }
    }

    function bs(t, i) {
        var e, s = [], n = 0, h = 0, r = t.getColumnConfig, o = i.columns, a = !!i.rawValues,
            u = "TreeStore" == t.data.name, c = i.treeLines;
        if ((!0 === c || j(c)) && (c = "value"), s.heights = {}, o) {
            if (!o.length) {
                var f = [];
                for (var l in o) f.push(P.extend({id: l}, P.extend({}, o[l])));
                o = f
            }
        } else if (r) o = [].concat(t.Xf); else {
            o = [];
            var d = t.data.pull[t.data.order[0]];
            for (var v in d) "id" !== v && "$" != v[0] && o.push({id: v, isTree: u && v === c})
        }
        if (i.ignore) for (var _ = o.length - 1; 0 <= _; _--) i.ignore[o[_].id] && o.splice(_, 1);
        if (i.id && s.push({
            id: "id", width: 50, header: " ", template: function (t) {
                return t.id
            }
        }), i.flatTree) {
            for (var p = i.flatTree.id, m = [].concat(i.flatTree.columns), b = [], g = !!i.flatTree.fill, w = 1; w <= m.length; w++) m[w - 1].template = function (i) {
                return function (t) {
                    return t.$level == i ? b[i] = t[p] : g && i < t.$level ? b[i] : ""
                }
            }(w);
            for (var x = 0, y = o.length - 1; 0 <= y; y--) o[y].id === p && (x = y);
            o = [].concat(o.slice(0, x)).concat(m).concat(o.slice(x + 1))
        }
        for (var M = 0; M < o.length; M++) {
            var S = o[M], k = S.id;
            if (!S.noExport) {
                var C = a && r;
                if (r) {
                    var $ = t.Jf[k];
                    !S.template || $ && $.template == S.template || (C = !1), $ && (S = P.extend(P.extend({}, S), $))
                }
                var D = {
                    id: S.id,
                    template: C || !S.template ? ms(k, S, a) : S.template,
                    width: (S.width || 200) * ("excel" === i.export_mode ? 8.43 / 70 : 1),
                    header: !1 !== S.header ? S.header || k : ""
                };
                u && k === c && (D.isTree = e = !0), "excel" === i.export_mode && P.extend(D, {
                    type: S.exportType || "",
                    format: S.exportFormat || ""
                }), "string" == typeof D.header ? D.header = [{text: D.header}] : D.header = [].concat(D.header);
                for (var I = 0; I < D.header.length; I++) {
                    var A = D.header[I] || {}, F = A.contentId ? t.getHeaderContent(A.contentId).getValue(!0) : A.text;
                    D.header[I] = (F || "").toString().replace(/<[^>]*>/gi, "")
                }
                if (n = Math.max(n, D.header.length), t.B.footer) {
                    var T = S.footer || "";
                    T = "string" == typeof T ? [{text: T}] : [].concat(T);
                    for (var V = 0; V < T.length; V++) T[V] ? T[V] = T[V].contentId ? t.getHeaderContent(T[V].contentId).getValue() : T[V].text : T[V] = "";
                    D.footer = T, h = Math.max(h, D.footer.length)
                }
                s.push(D)
            }
        }
        !e && u && i.treeLines != c && s[0] && (s[0].isTree = !0);
        for (var z = 0; z < s.length; z++) {
            for (var H = n - s[z].header.length, R = 0; R < H; R++) s[z].header.push("");
            if (t.B.footer) {
                H = h - s[z].footer.length;
                for (var B = 0; B < H; B++) s[z].footer.push("")
            }
        }
        return s
    }

    function gs(r, o, a) {
        var t, i, u = !!o.filterHTML, c = /<[^>]*>/gi, f = [], l = o.export_mode;
        if ("excel" !== l && "csv" != l || !o.docHeader || (f = [[(o.docHeader.text || o.docHeader).toString()], [""]], "excel" === l && o.docHeader.height && (a.heights[0] = o.docHeader.height)), !1 !== o.header && a.length) for (var e = 0; e < a[0].header.length; e++) {
            i = [];
            for (var s = 0; s < a.length; s++) t = "", a[s].header[e] && (t = a[s].header[e], u && (t = a[s].header[e] = t.replace(c, ""))), i.push(t);
            "excel" != l || !r.Xf || !1 === o.heights || r.Kf[e] === Ei.barHeight && "all" != o.heights || (a.heights[f.length] = r.Kf[e]), "pdf" !== l && (f[f.length] = i)
        }
        o.yCorrection = (o.yCorrection || 0) - f.length;
        var d = o.flatTree || o.plainOutput ? "" : "-";
        if (r.data.each(function (t) {
            if (!o.filter || o.filter(t)) {
                this.data.Tr && (t = r.data.Tr(t));
                for (var i = [],
                         e = 0; e < a.length; e++) {
                    var s = a[e], n = null;
                    if (o.math && t["$" + s.id] && "=" == t["$" + s.id].charAt(0) && !t["$" + s.id].match(/^=(image|link|sparkline)\(/i) && (n = t["$" + s.id]), this.Zf) {
                        var h = this.getSpan(t.id, s.id);
                        h && h[4] && h[0] == t.id && h[1] == s.id && (n = h[4], u && "string" == typeof n && (n = n.replace(c, "")))
                    }
                    n || ((n = s.template(t, r.type, t[s.id], s, e)) || 0 === n || (n = ""), s.isTree && d && (n = " " + Array(t.$level).join(d) + " " + n), u && "string" == typeof n && (n = n.replace(c, "")), "string" == typeof n && "csv" === l && (n = n.trim()), "string" != typeof n || "excel" !== l && "csv" !== l || (n = n.replace(/<br\s*\/?>/gm, "\n"))), i.push(n)
                }
                "excel" == l && r.Xf && !1 !== o.heights && (t.$height && t.$height !== Ei.rowHeight || "all" == o.heights) && (a.heights[f.length] = t.$height || this.config.rowHeight), f.push(i)
            }
        }, r), !1 !== o.footer) for (var n = a[0].footer ? a[0].footer.length : 0, h = 0; h < n; h++) {
            for (var v = [], _ = 0; _ < a.length; _++) {
                var p = a[_].footer[h];
                u && (p = a[_].footer[h] = p.toString().replace(c, "")), v.push(p)
            }
            "excel" != l || !r.Xf || !1 === o.heights || r.Qf[h] === Ei.barHeight && "all" != o.heights || (a.heights[f.length] = r.Qf[h]), "pdf" !== l && f.push(v)
        }
        return "excel" === l && o.docFooter && (f = f.concat([[], [(o.docFooter.text || o.docFooter).toString()]]), o.docFooter.height && (a.heights[f.length - 1] = o.docFooter.height)), f
    }

    var ws = {};

    function xs(t, i) {
        var e = (i.filename || "Data") + ".pdf", s = new Blob([t.toString()], {type: "application/pdf"});
        return !1 !== i.download && St(s, e), s
    }

    function ys(s, n) {
        for (var t, h = function o(t) {
            var i = t.width || 595.296, e = t.height || 841.896;
            t.orientation && "landscape" === t.orientation && (e = [i, i = e][0]);
            return new pdfjs.Document({padding: 40, font: t.tl, threshold: 256, width: i, height: e})
        }(n), r = [], i = 0; i < s.length; i++) s[i].node ? r.push((t = s[i].node, window.html2canvas(t, {
            background: "#fff",
            logging: !1,
            useCORS: !0
        }).then(function (t) {
            for (var i = t.toDataURL("image/jpeg"), e = window.atob(i.split("base64,")[1]), s = e.length, n = new Uint8Array(s), h = 0; h < s; h++) n[h] = e.charCodeAt(h);
            return new pdfjs.Image(n.buffer)
        }))) : r.push(m.resolve());
        return m.all(r).then(function (t) {
            for (var i = 0; i < r.length; i++) {
                var e = s[i].viewOptions;
                e.textBefore && Ms(h, "before", e.textBefore), t[i] ? h.image(t[i], {align: "center"}) : ks(s[i].scheme, s[i].data, e, h), e.textAfter && Ms(h, "after", e.textAfter), i != s.length - 1 && h.pageBreak()
            }
            return function o(s, n) {
                if (!1 !== n.docFooter) {
                    var t = s.footer();
                    t.text({
                        color: 6710886,
                        textAlign: "center"
                    }).append($.dataExport.page || "Page").pageNumber().append("  " + ($.dataExport.of || "of") + "  ").pageCount()
                }
                var h = {text: 0, image: 1};
                n.docHeader && ("string" == typeof n.docHeader && (n.docHeader = {text: n.docHeader}), P.extend(n.docHeader, {
                    color: 6710886,
                    textAlign: "right",
                    order: 0
                }), h.text = n.docHeader.order);
                n.docHeaderImage && ("string" == typeof n.docHeaderImage && (n.docHeaderImage = {url: n.docHeaderImage}), P.extend(n.docHeaderImage, {
                    align: "right",
                    order: 1
                }), h.image = n.docHeaderImage.order);
                n.docHeader && h.image > h.text && s.header({paddingBottom: 10}).text(n.docHeader.text, n.docHeader);
                {
                    if (n.docHeaderImage) {
                        var r = m.defer();
                        return pdfjs.load(n.docHeaderImage.url, function (t, i) {
                            if (!t) {
                                var e = new pdfjs.Image(i);
                                s.header({paddingBottom: 10}).image(e, n.docHeaderImage), n.docHeader && h.image < h.text && s.header({paddingBottom: 10}).text(n.docHeader.text, n.docHeader)
                            }
                            r.resolve(s.render())
                        }), r
                    }
                    return m.resolve(s.render())
                }
            }(h, n)
        })
    }

    function Ms(t, i, e) {
        "after" == i && t.text().br(), "string" == typeof e && (e = {text: e}), t.text(e.text, e.options || {}), "before" == i && t.text().br()
    }

    function Ss(t, i) {
        for (var e = i.orientation && "landscape" == i.orientation ? "height" : "width", s = 80, n = 0; n < t.length; n++) s += t[n].width;
        i[e] = Math.max(i[e] || 0, s)
    }

    function ks(t, i, e, s) {
        e.header = j(e.header) || !0 === e.header ? {} : e.header, e.footer = j(e.footer) || !0 === e.footer ? {} : e.footer, e.table = e.table || {};
        for (var n = !1 === e.header ? 0 : t[0].header.length, h = !1 !== e.footer && t[0].footer ? t[0].footer.length : 0, r = [], o = 0; o < t.length; o++) r[o] = t[o].width;
        var a = P.extend(e.table, {
            borderWidth: 1,
            height: 20,
            lineHeight: 1.1,
            borderColor: 15658734,
            backgroundColor: 16777215,
            color: 6710886,
            textAlign: "left",
            paddingRight: 10,
            paddingLeft: 10,
            headerRows: n,
            widths: r.length ? r : ["100%"]
        }), u = s.table(a);
        if (n) for (var c = P.extend(e.header, {
            borderRightColor: 11587299,
            borderBottomColor: 11587299,
            color: 4868682,
            backgroundColor: 13820911,
            height: 27,
            lineHeight: 1.2
        }), f = 0; f < n; f++) for (var l = u.tr(c), d = 0; d < t.length; d++) l.td(t[d].header[f].toString());
        for (var v = 0; v < i.length; v++) for (var _ = u.tr({}), p = 0; p < i[v].length; p++) _.td(i[v][p]);
        if (h) for (var m = P.extend(e.footer, {
            borderRightColor: 15658734,
            borderBottomColor: 15658734,
            backgroundColor: 16448250,
            color: 6710886,
            height: 27,
            lineHeight: 1.2
        }), b = 0; b < h; b++) for (var g = u.tr(m), w = 0; w < t.length; w++) g.td(t[w].footer[b].toString())
    }

    var Cs = function (t, d) {
        (d = d || {}).export_mode = "excel", t = b(t) ? t : [t];
        for (var v = [], i = 0; i < t.length; i++) {
            var e = ri(t[i]);
            if (e && e.$exportView && (e = e.$exportView(d)), e && (v = v.concat(e)), d.dataOnly) {
                var s = bs(e, d);
                v[i] = {scheme: s, exportData: gs(e, d, s), spans: d.spans ? Fs(e, d) : []}
            }
        }
        if (d.dataOnly) return v;
        var _ = m.defer();
        return Ft(Y.cdn + "/extras/xlsx.core.styles.min.js").then(function () {
            if (!v.length) return _.reject(ps);
            for (var t = {
                SheetNames: [],
                Sheets: {},
                Workbook: {WBProps: {}, Names: []}
            }, i = b(d.sheets) ? d.sheets : [d.name || "Data"], e = 0; e < v.length; e++) {
                var s = v[e].scheme || bs(v[e], d), n = v[e].exportData || gs(v[e], d, s),
                    h = v[e].spans ? v[e].spans : d.spans ? Fs(v[e], d) : [], r = v[e].ranges || [],
                    o = Is(n, s, h, v[e].styles || [], d),
                    a = (i[e] || "Data" + e).replace(/[*?:[\]\\/]/g, "").replace(/&/g, "&amp;").substring(0, 31);
                t.SheetNames.push(a), t.Sheets[a] = o, t.Workbook.Names = t.Workbook.Names.concat(r)
            }
            var u = XLSX.write(t, {bookType: "xlsx", bookSST: !1, type: "binary"}),
                c = (d.filename || i.join(",")) + ".xlsx", f = new Blob([function l(t) {
                    for (var i = new ArrayBuffer(t.length), e = new Uint8Array(i), s = 0; s != t.length; ++s) e[s] = 255 & t.charCodeAt(s);
                    return i
                }(u)], {type: "application/xlsx"});
            return !1 !== d.download && St(f, c), _.resolve(f), _
        })
    };
    var $s = {number: "n", date: "n", string: "s", "boolean": "b"}, Ds = "_table";

    function Is(t, i, e, s, n) {
        for (var h, r = {}, o = {
            s: {c: 1e7, r: 1e7},
            e: {c: 0, r: 0}
        }, a = 0; a != t.length; ++a) for (var u = 0; u != t[a].length; ++u) {
            o.s.r > a && (o.s.r = a), o.s.c > u && (o.s.c = u), o.e.r < a && (o.e.r = a), o.e.c < u && (o.e.c = u);
            var c = {v: t[a][u]};
            if (null !== c.v) {
                var f = XLSX.utils.encode_cell({c: u, r: a}), l = c.v.toString(), d = "=" === l.charAt(0);
                if ((n.docHeader ? 2 : 0) + i[0].header.length <= a && !d) {
                    var v = i[u];
                    v.type && (c.t = $s[v.type] || ""), v.format && (c.z = v.format)
                }
                if (c.v instanceof Date ? (c.t = c.t || "n", c.z = c.z || XLSX.SSF[Ds][14], c.v = (h = c.v, Math.round(25569 + h / 864e5))) : c.t || ("boolean" == typeof c.v ? c.t = "b" : "number" == typeof c.v || parseFloat(c.v) == c.v ? (c.v = 1 * c.v, c.t = "n") : (c.v = l, d ? (c.t = "n", c.f = c.v, delete c.v) : c.t = "s")), s) {
                    var _ = As(a, u, s);
                    _.format && (c.z = _.format, delete _.format), c.s = _
                }
                r[f] = c
            }
        }
        return o.s.c < 1e7 && (r["!ref"] = XLSX.utils.encode_range(o)), r["!rows"] = function p(t) {
            for (var i in t) t[i] = {hpx: t[i], hpt: .75 * t[i]};
            return t
        }(i.heights), r["!cols"] = function m(t) {
            for (var i = [], e = 0; e < t.length; e++) i.push({wch: t[e].width});
            return i
        }(i), e.length && (r["!merges"] = e), r
    }

    function As(t, i, e) {
        return e[t] && e[t][i] ? e[t][i] : ""
    }

    function Fs(t, i) {
        var e = t.getColumnConfig, s = t.Zf, n = [];
        if (e) {
            if (!1 !== i.header && (n = Ts(t, i, "header", n)), s) {
                var h = i.xCorrection || 0, r = i.yCorrection || 0;
                for (var o in s) {
                    var a = s[o];
                    for (var u in a) {
                        var c = t.getColumnIndex(u) - h, f = t.getIndexById(o) - r;
                        if (!(c < 0 || f < 0)) {
                            var l = c + a[u][0] - 1, d = f + (a[u][1] - 1);
                            n.push({s: {c: c, r: f}, e: {c: l, r: d}})
                        }
                    }
                }
            }
            !1 !== i.footer && (n = Ts(t, i, "footer", n))
        }
        return n
    }

    function Ts(t, i, e, s) {
        for (var n = t.config.columns, h = (i.docHeader ? 2 : 0) + ("header" == e ? 0 : (!1 !== i.header ? t.Kf.length : 0) + t.count()), r = 0; r < n.length; r++) for (var o = n[r][e], a = 0; a < o.length; a++) o[a] && (o[a].colspan || o[a].rowspan) && s.push({
            s: {
                c: r,
                r: a + h
            }, e: {c: r + (o[a].colspan || 1) - 1, r: a + (o[a].rowspan || 1) - 1 + h}
        });
        return s
    }

    function Vs(t, i) {
        -1 != t.type.indexOf("confirm") && !1 === i ? t.Jh.reject() : t.Jh.resolve(i);
        var e = t.callback;
        e && e(i, t.details), Os.hide(t.id)
    }

    function zs(t) {
        var i = Os.order.length;
        if (0 < i && Us.keyboard) {
            var e = (t = t || window.event).which || t.keyCode, s = Os.pull[Os.order[i - 1]];
            return 13 != e && 32 != e || Vs(s, !0), 27 == e && Vs(s, !1), t.preventDefault && t.preventDefault(), !(t.cancelBubble = !0)
        }
    }

    function Hs(t, i) {
        var e, s = i || document.body;
        if (j(s.modality)) {
            if ((e = ct("DIV", {
                "class": "webix_modal_cover",
                style: "position:" + (i ? "absolute" : "fixed") + ";"
            })).onkeydown = zs, i) {
                var n = window.getComputedStyle(i).position;
                "fixed" != n && "absolute" != n && "sticky" != n && "relative" != n && (s.style.position = "relative")
            }
            s.appendChild(e), s.modality = 1
        } else t ? s.modality++ : s.modality--;
        if (
            t && 1 === s.modality || 0 === s.modality) if (e) e.style.display = "inline-block"; else {
            e = s.querySelectorAll(".webix_modal_cover");
            for (var h = 0; h < e.length; h++) if (e[h].parentNode == s) {
                e[h].style.display = 1 == s.modality ? "inline-block" : "none";
                break
            }
        }
    }

    function Rs(t, i, e) {
        return "<div role='button' tabindex='0' aria-label='" + t + "' class='webix_popup_button" + (e ? " " + e : "") + "' result='" + i + "' ><div>" + t + "</div></div>"
    }

    function Bs(t, i, e) {
        var s = t.tagName ? t : function a(s, t, i) {
                var e = document.createElement("DIV"), n = s.css ? " " + s.css : "";
                e.className = "webix_modal_box webix_" + s.type + n, e.setAttribute("webixbox", 1), e.setAttribute("role", "alertdialog"), e.setAttribute("aria-label", s.title || ""), e.setAttribute("tabindex", "0");
                var h = "";
                if (s.width && (e.style.width = s.width + (re.isNumber(s.width) ? "px" : "")), s.height && (e.style.height = s.height + (re.isNumber(s.height) ? "px" : "")), s.title && (h += '<div class="webix_popup_title">' + s.title + "</div>"), h += '<div class="webix_popup_text"><span>' + (s.content ? "" : s.text) + '</span></div><div  class="webix_popup_controls">', i && (h += Rs(s.cancel || $.message.cancel, !1)), t && (h += Rs(s.ok || $.message.ok, !0, "confirm")), s.buttons && !t && !i) for (var r = 0; r < s.buttons.length; r++) h += Rs(s.buttons[r], r);
                if (h += "</div>", e.innerHTML = h, s.content) {
                    var o = s.content;
                    "string" == typeof o && (o = document.getElementById(o)), "none" == o.style.display && (o.style.display = ""), e.childNodes[s.title ? 1 : 0].appendChild(o)
                }
                return e.onclick = function (t) {
                    var i = (t = t || window.event).target || t.srcElement;
                    if (i.className || (i = i.parentNode), -1 != i.className.indexOf("webix_popup_button")) {
                        var e = i.getAttribute("result");
                        Vs(s, e = "true" == e || "false" != e && e)
                    }
                    t.cancelBubble = !0
                }, s.il = e
            }(t, i, e),
            n = t.container ? t.container.offsetWidth : window.innerWidth || document.documentElement.offsetWidth,
            h = t.container ? t.container.offsetHeight : window.innerHeight || document.documentElement.offsetHeight;
        t.container && (s.style.position = "absolute"), C((t.container || document.body).appendChild(s)), Hs(!0, t.container);
        var r = t.left || Math.abs(Math.floor((n - s.offsetWidth) / 2)),
            o = t.top || Math.abs(Math.floor((h - s.offsetHeight) / 2));
        return "top" == t.position ? s.style.top = "-3px" : s.style.top = o + "px", s.style.left = r + "px", s.onkeydown = zs, s.focus(), t.id ? Os.pull[t.id] && Os.hide(t.id) : t.id = ai("modalbox"), Os.order.push(t.id), (Os.pull[t.id] = t).Jh = m.defer(), t.Jh
    }

    function Ps(t) {
        return Bs(t, !0)
    }

    function js(t) {
        return Bs(t, !0, !0)
    }

    function Es(t) {
        return Bs(t)
    }

    function Ns(t, i, e) {
        return "object" != M(t) && ("function" == typeof i && (e = i, i = ""), t = {text: t, type: i, callback: e}), t
    }

    function Ls() {
        var t = Ns.apply(this, arguments);
        return t.type = t.type || "confirm", js(t)
    }

    function Os() {
        var t = Ns.apply(this, arguments);
        return t.type = t.type || "alert", Es(t)
    }

    function Us(t, i, e, s) {
        switch ((t = function n(t, i, e, s) {
            return "object" != M(t) && (t = {
                text: t,
                type: i,
                expire: e,
                id: s
            }), t.id = t.id || ai("message"), t.expire = t.expire || Ws.expire, t
        }.apply(this, arguments)).type = t.type || "info", t.type.split("-")[0]) {
            case"alert":
                return Ps(t);
            case"confirm":
                return js(t);
            case"modalbox":
                return Es(t);
            default:
                return function h(t) {
                    Ws.area || (Ws.area = document.createElement("DIV"), Ws.area.className = "webix_message_area", Ws.area.style[Ws.position] = "5px", document.body.appendChild(Ws.area)), Ws.area.setAttribute("role", "alert"), Ws.area.setAttribute("aria-atomic", !0), Ws.hide(t.id);
                    var i = document.createElement("DIV");
                    return i.innerHTML = "<div>" + t.text + "</div>", i.className = "webix_message webix_" + t.type, i.onclick = function () {
                        t && Ws.hide(t.id), t = null
                    }, "bottom" == Ws.position && Ws.area.firstChild ? Ws.area.insertBefore(i, Ws.area.firstChild) : Ws.area.appendChild(i), 0 < t.expire && (Ws.timers[t.id] = window.setTimeout(function () {
                        Ws.hide(t.id)
                    }, t.expire)), i.style.height = i.offsetHeight - 2 + "px", Ws.pull[t.id] = i, i = null, t.id
                }(t)
        }
    }

    Kt(document, "keydown", zs, {capture: !0}), Os.pull = {}, Os.order = [], Os.hide = function (t) {
        if (t && Os.pull[t]) {
            var i = Os.pull[t].il;
            i && (i.parentNode.removeChild(i), Os.order.splice(Os.order.indexOf(t), 1), Hs(!1, Os.pull[t].container), delete Os.pull[t])
        }
    }, Os.hideAll = function () {
        for (var t in Os.pull) this.hide(t)
    };
    var Ws = Us;
    Ws.expire = 4e3, Ws.keyboard = !0, Ws.position = "top", Ws.pull = {}, Ws.timers = {}, Ws.hideAll = function () {
        for (var t in Ws.pull) Ws.hide(t)
    }, Ws.hide = function (t) {
        var i = Ws.pull[t]
        ;i && i.parentNode && (window.setTimeout(function () {
            i.parentNode.removeChild(i), i = null
        }, 2e3), i.style.height = 0, i.className += " hidden", Ws.area.removeAttribute("role"), Ws.timers[t] && window.clearTimeout(Ws.timers[t]), delete Ws.pull[t])
    }, t("message", Us);
    window.atob && new Date > new Date(2020, 1, 15) && setTimeout(function () {
        Us({
            type: "error",
            expire: -1,
            text: atob("VGhpcyBhcHAgdXNlcyBhIHRyaWFsIHZlcnNpb24gb2YgV2ViaXggVUkuIFRoZSB0cmlhbCBwZXJpb2QgaGFzIGV4cGlyZWQuIDxicj4gSWYgeW91ciB3YW50IHRvIGNvbnRpbnVlIHVzaW5nIFdlYml4IFVJLCBwbGVhc2UgdXBncmFkZSB0byBDb21tZXJjaWFsIG9yIEdQTCBlZGl0aW9uLg==")
        })
    }, Math.floor(5e3 * Math.random()) + 1e3), Y.isIE8 && (Object.defineProperty = function (t, i, e) {
        t[i] = e.value
    });
    var Ys = {
        startOnMonday: !1, toFixed: function (t, i) {
            return t < 10 && (t = "0" + t), i && t < 100 && (t = "0" + t), t
        }, weekStart: function (t) {
            var i = (t = this.copy(t)).getDay();
            return this.startOnMonday && (0 === i ? i = 6 : i--), this.datePart(this.add(t, -1 * i, "day"))
        }, monthStart: function (t) {
            return (t = this.copy(t)).setDate(1), this.datePart(t)
        }, yearStart: function (t) {
            return (t = this.copy(t)).setMonth(0), this.monthStart(t)
        }, dayStart: function (t) {
            return this.datePart(t, !0)
        }, dateToStr: function (h, e) {
            if ("function" == typeof h) return h;
            if (Y.strict) return function (i) {
                if (!i) return "";
                i.getMonth || (i = $.parseFormatDate(i));
                var s = "", n = 0;
                return h.replace(/%[a-zA-Z]/g, function (e, t) {
                    s += h.slice(n, t);
                    s += function (t) {
                        if ("%d" == e) return Ys.toFixed(t.getDate());
                        if ("%m" == e) return Ys.toFixed(t.getMonth() + 1);
                        if ("%j" == e) return t.getDate();
                        if ("%n" == e) return t.getMonth() + 1;
                        if ("%y" == e) return Ys.toFixed(t.getFullYear() % 100);
                        if ("%Y" == e) return t.getFullYear();
                        if ("%D" == e) return $.calendar.dayShort[t.getDay()];
                        if ("%l" == e) return $.calendar.dayFull[t.getDay()];
                        if ("%M" == e) return $.calendar.monthShort[t.getMonth()];
                        if ("%F" == e) return $.calendar.monthFull[t.getMonth()];
                        if ("%h" == e) return Ys.toFixed((t.getHours() + 11) % 12 + 1);
                        if ("%g" == e) return (t.getHours() + 11) % 12 + 1;
                        if ("%G" == e) return t.getHours();
                        if ("%H" == e) return Ys.toFixed(t.getHours());
                        if ("%i" == e) return Ys.toFixed(t.getMinutes());
                        if ("%a" == e) return 11 < t.getHours() ? $.pm[0] : $.am[0];
                        if ("%A" == e) return 11 < t.getHours() ? $.pm[1] : $.am[1];
                        if ("%s" == e) return Ys.toFixed(t.getSeconds());
                        if ("%S" == e) return Ys.toFixed(t.getMilliseconds(), !0);
                        if ("%W" == e) return Ys.toFixed(Date.getISOWeek(t));
                        if ("%c" != e) return e;
                        var i = t.getFullYear();
                        return i += "-" + Ys.toFixed(t.getMonth() + 1), i += "-" + Ys.toFixed(t.getDate()), i += "T", i += Ys.toFixed(t.getHours()), i += ":" + Ys.toFixed(t.getMinutes()), i += ":" + Ys.toFixed(t.getSeconds())
                    }(i), n = t + 2
                }), s += h.slice(n, h.length)
            };
            h = h.replace(/%[a-zA-Z]/g, function (t) {
                switch (t) {
                    case"%d":
                        return '"+wDate.toFixed(date.getDate())+"';
                    case"%m":
                        return '"+wDate.toFixed((date.getMonth()+1))+"';
                    case"%j":
                        return '"+date.getDate()+"';
                    case"%n":
                        return '"+(date.getMonth()+1)+"';
                    case"%y":
                        return '"+wDate.toFixed(date.getFullYear()%100)+"';
                    case"%Y":
                        return '"+date.getFullYear()+"';
                    case"%D":
                        return '"+i18n.calendar.dayShort[date.getDay()]+"';
                    case"%l":
                        return '"+i18n.calendar.dayFull[date.getDay()]+"';
                    case"%M":
                        return '"+i18n.calendar.monthShort[date.getMonth()]+"';
                    case"%F":
                        return '"+i18n.calendar.monthFull[date.getMonth()]+"';
                    case"%h":
                        return '"+wDate.toFixed((date.getHours()+11)%12+1)+"';
                    case"%g":
                        return '"+((date.getHours()+11)%12+1)+"';
                    case"%G":
                        return '"+date.getHours()+"';
                    case"%H":
                        return '"+wDate.toFixed(date.getHours())+"';
                    case"%i":
                        return '"+wDate.toFixed(date.getMinutes())+"';
                    case"%a":
                        return '"+(date.getHours()>11?i18n.pm[0]:i18n.am[0])+"';
                    case"%A":
                        return '"+(date.getHours()>11?i18n.pm[1]:i18n.am[1])+"';
                    case"%s":
                        return '"+wDate.toFixed(date.getSeconds())+"';
                    case"%S":
                        return '"+wDate.toFixed(date.getMilliseconds(), true)+"';
                    case"%W":
                        return '"+wDate.toFixed(wDate.getISOWeek(date))+"';
                    case"%c":
                        var i = '"+date.getFullYear()+"';
                        return i += '-"+wDate.toFixed((date.getMonth()+1))+"', i += '-"+wDate.toFixed(date.getDate())+"', i += "T", i += '"+wDate.toFixed(date.getHours())+"', i += ':"+wDate.toFixed(date.getMinutes())+"', i += ':"+wDate.toFixed(date.getSeconds())+"', !0 === e && (i += "Z"), i;
                    default:
                        return t
                }
            }), !0 === e && (h = h.replace(/date\.get/g, "date.getUTC"));
            var i = new Function("date", "i18n", "wDate",
                "if (!date) return ''; if (!date.getMonth) date=i18n.parseFormatDate(date);  return \"" + h + '";');
            return function (t) {
                return i(t, $, Ys)
            }
        }, strToDate: function (t, h) {
            if ("function" == typeof t) return t;
            var r, i, e, o = t.match(/%[a-zA-Z]/g), s = "var temp=date.split(/[^0-9a-zA-Z]+/g);";
            if (!$.calendar.monthShort_hash) {
                for (e = $.calendar.monthShort, i = $.calendar.monthShort_hash = {}, r = 0; r < e.length; r++) i[e[r]] = r;
                for (e = $.calendar.monthFull, i = $.calendar.monthFull_hash = {}, r = 0; r < e.length; r++) i[e[r]] = r
            }
            if (Y.strict) return function (t) {
                if (!t) return "";
                if ("object" == M(t)) return t;
                var i = t.split(/[^0-9a-zA-Z]+/g), e = [0, 0, 1, 0, 0, 0, 0];
                for (r = 0; r < o.length; r++) {
                    var s = o[r];
                    if ("%y" == s) e[0] = 1 * i[r] + (30 < i[r] ? 1900 : 2e3); else if ("%Y" == s) e[0] = 1 * (i[r] || 0), e[0] < 30 && (e[0] += 2e3); else if ("%n" == s || "%m" == s) e[1] = (i[r] || 1) - 1; else if ("%M" == s) e[1] = $.calendar.monthShort_hash[i[r]] || 0; else if ("%F" == s) e[1] = $.calendar.monthFull_hash[i[r]] || 0; else if ("%j" == s || "%d" == s) e[2] = i[r] || 1; else if ("%g" == s || "%G" == s || "%h" == s || "%H" == s) e[3] = i[r] || 0; else if ("%a" == s) e[3] = e[3] % 12 + ((i[r] || "") == $.am[0] ? 0 : 12); else if ("%A" == s) e[3] = e[3] % 12 + ((i[r] || "") == $.am[1] ? 0 : 12); else if ("%i" == s) e[4] = i[r] || 0; else if ("%s" == s) e[5] = i[r] || 0; else if ("%S" == s) e[6] = i[r] || 0; else if ("%c" == s) {
                        var n = /(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)(\+.*|)/g.exec(t);
                        e[0] = 1 * (n[1] || 0), e[0] < 30 && (e[0] += 2e3), e[1] = (n[2] || 1) - 1, e[2] = n[3] || 1, e[3] = n[4] || 0, e[4] = n[5] || 0, e[5] = n[6] || 0
                    }
                }
                return h ? new Date(Date.UTC(e[0], e[1], e[2], e[3], e[4], e[5], e[6])) : new Date(e[0], e[1], e[2], e[3], e[4], e[5], e[6])
            };
            for (r = 0; r < o.length; r++) switch (o[r]) {
                case"%j":
                case"%d":
                    s += "set[2]=temp[" + r + "]||1;";
                    break;
                case"%n":
                case"%m":
                    s += "set[1]=(temp[" + r + "]||1)-1;";
                    break;
                case"%y":
                    s += "set[0]=temp[" + r + "]*1+(temp[" + r + "]>30?1900:2000);";
                    break;
                case"%g":
                case"%G":
                case"%h":
                case"%H":
                    s += "set[3]=temp[" + r + "]||0;";
                    break;
                case"%i":
                    s += "set[4]=temp[" + r + "]||0;";
                    break;
                case"%Y":
                    s += "set[0]=(temp[" + r + "]||0)*1; if (set[0]<30) set[0]+=2000;";
                    break;
                case"%a":
                    s += "set[3]=set[3]%12+(temp[" + r + "]==i18n.am[0]?0:12);";
                    break;
                case"%A":
                    s += "set[3]=set[3]%12+(temp[" + r + "]==i18n.am[1]?0:12);";
                    break;
                case"%s":
                    s += "set[5]=temp[" + r + "]||0;";
                    break;
                case"%S":
                    s += "set[6]=temp[" + r + "]||0;";
                    break;
                case"%M":
                    s += "set[1]=i18n.calendar.monthShort_hash[temp[" + r + "]]||0;";
                    break;
                case"%F":
                    s += "set[1]=i18n.calendar.monthFull_hash[temp[" + r + "]]||0;";
                    break;
                case"%c":
                    s += "var res = date.split('T');", s += "if(res[0]){ var d = res[0].split('-');", s += "set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;", s += "set[1]= (d[1]||1)-1;", s += "set[2]= d[2]||1;}", s += "if(res[1]){ var t = res[1].split(':');", s += "set[3]= t[0]||0;", s += "set[4]= t[1]||0;", s += "set[5]= parseInt(t[2])||0;}"
            }
            var n = "set[0],set[1],set[2],set[3],set[4],set[5], set[6]";
            h && (n = " Date.UTC(" + n + ")");
            var a = new Function("date", "i18n", "if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; " + s + " return new Date(" + n + ");");
            return function (t) {
                return a(t, $)
            }
        }, getISOWeek: function (t) {
            if (!t) return !1;
            var i = t.getDay();
            0 === i && (i = 7);
            var e = new Date(t.valueOf());
            e.setDate(t.getDate() + (4 - i));
            var s = e.getFullYear(), n = Math.floor((e.getTime() - new Date(s, 0, 1).getTime()) / 864e5);
            return 1 + Math.floor(n / 7)
        }, getUTCISOWeek: function (t) {
            return this.getISOWeek(t)
        }, el: function (t, i, e, s) {
            if (e) {
                var n = s(t, i);
                if (n) for (var h = 0 < e ? 1 : -1; n;) t.setHours(t.getHours() + h), n = s(t, i), h += 0 < e ? 1 : -1
            }
        }, add: function (t, i, e, s) {
            s && (t = this.copy(t));
            var n = Ys.copy(t);
            switch (e) {
                case"day":
                    t.setDate(t.getDate() + i), this.el(t, n, i, function (t, i) {
                        return Ys.datePart(i, !0).valueOf() == Ys.datePart(t, !0).valueOf()
                    });
                    break;
                case"week":
                    t.setDate(t.getDate() + 7 * i), this.el(t, n, 7 * i, function (t, i) {
                        return Ys.datePart(i, !0).valueOf() == Ys.datePart(t, !0).valueOf()
                    });
                    break;
                case"month":
                    t.setMonth(t.getMonth() + i), this.el(t, n, i, function (t, i) {
                        return i.getMonth() == t.getMonth() && i.getYear() == t.getYear()
                    });
                    break;
                case"year":
                    t.setYear(t.getFullYear() + i), this.el(t, n, i, function (t, i) {
                        return i.getFullYear() == t.getFullYear()
                    });
                    break;
                case"hour":
                    t.setHours(t.getHours() + i), this.el(t, n, i, function (t, i) {
                        return i.getHours() == t.getHours() && Date.datePart(i, !0) == Date.datePart(t, !0)
                    });
                    break;
                case"minute":
                    t.setMinutes(t.getMinutes() + i);
                    break;
                default:
                    Ys.add[e](t, i, e)
            }
            return t
        }, datePart: function (t, i) {
            i && (
                t = this.copy(t));
            var e = this.copy(t);
            return e.setHours(0), e.getDate() != t.getDate() ? t.setHours(1) : t.setHours(0), t.setMinutes(0), t.setSeconds(0), t.setMilliseconds(0), t
        }, timePart: function (t, i) {
            return i && (t = this.copy(t)), (t.valueOf() / 1e3 - 60 * t.getTimezoneOffset()) % 86400
        }, copy: function (t) {
            return new Date(t.valueOf())
        }, equal: function (t, i) {
            return !(!t || !i) && t.valueOf() === i.valueOf()
        }, isHoliday: function (t) {
            if (0 === (t = t.getDay()) || 6 == t) return "webix_cal_event"
        }
    }, qs = {
        getConfig: function (t) {
            var i = {decimalSize: 0, groupSize: 999, prefix: "", sufix: ""}, e = t.split(/[0-9].*[0-9]/g);
            e[0].length && (i.prefix = e[0]), e[1].length && (i.sufix = e[1]), (i.prefix || i.sufix) && (t = t.substr(i.prefix.length, t.length - i.prefix.length - i.sufix.length));
            var s = t.indexOf("1");
            0 < s && (i.prefix = t.substr(0, s), t = t.substr(s));
            var n = t.indexOf("0");
            0 < n && (i.decimalSize = t.length - n, i.decimalDelimiter = t[n - 1], t = t.substr(0, n - 1));
            var h = t.match(/[^0-9]/);
            return h && (i.groupSize = t.length - h.index - 1, i.groupDelimiter = t[h.index]), i
        }, parse: function (t, i) {
            if (!t || "string" != typeof t) return t;
            i.prefix && (t = t.toLowerCase().replace(i.prefix.toLowerCase() || "", "")), i.sufix && (t = t.toLowerCase().replace(i.sufix.toLowerCase() || "", ""));
            var e = "";
            if (i.decimalDelimiter) {
                var s = t.indexOf(i.decimalDelimiter);
                -1 < s && (e = (e = t.substr(s + 1).replace(/[^0-9]/g, "")).substr(0, Math.min(e.length, i.decimalSize)), t = t.substr(0, s))
            }
            var n = "-" === t[0] ? -1 : 1;
            return (t = t.replace(/[^0-9]/g, "")) || (t = "0"), e && (t += "." + e), parseFloat(t) * n
        }, format: function (t, i) {
            if ("" === t || void 0 === t) return t;
            i = i || $;
            var e = (t = parseFloat(t)) < 0 ? "-" : "";
            t = Math.abs(t), i.decimalOptional || (t = t.toFixed(i.decimalSize));
            var s = t.toString();
            s = s.split(".");
            var n = "";
            if (i.groupSize) {
                var h = i.groupSize, r = s[0].length;
                do {
                    n = (0 < (r -= h) ? s[0].substr(r, h) : s[0].substr(0, h + r)) + (n ? i.groupDelimiter + n : "")
                } while (0 < r)
            } else n = s[0];
            return s = i.decimalSize ? e + n + (s[1] ? i.decimalDelimiter + s[1] : "") : e + n, i.prefix || i.sufix ? i.prefix + s + i.sufix : s
        }, numToStr: function (i) {
            return function (t) {
                return qs.format(t, i)
            }
        }
    };
    var Gs = ["fullDateFormat", "timeFormat", "dateFormat", "longDateFormat", "parseFormat", "parseTimeFormat"];
    $.setLocale = function (t) {
        "string" == typeof t && (t = $.locales[t]), t && (t.priceSettings = _(t.priceSettings || t), function r(t, i) {
            for (var e in i) "object" != M(i[e]) || b(i[e]) ? t[e] = i[e] : (t[e] || (t[e] = {}), r(t[e], i[e]))
        }($, t));
        for (var i = 0; i < Gs.length; i++) {
            var e = Gs[i], s = $[e + "UTC"];
            $[e + "Str"] = Ys.dateToStr($[e], s), $[e + "Date"] = Ys.strToDate($[e], s)
        }
        var n = Wt($.price), h = $.priceSettings || $;
        $.intFormat = qs.numToStr({
            groupSize: $.groupSize,
            groupDelimiter: $.groupDelimiter,
            decimalSize: 0
        }), $.priceFormat = function (t) {
            return n(qs.format(t, h))
        }, $.numberFormat = qs.format
    }, $.locales = {
        "en-US": {
            groupDelimiter: ",",
            groupSize: 3,
            decimalDelimiter: ".",
            decimalSize: 2,
            dateFormat: "%m/%d/%Y",
            timeFormat: "%h:%i %A",
            longDateFormat: "%d %F %Y",
            fullDateFormat: "%m/%d/%Y %h:%i %A",
            am: ["am", "AM"],
            pm: ["pm", "PM"],
            price: "${obj}",
            priceSettings: {groupDelimiter: ",", groupSize: 3, decimalDelimiter: ".", decimalSize: 2},
            fileSize: ["b", "Kb", "Mb", "Gb", "Tb", "Pb", "Eb"],
            calendar: {
                monthFull: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                monthShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                dayFull: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                dayShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                hours: "Hours",
                minutes: "Minutes",
                done: "Done",
                clear: "Clear",
                today: "Today"
            },
            dataExport: {page: "Page", of: "of"},
            PDFviewer: {
                of: "of",
                automaticZoom: "Automatic Zoom",
                actualSize: "Actual Size",
                pageFit: "Page Fit",
                pageWidth: "Page Width",
                pageHeight: "Page Height",
                enterPassword: "Enter password",
                passwordError: "Wrong password"
            },
            aria: {
                calendar: "Calendar",
                increaseValue: "Increase value",
                decreaseValue: "Decrease value",
                navMonth: ["Previous month", "Next month"],
                navYear: ["Previous year", "Next year"],
                navDecade: ["Previous decade", "Next decade"],
                dateFormat: "%d %F %Y",
                monthFormat: "%F %Y",
                yearFormat: "%Y",
                hourFormat: "Hours: %h %A",
                minuteFormat: "Minutes: %i",
                removeItem: "Remove item",
                pages: ["First page", "Previous page", "Next page", "Last page"],
                page: "Page",
                headermenu: "Header menu",
                openGroup: "Open column group",
                closeGroup: "Close column group",
                closeTab: "Close tab",
                showTabs: "Show more tabs",
                resetTreeMap: "Reset tree map",
                navTreeMap: "Level up",
                nextTab: "Next tab",
                prevTab: "Previous tab",
                multitextSection: "Add section",
                multitextextraSection: "Remove section",
                showChart: "Show chart",
                hideChart: "Hide chart",
                resizeChart: "Resize chart"
            },
            richtext: {underline: "Underline", bold: "Bold", italic: "Italic"},
            combo: {select: "Select", selectAll: "Select all", unselectAll: "Unselect all"},
            message: {ok: "OK", cancel: "Cancel"},
            comments: {
                send: "Send",
                confirmMessage: "The comment will be removed. Are you sure?",
                edit: "Edit",
                remove: "Remove",
                placeholder: "Type here..",
                moreComments: "More comments"
            },
            filter: {
                less: "less",
                lessOrEqual: "less or equal",
                greater: "greater",
                greaterOrEqual: "greater or equal",
                contains: "contains",
                notContains: "not contains",
                equal: "equal",
                notEqual: "not equal"
            }
        }
    }, $.setLocale("en-US");
    var Xs = {
        prefix: function (e, s) {
            return e += ".", {
                put: function (t, i) {
                    return s.put(e + t, i)
                }, get: function (t) {
                    return s.get(e + t)
                }, remove: function (t) {
                    return s.remove(e + t)
                }
            }
        }
    };
    Xs.local = {
        put: function (t, i) {
            t && window.JSON && window.localStorage && window.localStorage.setItem(t, u(i))
        }, get: function (t) {
            if (t && window.JSON && window.localStorage) {
                var i = window.localStorage.getItem(t);
                return i ? Vt.json.toObject(i) : null
            }
            return null
        }, remove: function (t) {
            t && window.JSON && window.localStorage && window.localStorage.removeItem(t)
        }, clear: function () {
            window.localStorage.clear()
        }
    }, Xs.session = {
        put: function (t, i) {
            t && window.JSON && window.sessionStorage && window.sessionStorage.setItem(t, u(i))
        }, get: function (t) {
            if (t && window.JSON && window.sessionStorage) {
                var i = window.sessionStorage.getItem(t);
                return i ? Vt.json.toObject(i) : null
            }
            return null
        }, remove: function (t) {
            t && window.JSON && window.sessionStorage && window.sessionStorage.removeItem(t)
        }, clear: function () {
            window.sessionStorage.clear()
        }
    }, Xs.cookie = {
        put: function (t, i, e, s) {
            t && window.JSON && (document.cookie = t + "=" + escape(u(i)) + (s && s instanceof Date ? ";expires=" + s.toUTCString() : "") + (e ? ";domain=" + e : "") + (Y.https ? ";secure" : ""))
        }, getRaw: function (t) {
            for (var i = document.cookie.split(";"), e = "", s = "", n = 0; n < i.length; n++) {
                if ((e = i[n].split("="))[0].replace(/^\s+|\s+$/g, "") == t) return !0, 1 < e.length && (s = unescape(e[1].replace(/^\s+|\s+$/g, ""))), s;
                e = null, ""
            }
            return null
        }, get: function (t) {
            if (t && window.JSON) {
                var i = this.getRaw(t);
                return i ? Vt.json.toObject(unescape(i)) : null
            }
            return null
        }, remove: function (t, i) {
            t && this.getRaw(t) && (document.cookie = t + "=" + (i ? ";domain=" + i : "") + ";expires=Thu, 01-Jan-1970 00:00:01 GMT")
        }, clear: function (t) {
            for (var i = document.cookie.split(";"), e = 0; e < i.length; e++) document.cookie = /^[^=]+/.exec(i[e])[0] + "=" + (t ? ";domain=" + t : "") + ";expires=Thu, 01-Jan-1970 00:00:01 GMT"
        }
    }, Y.printPPI = 96, Y.printMargin = .75 * Y.printPPI;
    var Js = Y.printMargin, Ks = {a4: "A4", a3: "A3", letter: "letter"}, Zs = {page: !0, data: !0},
        Qs = {portrait: !0, landscape: !0},
        tn = {A3: {width: 11.7, height: 16.5}, A4: {width: 8.27, height: 11.7}, letter: {width: 8.5, height: 11}};

    function en(t, i) {
        var e = ct("div", {
            "class": "webix_view webix_print_" + t.toLowerCase(),
            style: "height:0px;visibility:hidden;"
        }, i["doc" + t]);
        "Header" === t ? dt(e, document.body.firstChild) : document.body.appendChild(e), i["doc" + t] = e
    }

    var sn = {
        phone: {mask: "+# (###) ###-####", allow: /[0-9]/g},
        card: {mask: "#### #### #### ####", allow: /[0-9]/g},
        date: {mask: "####-##-## ##:##", allow: /[0-9]/g}
    }, nn = {
        set: function (t, i) {
            i = i || {}, this.Ht && this.exit(), ri(t) ? t = ri(t) : ("string" == typeof t && (t = document.getElementById(t)), t instanceof Element && (t = {
                $view: t,
                $html: !0
            }));
            var e = (this.Ht = t).config;
            t.setPosition ? (this.sl = {
                left: t.config.left,
                top: t.config.top
            }, t.setPosition(0, 0), e.fullscreen = !0, t.resize()) : (this.nl = ei({
                view: "window",
                head: this.hl(i),
                fullscreen: !0,
                borderless: !0,
                body: {rows: []}
            }), e && (this.Va = {
                width: e.width,
                minWidth: e.minWidth,
                maxWidth: e.maxWidth,
                height: e.height,
                minHeight: e.minHeight,
                maxHeight: e.maxHeight
            }), t.getParentView && t.getParentView() ? (this.rl = t.getParentView(), this.rl.index && (this.sl = {
                index: this.rl.index(t),
                active: !!this.rl.getActiveId && this.rl.getActiveId() == e.id
            })) : (this.rl = t.$view.parentNode, this.sl = ct("div"), this.rl.replaceChild(this.sl, t.$view)), this.sl.position = t.$view.style.position, t.$view.style.position = "inherit",
                this.nl.getBody().addView(t.$html ? {
                    view: "template",
                    content: t.$view,
                    css: "webix_fullscreen_html"
                } : t), this.nl.show(), this.ol(t))
        }, exit: function () {
            if (this.Ht) {
                this.Ht.$view.style.position = this.sl.position;
                var t = this.Ht.config;
                this.Ht.setPosition ? (t.fullscreen = !1, this.Ht.setPosition(this.sl.left, this.sl.top), this.Ht.resize()) : (this.rl instanceof Element ? (this.Ht.pt = null, this.Ht._e && this.Ht._e(this.Ht.config), this.rl.replaceChild(this.Ht.$view, this.sl)) : j(this.sl) ? (this.Ht.pt = this.rl, this.rl.At(this.Ht)) : (this.rl.addView(this.Ht, this.sl.index), this.sl.active && this.Ht.show(!1, !1)), this.ol(this.Ht, this.Va), this.Ht.$html || (this.nl.getBody().yi = []), this.nl.close()), this.al()
            }
        }, al: function () {
            delete this.rl, delete this.Ht, delete this.Va, delete this.sl
        }, ol: function (t, i) {
            t.$html || (i = i || {
                height: 0,
                minHeight: 0,
                maxHeight: 0,
                width: 0,
                minWidth: 0,
                maxWidth: 0
            }, t.define(i), t.resize())
        }, hl: function (t) {
            var i = this;
            return !1 === t.head || "object" == M(t.head) ? t.head : {
                cols: [{
                    template: t.head || "",
                    type: "header",
                    borderless: !0
                }, {
                    view: "icon", icon: "wxi-close", click: function () {
                        i.exit()
                    }
                }]
            }
        }
    }, hn = {
        denySelect: nt,
        allowSelect: ht,
        index: rt,
        createCss: ot,
        addStyle: at,
        removeStyle: ut,
        create: ct,
        getValue: ft,
        remove: lt,
        insertBefore: dt,
        locate: vt,
        offset: _t,
        posRelative: pt,
        pos: mt,
        preventEvent: bt,
        stopEvent: gt,
        triggerEvent: wt,
        addCss: xt,
        removeCss: yt,
        getTextSize: Mt,
        download: St,
        ul: kt,
        setSelectionRange: Ct,
        getSelectionRange: $t,
        addMeta: Dt
    }, rn = "__webix_remote_error";

    function on(t, i) {
        this.cl = {}, this.fl = [], this.ll = t, this.Qa = "", i ? this.dl(i) : this.vl = z(t).then(function (t) {
            return t.text()
        }).then(S(function (t) {
            return t = t.split("/*api*/")[1], this.dl(JSON.parse(t)), this.cl
        }, this))
    }

    function an(t, i) {
        var e = new on(t, i)._l();
        for (var s in e) un[s] = e[s];
        return e
    }

    on.prototype = {
        dl: function (t) {
            if (t.$key && (this.Qa = t.$key), t.$vars) for (var i in t.$vars) this.cl[i] = t.$vars[i];
            this.G(t, this.cl, "")
        }, G: function (t, i, e) {
            for (var s in t) if ("$key" !== s && "$vars" !== s) {
                var n = t[s];
                if ("object" == M(n)) {
                    var h = i[s] = {};
                    this.G(n, h, e + s + ".")
                } else i[s] = this.pl(this, e + s)
            }
        }, ml: function (t, i) {
            var e = this.bl(this, t, i);
            return this.fl.push(e), this.gl(), e
        }, gl: function () {
            this.wl || (this.wl = setTimeout(S(this.xl, this), 1))
        }, xl: function () {
            for (var t = [], h = this.fl, i = 0; i < this.fl.length; i++) {
                var e = this.fl[i];
                e.$sync ? (h.splice(i, 1), i--) : t.push({name: e.$name, args: e.$args})
            }
            if (h.length) {
                var s = z(), n = this.yl(t);
                D("onBeforeRemoteCall", [s, n, {}]);
                var r = s.post(this.ll, n).then(function (t) {
                    for (var i = t.json().data, e = 0; e < i.length; e++) {
                        var s = i[e], n = i[e] && i[e][rn];
                        n ? (D("onRemoteError", [n]), h[e].reject(n)) : h[e].resolve(s)
                    }
                }, function (t) {
                    for (var i = 0; i < h.length; i++) h[i].reject(t);
                    throw t
                });
                D("onAfterRemoteCall", [r])
            }
            this.fl = [], this.wl = null
        }, k: function () {
            var t = null;
            this.$sync = !0;
            var i = [{name: this.$name, args: this.$args}];
            try {
                var e = z(), s = this.$context.yl(i);
                D("onBeforeRemoteCall", [e, s, {sync: !0}]);
                var n = e.sync().post(this.$context.ll, s);
                D("onAfterRemoteCall", [null]), (t = JSON.parse(n.responseText).data[0])[rn] && (t = null)
            } catch (Do) {
            }
            return t
        }, bl: function (t, i, e) {
            var s = m.defer();
            return s.sync = t.k, s.$name = i, s.$args = e, s.$context = this, s
        }, pl: function (t, i) {
            return function () {
                return t.ml(i, [].slice.call(arguments))
            }
        }, _l: function () {
            return this.vl || this.cl
        }, yl: function (t) {
            return {key: this.Qa, payload: t}
        }
    };
    var un = function (t, i) {
        if ("object" !== M(t)) return an(t, i);
        var e = document.getElementsByTagName("script");
        return i = t, an(t = e[e.length - 1].src, i)
    };

    function cn() {
        var t = !!(window.orientation % 180);
        ti.orientation !== t && (ti.orientation = t, D("onRotate", [t]))
    }

    Y.touch && (ti.orientation = !!((j(window.orientation) ? 90 : window.orientation) % 180), Kt(window, "onorientationchange" in window ? "orientationchange" : "resize", cn));
    var fn = {
        textWaitDelay: 500, summColumn: {
            getValue: function (t) {
                return t.firstChild.innerHTML
            }, setValue: function () {
            }, refresh: function (t, i, e) {
                var s = 0;
                t.mapCells(null, e.columnId, null, 1, function (t) {
                    t *= 1, isNaN(t) || (s += t)
                }, !0), e.format && (s = e.format(s)), e.template && (s = e.template({value: s})), i.firstChild.innerHTML = s
            }, trackCells: !0, render: function (t, i) {
                return i.template && (i.template = Wt(i.template)), ""
            }
        }, masterCheckbox: {
            getValue: function () {
            }, setValue: function () {
            }, getHelper: function (t, i) {
                return {
                    check: function () {
                        i.checked = !1
                            , t.onclick()
                    }, uncheck: function () {
                        i.checked = !0, t.onclick()
                    }, isChecked: function () {
                        return i.checked
                    }
                }
            }, refresh: function (e, t, s) {
                t.onclick = function () {
                    this.getElementsByTagName("input")[0].checked = s.checked = !s.checked;
                    var t = e.getColumnConfig(s.columnId), i = s.checked ? t.checkValue : t.uncheckValue;
                    e.data.each(function (t) {
                        t[s.columnId] = i, e.callEvent("onCheck", [t.id, s.columnId, i]), this.callEvent("onStoreUpdated", [t.id, t, "save"])
                    }), e.refresh()
                }
            }, render: function (t, i) {
                return "<input type='checkbox' " + (i.checked ? "checked='1'" : "") + ">"
            }
        }, textFilter: {
            getInputNode: function (t) {
                return t.firstChild ? t.firstChild.firstChild : {value: null}
            }, getValue: function (t) {
                return this.getInputNode(t).value
            }, setValue: function (t, i) {
                this.getInputNode(t).value = i
            }, refresh: function (t, i, e) {
                i.component = t.B.id, t.registerFilter(i, e, this), i.Ml = t.B.id, e.value && this.getValue(i) != e.value && this.setValue(i, e.value), i.onclick = bt, Jt(i, "keydown", this.Sl)
            }, render: function (t, i) {
                return this.init && this.init(i), i.css = (i.css || "") + " webix_ss_filter", "<input " + (i.placeholder ? 'placeholder="' + i.placeholder + '" ' : "") + "type='text'>"
            }, Sl: function (t) {
                var i = this.Ml;
                9 != (t.which || t.keyCode) && (this.kl && window.clearTimeout(this.kl), this.kl = window.setTimeout(function () {
                    var t = ri(i);
                    t && t.filterByAll()
                }, fn.textWaitDelay))
            }
        }, selectFilter: {
            getInputNode: function (t) {
                return t.firstChild ? t.firstChild.firstChild : {value: null}
            }, getValue: function (t) {
                return this.getInputNode(t).value
            }, setValue: function (t, i) {
                this.getInputNode(t).value = i
            }, refresh: function (t, i, e) {
                e.compare = e.compare || function (t, i) {
                    return t == i
                }, i.component = t.B.id, t.registerFilter(i, e, this);
                var s = fn.Cl(t, e);
                !1 !== e.emptyOption && s.unshift({id: "", value: e.emptyOption || ""});
                for (var n = document.createElement("select"), h = 0; h < s.length; h++) {
                    var r = document.createElement("option");
                    r.value = s[h].id, r.text = s[h].value, n.add(r)
                }
                i.firstChild.innerHTML = "", i.firstChild.appendChild(n), e.value && this.setValue(i, e.value), i.onclick = bt, n.Ml = t.B.id, Jt(n, "change", this.$l)
            }, render: function (t, i) {
                return this.init && this.init(i), i.css = (i.css || "") + " webix_ss_filter", ""
            }, $l: function () {
                ri(this.Ml).filterByAll()
            }
        }, Cl: function (t, i) {
            var e = i.options;
            return e ? t.Dl.call(e, "id", "value") : t.collectValues(i.columnId, i.collect)
        }
    };
    fn.serverFilter = P.extend({
        $server: !0, Sl: function (t) {
            var i = this.Ml, e = t.which || t.keyCode;
            9 == e || 33 <= e && e <= 40 || (this.kl && window.clearTimeout(this.kl), this.kl = window.setTimeout(function () {
                ri(i).filterByAll()
            }, fn.textWaitDelay))
        }
    }, fn.textFilter), fn.serverSelectFilter = P.extend({
        $server: !0, $l: function () {
            ri(this.Ml).filterByAll()
        }
    }, fn.selectFilter), fn.numberFilter = P.extend({
        init: function (h) {
            h.prepare = function (t) {
                var e, s = this, i = -1 != t.indexOf("="), n = this.format(t);
                return "" === n ? "" : (-1 != t.indexOf(">") ? e = this.Il : -1 != t.indexOf("<") && (e = this.Al), h.compare = e && i ? function (t, i) {
                    return s.Fl(t, i) || e(t, i)
                } : e || this.Fl, n)
            }
        }, format: function (t) {
            return t.replace(/[^\-.0-9]/g, "")
        }, Il: function (t, i) {
            return i < 1 * t
        }, Al: function (t, i) {
            return "" !== t && 1 * t < i
        }, Fl: function (t, i) {
            return "" !== t && 1 * t == i
        }
    }, fn.textFilter), fn.dateFilter = P.extend({
        format: function (t) {
            if ("" === t) return "";
            var i = new Date;
            if (-1 != t.indexOf("today")) i = Ys.dayStart(i); else if (-1 == t.indexOf("now")) {
                var e = t.match(/[0-9]+/g);
                if (!e || !e.length) return "";
                i = e.length < 3 ? (e.reverse(), new Date(e[0], (e[1] || 1) - 1, 1)) : $.dateFormatDate(t.replace(/^[>< =]+/, ""))
            }
            return i.valueOf()
        }
    }, fn.numberFilter);
    var ln = {
        name: "baselayout", restore: function (t, i, e) {
            var s = this.Tl(_(t), i);
            if (e) return s;
            ei(s.cols || s.rows, this)
        }, Tl: function (t, i) {
            if (!t.$layout) return i.call(this, t);
            for (var e = t.cols || t.rows, s = 0; s < e.length; s++) e[s] = this.Tl(e[s], i);
            return t
        }, serialize: function (t) {
            for (var i = [], e = this.getChildViews(), s = 0; s < e.length; s++) {
                var n = e[s];
                if (n.movePortlet) {
                    var h = n.getChildViews();
                    i.push(t.call(this, h[h.length - 1]))
                } else n.serialize ? i.push(n.serialize(t, !0)) : i.push(t.call(this, n))
            }
            var r = {$layout: !0, type: this.config.type};
            return this.config.rows ? r.rows = i : r.cols = i, r
        }, $init: function (t) {
            this.$ready.push(this.Vl), this.Q = this.Vi, this.zl = [], this.Hl = [], this.za = {
                top: 0,
                left: 0,
                right: 0,
                bottom: 0
            }, t.$topView && (t.borderless = !0, t.$t = {
                top: !0,
                left: !0,
                bottom: !0,
                right: !0
            }), t.isolate && P.extend(this, $e)
        },
        rows_setter: function (t) {
            return this.Rl = 1, this.Bl = t, !0
        }, cols_setter: function (t) {
            return this.Rl = 0, this.$view.style.whiteSpace = "nowrap", this.Bl = t, !0
        }, Ft: function (t) {
            var i = x.find.call(this.yi, t);
            this.Pl && this.Pl(i), x.removeAt.call(this.yi, i), this.resizeChildren(!0)
        }, At: function (t, i) {
            if (j(i)) {
                for (var e = 0; e < this.yi.length; e++) this.yi[e].destructor();
                this.Bl = t, this.Vl()
            } else {
                var s;
                "number" == typeof i ? ((i < 0 || i > this.yi.length) && (i = this.yi.length), x.insertAt.call(this.yi, t, i), t.B.hidden || this.jl(t, this.yi[i])) : (s = ri(i), i = x.find.call(this.yi, s), t.B.hidden || this.jl(t, s), s.destructor(), this.yi[i] = t), this.Rl || this.Aa(t)
            }
            this.resizeChildren(!0);
            var n = this.elements ? this : this.getFormView();
            n && !this.El && n.Ji(), D("onReconstruct", [this])
        }, Aa: function (t) {
            t.Tt.style.display = "inline-block", t.Tt.style.verticalAlign = "top"
        }, addView: function (t, i) {
            j(i) && (i = this.yi.length);
            var e = this.$$ ? this : this.getTopParentView();
            ti.pt = this;
            var s = e && e.ui ? e.ui(t, this, i) : ei(t, this, i);
            return ti.pt = null, s.B.id
        }, removeView: function (t) {
            var i;
            i = "object" != M(t) ? ri(t) || (this.$$ ? this.$$(t) : null) : t;
            var e = x.find.call(this.yi, i);
            if (0 <= e) {
                this.Pl && this.Pl(e, i);
                var s = this.elements ? this : this.getFormView();
                this.yi.splice(e, 1), s && di(i, function (t) {
                    t.name && delete s.getCleanValues()[t.config.name]
                }, s, !0), i.destructor(), this.resizeChildren(!0), s && s.Ji()
            }
            D("onReconstruct", [this])
        }, reconstruct: function () {
            this.Nl = 0, this.At(this.Bl)
        }, Si: function (t, i, e) {
            t.B.hidden || (t.B.hidden = !0, lt(t.Tt), this.Nl++, e || ti.bt || this.resizeChildren(!0))
        }, de: function (t) {
            t.callEvent && t.callEvent("onViewShow", [])
        }, resizeChildren: function () {
            if (!ti._t && this.zl) {
                var t = this.getParentView();
                if (t) return t.resizeChildren ? t.resizeChildren() : t.resize();
                var i, e, s, n, h = this.$getSize(0, 0);
                if (s = i = this.zl[0] || 0, n = e = this.zl[1] || 0, (1e5 <= h[1] || 1e5 <= h[3]) && this.Tt.parentNode && (s = i = Math.max(h[0], this.B.width || this.Tt.parentNode.offsetWidth || i || 0), n = e = Math.max(h[2], this.B.height || this.Tt.parentNode.offsetHeight || e || 0)), t) this.Ha(i, e); else {
                    h[0] > i && (s = h[0]), h[2] > e && (n = h[2]);
                    var r = this.Tt.parentNode == document.body && !this.setPosition;
                    !r && i > h[1] && (s = h[1]), !r && e > h[3] && (n = h[3]), this.$setSize(s, n)
                }
                ti.dt && (ti.dt = !1, this.resizeChildren()), D("onResize", [])
            }
        }, getChildViews: function () {
            return this.yi
        }, index: function (t) {
            t.B && (t = t.B.id);
            for (var i = 0; i < this.yi.length; i++) if (this.yi[i].B.id == t) return i;
            return -1
        }, jl: function (t, i) {
            if (i) if (i.B.hidden || t === i) {
                for (var e = this.index(i) + 1; this.yi[e] && this.yi[e].B.hidden;) e++;
                i = this.yi[e] ? this.yi[e].Tt : null
            } else i = i.Tt;
            dt(t.Tt, i, this.Q || this.Tt)
        }, fe: function (t, i, e) {
            t.B.hidden && (this.jl(t, t), t.B.hidden = !1, this.Nl--, e || (this.resizeChildren(!0), t.refresh && t.refresh()), t.callEvent && (t.callEvent("onViewShow", []), di(t, this.de)))
        }, showBatch: function (t, i) {
            var e = void 0 !== i;
            if (i = !1 !== i, e) this.B.visibleBatch = ""; else {
                if (this.B.visibleBatch == t) return;
                this.B.visibleBatch = t
            }
            for (var s = [], n = 0; n < this.yi.length; n++) this.yi[n].B.batch || this.yi[n].B.hidden ? this.yi[n].B.batch == t ? i ? s.push(this.yi[n]) : this.Si(this.yi[n], null, !0) : e || this.Si(this.yi[n], null, !0) : s.push(this.yi[n]);
            for (var h = 0; h < s.length; h++) this.fe(s[h], null, !0), s[h].le();
            this.resizeChildren(!0)
        }, Vl: function (t) {
            this.yi = [], this.name;
            for (var i = 0; i < t.length; i++) ti.pt = this, t[i].$t || (t[i].borderless = !0), this.yi[i] = ei.Ht(t[i], this), this.Rl || this.Aa(this.yi[i]), this.B.visibleBatch && this.B.visibleBatch != this.yi[i].B.batch && this.yi[i].B.batch && (this.yi[i].B.hidden = !0, this.Nl++), this.yi[i].B.hidden || ((this.Q || this.Vi).appendChild(this.yi[i].Tt), this.yi[i].$nospace && this.Nl++);
            this.Ll && this.Ll(t)
        }, Ol: function (t, i) {
            i.top && (t.borderTopWidth = "0px"), i.left && (t.borderLeftWidth = "0px"), i.right && (t.borderRightWidth = "0px"), i.bottom && (t.borderBottomWidth = "0px")
        }, Ul: function (t, i, e) {
            if (this.Rl != e) for (var s = 0; s < this.yi.length; s++) this.yi[s].B[t] = i, this.yi[s].Ul && this.yi[s].Ul(t, i, e)
        }, $getSize: function (t, i) {
            var e = 0, s = 1e5, n = 1e5, h = 0;
            this.Rl ? n = 0 : s = 0;
            var r = 0, o = 0, a = 0;
            this.Va = [];
            for (var u = 0; u < this.yi.length; u++) if (!this.yi[u].B.hidden) {
                var c = this.Va[u] = this.yi[u].$getSize(0, 0);
                this.yi[u].$nospace ? o++ : this.Rl ? (c[0] > e && (e = c[0]), c[1] < s && (s = c[1]), h += c[2], n += c[3], c[2] == c[3] && -1 != c[2] ? (r += c[2], o++) : a += c[4]) : (
                    c[2] > h && (h = c[2]), c[3] < n && (n = c[3]), e += c[0], s += c[1], c[0] == c[1] && -1 != c[0] ? (r += c[0], o++) : a += c[4])
            }
            n < h && (n = h), s < e && (s = e), this.Wl = [r, this.yi.length - o, a], this.Yl = [e + t, h + i];
            var f = Fi.api.$getSize.call(this, 0, 0);
            return 1e5 <= f[1] && (f[1] = 0), 1e5 <= f[3] && (f[3] = 0), f[0] = (f[0] || e) + t, f[1] = Math.max(f[0], (f[1] || s) + t), f[2] = (f[2] || h) + i, f[3] = Math.max(f[2], (f[3] || n) + i), !this.Rl && this.B.responsive && (f[0] = 0), f
        }, $setSize: function (t, i) {
            this.zl = [t, i], Fi.api.$setSize.call(this, t, i), this.Ha(t, i)
        }, ql: function (t, i, e) {
            var s = i = t[i];
            if (i != (e = t[e])) {
                var n = this.Gl * t[4] / this.Xl;
                if (n < i) s = i, this.Xl -= t[4], this.Gl -= s; else {
                    if (!(e < n)) return -1;
                    s = e, this.Xl -= t[4], this.Gl -= s
                }
            }
            return s
        }, Jl: function (t, i) {
            var e = ri(i);
            "hide" !== e && e ? (e || (e = ei({
                view: "popup",
                body: [{}]
            })), t.Kl = t.B.width, t.Zl = t.B.height, t.Ql = e.B.id, t.B.width = 0, t.B.height || (t.B.autoheight = !0), ei(t, e, this.Hl.length)) : (t.hide(), t.Ql = "hide"), this.Hl.push(t)
        }, ed: function (t) {
            var i = t.Ql;
            if (t.Ql = 0, "hide" !== i && i) {
                t.B.width = t.Kl, t.B.height = t.Zl, delete t.B.autoheight;
                for (var e = 0; this.yi[e] && !1 === this.yi[e].B.responsiveCell;) e++;
                ei(t, this, e)
            } else t.show();
            this.Hl.pop()
        }, sd: function (t) {
            if (ti.vt = !0, t + this.za.left + this.za.right + this.Ra * (this.yi.length - 1) < this.Yl[0]) for (var i = this.yi.length - 1, e = 0; e < i; e++) {
                var s = this.yi[e];
                if (!s.Ql) {
                    if (!1 !== s.B.responsiveCell) {
                        this.Jl(s, this.B.responsive), D("onResponsiveHide", [s.B.id]), ti.dt = !0;
                        break
                    }
                    i = this.yi.length
                }
            } else if (this.Hl.length) {
                var n = this.Hl[this.Hl.length - 1], h = "hide" == n.Ql ? 0 : n.Kl;
                n.$getSize(h, 0)[0] + this.Yl[0] + this.Ra + 20 <= t && (this.ed(n), D("onResponsiveShow", [n.B.id]), ti.dt = !0)
            }
            ti.vt = !1
        }, Ha: function (t, i) {
            ti.lt = (ti.lt || 0) + 1, !this.Rl && this.B.responsive && this.sd(t, i), this.Gl = (this.Rl ? i : t) - this.Wl[0], this.Xl = this.Wl[2];
            for (var e = t, s = i, n = [], h = 0; h < this.yi.length; h++) if (!this.yi[h].B.hidden && this.Va[h]) {
                var r = this.Va[h];
                if (this.Rl) {
                    if ((s = this.ql(r, 2, 3)) < 0) {
                        n.push({oldIndex: h, view: this.yi[h]});
                        continue
                    }
                } else if ((e = this.ql(r, 0, 1)) < 0) {
                    n.push({oldIndex: h, view: this.yi[h]});
                    continue
                }
                this.yi[h].$setSize(e, s)
            }
            for (var o = 0; o < n.length; o++) {
                var a = n[o].oldIndex, u = this.Va[a], c = Math.round(this.Gl * u[4] / this.Xl);
                this.Gl -= c, this.Xl -= u[4], this.Rl ? s = c : e = c, n[o].view.$setSize(e, s)
            }
            ti.lt -= 1
        }, nd: function (t, i) {
            var e = this.index(t);
            return -1 == e ? null : this.yi[e + i]
        }, hd: function () {
            return this.yi[0]
        }
    }, dn = {api: ln, view: P.protoUI(ln, c, Fi.view)}, vn = {
        name: "layout", $init: function () {
            this.Nl = 0
        }, defaults: {type: "line"}, Vl: function () {
            this.rd && (t = this.rd(t)), this.od || (this.Tt.className += " webix_layout_" + (this.B.type || ""), this.od = 1), this.B.margin !== undefined && (this.Ra = this.B.margin), this.B.padding !== undefined && "object" !== M(this.B.padding) && (this.za.left = this.za.right = this.za.top = this.za.bottom = this.B.padding), this.B.paddingX !== undefined && (this.za.left = this.za.right = this.B.paddingX), this.B.paddingY !== undefined && (this.za.top = this.za.bottom = this.B.paddingY), "object" === M(this.B.padding) && P.extend(this.za, this.B.padding, !0), (this.za.left || this.za.right || this.za.top || this.za.bottom) && (this.za.defined = !0), this.ad() && !this.B.borderless && (this.Vi.style.borderWidth = "1px", this.ud = !0);
            var t = this.Bl;
            this.B.borderless && (this.B.$t = {
                top: !0,
                left: !0,
                right: !0,
                bottom: !0
            }), this.Fa(t), dn.api.Vl.call(this, t), this.Ta(t)
        }, $getSize: function (t, i) {
            t = t || 0, i = i || 0;
            var e = this.Ra * (this.yi.length - this.Nl - 1);
            if (this.ud || this.ad()) {
                var s = this.B.$t;
                s && (t += (s.left ? 0 : 1) + (s.right ? 0 : 1), i += (s.top ? 0 : 1) + (s.bottom ? 0 : 1))
            }
            return this.B.height || (i += this.za.top + this.za.bottom + (this.Rl ? e : 0)), this.B.width || (t += this.za.left + this.za.right + (this.Rl ? 0 : e)), dn.api.$getSize.call(this, t, i)
        }, $setSize: function (t, i) {
            this.zl = [t, i], this.ad() || this.ud ? zi.api.$setSize.call(this, t, i) : Fi.api.$setSize.call(this, t, i), i = this.ue, t = this.oe, this.B.scroll && (i = Math.max(i, this.Yl[1]), t = Math.max(t, this.Yl[0])), this.Ha(t, i)
        }, Ha: function (t, i) {
            var e = this.Ra * (this.yi.length - this.Nl - 1);
            return i -= this.za.top + this.za.bottom, t -= this.za.left + this.za.right, this.Rl ? i -= e : t -= e, dn.api.Ha.call(this, t, i)
        }, resizeChildren: function (t) {
            if (t) {
                this.re = null;
                for (var i = [], e = 0; e < this.yi.length; e++) {
                    var s = this.yi[e];
                    i[e] = s.B;
                    var n = s.zl && !s.ud || s.B.borderless ? "0px" : "1px"
                    ;s.Tt.style.borderTopWidth = s.Tt.style.borderBottomWidth = s.Tt.style.borderLeftWidth = s.Tt.style.borderRightWidth = n
                }
                this.Fa(i);
                for (var h = 0; h < i.length; h++) i[h].borderless && this.yi[h]._e && this.yi[h]._e(i[h]);
                this.Ta(this.yi)
            }
            ti.vt || dn.api.resizeChildren.call(this)
        }, ad: function () {
            return this.za.defined && 0 < this.Ra && !this.cd
        }, Fa: function (t) {
            if (!this.ad() || this.B.borderless && "space" != this.B.type) {
                for (var i = 0; i < t.length; i++) t[i].$t = l(this.B.$t);
                var e = !1;
                this.cd && (e = !0);
                var s = t.length;
                if (this.Rl) {
                    for (var n = 1; n < s - 1; n++) t[n].$t.top = t[n].$t.bottom = e;
                    if (1 < s) {
                        for ("head" != this.B.type && (t[0].$t.bottom = e); t[s - 1].hidden && 1 < s;) s--;
                        0 < s && (t[s - 1].$t.top = e)
                    }
                } else {
                    for (var h = 1; h < s - 1; h++) t[h].$t.left = t[h].$t.right = e;
                    if (1 < s) {
                        for ("head" != this.B.type && (t[0].$t.right = e), t[s - 1].$t.left = e; 1 < s && t[s - 1].hidden;) s--;
                        0 < s && (t[s - 1].$t.left = e)
                    }
                }
            } else for (var r = 0; r < t.length; r++) t[r].$t && t[r].borderless || (t[r].$t = {
                top: !1,
                left: !1,
                right: !1,
                bottom: !1
            })
        }, Ta: function (t) {
            for (var i = 0, e = 0; e < t.length; e++) {
                var s = this.yi[e], n = s.B.$t;
                if (s.B.hidden && this.yi[e + 1]) {
                    var h = this.yi[e + 1].B.$t;
                    n.top || (h.top = !1), n.left || (h.left = !1), e == i && i++
                }
                this.Ol(s.Tt.style, s.B.$t)
            }
            for (var r = this.Rl ? "marginLeft" : "marginTop", o = this.Rl ? "marginTop" : "marginLeft", a = this.Rl ? this.za.left : this.za.top, u = this.Rl ? this.za.top : this.za.left, c = 0; c < t.length; c++) this.yi[c].Tt.style[r] = a + "px";
            this.yi.length && (this.yi[i].Tt.style[o] = u + "px");
            for (var f = i + 1; f < t.length; f++) this.yi[f].Tt.style[o] = this.Ra + "px"
        }, type_setter: function (t) {
            return this.Ra = "undefined" != typeof this.fd[t] ? this.fd[t] : this.fd.line, this.za.left = this.za.right = this.za.top = this.za.bottom = "undefined" != typeof this.fd[t] ? this.ld[t] : this.ld.line, this.cd = "material" == t || "clean" == t, "material" == t && (this.B.borderless = !0), t
        }, $skin: function () {
            this.fd = Ei.layoutMargin, this.ld = Ei.layoutPadding
        }
    }, _n = P.protoUI(vn, dn.view), pn = {api: vn, view: _n};
    _n.call(-1);
    var mn = {
        name: "daterange", defaults: {button: !1, icons: !1, calendarCount: 2, borderless: !1}, $init: function (t) {
            t.calendar = t.calendar || {}, t.value = this.$prepareValue(t.value), delete t.calendar.type, this.Tt.className += " webix_daterange", this.dd = this.vd[t.calendar.type] || 0;
            for (var i = [], e = Ei.calendar, s = e && e.height ? e.height : 0, n = e && e.width ? e.width : 0, h = s || 250, r = n || 250, o = P.extend({
                view: "calendar",
                width: n,
                height: s
            }, t.calendar || {}, !0), a = t.calendarCount = 0 === this.dd && t.calendarCount || this.defaults.calendarCount, u = (o.css ? o.css + " " : "") + "webix_range_", c = t.value.start || new Date, f = 0; f < a; f++) {
                var l = Ys.add(c, this._d[this.dd] * f, "month", !0);
                P.extend(o, {
                    events: S(this.pd, this),
                    css: u + (1 === a ? "" : 0 === f ? "0" : f + 1 == a ? "N" : "1"),
                    monthSelect: 0 === f || f + 1 === a,
                    timepicker: 0 === this.dd && t.timepicker,
                    borderless: !0,
                    date: l
                }, !0), i.push(_(o))
            }
            t.rows = [{
                type: "clean",
                cols: i
            }], (t.button || t.icons) && t.rows.push(this.md(t, r * a)), t.height = j(t.height) ? h + (t.icons || t.button ? 30 : 0) : t.height, t.width = j(t.width) ? r * a : t.width, t.type = "line", this.$ready.push(this.bd), Jt(this.$view, "keydown", S(function (t) {
                this.ve(t.which || t.keyCode, t)
            }, this))
        }, value_setter: function (t) {
            return this.$prepareValue(t)
        }, getValue: function () {
            return this.B.value
        }, setValue: function (t, i) {
            t = this.$prepareValue(t);
            var e = (this.B.value = t).start || t.end || new Date;
            if (!i) {
                this.gd[0].showCalendar(t.start);
                for (var s = 1; s < this.gd.length; s++) this.gd[s].B.date = e, this.wd(this.gd[s], 1, s)
            }
            this.callEvent("onChange", [t]), this.refresh()
        }, refresh: function () {
            for (var t = 0; t < this.gd.length; t++) if (this.gd[t].dd === this.dd) {
                yt(this.gd[t].$view, "webix_cal_timepicker"), yt(this.gd[t].$view, "webix_range_timepicker");
                var i = this.xd(this.gd[t].getVisibleDate());
                if (i.start || i.end) {
                    if (this.gd[t].B.date = i.start || i.end, this.B.timepicker) {
                        var e = "webix_" + (i.start && i.end ? "range" : "cal") + "_timepicker";
                        xt(this.gd[t].$view, e)
                    }
                } else Ys.datePart(this.gd[t].B.date);
                this.gd[t].refresh()
            }
        }, addToRange: function (t) {
            var i = this.yd(this.Md(t));
            this.setValue(i)
        }, Sd: [{
            template: function () {
                return "<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>" + $.calendar.today + "</span>"
            }, on_click: {
                webix_cal_icon_today: function () {
                    var t = new Date;
                    this.B.timepicker || (t = Ys.datePart(t)), this.addToRange(t), this.callEvent("onTodaySet", [this.getValue()])
                }
            }
        }, {
            template: function () {
                return "<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>" + $.calendar.clear + "</span>"
            }, on_click: {
                webix_cal_icon_clear: function () {
                    this.setValue(""), this.callEvent("onDateClear", [])
                }
            }
        }], kd: function (t) {
            if (t) {
                t = "object" == M(t) ? t : this.Sd;
                for (var i = {
                    css: "webix_cal_footer ",
                    borderless: !0,
                    template: "<div class='webix_cal_icons'>",
                    onClick: {}
                }, e = 0; e < t.length; e++) {
                    if (t[e].template) {
                        var s = "function" == typeof t[e].template ? t[e].template : Wt(t[e].template);
                        i.template += s.call(this)
                    }
                    if (t[e].on_click) for (var n in t[e].on_click) i.onClick[n] = S(t[e].on_click[n], this)
                }
                return i.template += "</div>", i.width = Mt(i.template).width + 30, i
            }
            return {width: 0}
        }, md: function (t, i) {
            var e = {
                view: "button",
                value: $.calendar.done,
                minWidth: 100,
                maxWidth: 230,
                align: "center",
                click: function () {
                    this.getParentView().getParentView().hide()
                }
            }, s = this.kd(t.icons), n = {css: "webix_range_footer", height: 30, cols: [{width: s.width}]};
            return (t.button || t.icons) && 2 * s.width + e.minWidth > i && (n.cols[0].width = 0), n.cols.push(t.button ? e : {}), n.cols.push(s), n
        }, vd: {time: -1, month: 1, year: 2}, _d: {0: 1, 1: 12, 2: 120}, $prepareValue: function (t) {
            return t || (t = {
                start: null,
                end: null
            }), t.start || t.end || (t = {start: t}), t.end = this.Md(t.end) || null, t.start = this.Md(t.start) || null, (t.end && t.end < t.start || !t.start) && (t.end = [t.start, t.start = t.end][0]), t
        }, Md: function (t) {
            return "string" == typeof t && (t = $.parseFormatDate(t)), isNaN(1 * t) ? null : t
        }, pd: function (t, i) {
            if (!i) {
                var e = this.B.value, s = e.start ? Ys.datePart(Ys.copy(e.start)) : null,
                    n = e.end ? Ys.datePart(Ys.copy(e.end)) : null, h = Ys.datePart(t), r = Ys.add(h, 1, "day", !0),
                    o = Ys.add(h, -1, "day", !0), a = "";
                return s <= h && n && h <= n && (a = "webix_cal_range", Ys.equal(o, s) && (a += " webix_cal_range_first"), Ys.equal(r, n) && (a += " webix_cal_range_last")), Ys.equal(h, s) && (a = "webix_cal_range_start"), Ys.equal(h, n) && (a = "webix_cal_range_end"), a + " " + (Ys.isHoliday(t) + " " || "")
            }
        }, bd: function () {
            var t = this.gd = this.getChildViews()[0].getChildViews(), e = this, i = this.config.id;
            this.Cd = {};
            for (var s = 0; s < t.length; s++) t[s].config.master = i, t[this.Cd[t[s].config.id] = s].attachEvent("onBeforeDateSelect", function (t) {
                return e.$d(this, t)
            }), t[s].attachEvent("onBeforeZoom", function (t) {
                return e.Dd(this, t)
            }), 0 !== s && s !== t.length - 1 || (t[s].attachEvent("onAfterMonthChange", S(this.Id, this)), t[s].attachEvent("onAfterZoom", function (t, i) {
                e.Ad(this, t, i)
            }));
            this.B.timepicker && this.refresh()
        }, Dd: function (t, i) {
            var e = this.Fd(t.config.id);
            if (0 <= i && 0 < e && e !== this.gd.length - 1) return !1;
            if (-1 === i) {
                var s = this.xd(t.getVisibleDate());
                s.start && s.end && (t.B.date = s[this.Td])
            }
            return !0
        }, Id: function (t, i) {
            var e = i < t ? 1 : -1, s = i < t ? this.gd[this.gd.length - 1] : this.gd[0], n = s.zd[s.dd].Vd;
            this.Hd(e, n, s), this.refresh()
        }, Ad: function (t, i, e) {
            var s = t.zd[t.dd].Vd, n = this.Fd(t.config.id), h = 0 === n ? 1 : -1;
            if (this.gd[n + h]) {
                var r = this.gd[n + h].B.date;
                if (i < e && 0 <= i) {
                    var o = 0;
                    if (1 === i) {
                        var a = r.getFullYear();
                        (this.dd || -1 === h && 11 === r.getMonth() || 1 === h && 0 === r.getMonth()) && (a -= h), o = t.B.date.getFullYear() - a
                    } else if (0 === i) {
                        var u = r.getMonth() - h;
                        12 !== u && -1 != u || (u = -1 === u ? 11 : 0), o = t.B.date.getMonth() - u
                    }
                    this.Hd(o, s, t), this.refresh()
                }
            }
        }, wd: function (t, i, e) {
            t.blockEvent(), 0 <= t.dd && t.Rd(i, e), t.unblockEvent()
        }, Fd: function (t) {
            return this.Cd[t]
        }, Hd: function (t, i, e) {
            for (var s = 0; s < this.gd.length; s++) {
                var n = this.gd[s];
                e && n.config.id === e.config.id || this.wd(n, t, i)
            }
        }, xd: function (t) {
            var i = this.B.value, e = {};
            return i.start && i.start.getYear() === t.getYear() && i.start.getMonth() === t.getMonth() && (e.start = i.start), i.end && i.end.getYear() === t.getYear() && i.end.getMonth() === t.getMonth() && (e.end = i.end), e
        }, Bd: function (t, i) {
            t.setHours(i.getHours()), t.setMinutes(i.getMinutes()), t.setSeconds(i.getSeconds()), t.setMilliseconds(i.getMilliseconds())
        }, yd: function (t, i) {
            var e = _(this.B.value);
            0 === this.dd || j(i) ? e.start && !e.end ? e.end = t : (e.start = t, e.end = null) : e[i ? "end" : "start"] = t;
            return e
        }, $d: function (t, i) {
            if (this.callEvent("onBeforeDateSelect", [i])) {
                var e = this.B.value;
                if (t.dd < 0) {
                    var s, n = _(this.xd(i));
                    (s = n.start && n.end ? n[this.Td] : n.start || n.end) && this.Bd(s, i), t.dd = 0, e = P.extend(_(e), n, !0)
                } else {
                    var h = t.getVisibleDate(), r = this.Fd(t.config.id);
                    if (i.getMonth() !== h.getMonth() && (0 === r || r === this.gd.length - 1)) {
                        var o = h < i ? 1 : -1;
                        this.Hd(o, 1)
                    }
                    e = this.yd(i, r)
                }
                t.dd !== this.dd && t.showCalendar(i), this.setValue(e, !0), this.callEvent("onAfterDateSelect", [this.getValue()])
            }
            return !1
        }
    }, bn = {api: mn, view: P.protoUI(mn, pn.view)};
    fn.richSelectFilter = {
        getInputNode: function (t) {
            return ri(t.$webix) || null
        }, getValue: function (t, i) {
            var e = this.getInputNode(t);
            return i && e.getText ? e.getText() : e ? e.getValue() : ""
        }, setValue: function (t, i) {
            var e = this.getInputNode(t);
            return e ? e.setValue(i) : ""
        }, compare: function (t, i) {
            return t == i
        }, refresh: function (t, i, e) {
            if (!t.$destructed) {
                var s = ri(e.richselect);
                if (!s.$view.parentNode) ct("div", {"class": "webix_richfilter"}).appendChild(s.$view);
                i.$webix = e.richselect, i.style.marginLeft = "-10px", e.compare = e.compare || this.compare, e.prepare = e.prepare || this.prepare, t.registerFilter(i, e, this);
                var n = fn.Cl(t, e), h = s.getPopup().getList();
                if (i.firstChild.appendChild(s.$view.parentNode), h.parse && (h.clearAll(), h.parse(n), !this.$noEmptyOption && !1 !== e.emptyOption || e.emptyOption)) {
                    var r = {id: "$webix_empty", value: e.emptyOption || "", $empty: !0};
                    h.add(r, 0)
                }
                e.value && this.setValue(i, e.value), s.render(), k(s.resize, s)
            }
        }, render: function (t, i) {
            if (!i.richselect) {
                var e = {container: ct("div", {"class": "webix_richfilter"}), view: this.inputtype, options: []},
                    s = P.extend(this.inputConfig || {}, i.inputConfig || {}, !0);
                P.extend(e, s), i.separator && (e.separator = i.separator), i.suggest && (e.suggest = i.suggest);
                var n = ei(e);
                n.attachEvent("onChange", function () {
                    t.filterByAll()
                }), i.richselect = n.B.id, t.zt.push(n)
            }
            return i.css = (i.css || "") + " webix_div_filter", " "
        }, inputtype: "richselect"
    }, fn.serverRichSelectFilter = P.extend({$server: !0}, fn.richSelectFilter), fn.multiSelectFilter = P.extend({
        $noEmptyOption: !0,
        inputtype: "multiselect",
        prepare: function (t, i) {
            if (!t) return t;
            for (var e = {}, s = t.toString().split(i.separator || ","), n = 0; n < s.length; n++) e[s[n]] = 1;
            return e
        },
        compare: function (t, i) {
            return !i || i[t]
        }
    }, fn.richSelectFilter), fn.serverMultiSelectFilter = P.extend({
        $server: !0, $l: function () {
            ri(this.Ml).filterByAll()
        }
    }, fn.multiSelectFilter), fn.multiComboFilter = P.extend({
        inputtype: "multicombo",
        inputConfig: {tagMode: !1}
    }, fn.multiSelectFilter), fn.serverMultiComboFilter = P.extend({
        inputtype: "multicombo",
        inputConfig: {tagMode: !1}
    }, fn.serverMultiSelectFilter), fn.datepickerFilter = P.extend({
        prepare: function (t) {
            return t || ""
        }, compare: function (t, i) {
            return 1 * t == 1 * i
        }, inputtype: "datepicker"
    }, fn.richSelectFilter), fn.columnGroup = {
        getValue: function (t) {
            return t.innerHTML
        }, setValue: function () {
        }, getHelper: function (t, i) {
            return {
                open: function () {
                    i.closed = !0, t.onclick()
                }, close: function () {
                    i.closed = !1, t.onclick()
                }, isOpened: function () {
                    return i.closed
                }
            }
        }, refresh: function (e, t, s) {
            t.onclick = function (t) {
                gt(t);
                var i = this.firstChild.firstChild;
                s.closed ? (s.closed = !1, i.className = "webix_tree_open") : (s.closed = !0, i.className = "webix_tree_close"), k(function () {
                    e.callEvent("onColumnGroupCollapse", [s.columnId, s.batch, !s.closed]), e.showColumnBatch(s.batch, !s.closed)
                })
            }, s.firstRun || (s.firstRun = 1, s.closed && e.showColumnBatch(s.batch, !1))
        }, render: function (t, i) {
            return "<div role='button' tabindex='0' aria-label='" + $.aria[i.closed ? "openGroup" : "closeGroup"] + "' class='" + (i.closed ? "webix_tree_close" : "webix_tree_open") + "'></div>" + (i.groupText || "")
        }
    }, fn.dateRangeFilter = P.extend({
        prepare: function (t) {
            return t.start || t.end ? bn.api.$prepareValue(t) : ""
        }, compare: function (t, i) {
            return (!i.start || t >= i.start) && (!i.end || t <= i.end)
        }, inputtype: "daterangepicker"
    }, fn.richSelectFilter), fn.serverDateRangeFilter = P.extend({$server: !0}, fn.dateRangeFilter), Y.scrollSize = Y.touch || Y.$customScroll ? 0 : 17, _i(function () {
        var t = function s() {
            var t = ct("div");
            t.className = "webix_skin_mark", t.style.cssText = "position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;", document.body.appendChild(t);
            var i = t.offsetWidth - t.clientWidth, e = {
                200: "flat",
                210: "compact",
                230: "contrast",
                240: "material",
                250: "mini"
            }[10 * Math.floor(t.offsetHeight / 10)];
            document.body.removeChild(t), e && Li(e);
            return Y.$customScroll ? 0 : i
        }();
        Y.scrollSize = Y.touch ? 0 : t
    });
    var gn = !1;
    t("_fixHeight", function Ao() {
        gn || (at("html, body{ height:100%; }"), document.body.className += " webix_full_screen", Ui.limit(!1), gn = !0)
    }), ei.animate = function Fo(t, i, e) {
        var s = ri(i);
        if (s) {
            var n = e || {type: "slide", direction: "left"}, h = s.Tt.cloneNode(!0), r = ei(t, i);
            r.Tt.parentNode.appendChild(h);
            var o = ji.formLine(r.Tt, h, n);
            return n.callback = function () {
                ji.breakLine(o)
            }, ji(o, n), r
        }
    }, ei.animateView = function To(i, t, e) {
        if (i = ri(i)) {
            e = e || {type: "slide", direction: "left"};
            for (var s = function (t) {
                var i = t.Tt, e = i.className, s = i.innerHTML;
                return "<div class='" + e + "' style='width:" + i.offsetWidth + "px;height:" + i.offsetHeight + "px;'>" + s + "</div>"
            }, n = [], h = 0; h < i.Tt.childNodes.length; h++) {
                var r = i.Tt.childNodes[h],
                    o = r.currentStyle ? r.currentStyle.display : getComputedStyle(r, null).display;
                n.push(o || "")
            }
            var a = s(i);
            "function" == typeof t && t.call(this);
            for (var u = s(i), c = i.Tt.insertBefore(ct("DIV", {
                "class": "webix_view_animate",
                style: "width:" + i.Tt.offsetWidth + "px;height:" + i.Tt.offsetHeight + "px;"
            }, u + a), i.Tt.firstChild), f = 1; f < i.Tt.childNodes.length; f++) i.Tt.childNodes[f].style.display = "none";
            var l = ji.formLine(c.childNodes[0], c.childNodes[1], e);
            return e.callback = function () {
                if (c) {
                    i.Tt.removeChild(c), c = null;
                    for (var t = 0; t < i.Tt.childNodes.length; t++) i.Tt.childNodes[t].style.display = n[t]
                }
            }, ji(l, e), i
        }
    }, ei.freeze = fi, ei.resize = li, ei.zIndex = vi, ei.datafilter = fn, ei.fullScreen = function Vo() {
        if (Y.touch) {
            Dt("apple-mobile-web-app-capable", "yes"), Dt("viewport", "initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"), Y.isMac || at("body.webix_full_screen{ overflow-y: auto; }");
            var t = function () {
                var t = window.innerWidth, i = window.innerHeight;
                i && (document.body.style.height = i + "px", document.body.style.width = t + "px"), ti._t = !1, li()
            }, i = function () {
                ti._t = !0, k(t, null, [], 500)
            };
            I("onRotate", i), cn(), k(i)
        }
    };
    $.locales["de-DE"] = {
        groupDelimiter: ".",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d.%n.%Y",
        timeFormat: "%H:%i",
        longDateFormat: "%j. %F %Y",
        fullDateFormat: "%j. %F %Y %H:%i",
        am: null,
        pm: null,
        price: "{obj} €",
        priceSettings: {groupDelimiter: ".", groupSize: 3, decimalDelimiter: ",", decimalSize: 2},
        calendar: {
            monthFull: ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"],
            monthShort: ["Jan", "Feb", "Mrz", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"],
            dayFull: ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"],
            dayShort: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"],
            hours: "Stunden",
            minutes: "Minuten",
            done: "Fertig",
            clear: "Entfernen",
            today: "Heute"
        },
        dataExport: {page: "Seite", of: "aus"},
        PDFviewer: {
            of: "aus",
            automaticZoom: "Automatisch Zoom",
            actualSize: "Aktuelles Ausmaß",
            pageFit: "Seite Ausmaß",
            pageWidth: "Seite Breite",
            pageHeight: "Seite Höhe",
            enterPassword: "Passwort eingeben",
            passwordError: "Falsches passwort"
        },
        aria: {
            calendar: "Kalender",
            increaseValue: "Wert erhöhen",
            decreaseValue: "Wert verringern",
            navMonth: ["Vorheriger Monat", "Nächsten Monat"],
            navYear: ["Vorheriges Jahr", "Nächstes Jahr"],
            navDecade: ["Zurück Jahrzehnt", "Als nächstes Jahrzehnt"],
            dateFormat: "%j. %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Stunden: %H",
            minuteFormat: "Minuten: %i",
            removeItem: "Element entfernen",
            pages: ["Erste Seite", "Vorherige Seite", "Folgeseite", "Letzte Seite"],
            page: "Seite",
            headermenu: "Titelmenü",
            openGroup: "Öffnen Spaltengruppe ",
            closeGroup: "Schließen Spaltengruppe ",
            closeTab: "Tab schließen",
            showTabs: "Weitere Tabs",
            resetTreeMap: "Zurück zur ursprünglichen Ansicht",
            navTreeMap: "Aufleveln",
            nextTab: "Weiter tab",
            prevTab: "Zurück tab",
            multitextSection: "Element hinzufügen",
            multitextextraSection: "Element entfernen",
            showChart: "Chart anzeigen",
            hideChart: "Chart verstecken",
            resizeChart: "Chart Größe ändern"
        },
        richtext: {underline: "Unterstreichen", bold: "Fettgedruckt", italic: "Kursiv"},
        combo: {select: "Auswählen", selectAll: "Alles auswählen", unselectAll: "Alles widerrufen"},
        message: {ok: "OK", cancel: "Abbrechen"},
        comments: {
            send: "Absenden",
            confirmMessage: "Der Kommentar wird entfernt. Sind Sie sicher?",
            edit: "Redigieren",
            remove: "Löschen",
            placeholder: "Geben Sie hier ein..",
            moreComments: "Mehr Kommentare"
        },
        filter: {
            less: "weniger",
            lessOrEqual: "weniger oder gleich",
            greater: "mehr",
            greaterOrEqual: "größer oder gleich",
            contains: "enthält",
            notContains: "nicht enthält",
            equal: "gleich",
            notEqual: "ungleich"
        }
    }, $.locales["es-ES"] = {
        groupDelimiter: ".",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d/%n/%Y",
        timeFormat: "%G:%i",
        longDateFormat: "%d %F %Y",
        fullDateFormat: "%d %F %Y %G:%i",
        am: null,
        pm: null,
        price: "{obj} €",
        priceSettings: {groupDelimiter: ".", groupSize: 3, decimalDelimiter: ",", decimalSize: 2},
        calendar: {
            monthFull: ["enero", "febrero", "marzo", "abril", "mayo", "junio", "julio", "agosto", "septiembre", "octubre", "noviembre", "diciembre"],
            monthShort: ["ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"],
            dayFull: ["domingo", "lunes", "martes", "miércoles", "jueves", "viernes", "sábado"],
            dayShort: ["dom", "lun", "mar", "mié", "jue", "vie", "sáb"],
            hours: "Horas",
            minutes: "Minutos",
            done: "Listo",
            clear: "Reinicio",
            today: "Hoy"
        },
        dataExport: {page: "Página", of: "de"},
        PDFviewer: {
            of: "de",
            automaticZoom: "Zoom automático",
            actualSize: "Tamaño real",
            pageFit: "Tamaño de página",
            pageWidth: "Ancho de página",
            pageHeight: "Altura de la página",
            enterPassword: "Introduzca la contraseña",
            passwordError: "Contraseña incorrecta"
        },
        aria: {
            calendar: "Сalendario",
            increaseValue: "Aumentar el valor",
            decreaseValue: "Disminuye el valor",
            navMonth: ["Mes anterior", "Próximo mes"],
            navYear: ["Año anterior", "Próximo año"],
            navDecade: ["Década anterior", "Próxima década"],
            dateFormat: "%d %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Horas: %G",
            minuteFormat: "Minutos: %i",
            removeItem: "Retire el elemento",
            pages: ["Primera página", "Pagina anterior", "Siguiente página", "Última página"],
            page: "Página",
            headermenu: "Menú de títulos",
            openGroup: "Grupo de columnas abiertas",
            closeGroup: "Primer grupo de columnas",
            closeTab: "Cerrar tab",
            showTabs: "Mostrar más tabs",
            resetTreeMap: "Volver a la vista original",
            navTreeMap: "Elevar a mismo nivel",
            nextTab: "Siguiente tab",
            prevTab: "Tab anterior",
            multitextSection: "Añadir elemento",
            multitextextraSection: "Retire el elemento",
            showChart: "Espectáculo chart",
            hideChart: "Esconder chart",
            resizeChart: "Cambiar el tamaño el chart"
        },
        richtext: {underline: "Subrayar", bold: "Negrita", italic: "Itálico"},
        combo: {select: "Seleccionar", selectAll: "Seleccionar todo", unselectAll: "Deselecciona todo"},
        message: {ok: "OK", cancel: "Cancelar"},
        comments: {
            send: "Enviar",
            confirmMessage: "El comentario será eliminado. Estás seguro?",
            edit: "Corregir",
            remove: "Suprimir",
            placeholder: "Escriba aquí..",
            moreComments: "Más comentarios"
        },
        filter: {
            less: "menos",
            lessOrEqual: "menor o igual",
            greater: "mayor",
            greaterOrEqual: "mayor o igual",
            contains: "contiene",
            notContains: "not contiene",
            equal: "igual",
            notEqual: "no es igual"
        }
    }, $.locales["fr-FR"] = {
        groupDelimiter: " ",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d/%m/%Y",
        timeFormat: "%H:%i",
        longDateFormat: "%d %F %Y",
        fullDateFormat: "%d.%m.%Y %H:%i",
        price: "{obj} €",
        priceSettings: null,
        calendar: {
            monthFull: ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"],
            monthShort: ["Jan", "Fév", "Mar", "Avr", "Mai", "Juin", "Juil", "Aôu", "Sep", "Oct", "Nov", "Déc"],
            dayFull: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
            dayShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"],
            hours: "Heures",
            minutes: "Minutes",
            done: "Fini",
            clear: "Effacer",
            today: "Aujourd'hui"
        },
        dataExport: {page: "Page", of: "sur"},
        PDFviewer: {
            of: "sur",
            automaticZoom: "Zoom automatique",
            actualSize: "Taille actuelle",
            pageFit: "Taille de la page",
            pageWidth: "Largeur de la page",
            pageHeight: "Hauteur de page",
            enterPassword: "Entrez le mot de passe",
            passwordError: "Mauvais mot de passe"
        },
        aria: {
            calendar: "Сalendrier",
            increaseValue: "Augmenter la valeur",
            decreaseValue: "Diminution de la valeur",
            navMonth: ["Le mois précédent", "Le mois prochain"],
            navYear: ["Année précédente", "L'année prochaine"],
            navDecade: ["Décennie précédente", "Suivant décennie"],
            dateFormat: "%d %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Heures: %H",
            minuteFormat: "Minutes: %i",
            removeItem: "Retirer l'élément",
            pages: ["Première page", "Page précédente", "Page suivante", "Dernière page"],
            page: "Page",
            headermenu: "Menu de titre",
            openGroup: "Ouvrir groupe de colonnes ",
            closeGroup: "Fermer groupe de colonnes",
            closeTab: "Fermer tab",
            showTabs: "Montrer plus tabs",
            resetTreeMap: "Revenir à la vue originale",
            navTreeMap: "Niveau supérieur",
            nextTab: "Prochain tab",
            prevTab: "Précédent tab",
            multitextSection: "Ajouter l'élément",
            multitextextraSection: "Retirer l'élément",
            showChart: "Montrer chart",
            hideChart: "Cacher chart",
            resizeChart: "Redimensionner chart"
        },
        richtext: {underline: "Souligner", bold: "Gras", italic: "Italique"},
        combo: {select: "Sélectionner", selectAll: "Tout sélectionner", unselectAll: "Tout déselectionner"},
        message: {ok: "OK", cancel: "Annuler"},
        comments: {
            send: "Envoyer",
            confirmMessage: "Le commentaire sera supprimé. Êtes-vous sûr?",
            edit: "Modifier",
            remove: "Effacer",
            placeholder: "Écrivez ici..",
            moreComments: "Plus de commentaires"
        },
        filter: {
            less: "moins",
            lessOrEqual: "inférieur ou égal",
            greater: "plus grand",
            greaterOrEqual: "supérieur ou égal",
            contains: "contient",
            notContains: "ne contient",
            equal: "égal",
            notEqual: "pas égal"
        }
    }, $.locales["it-IT"] = {
        groupDelimiter: ".",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d/%m/%Y",
        timeFormat: "%H:%i",
        longDateFormat: "%j %F %Y",
        fullDateFormat: "%j %F %Y %H:%i",
        am: null,
        pm: null,
        price: "€ {obj}",
        priceSettings: {groupDelimiter: ".", groupSize: 3, decimalDelimiter: ",", decimalSize: 2},
        calendar: {
            monthFull: ["gennaio", "febbraio", "marzo", "aprile", "maggio", "giugno", "luglio", "agosto", "settembre", "ottobre", "novembre", "dicembre"],
            monthShort: ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic"],
            dayFull: ["domenica", "lunedì", "martedì", "mercoledì", "giovedì", "venerdì", "sabato"],
            dayShort: ["dom", "lun", "mar", "mer", "gio", "ven", "sab"],
            hours: "Orario",
            minutes: "Minuti",
            done: "Pronto",
            clear: "Pulisci",
            today: "Oggi"
        },
        dataExport: {page: "Pagina", of: "di"},
        PDFviewer: {
            of: "di",
            automaticZoom: "Zoom automatico",
            actualSize: "Dimensione reale",
            pageFit: "Dimensioni della pagina",
            pageWidth: "Larghezza della pagina",
            pageHeight: "Altezza della pagina",
            enterPassword: "Inserisci la password",
            passwordError: "Password errata"
        },
        aria: {
            calendar: "Calendario",
            increaseValue: "Aumenta il valore",
            decreaseValue: "Riduci il valore",
            navMonth: ["Il mese scorso", "Il prossimo mese"],
            navYear: ["L'anno scorso", "L'anno prossimo"],
            navDecade: ["Decennio precedente", "Prossimo decennio"],
            dateFormat: "%j %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Orario: %H",
            minuteFormat: "Minuti: %i",
            removeItem: "Rimuovere l'elemento",
            pages: ["Prima pagina", "Pagina precedente", "Pagina successiva", "Ultima pagina"],
            page: "Pagina",
            headermenu: "Menu del titolo",
            openGroup: "Aperto gruppo di colonne",
            closeGroup: "Chiudi gruppo di colonne",
            closeTab: "Chiudi tab",
            showTabs: "Mostra più tabs",
            resetTreeMap: "Tornare alla vista originale",
            navTreeMap: "Livello superiore",
            nextTab: "Tab successivo",
            prevTab: "Tab precedente",
            multitextSection: "Aggiungi elemento",
            multitextextraSection: "Rimuovere l'elemento",
            showChart: "Mostrare grafico",
            hideChart: "Nascondere grafico",
            resizeChart: "Ridimensionare grafico"
        },
        richtext: {underline: "Sottolineare", bold: "Grassetto", italic: "Corsivo"},
        combo: {select: "Selezionare", selectAll: "Seleziona tutto", unselectAll: "Deseleziona tutto"},
        message: {ok: "OK", cancel: "Annullare"},
        comments: {
            send: "Inviare",
            confirmMessage: "Il commento verrà rimosso. Sei sicuro?",
            edit: "Correggere",
            remove: "Elimina",
            placeholder: "Digitare qui..",
            moreComments: "Altri commenti"
        },
        filter: {
            less: "meno",
            lessOrEqual: "minore o uguale",
            greater: "maggiore",
            greaterOrEqual: "maggiore o uguale",
            contains: "contiene",
            notContains: "non contiene",
            equal: "uguale",
            notEqual: "non uguale"
        }
    }, $.locales["ja-JP"] = {
        groupDelimiter: ",",
        groupSize: 3,
        decimalDelimiter: ".",
        decimalSize: 2,
        dateFormat: "%Y.%m.%d",
        timeFormat: "%H:%i",
        longDateFormat: "%Y年%m月%d日",
        fullDateFormat: "%Y.%m.%d %H:%i",
        price: "¥{obj}",
        priceSettings: {groupSize: 3, groupDelimiter: ",", decimalDelimiter: "", decimalSize: 0},
        calendar: {
            monthFull: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
            monthShort: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
            dayFull: ["日曜日", "月曜日", "火曜日", "水曜日", "木曜日", "金曜日", "土曜日"],
            dayShort: ["日", "月", "火", "水", "木", "金", "土"],
            hours: "営業時間",
            minutes: "分",
            done: "レディー",
            clear: "削除する",
            today: "今日"
        },
        dataExport: {page: "ページ", of: "から"},
        PDFviewer: {
            of: "から",
            automaticZoom: "自動ズーム",
            actualSize: "実サイズ",
            pageFit: "ページサイズ",
            pageWidth: "ページ幅",
            pageHeight: "ページの高さ",
            enterPassword: "パスワードを入力する",
            passwordError: "間違ったパスワード"
        },
        aria: {
            calendar: "カレンダー",
            increaseValue: "増加値",
            decreaseValue: "数字を小さく",
            navMonth: ["前の月", "来月"],
            navYear: ["前年", "来年"],
            navDecade: ["前の十年", "次の10年"],
            dateFormat: "%Y年%m月%d日",
            monthFormat: "%Y年%m月",
            yearFormat: "%Y年",
            hourFormat: "営業時間: %H",
            minuteFormat: "分: %i",
            removeItem: "要素を削除します",
            pages: ["一ページ目", "前のページ", "次のページ", "最後のページ"],
            page: "ページ",
            headermenu: "ヘッダメニュー",
            openGroup: "オープン列グループ",
            closeGroup: "閉じる列グループ",
            closeTab: "タブを閉じます",
            showTabs: "複数のタブを表示します",
            resetTreeMap: "元の表示に戻ります",
            navTreeMap: "レベルパック",
            nextTab: "次のタブ",
            prevTab: "前のタブ",
            multitextSection: "要素を追加します。",
            multitextextraSection: "要素を削除します",
            showChart: "靴チャート",
            hideChart: "隠すチャート",
            resizeChart: "グラフのサイズを変更"
        },
        richtext: {underline: "アンダーライン", bold: "大胆な", italic: "イタリック"},
        combo: {select: "選択する", selectAll: "すべて選択", unselectAll: "すべての選択を解除する"},
        message: {ok: "OK", cancel: "取り消す"},
        comments: {
            send: "送信",
            confirmMessage: "コメントは削除されます. 本気ですか？",
            edit: "編集",
            remove: "削除",
            placeholder: "ここに入力..",
            moreComments: "その他のコメント"
        },
        filter: {
            less: "レス",
            lessOrEqual: "以下",
            greater: "大きいです",
            greaterOrEqual: "以上",
            contains: "含まれています",
            notContains: "含まれていません",
            equal: "等しいです",
            notEqual: "等しくありません"
        }
    }, $.locales["pt-BR"] = {
        groupDelimiter: ".",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d/%m/%Y",
        timeFormat: "%G:%i",
        longDateFormat: "%d de %F de %Y",
        fullDateFormat: "%d de %F de %Y %G:%i",
        am: null,
        pm: null,
        price: "R$ {obj}",
        priceSettings: {groupDelimiter: ".", groupSize: 3, decimalDelimiter: ",", decimalSize: 2},
        fileSize: ["b", "Kb", "Mb", "Gb", "Tb", "Pb", "Eb"],
        calendar: {
            monthFull: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
            monthShort: ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"],
            dayFull: ["Domingo", "Segunda-Feira", "Terça-Feira", "Quarta-Feira", "Quinta-Feira", "Sexta-Feira", "Sábado"],
            dayShort: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"],
            hours: "Horas",
            minutes: "Minutos",
            done: "Feito",
            clear: "Limpar",
            today: "Hoje"
        },
        dataExport: {page: "Página", of: "de"},
        PDFviewer: {
            of: "de",
            automaticZoom: "Zoom automático",
            actualSize: "Tamanho atual",
            pageFit: "Tamanho da página",
            pageWidth: "Largura da página",
            pageHeight: "Altura da página",
            enterPassword: "Digite a senha",
            passwordError: "Senha incorreta"
        },
        aria: {
            calendar: "Calendário",
            increaseValue: "Aumentar o valor",
            decreaseValue: "Diminuir o valor",
            navMonth: ["Mês anterior", "Próximo mês"],
            navYear: ["Ano anterior", "Próximo ano"],
            navDecade: ["Década anterior", "Próxima década"],
            dateFormat: "%d de %F de %Y",
            monthFormat: "%F de %Y",
            yearFormat: "%Y",
            hourFormat: "Horas: %G",
            minuteFormat: "Minutos: %i",
            removeItem: "Remover elemento",
            pages: ["Primeira página", "Página anterior", "Próxima página", "Última página"],
            page: "Página",
            headermenu: "Menu de títulos",
            openGroup: "Grupo coluna aberta",
            closeGroup: "Fechar grupo de colunas",
            closeTab: "Fechar tab",
            showTabs: "Mostre mais tabs",
            resetTreeMap: "Мoltar à vista original",
            navTreeMap: "Upar",
            nextTab: "Próximo tab",
            prevTab: "Anterior tab",
            multitextSection: "Adicionar elemento",
            multitextextraSection: "Remover elemento",
            showChart: "Exposição chart",
            hideChart: "Esconder chart",
            resizeChart: "Redimensionar chart"
        },
        richtext: {underline: "Sublinhado", bold: "Negrito", italic: "itálico"},
        combo: {select: "Selecionar", selectAll: "Selecionar tudo", unselectAll: "Desmarque todos"},
        message: {ok: "OK", cancel: "Cancelar"},
        comments: {
            send: "Enviar",
            confirmMessage: "Comentário será removido. Você tem certeza?",
            edit: "Editar",
            remove: "Excluir",
            placeholder: "Digite aqui..",
            moreComments: "Mais comentários"
        },
        filter: {
            less: "menos",
            lessOrEqual: "menor ou igual",
            greater: "maior",
            greaterOrEqual: "maior ou igual",
            contains: "contém",
            notContains: "não contém",
            equal: "igual",
            notEqual: "não é igual"
        }
    }, $.locales["zh-CN"] = {
        groupDelimiter: ",",
        groupSize: 3,
        decimalDelimiter: ".",
        decimalSize: 2,
        dateFormat: "%Y/%m/%j",
        timeFormat: "%G:%i",
        longDateFormat: "%Y'年'%m'月'%j'日'",
        fullDateFormat: "%Y'年'%m'月'%j'日' %G:%i",
        am: ["上午", "上午"],
        pm: ["下午", "下午"],
        price: "¥{obj}",
        priceSettings: {groupDelimiter: ",", groupSize: 3, decimalDelimiter: ".", decimalSize: 2},
        calendar: {
            monthFull: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
            monthShort: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
            dayFull: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"],
            dayShort: ["周日", "周一", "周二", "周三", "周四",
                "周五", "周六"],
            hours: "小时",
            minutes: "分钟",
            done: "完成",
            clear: "清除",
            today: "今天"
        },
        dataExport: {page: "页", of: "从"},
        PDFviewer: {
            of: "从",
            automaticZoom: "自动设置页面大小",
            actualSize: "实际尺寸",
            pageFit: "页面大小",
            pageWidth: "页面宽度",
            pageHeight: "页面高度",
            enterPassword: "输入密码",
            passwordError: "密码错误"
        },
        aria: {
            calendar: "日历",
            increaseValue: "增加值",
            decreaseValue: "减少值",
            navMonth: ["上个月", "下个月"],
            navYear: ["上年", "明年"],
            navDecade: ["过去十年", "下个十年"],
            dateFormat: "%Y'年'%m'月'%j'日'",
            monthFormat: "%Y'年'%m'月",
            yearFormat: "%Y'年",
            hourFormat: "小时: %G",
            minuteFormat: "分钟: %i",
            removeItem: "删除元素",
            pages: ["第一页", "上一页", "下一页", "最后一页"],
            page: "页",
            headermenu: "标题菜单",
            openGroup: "打开栏目组",
            closeGroup: "关闭栏目组",
            closeTab: "关闭标签",
            showTabs: "显示更多选项卡",
            resetTreeMap: "回到原来的视图",
            navTreeMap: "升级",
            nextTab: "下一个标签",
            prevTab: "前一个标签",
            multitextSection: "加元",
            multitextextraSection: "删除元素",
            showChart: "显示图表",
            hideChart: "隐藏图表",
            resizeChart: "调整图"
        },
        richtext: {underline: "强调", bold: "粗體", italic: "斜体"},
        combo: {select: "选择", selectAll: "全选", unselectAll: "全部取消选择"},
        message: {ok: "好", cancel: "取消"},
        comments: {
            send: "发送",
            confirmMessage: "评论将被删除. 你确定吗?",
            edit: "编辑",
            remove: "去掉",
            placeholder: "在此输入..",
            moreComments: "更多评论"
        },
        filter: {
            less: "减",
            lessOrEqual: "少于或等于",
            greater: "更大",
            greaterOrEqual: "大于或等于",
            contains: "包含",
            notContains: "不包含",
            equal: "等于",
            notEqual: "不平等"
        }
    }, $.locales["ru-RU"] = {
        groupDelimiter: " ",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d.%m.%Y",
        timeFormat: "%H:%i",
        longDateFormat: "%d %F %Y",
        fullDateFormat: "%d.%m.%Y %H:%i",
        price: "{obj} руб.",
        priceSettings: null,
        calendar: {
            monthFull: ["Январь", "Февраль", "Март", "Апрель", "Maй", "Июнь", "Июль", "Август", "Сентябрь", "Oктябрь", "Ноябрь", "Декабрь"],
            monthShort: ["Янв", "Фев", "Maр", "Aпр", "Maй", "Июн", "Июл", "Aвг", "Сен", "Окт", "Ноя", "Дек"],
            dayFull: ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"],
            dayShort: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
            hours: "Часы",
            minutes: "Минуты",
            done: "Гoтовo",
            clear: "Очистить",
            today: "Сегодня"
        },
        dataExport: {page: "Страница", of: "из"},
        PDFviewer: {
            of: "из",
            automaticZoom: "Автоматический зум",
            actualSize: "Настоящий размер",
            pageFit: "Размер страницы",
            pageWidth: "Ширина страницы",
            pageHeight: "Высота страницы",
            enterPassword: "Введите пароль",
            passwordError: "Неверный пароль"
        },
        aria: {
            calendar: "Календарь",
            increaseValue: "Увеличить значение",
            decreaseValue: "Уменьшить значение",
            navMonth: ["Предыдущий месяц", "Следующий месяц"],
            navYear: ["Предыдущий год", "Следующий год"],
            navDecade: ["Предыдущие десять лет", "Следующие десять лет"],
            dateFormat: "%d %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Часы: %H",
            minuteFormat: "Минуты: %i",
            removeItem: "Удалить элемент",
            pages: ["Первая страница", "Предыдущая страница", "Следующая страница", "Последняя страница"],
            page: "Страница",
            headermenu: "Меню шапки таблицы",
            openGroup: "Развернуть группу столбцов",
            closeGroup: "Свернуть группу столбцов",
            closeTab: "Закрыть вкладку",
            showTabs: "Показать больше вкладок",
            resetTreeMap: "Вернуться к первоначальному представлению",
            navTreeMap: "Перейти на уровень выше",
            nextTab: "Следующая вкладка",
            prevTab: "Предыдущая вкладка",
            multitextSection: "Добавить элемент",
            multitextextraSection: "Удалить элемент",
            showChart: "Показать чарт",
            hideChart: "Спрятать чарт",
            resizeChart: "Изменить размер чарта"
        },
        richtext: {underline: "Подчеркивание", bold: "Жирный", italic: "Курсив"},
        combo: {select: "Выбрать", selectAll: "Выбрать все", unselectAll: "Сброс выбора"},
        message: {ok: "OK", cancel: "Отмена"},
        comments: {
            send: "Отправить",
            confirmMessage: "Комментарий будет удален. Вы уверены?",
            edit: "Редактировать",
            remove: "Удалить",
            placeholder: "Введите текст..",
            moreComments: "Больше комментариев"
        },
        filter: {
            less: "меньше",
            lessOrEqual: "меньше или равно",
            greater: "больше",
            greaterOrEqual: "больше или равно",
            contains: "содержит",
            notContains: "не содержит",
            equal: "равно",
            notEqual: "не равно"
        }
    }, $.locales["be-BY"] = {
        groupDelimiter: " ",
        groupSize: 3,
        decimalDelimiter: ",",
        decimalSize: 2,
        dateFormat: "%d.%m.%Y",
        timeFormat: "%H:%i",
        longDateFormat: "%d %F %Y",
        fullDateFormat: "%d.%m.%Y %H:%i",
        price: "{obj} руб.",
        priceSettings: {groupSize: 3, groupDelimiter: " ", decimalDelimiter: "", decimalSize: 0},
        calendar: {
            monthFull: ["Студзень", "Люты", "Сакавік", "Красавік", "Травень", "Чэрвень", "Ліпень", "Жнівень", "Верасень", "Кастрычнік", "Лістапад", "Снежань"],
            monthShort: ["Студз", "Лют", "Сак"
                , "Крас", "Трав", "Чэр", "Ліп", "Жнів", "Вер", "Каст", "Ліст", "Снеж"],
            dayFull: ["Нядзеля", "Панядзелак", "Аўторак", "Серада", "Чацвер", "Пятніца", "Субота"],
            dayShort: ["Нд", "Пн", "Аўт", "Ср", "Чцв", "Пт", "Сб"],
            hours: "Гадзіны",
            minutes: "Хвіліны",
            done: "Гатова",
            today: "Cёння",
            clear: "Ачысціць"
        },
        dataExport: {page: "Старонка", of: "з"},
        PDFviewer: {
            of: "з",
            automaticZoom: "Аўтаматычны зум",
            actualSize: "Сапраўдны памер",
            pageFit: "Памер старонкі",
            pageWidth: "Шырыня старонкі",
            pageHeight: "Вышыня старонкі",
            enterPassword: "Увядзіце пароль",
            passwordError: "Няправільны пароль"
        },
        aria: {
            calendar: "Каляндар",
            increaseValue: "Павялічыць значэнне",
            decreaseValue: "Паменшыць значэнне",
            navMonth: ["Папярэдні месяц", "Наступны месяц"],
            navYear: ["Папярэдні год", "Наступны год"],
            navDecade: ["Папярэднія дзесяць год", "Наступныя дзесяць год"],
            dateFormat: "%d %F %Y",
            monthFormat: "%F %Y",
            yearFormat: "%Y",
            hourFormat: "Hours: %h",
            minuteFormat: "Гадзіны: %i",
            removeItem: "Прыбраць элемент",
            pages: ["Першая старонка", "Папярэдняя старонка", "Наступная старонка", "Апошняя старонка"],
            page: "Старонка",
            headermenu: "Меню загалоўка",
            openGroup: "Адкрыць групу слупкоў",
            closeGroup: "Закрыць групу слупкоў",
            closeTab: "Закрыць укладку",
            showTabs: "Паказаць больш укладак",
            resetTreeMap: "Вярнуцца да першапачатковага выгляду",
            navTreeMap: "Падняцца на ўзровень вышэй",
            nextTab: "Наступная ўкладка",
            prevTab: "Папярэдняя ўкладка",
            multitextSection: "Дадаць элемент",
            multitextextraSection: "Прыбраць элемент",
            showChart: "Паказаць графік",
            hideChart: "Схаваць графік",
            resizeChart: "Змяніць памер графіка"
        },
        richtext: {underline: "Падкрэсліванне", bold: "Паўтлусты", italic: "Курсіў"},
        combo: {select: "Абраць", selectAll: "Абраць усё", unselectAll: "Ачысціць ўсе"},
        message: {ok: "ОК", cancel: "Адмена"},
        comments: {
            send: "Даслаць",
            confirmMessage: "Каментарый будзе выдалены. Вы ўпэўнены?",
            edit: "Рэдагаваць",
            remove: "Выдаліць",
            placeholder: "Пішыце тут..",
            moreComments: "Больш каментарыяў"
        },
        filter: {
            less: "менш",
            lessOrEqual: "менш або роўна",
            greater: "больш",
            greaterOrEqual: "больш або роўна",
            contains: "змяшчае",
            notContains: "не змяшчае",
            equal: "роўныя",
            notEqual: "не роўныя"
        }
    };
    P.protoUI({
        name: "spacer", defaults: {borderless: !0}, $init: function () {
            this.Tt.className += " webix_spacer"
        }
    }, zi.view);
    var wn = {
        name: "template",
        $init: function (t) {
            var i = this.Pd[t.type];
            i && (i.css && t.css && (this.Tt.className += " " + i.css), P.extend(t, i), t.borderless && (delete t.$t, this._e(t))), this.Q == this.Tt ? (this.Q = ct("DIV"), this.Q.className = " webix_template", this.Tt.appendChild(this.Q)) : this.Q.className += " webix_template"
        },
        setValues: function (t, i) {
            this.data = i ? P.extend(this.data, t, !0) : t, this.render()
        },
        getValues: function () {
            return this.data
        },
        $skin: function () {
            this.Pd.header.height = Ei.barHeight - 2 * Ei.borderWidth, this.Pd.section.height = Ei.barHeight
        },
        Pd: {
            header: {css: "webix_header"},
            section: {css: "webix_section", borderless: !0},
            clean: {css: "webix_clean", borderless: !0}
        },
        onClick_setter: function (t) {
            return this.on_click = P.extend(this.on_click || {}, t, !0), this.Du || P.extend(this, Ae), t
        },
        defaults: {template: Wt.empty},
        jd: function () {
            this.Ed = !1, this.Nd(), this.resize()
        },
        Nd: function () {
            this.Ed || (this.Ed = !0, this.render())
        },
        src_setter: function (t) {
            return this.Ed = !0, this.callEvent("onBeforeLoad", []) ? (z(t, S(function (t) {
                this.B.template = Wt(t), this.jd(), this.callEvent("onAfterLoad", [])
            }, this)), t) : ""
        },
        content_setter: function (t) {
            t && (this.Ed = !0, this.render = function () {
            }, this.Q.appendChild(C(t)))
        },
        refresh: function () {
            this.render()
        },
        setHTML: function (t) {
            this.B.template = function () {
                return t
            }, this.refresh()
        },
        setContent: function (t) {
            this.Q.innerHTML = "", this.content_setter(t)
        },
        $setSize: function (t, i) {
            if (zi.api.$setSize.call(this, t, i)) {
                if (this.Nd(), this.B.autoheight) {
                    var e = this.getTopParentView();
                    clearTimeout(e.Ld), e.Ld = k(this.resize, this)
                }
                return !0
            }
        },
        $getSize: function (t, i) {
            return !this.B.autoheight || this.B.type && "clean" != this.B.type || (this.B.height = this.Od()), zi.api.$getSize.call(this, t, i)
        },
        Od: function () {
            var t, i = Ei.layoutPadding.space;
            return this.Nd(), this.isVisible() ? (this.Q.style.height = "auto", t = this.Q.scrollHeight, this.Q.style.height = "") : t = Mt(this.Z(this.data) || this.Q.innerHTML, "webix_template", (this.$width || (this.getParentView() ? this.getParentView().$width : 0)) - i).height, t
        },
        cc: !0
    }, xn = {
        api: wn, view: P.protoUI(wn, Re, Bi, Ht, Yt, c, zi.view)
    }, yn = {
        name: "scrollview", defaults: {scroll: "y", scrollSpeed: "300ms"}, $init: function () {
            this.Tt.className += " webix_scrollview"
        }, body_setter: function (t) {
            t.borderless = !0, (ti.pt = this).Ct = ei.Ht(t), this.Q.appendChild(this.Ct.Tt)
        }, getChildViews: function () {
            return [this.Ct]
        }, getBody: function () {
            return this.Ct
        }, resizeChildren: function () {
            this.Ct && (this.Yl = this.Ct.$getSize(0, 0), this.Ud(), D("onResize", []))
        }, Ud: function () {
            var t = Math.max(this.oe, this.Yl[0]), i = Math.max(this.ue, this.Yl[2]);
            if (this.Ct.$setSize(t, i), Y.touch) {
                var e = this.getScrollState(), s = this.Ct.ue - this.ue;
                s < e.y && this.scrollTo(null, s)
            }
            ti.dt && (ti.dt = !1, this.Yl = this.Ct.$getSize(0, 0), this.Ud())
        }, $getSize: function (t, i) {
            var e = this.Yl = this.Ct.$getSize(0, 0), s = zi.api.$getSize.call(this, t, i), n = this.Wd || Y.scrollSize;
            return "x" == this.B.scroll ? (s[2] = Math.max(s[2], e[2]) + n, s[3] = Math.min(s[3], e[3]) + n) : "y" == this.B.scroll && (s[0] = Math.max(s[0], e[0]) + n, s[1] = Math.min(s[1], e[1]) + n), s
        }, $setSize: function (t, i) {
            var e = Y.scrollSize;
            Y.scrollSize = this.Wd || e, (zi.api.$setSize.call(this, t, i) || ti.Xt) && this.Ud(), Y.scrollSize = e
        }, scroll_setter: function (t) {
            var i = Y.$customScroll;
            return "string" == typeof t && 0 === t.indexOf("native-") && (this.Wd = 17, t = t.replace("native-"), Y.$customScroll = !1), t = Re.scroll_setter.call(this, t), Y.$customScroll = i, t
        }, At: function (t) {
            this.Ct.destructor(), this.Ct = t, this.xn.appendChild(this.Ct.Tt), this.resize()
        }, showView: function (t) {
            var i = ri(t).$view.offsetTop - ri(t).$view.parentNode.offsetTop;
            this.scrollTo(0, i)
        }
    }, Mn = (P.protoUI(yn, Re, c, zi.view), P.protoUI({
        name: "iframe", $init: function () {
            this.Q = this.Vi, this.Vi.innerHTML = "<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\"view_id\")); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"
        }, load: function (t) {
            this.src_setter(t)
        }, src_setter: function (t) {
            return this.callEvent("onBeforeLoad", []) ? this.getIframe().src = t : ""
        }, getIframe: function () {
            return this.Vi.getElementsByTagName("iframe")[0]
        }, getWindow: function () {
            return this.getIframe().contentWindow
        }
    }, zi.view, c), {
        name: "accordion", defaults: {panelClass: "accordionitem", multi: !1, collapsed: !1}, $init: function () {
            this.Tt.setAttribute("role", "tablist"), this.Tt.setAttribute("aria-multiselectable", "true")
        }, At: function (t) {
            pn.api.At.apply(this, arguments), t.collapsed_setter && t.refresh && t.refresh()
        }, Vl: function () {
            for (var t = this.B.panelClass, i = this.Bl, e = 0; e < i.length; e++) !i[e].body && !i[e].header || i[e].view || i[e].align || (i[e].view = t), j(i[e].collapsed) && (i[e].collapsed = this.B.collapsed);
            this.Yd = !0, pn.api.Vl.call(this), this.Yd = !1;
            for (var s = 0; s < this.yi.length; s++) this.yi[s].name == t && this.yi[s].refresh(), this.yi[s].qd = !1;
            for (var n = !1, h = this.yi.length - 1; 0 <= h && !n; h--) this.yi[h].B.hidden || (n = this.yi[h].qd = !0)
        }, Gd: function (t) {
            if (!1 === this.B.multi && !0 !== this.Yd) for (var i = 0; i < this.yi.length; i++) t != this.yi[i] && !this.yi[i].B.collapsed && this.yi[i].collapse && this.yi[i].collapse();
            t.callEvent && (t.callEvent("onViewShow", []), di(t, this.de))
        }, Xd: function (t) {
            if (!0 === this.B.multi || this.Yd) return !0;
            for (var i = 0; i < this.yi.length; i++) if (t != this.yi[i] && !this.yi[i].B.collapsed && this.yi[i].isVisible() && !this.yi[i].$nospace) return !0;
            return !1
        }, $skin: function () {
            pn.api.$skin.call(this), Ei.accordionType && (this.defaults.type = Ei.accordionType)
        }
    }), Sn = {api: Mn, view: P.protoUI(Mn, pn.view)}, kn = (P.protoUI({
        name: "headerlayout",
        defaults: {type: "accordion", multi: "mixed", collapsed: !1}
    }, Sn.view), {
        name: "accordionitem", $init: function (t) {
            this.Tt.innerHTML = "<div tabindex='0' webix_ai_id='" + t.id + "'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>", this.Vi = this.Tt, this.en = this.Vi.childNodes[0], t.header || (this.en.style.display = "none"), this.Jd = this.Vi.childNodes[0].childNodes[1], this.Kd = this.Vi.childNodes[0].childNodes[0], this.xn = this.Vi.childNodes[1], this.Tt.className += " webix_accordionitem", this.yn = this.Ct = null, this.yi = !0, this.xn.setAttribute("role", "tabpanel"), this.en.setAttribute("role", "tab"), this.attachEvent("onKeyPress", this.ve)
        },
        Ft: function () {
            this.body_setter()
        }, At: function (t) {
            this.Ct.destructor(), this.Ct = t, this.xn.appendChild(this.Ct.Tt), this.resize()
        }, Eo: "webix_ai_id", getChildViews: function () {
            return [this.Ct]
        }, body_setter: function (t) {
            return "object" != M(t) && (t = {template: t}), t.$t = {
                top: !0,
                left: !0,
                right: !0,
                bottom: !0
            }, (ti.pt = this).Ct = ei.Ht(t), this.xn.appendChild(this.Ct.Tt), t
        }, header_setter: function (t) {
            return t && (t = Wt(t)), t
        }, headerAlt_setter: function (t) {
            return t && (t = Wt(t)), t
        }, $getSize: function (t, i) {
            var e = this.Ct.$getSize(0, 0), s = this.B.$t;
            s && (t += (s.left ? 0 : 1) + (s.right ? 0 : 1), i += (s.top ? 0 : 1) + (s.bottom ? 0 : 1));
            var n = 0, h = Fi.api.$getSize.call(this, 0, 0);
            h[0] = (h[0] || e[0]) + t, 1e5 <= h[1] && (h[1] = e[1]), h[1] += t, h[2] = (h[2] || e[2]) + i;
            var r = h[3] < 1e5;
            return r || (h[3] = e[3]), h[3] += i, this.getParentView().Rl ? this.B.collapsed ? h[2] = h[3] = this.Zd() + i : this.B.header && (n = this.B.headerHeight) : (this.B.collapsed && (h[0] = h[1] = this.Zd() + t), this.B.header && (n = this.B.headerHeight)), r || (h[2] += n, h[3] += n), h
        }, on_click: {
            webix_accordionitem_header: function (t) {
                return this.Qd(t), !1
            }, webix_accordionitem_header_v: function (t) {
                return this.Qd(t), !1
            }
        }, Qd: function () {
            this.define("collapsed", !this.B.collapsed)
        }, collapsed_setter: function (t) {
            if (!1 !== this.B.header) {
                var i = this.getParentView();
                if (i) {
                    if (t) if (i.Xd(this)) this.tv(); else {
                        var e = 0;
                        if (1 < i.yi.length) for (var s = 0; s < i.yi.length; s++) {
                            var n = i.yi[s];
                            if (this != n && n.isVisible() && n.expand) {
                                n.expand(), this.tv(), e = 1;
                                break
                            }
                        }
                        if (!e) return
                    } else this.iv();
                    (this.B.collapsed = t) || i.Gd(this), this.refresh(), ti.bt || this.resize(), i.callEvent("onAfter" + (t ? "Collapse" : "Expand"), [this.B.id]), this.B.$noresize = t
                }
                return t
            }
        }, collapse: function () {
            this.define("collapsed", !0), xi.ci(this)
        }, expand: function () {
            this.define("collapsed", !1)
        }, fe: function () {
            this.show()
        }, Si: function () {
            this.hide()
        }, iv: function () {
            this.xn.style.display = "", yt(this.$view, "collapsed"), yt(this.en, "collapsed"), this.en.setAttribute("aria-expanded", "true")
        }, tv: function () {
            this.B.headerAlt && (this.Jd.innerHTML = this.B.headerAlt()), this.xn.style.display = "none", xt(this.$view, "collapsed"), xt(this.en, "collapsed"), this.en.setAttribute("aria-expanded", "false")
        }, refresh: function () {
            var t = this.B[this.B.collapsed ? "headerAlt" : "header"] || this.B.header;
            t && (this.Jd.innerHTML = t(), this.Kd.setAttribute("aria-label", t()));
            var i = this.getParentView().Rl ? "vertical" : "horizontal";
            this.Tt.className.indexOf(" " + i) < 0 && xt(this.Tt, i), Y.transform || xt(this.Tt, "webix_ie", !0)
        }, Zd: function () {
            return this.B.collapsed ? this.B.headerAltHeight : this.B.headerHeight
        }, $setSize: function (t, i) {
            if (zi.api.$setSize.call(this, t, i) || this.Zd() != this.ev) {
                t = this.oe, i = this.ue;
                var e = this.ev = this.Zd();
                if (this.B.header) if (this.en.style.height = e + "px", this.en.style.width = "auto", this.en.style[Y.transform] = "", this.en.style.borderBottomWidth = (this.B.collapsed ? 0 : 1) + "px", this.getParentView().Rl || !this.B.collapsed) i -= this.Zd(); else if (this.B.collapsed) if (ji.isSupported()) {
                    this.en.style.width = i + "px", this.en.style.height = t + 3 + "px";
                    var s = Math.floor(i / 2 - t / 2) + (t - this.B.headerAltHeight) / 2;
                    this.en.style[Y.transform] = "rotate(90deg) translate(" + s + "px, " + (s + 1) + "px)"
                } else this.en.style.width = t + "px", this.en.style.height = i + 3 + "px";
                this.B.collapsed || (this.Ct.$setSize(t, i), this.sv = i)
            } else if (!this.B.collapsed) {
                var n = this.Ct;
                this.sv && n.$setSize(this.oe, this.sv)
            }
        }, $skin: function () {
            this.defaults.headerAltHeight = this.defaults.headerHeight = Ei.barHeight - 2 * Ei.borderWidth
        }, defaults: {header: !1, headerAlt: !1, body: ""}
    }), Cn = (P.protoUI(kn, Ae, c, zi.view), {
        name: "resizearea", defaults: {dir: "x"}, $init: function (t) {
            var i = t.dir || "x", e = C(t.container), s = "x" == i ? "width" : "height",
                n = t.margin ? t.margin + "px" : 0;
            this.nv = "x" == i ? "left" : "top", this.Tt = ct("DIV", {"class": "webix_resize_area webix_dir_" + i}), Jt(this.Tt, Y.mouse.down, gt), n && (n = "x" == i ? n + " 0 " + n : "0 " + n + " 0 " + n), this.hv = ct("DIV", {
                "class": "webix_resize_handle_" + i,
                style: n ? "padding:" + n : ""
            }, "<div class='webix_handle_content'></div>"), this.rv = ct("DIV", {"class": "webix_resize_origin_" + i}), t[s] && (this.rv.style[s] = t[s] + (t.border ? 1 : 0) + "px", this.hv.style[s] = t[s] + "px"), t.cursor && (this.hv.style.cursor = this.rv.style.cursor = this.Tt.style.cursor = t.cursor), this.ov = Kt(e, Y.mouse.move, this.av, {bind: this}),
                this.uv = Kt(document.body, Y.mouse.up, this.cv, {bind: this}), this.hv.style[this.nv] = this.rv.style[this.nv] = t.start + "px", e.appendChild(this.Tt), e.appendChild(this.hv), e.appendChild(this.rv)
        }, cv: function () {
            this.callEvent("onResizeEnd", [this.fv]), Zt(this.ov), Zt(this.uv), lt(this.Tt), lt(this.hv), lt(this.rv), this.Tt = this.hv = this.rv = null
        }, av: function (t) {
            var i = mt(t);
            this.fv = ("x" == this.B.dir ? i.x : i.y) + this.B.start - this.B.eventPos, this.hv.style[this.nv] = this.fv + "px", this.callEvent("onResize", [this.fv])
        }
    }), $n = (P.protoUI(Cn, c, yi), {
        name: "resizer", defaults: {width: 7, height: 7}, $init: function (t) {
            this.getParentView(), this.Tt.className += " webix_resizer";
            var i = this.getParentView().Ra;
            Jt(this.Tt, Y.mouse.down, this.lv, {bind: this});
            var e = this.dv();
            this.vv = !1, this._v = e, this.pv = "x" == e ? "width" : "height", "x" == e ? t.height = 0 : t.width = 0, 0 < i ? (this.Tt.className += " webix_resizer_v" + e, this.Tt.style.marginRight = "-" + i + "px", "x" == e ? t.width = i : t.height = i, this.$nospace = !0) : this.Tt.className += " webix_resizer_" + e, this.Tt.innerHTML = "<div class='webix_resizer_content'></div>", "y" == e && 0 < i && (this.Tt.style.marginBottom = "-" + (t.height || this.defaults.height) + "px"), this.Tt.setAttribute("webix_disable_drag", "true"), this.Tt.setAttribute("tabindex", "-1"), this.Tt.setAttribute("aria-grabbed", "false")
        }, lv: function (t) {
            var i = this, e = this.mv();
            if (e && !this.B.disabled) {
                t = t || window.event, this.vv = !0, this.bv = mt(t), this.gv = [], this.Tt.setAttribute("aria-grabbed", "true");
                for (var s = 0; s < 2; s++) e[s].$view.setAttribute("aria-dropeffect", "move");
                this.Tt.setAttribute("aria-dropeffect", "move"), this.wv(t, e[0]);
                var n = Kt(document.body, Y.mouse.up, function (t) {
                    return Zt(n), i.xv(t)
                })
            }
        }, xv: function () {
            this.vv = !1, this.bv = !1
        }, wv: function (t, i) {
            var e, s, n, h, r;
            t = t || window.event, e = this._v, this.getParentView().Tt.style.position = "relative", n = _t(this.Tt), h = _t(this.getParentView().Tt), r = n[e] - h[e], s = _t(i.$view)[e] - _t(this.getParentView().$view)[e], this.yv = [e, i, r, s], this.Mv = new ei.resizearea({
                container: this.getParentView().Tt,
                dir: e,
                eventPos: this.bv[e],
                start: r - 1,
                height: this.$height,
                width: this.$width,
                border: 1,
                margin: this.getParentView().za["x" === e ? "left" : "top"]
            }), this.Mv.attachEvent("onResizeEnd", S(this.Sv, this)), this.Mv.attachEvent("onResize", S(this.kv, this)), xt(document.body, "webix_noselect", 1)
        }, dv: function () {
            return this.getParentView().Rl ? "y" : "x"
        }, kv: function () {
            var t, i, e, s, n, h, r, o, a;
            if (this.yv) for (t = this.mv(), s = this.yv[0], e = this.Mv.fv - this.yv[2], o = this.Cv(t, s, e), a = t[0]["$" + this.pv] + t[1]["$" + this.pv], n = 0; n < 2; n++) {
                i = n ? -e : e, h = t[n].$getSize(0, 0);
                var u = "y" == s ? h[2] : h[0], c = "y" == s ? h[3] : h[1];
                if (u === c && (u = t[n].B["y" == s ? "minHeight" : "minWidth"] || 3, c = t[n].B["y" == s ? "maxHeight" : "maxWidth"] || 1e5), 0 < i && c && c <= o[n] || i < 0 && u && u >= o[n]) return this.gv[n] = 0 < i ? c : u, r = this.$v(t, s), void (this.Mv.hv.style["y" == s ? "top" : "left"] = this.yv[3] + r[0] + "px");
                o[n] < 3 ? this.Mv.hv.style["y" == s ? "top" : "left"] = this.yv[3] + n * a + 1 + "px" : this.gv[n] = null
            }
        }, mv: function () {
            var t, i, e;
            for (t = this.getParentView().yi, i = 0; i < t.length; i++) if (t[i] == this) return (e = [this.Dv(t, i, 1, -1), this.Dv(t, i, 1, 1)])[0] && e[1] || (e = null), e
        }, Dv: function (t, i, e, s) {
            var n = t[i + s * e];
            return n && n.B.hidden ? this.Dv(t, i, e + 1, s) : n && n.B.$noresize ? null : n
        }, Sv: function (t) {
            if (void 0 !== t) {
                var i, e, s, n, h = this.getParentView().Rl;
                if (this.Iv = null, this.yv) {
                    if (e = this.yv[0], s = t - this.yv[2], (i = this.mv())[0] && i[1]) {
                        n = this.Av(i, e, s);
                        for (var r = 0; r < 2; r++) {
                            var o = i[r].$getSize(0, 0);
                            if (h ? o[2] == o[3] : Math.abs(o[1] - o[0]) < 3) i[r].B[this.pv] = n[r], i[r].Ul && i[r].Ul(this.pv, n[r], h); else {
                                var a = i[r].$view[h ? "offsetHeight" : "offsetWidth"];
                                i[r].B.gravity = n[r] / a * i[r].B.gravity
                            }
                        }
                        i[0].resize();
                        for (var u = 0; u < 2; u++) i[u].callEvent && i[u].callEvent("onViewResize", []), i[u].$view.removeAttribute("aria-dropeffect");
                        D("onLayoutResize", [i])
                    }
                    this.yv = !1
                }
                this.yv = !1, this.vv = !1, this.gv = null, yt(document.body, "webix_noselect"), this.Tt.setAttribute("aria-grabbed", "false"), this.Tt.removeAttribute("aria-dropeffect")
            }
        }, $v: function (t) {
            var i, e, s;
            return s = t[0]["$" + this.pv] + t[1]["$" + this.pv], this.gv[0] ? e = s - (i = this.gv[0]) : this.gv[1] && (i = s - (e = this.gv[1])), [i, e]
        }, Cv: function (t, i, e) {
            for (var s = [], n = "height" == this.pv ? "offsetHeight" : "offsetWidth", h = 0; h < 2; h++) s[h] = t[h].$view[n] + (h ? -1 : 1) * e;
            return s
        },
        Av: function (t, i, e) {
            var s, n, h;
            if (this.gv[0] || this.gv[1]) n = this.$v(t, i); else for (n = this.Cv(t, i, e), s = 0; s < 2; s++) n[s] < 0 && (h = n[0] + n[1], n[s] = 1, n[1 - s] = h - 1);
            return n
        }
    }), Dn = (P.protoUI($n, Ae, Mi, zi.view), {
        name: "align", defaults: {borderless: !0, left: 0, top: 0, right: 0, bottom: 0}, $init: function () {
            this.Tt.className += " webix_view_align"
        }, Ft: function () {
            this.body_setter({})
        }, At: function (t) {
            this.Ct.destructor(), this.Ct = t, this.Tt.appendChild(this.Ct.Tt), this.resize()
        }, getChildViews: function () {
            return [this.Ct]
        }, body_setter: function (t) {
            return t.$t = {
                top: !1,
                left: !1,
                right: !1,
                bottom: !1
            }, (ti.pt = this).Ct = ei.Ht(t), this.Tt.appendChild(this.Ct.Tt), t
        }, align_setter: function (t) {
            "string" == typeof t && (t = t.split(",")), this.Fv = this.Tv = this.Vv = "";
            for (var i = 0; i < t.length; i++) {
                var e = t[i];
                "center" !== e && "left" !== e && "right" !== e || (this.Fv = e), "top" !== e && "bottom" !== e && "middle" !== e || (this.Tv = e), "absolute" === e && (this.Fv = this.Tv = this.Vv = "precise")
            }
            return t
        }, getBody: function () {
            return this.Ct
        }, $setSize: function (t, i) {
            var e, s;
            zi.api.$setSize.call(this, t, i), s = this.Vv ? (e = t - this.B.left - this.B.right, i - this.B.top - this.B.bottom) : (e = this.Yl[0] || t, this.Yl[2] || i), this.Ct.$setSize(e, s);
            var n = this.Ct.Tt;
            "center" == this.Fv ? n.style.marginLeft = Math.ceil((t - e) / 2) + "px" : "right" == this.Fv ? n.style.marginLeft = t - e + "px" : n.style.marginLeft = (this.Vv ? this.B.left : 0) + "px", "middle" == this.Tv ? n.style.marginTop = Math.ceil((i - s) / 2) + "px" : "bottom" == this.Tv ? n.style.marginTop = i - s + "px" : n.style.marginTop = (this.Vv ? this.B.top : 0) + "px"
        }, $getSize: function (t, i) {
            var e = this.Yl = this.Ct.$getSize(0, 0), s = Fi.api.$getSize.call(this, 0, 0);
            return this.Vv && (t += this.B.left + this.B.right, i += this.B.top + this.B.bottom), !this.Fv || this.Vv ? (s[0] = e[0] + t, s[1] = e[1] + t) : (s[0] = (s[0] || e[0]) + i, s[1] += t), !this.Tv || this.Vv ? (s[2] = e[2] + i, s[3] = e[3] + i) : (s[2] = (s[2] || e[2]) + i, s[3] += i), s
        }
    }), In = (P.protoUI(Dn, zi.view), {
        name: "multiview", defaults: {animate: {}}, setValue: function (t) {
            ri(t).show()
        }, getValue: function () {
            return this.getActiveId()
        }, $init: function () {
            this.Xu = 0, this.Rl = 1, this.Tt.style.position = "relative", this.Tt.className += " webix_multiview", this.zv = []
        }, Hv: function (t, i) {
            var e = ri(t);
            e.Rv || (e.Bv = [], e.Rv = {}), e.Rv[i] || (e.Rv[i] = !0, e.Bv.push(i))
        }, Pv: function (t) {
            var i = ri(t);
            if (this.B.keepViews && (i.Tt.style.display = ""), this.zv[this.zv.length - 2] != t ? (10 == this.zv.length && this.zv.splice(0, 1), this.zv.push(t)) : this.zv.splice(this.zv.length - 1, 1), i.Rv) {
                for (var e = 0; e < i.Bv.length; e++) {
                    var s = ri(i.Bv[e]);
                    s && s.render()
                }
                i.Bv = [], i.Rv = {}
            }
        }, addView: function (t, i) {
            var e = !j(i) && i <= this.Xu ? 1 : 0, s = dn.api.addView.apply(this, arguments);
            return 1 < this.yi.length && (this.B.keepViews ? ri(s).Tt.style.display = "none" : lt(ri(s).Tt), this.Xu += e), s
        }, At: function (t) {
            if (!t.B.borderless) {
                var i = l(this.B.$t);
                t.B.$t = i;
                var e = t.Tt.style;
                e.borderTopWidth = e.borderBottomWidth = e.borderLeftWidth = e.borderRightWidth = "1px", this.Ol(e, i)
            }
            dn.api.At.apply(this, arguments)
        }, Pl: function (t) {
            if (t == this.Xu) {
                var i = t ? t - 1 : 1;
                this.yi[i] && (this.jv = null, this.fe(this.yi[i], !1))
            }
            t < this.Xu && this.Xu--
        }, Si: function () {
        }, Vl: function (t) {
            t = t || this.Bl;
            for (var i = 0; i < t.length; i++) t[i].$t = this.B.borderless ? {
                top: 1,
                left: 1,
                right: 1,
                bottom: 1
            } : this.B.$t || {};
            dn.api.Vl.call(this, t);
            for (var e = 1; e < this.yi.length; e++) this.B.keepViews ? this.yi[e].Tt.style.display = "none" : lt(this.yi[e].Tt);
            for (var s = 0; s < t.length; s++) {
                var n = this.yi[s];
                n.yi && !n.ud || (this.Ol(n.Tt.style, n.B.$t), n.Tt.setAttribute("role", "tabpanel"))
            }
            this.Pv(this.getActiveId())
        }, cells_setter: function (t) {
            t && t.length, this.Bl = t
        }, Ev: function (t, i) {
            var e = (this.B.animate || {}).direction, s = "top" == e || "bottom" == e;
            return t < i ? s ? "bottom" : "right" : s ? "top" : "left"
        }, fe: function (t, i) {
            var e = this, s = arguments, n = this.getParentView();
            if (n && n.getTabbar && n.getTabbar().setValue(t.B.$id || t.B.id), this.jv) return this.jv.then(function () {
                return e.fe.apply(e, s)
            });
            for (var h = -1, r = 0; r < this.yi.length; r++) if (this.yi[r] == t) {
                h = r;
                break
            }
            if (!(h < 0 || h == this.Xu)) {
                var o = this.yi[this.Xu], a = this.yi[h];
                if (o.$getSize(0, 0), (i || void 0 === i) && ji.isSupported() && this.B.animate) {
                    var u = P.extend({}, this.B.animate);
                    this.B.keepViews && (u.keepViews = !0), u.direction = this.Ev(h, this.Xu), u = yi.$i(i || {}, u);
                    var c = ji.formLine(a.Tt, o.Tt, u);
                    a.$getSize(0, 0), a.$setSize(this.oe, this.ue)
                    ;var f = u.callback;
                    u.callback = function () {
                        ji.breakLine(c, this.B.keepViews), this.jv = null, u.wait_animation.resolve(), f && f.call(this), f = u.master = u.callback = null, this.resize()
                    }, (u.master = this).Xu = h, this.Pv(this.getActiveId()), ji(c, u), this.jv = u.wait_animation = m.defer()
                } else this.B.keepViews ? o.Tt.style.display = "none" : (lt(o.Tt), this.Tt.appendChild(this.yi[r].Tt)), this.Xu = h, this.resizeChildren(), this.Pv(this.getActiveId());
                a.callEvent && (a.callEvent("onViewShow", []), di(a, this.de)), this.callEvent("onViewChange", [o.B.id, a.B.id])
            }
        }, $getSize: function (t, i) {
            if (!this.yi.length) return Fi.api.$getSize.call(this, 0, 0);
            var e = this.yi[this.Xu].$getSize(0, 0);
            if (this.B.fitBiggest) for (var s = 0; s < this.yi.length; s++) if (s != this.Xu) for (var n = this.yi[s].$getSize(0, 0), h = 0; h < 4; h++) e[h] = Math.max(e[h], n[h]);
            var r = Fi.api.$getSize.call(this, 0, 0);
            return 1e5 <= r[1] && (r[1] = 0), 1e5 <= r[3] && (r[3] = 0), r[0] = (r[0] || e[0]) + t, r[1] = (r[1] || e[1]) + t, r[2] = (r[2] || e[2]) + i, r[3] = (r[3] || e[3]) + i, r
        }, $setSize: function (t, i) {
            this.yi.length && (this.zl = [t, i], Fi.api.$setSize.call(this, t, i), this.yi[this.Xu].$setSize(t, i))
        }, isVisible: function (t, i) {
            return i && i != this.getActiveId() ? (t && this.Hv(i, t), !1) : zi.api.isVisible.call(this, t, this.B.id)
        }, getActiveId: function () {
            return this.yi.length ? this.yi[this.Xu].B.id : null
        }, back: function (t) {
            if (t = t || 1, this.callEvent("onBeforeBack", [this.getActiveId(), t])) {
                if (this.zv.length > t) {
                    var i = this.zv[this.zv.length - t - 1];
                    return ri(i).show(), i
                }
                return null
            }
            return null
        }, jl: function (t, i) {
            !this.B.keepViews && i && i != this.yi[this.Xu] || dn.api.jl.call(this, t, i)
        }
    }), An = (P.protoUI(In, dn.view), {
        name: "tabview", setValue: function (t) {
            this.yi[0].setValue(t)
        }, getValue: function () {
            return this.yi[0].getValue()
        }, getTabbar: function () {
            return this.yi[0]
        }, getMultiview: function () {
            return this.yi[1]
        }, addView: function (t) {
            var i = this.getMultiview().addView(t.body);
            return t.id = i, t.value = t.header, delete t.body, delete t.header, this.getTabbar().addOption(t), i
        }, removeView: function (t) {
            var i = this.getTabbar();
            i.removeOption(t), i.refresh()
        }, $init: function (t) {
            this.$ready.push(this.Nv);
            var i = t.cells, e = [];
            i && i.length;
            for (var s = i.length - 1; 0 <= s; s--) {
                var n = i[s].body || i[s];
                n.id || (n.id = "view" + V()), e[s] = {
                    value: i[s].header,
                    id: n.id,
                    close: i[s].close,
                    width: i[s].width,
                    hidden: !!i[s].hidden
                }, i[s] = n
            }
            var h = {view: "tabbar", multiview: !0}, r = {view: "multiview", cells: i, animate: !!t.animate};
            t.value && (h.value = t.value), t.tabbar && P.extend(h, t.tabbar, !0), t.multiview && P.extend(r, t.multiview, !0), h.options = h.options || e, t.rows = [h, r], delete t.cells, delete t.tabs
        }, Nv: function () {
            this.getTabbar().attachEvent("onOptionRemove", function (t) {
                var i = ri(t);
                if (i) {
                    var e = i.getParentView();
                    e && e.removeView(i)
                }
            })
        }
    }), Fn = (P.protoUI(An, pn.view), {
        name: "carousel",
        defaults: {scrollSpeed: "300ms", type: "clean", navigation: {}, animate: !0},
        $init: function () {
            this.Tt.className += " webix_carousel", this.Lv = null, this.Q = null, this.Xu = 0, this.$ready.unshift(this.Ov), this.$ready.push(this.Gh)
        },
        addView: function (t, i) {
            var e = this.Lv.addView(t, i);
            return this.Uv(), e
        },
        removeView: function (t) {
            this.Lv.removeView(t), this.Uv()
        },
        At: function (t, i) {
            this.Lv.At(t, i), this.Uv()
        },
        Uv: function () {
            this.yi = this.Lv.yi, this.Nu(), this.setActiveIndex(Math.min(this.Xu, this.yi.length - 1))
        },
        Ov: function () {
            var i = this;
            this.Lv && this.Lv.destructor && this.Lv.destructor();
            var t = "";
            this.config.cols ? (t = "cols", this.Rl = 0) : (t = "rows", this.Rl = 1);
            var e = {borderless: !0, type: "clean"};
            e[t] = _(this.B[t]);
            for (var s = ["type", "margin", "marginX", "marginY", "padding", "paddingX", "paddingY"], n = {}, h = 0; h < s.length; h++) this.B[s[h]] && (n[s[h]] = this.B[s[h]]);
            P.extend(e, n, !0), (ti.pt = this).Lv = ei.Ht(e), this.Tt.appendChild(this.Lv.Tt), this.yi = this.Lv.yi, this.Lv.fe = S(Fn.fe, this), this.Lv.adjustScroll = S(Fn.adjustScroll, this);
            var r = I("onReconstruct", function (t) {
                t == i.Lv && i.Wv()
            });
            this.attachEvent("onDestruct", function () {
                A(r)
            }), this.Vi = this.Tt.firstChild
        },
        ve: function (t, i) {
            this.B.navigation.items && "tab" === i.target.getAttribute("role") && this.Pu(t, i), Fi.api.ve.call(this, t, i)
        },
        getChildViews: function () {
            return [this.Lv]
        },
        getLayout: function () {
            return this.Lv
        },
        Gh: function () {
            this.Vi.setAttribute("touch_scroll", this.Rl ? "y" : "x"), this.Lv.attachEvent("onAfterScroll", S(function () {
                this.callEvent("onShow", [this.getActiveId()])
            }, this)), di(this.Lv, function (t) {
                t.Tt.setAttribute("role", "tabpanel")
            })
        },
        adjustScroll: function (t) {
            var i, e = this.Rl ? this.ue : this.oe;
            return this.Rl ? (i = Math.round(t.f / e), t.f = i * e) : (i = Math.round(t.e / e), t.e = i * e), this.Xu = -i, this.B.navigation && this.Lu(), !0
        },
        fe: function (t) {
            var i, e, s, n, h, r;
            for (s = -1, e = this.Lv, i = 0; i < e.yi.length; i++) if (e.yi[i] == t) {
                s = i;
                break
            }
            s < 0 || s == this.Xu || (this.Xu = s, n = e.Rl ? this.ue : this.oe, h = -(e.Rl ? 0 : s * n), r = -(e.Rl ? s * n : 0), this.scrollTo(h, r), this.callEvent("onShow", [e.yi[this.Xu].B.id]), this.B.navigation && this.Nu())
        },
        scrollTo: function (t, i) {
            Ui && ji.isSupported() && this.B.animate ? Ui.os(this.Vi, t, i, this.B.scrollSpeed || "100ms") : (this.Vi.style.marginLeft = t + "px", this.Vi.style.marginTop = i + "px")
        },
        navigation_setter: function (t) {
            return this.$i(t, {type: "corner", buttons: !0, items: !0}), t
        },
        showNext: function () {
            this.Xu < this.Lv.yi.length - 1 && this.setActiveIndex(this.Xu + 1)
        },
        showPrev: function () {
            0 < this.Xu && this.setActiveIndex(this.Xu - 1)
        },
        setActiveIndex: function (t) {
            this.Lv.yi.length, ri(this.Lv.yi[t].B.id).show()
        },
        getActiveIndex: function () {
            return this.Xu
        },
        $getSize: function (t, i) {
            var e = this.Lv.$getSize(0, 0), s = zi.api.$getSize.call(this, t, i);
            return this.Lv.Rl ? (s[0] = Math.max(s[0], e[0]), s[1] = Math.min(s[1], e[1])) : (s[2] = Math.max(s[2], e[2]), s[3] = Math.min(s[3], e[3])), s
        },
        $setSize: function (t, i) {
            var e = this.Lv, s = e.yi.length, n = zi.api.$setSize.call(this, t, i), h = this.ue * (e.Rl ? s : 1),
                r = this.oe * (e.Rl ? 1 : s);
            n ? (this.Vi.style.height = h + "px", this.Vi.style.width = r + "px", e.$setSize(r, h), this.Wv()) : e.$setSize(r, h)
        },
        Wv: function () {
            var t = this.Lv, i = this.Xu || 0, e = t.Rl ? this.ue : this.oe, s = -(t.Rl ? 0 : i * e),
                n = -(t.Rl ? i * e : 0);
            this.scrollTo(s, n), this.B.navigation && this.Nu()
        },
        getActiveId: function () {
            var t = this.Lv.yi[this.Xu];
            return t ? t.B.id : null
        },
        setActive: function (t) {
            ri(t).show()
        }
    }), Tn = (P.protoUI(Fn, c, Fe, zi.view), {
        name: "proxy", body_setter: function (t) {
            return (ti.pt = this).Ct = ei.Ht(t), this.Tt.appendChild(this.Ct.Tt), t
        }, getChildViews: function () {
            return [this.Ct]
        }, $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i), this.Ct.$setSize(this.$width, this.$height)
        }, $getSize: function (t, i) {
            var e = zi.api.$getSize.call(this, t, i), s = this.Ct.$getSize(t, i);
            return s[0] = Math.max(e[0], s[0]), s[1] = Math.min(e[1], s[1]), s[2] = Math.max(e[2], s[2]), s[3] = Math.min(e[3], s[3]), s[4] = Math.max(e[4], s[4]), s
        }, At: function (t) {
            this.Ct.destructor(), this.Ct = t, this.Tt.appendChild(t.Tt), this.resize()
        }
    }), Vn = (P.protoUI(Tn, zi.view), {
        name: "portlet", defaults: {layoutType: "wide", icon: "wxi-drag"}, $init: function (t) {
            this.Tt.style.position = "relative", t.header && t.body && (t.body = [{
                template: t.header,
                type: "header"
            }, t.body]), this.$ready.push(this.Yv)
        }, qv: function (t) {
            di(t, function (t) {
                t.Gv && t.Gv()
            })
        }, Yv: function () {
            var t = this.getChildViews();
            if (1 < t.length) qi.addDrag(t[0].$view, this); else if (this.B.icon) {
                var i = ct("div", {"class": "portlet_drag"}, "<span class='webix_icon " + this.B.icon + "'></span>");
                this.Tt.appendChild(i), qi.addDrag(i, this)
            } else qi.addDrag(this.$view, this)
        }, body_setter: function (t) {
            return this.rows_setter(b(t) ? t : [t])
        }, markDropArea: function (t, i) {
            if (!t) return lt(this.Xv);
            t = ri(t), this.Xv || (this.Xv = ct("div", null, "&nbsp;")), t.$view.appendChild(this.Xv), this.Xv.className = "portlet_marker" + i
        }, movePortlet: function (t, i) {
            var e = t.getParentView(), s = this.getParentView(), n = e.index(t), h = s.index(this);
            if (D("onBeforePortletMove", [s, e, this, t, i])) {
                ti._t = !0;
                var r = s != e ? 1 : 0, o = e.Rl;
                "top" == i || "bottom" == i ? (1 !== o && (ei(t, e = ei({
                    type: t.B.layoutType,
                    rows: []
                }, e, n + r), 0), n = 0, r = 1), "bottom" == i && (r += 1)) : "left" != i && "right" != i || (0 !== o && (ei(t, e = ei({
                    type: t.B.layoutType,
                    cols: []
                }, e, n + r), 0), n = 0, r = 1), "right" == i && (r += 1)), h < n && (r -= 1), ei(this, e, n + r), "replace" == i && ei(t, s, h), this.Jv(s), ti._t = !1, t.resize(), s.resize(), this.qv(s), D("onAfterPortletMove", [s, e, this, t, i])
            }
        }, Jv: function (t) {
            for (var i, e = 0; t.getChildViews().length <= e;) t = (i = t).getParentView(), e = 1;
            e && t.removeView(i)
        }, $drag: function (t) {
            return xt(this.Tt, "portlet_in_drag"), qi.Ps = {source: t, from: t}, this.Tt.innerHTML
        }, $dragDestroy: function (t, i) {
            yt(this.Tt, "portlet_in_drag"), lt(i), this.Kv && (this.movePortlet(this.Kv, this.Zv), this.markDropArea(), this.Kv = null)
        }, Bs: function () {
            return _t(this.$view)
        },
        $dragPos: function (t, i, e) {
            e.style.left = "-10000px";
            var s = Y.mouse.context(i), n = document.body.scrollTop || document.documentElement.scrollTop || 0,
                h = document.body.scrollLeft || document.documentElement.scrollLeft || 0,
                r = document.elementFromPoint(s.x - h, s.y - n), o = null;
            r && (o = ri(r)), this.Kv = this.Qv(o), this.Zv = this.t_(this.Kv, i), t.x = t.x - this.oe + 10, t.y = t.y - 20, qi.Xs = !0
        }, t_: function (t, i) {
            var e = "", s = "";
            if (i && t) {
                var n = _t(t.$view), h = mt(i), r = h.x - n.x - n.width / 2, o = h.y - n.y - n.height / 2;
                (s = t.B.mode) || (s = Math.abs(r) * (n.height / n.width) > Math.abs(o) ? "cols" : "rows"), "cols" == s ? e = 0 <= r ? "right" : "left" : "rows" == s && (e = 0 <= o ? "bottom" : "top"), this.markDropArea(t, e)
            }
            return this.markDropArea(t, e), e || s
        }, Qv: function (t) {
            for (; t;) {
                if (t.movePortlet) return t;
                t = t.getParentView()
            }
        }
    }), zn = (P.protoUI(Vn, pn.view), {
        name: "abslayout", $init: function () {
            this.$view.className += " webix_abslayout", delete this.rows_setter, delete this.cols_setter, this.Bl = []
        }, cells_setter: function (t) {
            this.Bl = t
        }, Vl: function () {
            for (var t = 0; t < this.Bl.length; t++) this.Bl[t].$t = {};
            dn.api.Vl.call(this, this.Bl)
        }, $getSize: function () {
            for (var t = Fi.api.$getSize.call(this, 0, 0), i = null, e = 0; e < this.yi.length; e++) this.yi[e].B.relative && (i = this.yi[e].$getSize(0, 0));
            return i && (1e5 <= t[1] && (t[1] = 0), 1e5 <= t[3] && (t[3] = 0), t[0] = Math.max(t[0], i[0]), t[1] = Math.max(t[1], i[1]), t[2] = Math.max(t[2], i[2]), t[3] = Math.max(t[3], i[3])), t
        }, $setSize: function (t, i) {
            this.zl = [t, i], Fi.api.$setSize.call(this, t, i), this.Ha(t, i)
        }, Ha: function (t, i) {
            for (var e = 0; e < this.yi.length; e++) {
                var s = this.yi[e], n = s.B, h = s.$getSize(0, 0);
                n.relative ? (n.left = n.top = 0, s.$setSize(t, i)) : s.$setSize(h[0], h[2]);
                for (var r = s.$view, o = ["left", "right", "top", "bottom"], a = 0; a < o.length; a++) {
                    var u = o[a];
                    u in n && (r.style[u] = n[u] + "px")
                }
            }
        }
    }), Hn = {api: zn, view: P.protoUI(zn, dn.view)}, Rn = {
        name: "gridlayout",
        defaults: {autoplace: !0, gridColumns: 2, gridRows: 2, margin: 10, padding: 10},
        gridRows_setter: function (t) {
            return this.i_ = t
        },
        removeView: function (t) {
            Hn.api.removeView.call(this, t), this.e_(), this.callEvent("onChange", [])
        },
        s_: function (t) {
            if (t.dx = t.dx || 1, t.dy = t.dy || 1, j(t.y) || j(t.x)) {
                for (var i = this.n_(), e = 0; e < this.i_; e++) for (var s = 0; s < this.B.gridColumns; s++) if (!i[s][e] && this.h_(i, s, e, s + t.dx, e + t.dy)) return t.x = s, void (t.y = e);
                t.x = 0, t.y = this.i_
            }
            var n = t.x + t.dx - this.B.gridColumns;
            0 < n && (t.dx -= n)
        },
        At: function (t, i) {
            if (j(i)) {
                for (var e = 0; e < this.yi.length; e++) this.yi[e].destructor();
                this.Bl = t, this.Vl()
            } else this.s_(t.config), this.yi.push(t), this.$view.appendChild(t.Tt), this.r_(t.config, t.config.id);
            this.e_(!0), this.o_ || this.callEvent("onChange", [])
        },
        h_: function (t, i, e, s, n) {
            for (var h = i; h < s; h++) for (var r = e; r < n; r++) if (!t[h] || t[h][r]) return !1;
            return !0
        },
        a_: function (t, i, e) {
            for (var s = 0; s < i.dx; s++) for (var n = 0; n < i.dy; n++) t[s + i.x][n + i.y] = e
        },
        u_: function (t, i, e) {
            for (var s = this.B.gridColumns, n = i.x + i.dx; n + e.dx <= s; n++) if (this.h_(t, n, e.y, n + e.dx, e.y + e.dy)) return n - e.x;
            return 0
        },
        c_: function (t, i, e) {
            for (var s = i.x - e.dx; 0 <= s; s--) if (this.h_(t, s, e.y, s + e.dx, e.y + e.dy)) return e.x - s;
            return 0
        },
        f_: function (t, i, e) {
            for (var s = i.y - e.dy; 0 <= s; s--) if (this.h_(t, e.x, s, e.x + e.dx, s + e.dy)) return e.y - s;
            return 0
        },
        n_: function (t) {
            for (var i = [], e = 0; e < this.B.gridColumns; e++) i[e] = [];
            for (var s = 0; s < this.yi.length; s++) {
                var n = this.yi[s].config;
                n.id === t || n.hidden || this.a_(i, n, n.id)
            }
            return i
        },
        e_: function (t) {
            (this.l_() || t) && this.d_()
        },
        l_: function () {
            if (!this.B.autoplace) return !1;
            var t = this.B.gridColumns, i = this.i_, e = this.n_(), s = !1;
            t:for (var n = i - 1; 0 <= n; n--) {
                for (var h = t - 1; 0 <= h; h--) if (e[h][n]) continue t;
                s = !0;
                for (var r = 0; r < this.yi.length; r++) {
                    var o = this.yi[r].config;
                    !o.hidden && o.y >= n && (o.y -= 1)
                }
            }
            return s
        },
        r_: function (t, i) {
            if (t.x -= Math.max(0, t.x + t.dx - this.B.gridColumns), this.B.autoplace) {
                for (var e = [], s = this.n_(i), n = 0; n < this.yi.length; n++) {
                    var h = this.yi[n].config;
                    h.id === i || h.hidden || h.y < t.y + t.dy && h.y + h.dy > t.y && h.x < t.x + t.dx && h.x + h.dx > t.x && e.push(h)
                }
                for (var r = [], o = 0; o < e.length; o++) {
                    var a = e[o];
                    this.a_(s, a, 0);
                    var u = this.u_(s, t, a);
                    if (u) a.x += u; else {
                        var c = this.c_(s, t, a);
                        if (c) a.x -= c; else {
                            var f = this.f_(s, t, a);
                            f ? a.y -= f : (a.y = t.y + t.dy, r.push(a))
                        }
                    }
                    this.a_(s, a, a.id)
                }
                for (var l = 0; l < r.length; l++) this.r_(r[l], r[l].id)
            } else t.y -= Math.max(0, t.y + t.dy - this.B.gridRows)
        },
        d_: function () {
            for (var t = this.B.gridRows,
                     i = 0; i < this.yi.length; i++) {
                var e = this.yi[i].config;
                e.hidden || (t = Math.max(t, e.y + e.dy))
            }
            this.i_ != t && (this.i_ = t, this.resize()), this.Ha()
        },
        moveView: function (t, i) {
            i = P.extend(ri(t).config, i, !0), this.r_(i, t), this.e_(!0), this.callEvent("onChange", [])
        },
        serialize: function (t) {
            for (var i = [], e = 0; e < this.yi.length; e++) if (t) i.push(t.call(this, this.yi[e])); else {
                var s = this.yi[e].config;
                i.push({id: s.id, name: s.name, x: s.x, y: s.y, dx: s.dx, dy: s.dy})
            }
            return i
        },
        clearAll: function () {
            for (var t = 0; t < this.yi.length; t++) this.yi[t].destructor();
            this.yi = [], this.callEvent("onChange", [])
        },
        restore: function (t, i) {
            i = i || this.B.factory, t = _(t), this.o_ = !0;
            for (var e = {}, s = 0; s < t.length; s++) {
                var n = t[s], h = ri(n.id);
                e[h ? (P.extend(h.config, n, !0), h.config.id) : (h = i.call(this, n), this.addView(h))] = 1
            }
            for (var r = this.yi.length - 1; 0 <= r; r--) e[this.yi[r].config.id] || (this.yi[r].destructor(), this.yi.splice(r, 1));
            this.d_(), this.o_ = !1
        },
        $getSize: function () {
            for (var t = Fi.api.$getSize.call(this, 0, 0), i = 0; i < this.yi.length; i++) this.yi[i].$getSize(0, 0);
            var e = this.B.cellWidth, s = this.B.cellHeight, n = this.v_(0, 0, this.B.gridColumns, this.i_);
            return e && (t[0] = n.dx + 2 * n.x), s && (t[2] = n.dy + 2 * n.y), t
        },
        v_: function (t, i, e, s) {
            var n = this.B.margin, h = this.B.paddingX || this.B.padding, r = this.B.paddingY || this.B.padding,
                o = this.B.cellWidth;
            o || (o = (this.$width - 2 * h + n) / this.B.gridColumns - n);
            var a = this.B.cellHeight;
            return a || (a = (this.$height - 2 * r + n) / this.i_ - n), {
                x: h + (o + n) * t,
                y: r + (a + n) * i,
                dx: Math.ceil(o + (o + n) * (e - 1)),
                dy: Math.ceil(a + (a + n) * (s - 1))
            }
        },
        Ha: function () {
            for (var t = 0; t < this.yi.length; t++) {
                var i = this.yi[t], e = i.B, s = this.v_(e.x, e.y, e.dx, e.dy);
                i.$getSize(0, 0), i.$setSize(s.dx, s.dy);
                var n = i.$view;
                n.style.left = s.x + "px", n.style.top = s.y + "px"
            }
        }
    }, Bn = {api: Rn, view: P.protoUI(Rn, Hn.view)}, Pn = {
        name: "dashboard", $init: function () {
            qi.addDrag(this.$view, this), qi.addDrop(this.$view, this, !0)
        }, __: function (t) {
            return !(!t.getAttribute || t.getAttribute("webix_disable_drag") || t.getAttribute("webixignore")) && (-1 != (t.className || "").toString().indexOf("panel_drag") ? t : !(!t.parentNode || t == this.$view) && this.__(t.parentNode))
        }, $dragCreate: function (t, i) {
            if (!i.target || !this.__(i.target)) return !1;
            var e = ri(i);
            e.$resizeMove || (e = e.queryView(function (t) {
                return !j(t.config.dx)
            }, "parent"));
            var s = _t(this.$view), n = mt(i), h = qi.Ps = {
                source: e,
                from: this,
                dashboard: {
                    sx: n.x - s.x - parseInt(e.$view.style.left) + this.B.margin / 2,
                    sy: n.y - s.y - parseInt(e.$view.style.top) + this.B.margin / 2
                }
            };
            return this.callEvent("onBeforeDrag", [h, i]) ? (this.p_(e.B.dx, e.B.dy), e.$view) : void 0
        }, p_: function (t, i) {
            var e = this.m_ = ct("div", {"class": "panel_target"}), s = this.v_(0, 0, t, i);
            e.style.width = s.dx + "px", e.style.height = s.dy + "px", this.$view.appendChild(this.m_)
        }, $drop: function (t, i, e) {
            var s = qi.Ps, n = {x: s.dashboard.x, y: s.dashboard.y};
            if (this.callEvent("onBeforeDrop", [s, e])) {
                if (s.from === this) {
                    var h = s.source.config;
                    this.moveView(h.id, n)
                } else {
                    if (!(s.from && s.from.callEvent && s.from.callEvent("onBeforeDropOut", [s, e]))) return;
                    n.name = s.source[0], n.dx = s.dashboard.dx, n.dy = s.dashboard.dy, n.id = n.name + ":" + V(), (n = this.B.factory.call(this, n)) && this.addView(n)
                }
                this.callEvent("onAfterDrop", [s, e])
            }
        }, $dragDestroy: function (t, i) {
            i.style.zIndex = 1, lt(this.m_), this.m_ = null, this.d_()
        }, b_: function (t, i, e) {
            var s = this.B.margin, n = this.B.paddingX || this.B.padding, h = this.B.paddingY || this.B.padding,
                r = this.B.cellWidth;
            r || (r = (this.$width - 2 * n + s) / this.B.gridColumns - s);
            var o = this.B.cellHeight;
            return o || (o = (this.$height - 2 * h + s) / this.i_ - s), t += e ? s : -n, i += e ? s : -h, t = Math.round(t / (r + s)), i = Math.round(i / (o + s)), {
                x: t = Math.max(0, Math.min(t, this.B.gridColumns - (e ? 0 : 1))),
                y: i = Math.max(0, Math.min(i, this.i_)),
                width: r,
                height: o,
                margin: s,
                rx: t * (r + s) + n,
                ry: i * (o + s) + h
            }
        }, $dragOut: function (t, i, e, s) {
            var n = qi.Ps;
            this.callEvent("onDragOut", [n, s]), this.m_ && n.external && (lt(this.m_), this.m_ = null)
        }, $dragIn: function (t, i, e) {
            var s = qi.Ps;
            if (this.callEvent("onBeforeDragIn", [s, e])) {
                if (!this.m_) {
                    if (!s.from || !s.from.getItem) return !1;
                    if (!this.B.factory) return !1;
                    s.external = !0;
                    var n = s.from.getItem(s.source);
                    s.dashboard = {dx: n.dx, dy: n.dy}, this.p_(n.dx, n.dy)
                }
                if (s.external) {
                    var h = this.m_, r = Y.mouse.context(e), o = _t(this.$view), a = this.b_(r.x - o.x, r.y - o.y);
                    P.extend(s.dashboard, a, !0), h.style.left = a.rx + "px",
                        h.style.top = a.ry + "px"
                }
                return !0
            }
        }, $dragPos: function (t, i, e) {
            var s = qi.Ps;
            e.style.left = "-10000px";
            var n = Y.mouse.context(i), h = _t(this.$view), r = s.dashboard,
                o = this.b_(n.x - h.x - r.sx, n.y - h.y - r.sy);
            t.x = n.x - r.sx - h.x, t.y = n.y - r.sy - h.y;
            var a = this.m_;
            a.style.left = o.rx + "px", a.style.top = o.ry + "px", P.extend(r, o, !0)
        }
    }, jn = (P.protoUI(Pn, Bn.view), {
        name: "panel", $init: function (t) {
            if (t.header && t.body) {
                var i = t.header;
                "object" !== M(i) && (i = {
                    template: t.header,
                    type: "header",
                    css: "webix_header"
                }), t.body = [i, t.body]
            }
            xt(this.$view, "panel_drag_view"), this.$ready.push(this.Yv)
        }, Yv: function () {
            var t = this.getChildViews(), i = 1 === t.length ? this : t[1];
            if (this.B.icon) {
                var e = ct("div", {"class": "panel_icon"}, "<span class='webix_icon " + this.B.icon + " panel_icon_span'></span>");
                i != this && (i.$view.style.position = "relative"), i.$view.appendChild(e)
            }
        }, body_setter: function (t) {
            return this.rows_setter(b(t) ? t : [t])
        }, $resizeEnd: function (t) {
            var i = this.getParentView();
            if (i && i.b_) {
                var e = i.b_(t.mx, t.my, !0), s = Math.max(e.x, 1), n = Math.max(e.y, 1);
                i.moveView(this.B.id, {dx: s, dy: n})
            }
        }, $resizeMove: function (t) {
            var i = this.getParentView();
            if (i && i.b_) {
                t.mx = t.x, t.my = t.y;
                var e = i.b_(t.x, t.y, !0);
                t.x = (e.width + e.margin) * e.x - e.margin, t.y = (e.height + e.margin) * e.y - e.margin
            }
        }
    }), En = (P.protoUI(jn, pn.view, Ji), {
        $init: function () {
            P.extend(this, xe, !0)
        }, name: "flexlayout"
    }), Nn = (P.protoUI(En, pn.view), {
        name: "datalayout", $init: function () {
            this.data.provideApi(this, !0), this.data.attachEvent("onStoreUpdated", S(this.render, this))
        }, Vl: function () {
            return this.g_ || (this.g_ = this.Bl, this.Bl = [{}]), pn.api.Vl.call(this, this.Bl)
        }, setValue: function (t) {
            this.parse(t)
        }, getValue: function () {
            for (var t = this.g_.length, i = 0; i < this.yi.length; i++) {
                var e = this.data.order[Math.floor(i / t)], s = this.data.getItem(e);
                this.w_(this.yi[i], s)
            }
            return this.data.serialize()
        }, w_: function (t, i) {
            var e = t.B.name;
            if (e) {
                var s = null;
                t.getValues ? s = t.getValues() : t.getValue ? s = t.getValue() : t.serialize && (s = t.serialize()), "$value" == e ? P.extend(i, s, !0) : i[e] = s
            } else {
                var n = t.yi;
                if (n) for (var h = 0; h < n.length; h++) this.w_(n[h], i)
            }
        }, El: function (t, i) {
            var e, s = t.B.name;
            if (s) e = "$value" == s ? i : i[s], t.setValues ? t.setValues(e) : t.setValue ? t.setValue(e) : t.parse && (t.openAll && (e = _(e)), t.parse(e)); else {
                var n = t.yi;
                if (n) for (var h = 0; h < n.length; h++) this.El(n[h], i)
            }
        }, render: function (t, i, e) {
            var s = this.g_.length;
            if (t && "update" === e) for (var n = this.getItem(t), h = this.getIndexById(t), r = 0; r < s; r++) this.El(this.yi[h * s + r], n); else {
                for (var o = this.Bl = [], a = this.data.order, u = 0; u < a.length; u++) if (s) for (var c = 0; c < s; c++) o.push(_(this.g_[c])); else o.push(this.getItem(a[u]));
                if (o.length || o.push({}), this.reconstruct(), s) for (var f = 0; f < a.length; f++) for (var l = this.getItem(a[f]), d = 0; d < s; d++) {
                    var v = this.yi[f * s + d];
                    this.El(v, l)
                }
            }
        }
    }), Ln = {api: Nn, view: P.protoUI(Nn, le, pn.view)}, On = {
        $init: function () {
            P.extend(this, xe, !0)
        }, name: "flexdatalayout"
    }, Un = (P.protoUI(On, Ln.view), {
        name: "popup", $init: function () {
            var i = this;
            this.B.head = !1, this.$view.className += " webix_popup";
            var t = I("onClick", function (t) {
                return i.Si(t)
            });
            this.attachEvent("onDestruct", function () {
                A(t)
            }), this.attachEvent("onHide", this.Cn)
        }, $skin: function () {
            Zi.api.$skin.call(this), this.defaults.padding = Ei.popupPadding, this.defaults.point = !Ei.popupNoPoint, this.defaults.borderless = Ei.borderlessPopup
        }, close: function () {
            lt(this.x_), Zi.api.close.call(this)
        }, $getSize: function (t, i) {
            return Zi.api.$getSize.call(this, t + 2 * this.B.padding, i + 2 * this.B.padding)
        }, $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i), t = this.oe - 2 * this.B.padding, i = this.ue - 2 * this.B.padding, this.Vi.style.padding = this.B.padding + "px", this.en.style.display = "none", this.Ct.$setSize(t, i)
        }, zn: function (t) {
            "undefined" == typeof t.borderless && (t.borderless = !1)
        }, head_setter: function () {
        }, kn: function (t, i, e, s) {
            this.Cn(), document.body.appendChild(this.x_ = ct("DIV", {"class": "webix_point_" + t}, "")), this.x_.style.zIndex = this.Tt.style.zIndex, this.x_.style.position = s ? "fixed" : "absolute", this.x_.style.top = e + "px", this.x_.style.left = i + "px"
        }, Cn: function () {
            this.x_ = lt(this.x_)
        }
    }), Wn = {api: Un, view: P.protoUI(Un, Zi.view)}, Yn = {
        name: "toolbar", defaults: {type: "toolbar"}, ud: !0, y_: "webix_toolbar", M_: !1, $init: function (t) {
            t.borderless || (this.Vi.style.borderWidth = "1px", this.B.$t = {
                top: !1, left: !1, right: !1, bottom: !1
            }), this.Vi.className += " " + this.y_, this.Tt.setAttribute("role", "toolbar")
        }, Ji: function () {
            var i = this;
            i.elements = {}, di(this, function (t) {
                if (t.B.name && t.getValue && t.setValue && (i.elements[t.B.name] = t).mapEvent && t.mapEvent({
                    onbeforetabclick: i,
                    onaftertabclick: i,
                    onitemclick: i,
                    onchange: i
                }), t.setValues || t.El) return !1
            });
            var t = this.Hf;
            if (this.setDirty(!1), t) {
                var e = this.Hf;
                for (var s in i.elements) t[s] && e[s] != t[s] && (e[s] = t[s], this.setDirty(!0))
            }
        }, Ll: function () {
            this.Ji()
        }, rd: function (t) {
            var i = this.B;
            return i.elements && !t && (this.Bl = t = i.elements, this.Rl = this.M_, delete i.elements), this.B.elementsConfig && this.S_(this.Bl, i.elementsConfig), t
        }, S_: function (t, i) {
            for (var e = 0; e < t.length; e++) {
                var s = t[e];
                P.extend(s, i);
                var n, h = i;
                s.elementsConfig && (h = P.extend(P.extend({}, s.elementsConfig), i)), (n = s.body ? [s.body] : s.rows || s.cols || s.cells || s.body) && this.S_(n, h)
            }
        }, $getSize: function (t, i) {
            var e = pn.api.$getSize.call(this, t, i), s = this.getParentView(), n = this.Rl ? 3 : 1;
            return s && this.Rl != s.Rl && (e[n] += 1e5), e
        }, render: function () {
        }, refresh: function () {
            this.render()
        }
    }, qn = {api: Yn, view: P.protoUI(Yn, Re, Ht, ds, pn.view, oe)}, Gn = {
        name: "form",
        defaults: {type: "form", autoheight: !0},
        k_: -1,
        y_: "webix_form",
        M_: !0,
        $init: function () {
            this.Tt.setAttribute("role", "form")
        },
        $getSize: function (t, i) {
            this.ae && !this.B.width && (t += Y.scrollSize);
            var e = pn.api.$getSize.call(this, t, i);
            return !this.B.scroll && this.B.autoheight || (e[2] = this.B.height || this.B.minHeight || 0, e[3] = this.B.height || 1e5), e
        }
    }, Xn = (P.protoUI(Gn, qn.view), {
        name: "fieldset",
        defaults: {borderless: !0, $cssName: "webix_fieldset", paddingX: 18, paddingY: 30},
        $init: function (t) {
            t.body = t.body || {};
            var i = this.defaults.$cssName;
            this.Tt.className += " " + i, this.Tt.innerHTML = "<fieldset><legend class='" + i + "_label" + (t.required ? " webix_required" : "") + "'></legend><div class='" + i + "_body'></div></fieldset>"
        },
        label_setter: function (t) {
            return this.Tt.firstChild.childNodes[0].innerHTML = t
        },
        getChildViews: function () {
            return [this.C_]
        },
        body_setter: function (t) {
            return (ti.pt = this).C_ = ei(t, this.Tt.firstChild.childNodes[1]), t
        },
        getBody: function () {
            return this.C_
        },
        resizeChildren: function () {
            if (this.C_) {
                var t = this.$width - this.B.paddingX, i = this.$height - this.B.paddingY, e = this.C_.$getSize(0, 0);
                e[0] > t && (t = e[0]), e[2] > i && (i = e[2]), this.C_.$setSize(t, i), this.resize()
            }
        },
        $getSize: function (t, i) {
            t += this.B.paddingX, i += this.B.paddingY;
            var e = this.C_.$getSize(t, i), s = this.D_ = zi.api.$getSize.call(this, t, i);
            return s[0] < e[0] && (s[0] = e[0]), s[2] < e[2] && (s[2] = e[2]), s[1] > e[1] && (s[1] = e[1]), s[3] > e[3] && (s[3] = e[3]), s[1] < s[0] && (s[1] = s[0]), s[3] < s[2] && (s[3] = s[2]), s
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && (t = Math.min(this.D_[1], t), i = Math.min(this.D_[3], i), this.C_.$setSize(t - this.B.paddingX, i - this.B.paddingY))
        }
    }), Jn = {api: Xn, view: P.protoUI(Xn, zi.view)}, Kn = {
        name: "forminput",
        defaults: {$cssName: "webix_forminput", labelWidth: 80, labelAlign: "left", paddingY: 0, paddingX: 0},
        setValue: function (t) {
            this.C_.setValue ? this.C_.setValue(t) : this.C_.setValues && this.C_.setValues(t)
        },
        focus: function () {
            return !!this.C_.focus && this.C_.focus()
        },
        getValue: function () {
            return this.C_.getValue ? this.C_.getValue() : this.C_.getValues ? this.C_.getValues() : void 0
        },
        getBody: function () {
            return this.C_
        },
        $skin: function () {
            this.I_ = Ei.inputPadding, this.A_ = Ei.inputSpacing, this.F_ = Ei.labelTopHeight
        },
        $init: function (t) {
            if (this.$ready.push(function () {
                var t = this.Tt.firstChild.childNodes[0], i = this.Tt.firstChild.childNodes[1];
                if (!this.B.label || !this.B.labelWidth && "top" != this.B.labelPosition) return t.style.display = "none", i.style.padding = "0 " + this.A_ / 2 + "px", this.B.paddingX = this.A_, void (this.B.paddingY = 0);
                "top" == this.B.labelPosition ? (t.style.lineHeight = this.F_ - this.I_ + "px", t.className += " " + this.defaults.$cssName + "_label_top", i.style.padding = "0 " + this.A_ / 2 + "px") : t.style.width = this.B.paddingX - this.A_ / 2 + "px", t.style.textAlign = this.B.labelAlign, this.B.value && this.setValue(this.B.value)
            }), "top" != t.labelPosition) {
                var i = j(t.labelWidth) ? this.defaults.labelWidth : t.labelWidth;
                t.paddingX = i + this.A_
            } else t.paddingY = this.F_, t.paddingX = this.A_
        },
        labelWidth_setter: function (t) {
            return t ? Math.max(t, Ei.dataPadding) : 0
        },
        setBottomText: function (t) {
            var i = this.B;
            if (
                void 0 !== t) {
                if (i.bottomLabel == t) return;
                i.bottomLabel = t
            }
            var e = (i.invalid ? i.invalidMessage : "") || i.bottomLabel;
            this.T_ && lt(this.T_), e && (this.$view.style.position = "relative", this.T_ = ct("div", {
                "class": "webix_inp_bottom_label",
                role: i.invalid ? "alert" : "",
                "aria-relevant": "all",
                style: "position:absolute; bottom:0px; padding:2px 0; background: white; left:" + (this.A_ / 2 + (i.label ? i.labelWidth : 0)) + "px; "
            }, e), this.Tt.appendChild(this.T_))
        }
    };
    P.protoUI(Kn, Jn.view);

    function Zn(t) {
        return t.tagName ? t.tagName.toLowerCase() : null
    }

    function Qn(t, i) {
        if (!t.getAttribute) return null;
        var e = t.getAttribute(i);
        return e ? e.toLowerCase() : null
    }

    function th() {
        var t = Zn(this);
        return ih[t] ? ih[t](this) : ih.other(this)
    }

    var ih = {
        radio: function (t) {
            for (var i = 0; i < t.length; i++) if (t[i].checked) return t[i].value;
            return ""
        }, input: function (t) {
            return "checkbox" === Qn(t, "type") ? t.checked : t.value
        }, textarea: function (t) {
            return t.value
        }, select: function (t) {
            var i = t.selectedIndex;
            return t.options[i].value
        }, other: function (t) {
            return t.innerHTML
        }
    };

    function eh(t) {
        var i = Zn(this);
        return sh[i] ? sh[i](this, t) : sh.other(this, t)
    }

    var sh = {
        radio: function (t, i) {
            for (var e = 0; e < t.length; e++) t[e].checked = t[e].value == i
        }, input: function (t, i) {
            "checkbox" === Qn(t, "type") ? t.checked = !!i : t.value = i
        }, textarea: function (t, i) {
            t.value = i
        }, select: function (t, i) {
            t.value = i, -1 === t.selectedIndex && (t.value = t.firstElementChild.value)
        }, other: function (t, i) {
            t.innerHTML = i
        }
    }, nh = {
        name: "htmlform", $init: function (t) {
            this.elements = {}, this.V_ = !1, t.content && (t.container == t.content || !t.container && t.content == document.body) && (this.z_ = !0)
        }, content_setter: function (t) {
            if (t = C(t), this.z_) for (; 1 < t.childNodes.length;) this.Tt.childNodes[0].appendChild(t.childNodes[0]); else this.Tt.childNodes[0].appendChild(t);
            return this.H_(), !0
        }, render: function () {
            xn.api.render.apply(this, arguments), this.H_()
        }, H_: function () {
            var t = this.Tt.querySelectorAll("[name]");
            this.elements = {};
            for (var i = 0; i < t.length; i++) {
                var e = t[i], s = Qn(e, "name");
                if (s) {
                    var n = "button" === Zn(e), h = Qn(e, "type"), r = n || "button" === h || "submit" === h;
                    if ("radio" === h) {
                        var o = this.elements[s] || [];
                        o.tagName = "radio", o.push(e), e = o
                    }
                    (this.elements[s] = e).getValue = th, e.setValue = eh, e.$allowsClear = !r
                }
            }
            return this.elements
        }, Yh: function (t, i) {
            this.Oh(t, i);
            var e = this.Tt.querySelector('[name="' + t + '"]');
            e && xt(e, "invalid")
        }, Oh: function (t) {
            var i = this.Tt.querySelector('[name="' + t + '"]');
            i && yt(i, "invalid")
        }, focus: function (t) {
            if (!t && this.$view.contains(document.activeElement)) return !1;
            ds.focus.apply(this, arguments)
        }
    }, hh = (P.protoUI(nh, xn.view, ds), {
        name: "property", $init: function () {
            this.Vi.className += " webix_property", this.Vi.setAttribute("role", "listbox"), this.zt = [], this.attachEvent("onAfterEditStart", function (t) {
                xt(this.getItemNode(t), "webix_focused")
            }), this.attachEvent("onAfterEditStop", function (t, i) {
                yt(this.getItemNode(i.config.id), "webix_focused")
            })
        }, defaults: {nameWidth: 100, editable: !0}, on_render: {
            checkbox: function (t) {
                return "<input type='checkbox' class='webix_property_check' " + (t ? "checked" : "") + ">"
            }, color: function (t) {
                return '<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:' + (t || "#FFFFFF") + ';"></div><span>' + t + "</span></div>"
            }
        }, on_edit: {label: !1}, Eo: "webix_f_id", on_click: {
            webix_property_check: function (t) {
                var i = this.locate(t);
                return this.getItem(i).value = !this.getItem(i).value, this.callEvent("onCheck", [i, this.getItem(i).value]), !1
            }
        }, on_dblclick: {}, registerType: function (t, i) {
            if (j(i.template) || (this.on_render[t] = i.template), j(i.editor) || (this.on_edit[t] = i.editor), !j(i.click)) for (var e in i.click) this.on_click[e] = i.click[e]
        }, elements_setter: function (t) {
            this.R_ = {};
            for (var i = 0; i < t.length; i++) {
                var e = t[i];
                "multiselect" == e.type && (e.optionslist = !0), e.id = e.id || V(), e.label = e.label || "", e.value = e.value || "", this.R_[e.id] = i, this.gu(t[i])
            }
            return t
        }, showItem: function (t) {
            He.showItem.call(this, t)
        }, locate: function () {
            return vt(arguments[0], this.Eo)
        }, getItemNode: function (t) {
            return this.Q.childNodes[this.R_[t]]
        }, getItem: function (t) {
            return this.B.elements[this.R_[t]]
        }, _a: function (t) {
            var i = this.getItem(t).type;
            if ("checkbox" == i) return "inline-checkbox";
            var e = this.on_edit[i];
            return !1 !== e && (e || i)
        }, ga: function (t) {
            return this.getItem(t)
        }, Da: function (t, i, e) {
            var s = this.R_[t.id], n = this.B.elements;
            if (e) {
                for (var h = s + 1; h < n.length; h++) if (i.call(this, n[h].id)) return n[h].id
            } else for (var r = s - 1; 0 <= r; r--) if (i.call(this, n[r].id)) return n[r].id;
            return null
        }, updateItem: function (t, i) {
            i = i || {};
            var e = this.getItem(t);
            e && P.extend(e, i, !0), this.refresh()
        }, ot: function (t) {
            var i = this.getItemNode(t);
            return {
                left: i.offsetLeft + this.B.nameWidth,
                top: i.offsetTop,
                height: i.firstChild.offsetHeight,
                width: this.B_,
                parent: this.Vi
            }
        }, P_: function () {
            for (var t = this.B.elements, i = 0; i < t.length; i++) t[i].value = ""
        }, clear: function () {
            this.P_(), this.j_ = {}, this.refresh()
        }, setValues: function (t, i) {
            var e = this;
            for (var s in this.B.complexData && (t = Rt.collapseNames(t, "", {}, function (t) {
                return j(e.R_[t])
            })), i || this.P_(), t) {
                var n = this.getItem(s);
                n && (n.value = t[s])
            }
            this.j_ = t, this.refresh()
        }, getValues: function () {
            for (var t = l(this.j_ || {}), i = 0; i < this.B.elements.length; i++) {
                var e = this.B.elements[i];
                "label" != e.type && (t[e.id] = e.value)
            }
            return this.B.complexData && (t = Rt.expandNames(t)), t
        }, refresh: function () {
            this.render()
        }, $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && (this.B_ = this.oe - this.B.nameWidth, this.render())
        }, $getSize: function (t, i) {
            if (this.B.autoheight) {
                var e = this.B.elements.length;
                this.B.height = Math.max(this.type.height * e, this.B.minHeight || 0)
            }
            return zi.api.$getSize.call(this, t, i)
        }, Z: function () {
            var t = [], i = this.B.elements;
            if (i) for (var e = 0; e < i.length; e++) {
                var s = i[e];
                s.css && "object" == M(s.css) && (s.css = ot(s.css));
                var n = '<div webix_f_id="' + s.id + '"' + ("label" !== s.type ? 'role="option" tabindex="0"' : "") + ' class="webix_property_line ' + (s.css || "") + '">';
                if ("label" == s.type) t[e] = n + "<div class='webix_property_label_line'>" + s.label + "</div></div>"; else {
                    var h, r = this.on_render[s.type],
                        o = "<div class='webix_property_label' style='width:" + this.B.nameWidth + "px'>" + s.label + "</div><div class='webix_property_value' style='width:" + this.B_ + "px'>";
                    h = s.collection || s.options ? s.template(s) : s.format ? s.format(s.value) : s.value, r && (h = r.call(this, s.value, s)), t[e] = n + o + h + "</div></div>"
                }
            }
            return t.join("")
        }, type: {height: 24, templateStart: Wt(""), templateEnd: Wt("</div>")}, $skin: function () {
            this.type.height = Ei.propertyItemHeight
        }
    }), rh = (P.protoUI(hh, Bi, we, Ie, Ae, Re, Hi, Ht, c, zi.view), {
        name: "calendar",
        defaults: {
            date: new Date,
            select: !1,
            navigation: !0,
            monthSelect: !0,
            weekHeader: !0,
            monthHeader: !0,
            weekNumber: !1,
            skipEmptyWeeks: !1,
            calendarHeader: "%F %Y",
            events: Ys.isHoliday,
            minuteStep: 5,
            timeIcon: "wxi-clock",
            icons: !1,
            timepickerHeight: 30,
            headerHeight: 30,
            dayTemplate: function (t) {
                return t.getDate()
            },
            width: 260,
            height: 250
        },
        dayTemplate_setter: Wt,
        calendarHeader_setter: Ys.dateToStr,
        calendarTime_setter: function (t) {
            return this.E_ = t, Ys.dateToStr(t)
        },
        date_setter: function (t) {
            return this.Md(t)
        },
        maxDate_setter: function (t) {
            return this.Md(t)
        },
        minDate_setter: function (t) {
            return this.Md(t)
        },
        minTime_setter: function (t) {
            return "string" == typeof t && (t = [(t = $.parseTimeFormatDate(t)).getHours(), t.getMinutes()]), t
        },
        maxTime_setter: function (t) {
            return "string" == typeof t && (t = [(t = $.parseTimeFormatDate(t)).getHours(), t.getMinutes()]), t
        },
        N_: function () {
            var t = "focus" + (Y.isIE ? "in" : "");
            Y.touch || Jt(this.$view, t, S(function (t) {
                var i = t.target.className,
                    e = -1 !== i.indexOf("webix_cal_day") ? "webix_cal_day" : -1 !== i.indexOf("webix_cal_block") ? "webix_cal_block" : "";
                if (300 < new Date - xi.Kt && 100 < new Date - xi.Zt && e) {
                    var s = t.relatedTarget;
                    if (s && !j(s.className)) {
                        var n = "webix_cal_day" == e ? this.L_(t.target) : this.O_(t.target);
                        this.Ya(n)
                    }
                }
            }, this), {capture: !Y.isIE})
        },
        $init: function () {
            this.Tt.className += " webix_calendar", this.Tt.setAttribute("role", "region"), this.Tt.setAttribute("aria-label", $.aria.calendar), this.U_ = {}, this.W_ = {}, this.dd = 0, this.N_(), this.attachEvent("onKeyPress", this.ve)
        },
        minuteStep_setter: function (t) {
            return Math.max(Math.min(t, 60), this.defaults.minuteStep)
        },
        type_setter: function (t) {
            return "time" == t ? (this.Y_ = !0, this.dd = -1) : "year" == t && (this.q_ = !0), t
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.render()
        },
        $getSize: function (t, i) {
            var e = this.B;
            if (e.cellHeight && !e.type) {
                var s = this.G_(e.date);
                e.height = e.cellHeight * s.X_ + e.headerHeight + (e.weekHeader ? Ei.calendarWeekHeaderHeight : 0) + (
                    e.timepicker || this.Sd ? e.timepickerHeight : 0) + 2 * (this.J_ + Ei.borderWidth)
            }
            return zi.api.$getSize.call(this, t, i)
        },
        moveSelection: function (t, i, e) {
            if (!this.config.master) {
                var s = this.getSelectedDate();
                this.config.multiselect && (s = s[0]);
                var n = Ys.copy(s || this.getVisibleDate());
                this.Ya(n, t, e)
            }
        },
        Ya: function (t, i, e) {
            var s = this.zd[this.dd].K_(t, i, this);
            if (!1 !== e) {
                var n = this.Tt.querySelector("." + s + "[tabindex='0']");
                n && n.focus()
            }
        },
        G_: function (t, i) {
            if (!this.Z_ || i) {
                var e = t.getMonth(), s = t.getFullYear(), n = new Date(s, e + 1, 1),
                    h = Ys.weekStart(new Date(s, e, 1)), r = Math.round((n.valueOf() - h.valueOf()) / 864e5),
                    o = this.B.skipEmptyWeeks ? Math.ceil(r / 7) : 6;
                this.Z_ = {Q_: e, tp: h, nd: n, X_: o}
            }
            return this.Z_
        },
        $skin: function () {
            Ei.calendar && (Ei.calendar.width && (this.defaults.width = Ei.calendar.width), Ei.calendar.height && (this.defaults.height = Ei.calendar.height), Ei.calendar.headerHeight && (this.defaults.headerHeight = Ei.calendar.headerHeight), Ei.calendar.timepickerHeight && (this.defaults.timepickerHeight = Ei.calendar.timepickerHeight)), this.J_ = Ei.layoutPadding.form
        },
        ip: function (t) {
            for (var i = this.G_(t), e = this.B, s = [], n = [], h = Infinity, r = this.oe - 2 * (this.J_ + Ei.borderWidth), o = this.ue - (e.monthHeader ? e.headerHeight : 0) - (e.weekHeader ? Ei.calendarWeekHeaderHeight : 0) - (e.timepicker || this.Sd ? e.timepickerHeight : 0) - 2 * (this.J_ + Ei.borderWidth), a = e.weekNumber ? 8 : 7, u = 0; u < a; u++) n[u] = Math.ceil(r / (a - u)), r -= n[u], h = Math.min(h, n[u]);
            for (var c = i.X_, f = 0; f < c; f++) s[f] = Math.ceil(o / (c - f)), o -= s[f], h = Math.min(h, s[f]);
            return [n, s, h]
        },
        icons_setter: function (t) {
            t ? "object" == M(t) ? this.Sd = t : this.Sd = this.ep : this.Sd = null
        },
        Sd: [],
        ep: [{
            template: function () {
                return "<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>" + $.calendar.today + "</span>"
            }, on_click: {
                webix_cal_icon_today: function () {
                    var t = new Date;
                    this.B.timepicker || (t = Ys.datePart(t)), this.setValue(t), this.callEvent("onTodaySet", [this.getSelectedDate()])
                }
            }
        }, {
            template: function () {
                return "<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>" + $.calendar.clear + "</span>"
            }, on_click: {
                webix_cal_icon_clear: function () {
                    this.setValue(""), this.callEvent("onDateClear", [this.getSelectedDate()])
                }
            }
        }],
        refresh: function () {
            this.render()
        },
        render: function () {
            this.dd = 0, this.sp = !1;
            var t = this.B;
            if (this.isVisible(t.id)) {
                this.np = Ys.datePart(new Date), this.callEvent("onBeforeRender", []);
                var i = this.B.date, e = this.G_(i, !0), s = this.ip(i), n = this.J_ + "px", h = s[0], r = s[1], o = "";
                if (t.monthHeader && (o += "<div class='webix_cal_month' style='margin:0 " + n + "'><span aria-live='assertive' aria-atomic='true' class='webix_cal_month_name" + (t.monthSelect && t.navigation ? "' role='button' tabindex='0'" : " webix_readonly'") + ">" + t.calendarHeader(i) + "</span>", t.navigation && (o += "<div role='button' tabindex='0' aria-label='" + $.aria.navMonth[0] + "' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='" + $.aria.navMonth[1] + "' class='webix_cal_next_button'></div>"), o += "</div>"), t.weekHeader && (o += "<div class='webix_cal_header' style='margin:0 " + n + "' aria-hidden='true'>" + this.hp(h) + "</div>"), o += "<div class='webix_cal_body' style='margin:0 " + n + "'>" + this.rp(h, r, e, s[2]) + "</div>", (this.B.timepicker || this.Sd) && (o += "<div class='webix_cal_footer' style='margin:0 " + n + "'>", this.B.timepicker && (o += this.op(i)), this.Sd && (o += this.kd()), o += "</div>"), this.Vi.innerHTML = o, this.Vi.firstChild.style.marginTop = n, "time" == this.B.type) {
                    var a = this.B.date;
                    a && ("string" == typeof a ? i = $.parseTimeFormatDate(a) : b(a) && (i.setHours(a[0]), i.setMinutes(a[1]))), this.ap(-1, i)
                } else "month" == this.B.type ? this.ap(1, i) : "year" == this.B.type && this.ap(2, i);
                this.callEvent("onAfterRender", [])
            }
        },
        kd: function (t) {
            for (var i = "<div class='webix_cal_icons'>", e = this.Sd, s = 0; s < e.length; s++) {
                if (e[s].template) {
                    var n = "function" == typeof e[s].template ? e[s].template : n(e[s].template);
                    i += n.call(this, t)
                }
                e[s].on_click && P.extend(this.on_click, e[s].on_click)
            }
            return i += "</div>"
        },
        op: function (t) {
            var i = this.B.calendarTime || $.timeFormatStr, e = this.B.timeIcon, s = "";
            if (this.B.master) {
                var n = _(ri(this.B.master).B.value);
                for (var h in Ys.equal(n.end, t) && (n.start = n.end), n
                    ) s += "<div role='button' tabindex='0' class='webix_range_time_" + h + " webix_cal_time'><span class='webix_icon " + e + "'></span> " + i(n[h]) + "</div>"
            } else s = "<div role='button' tabindex='0' class='webix_cal_time" + (this.Sd ? " webix_cal_time_icons" : "") + "'><span class='webix_icon " + e + "'></span> " + i(t) + "</div>";
            return s
        },
        hp: function (t) {
            var i = this.B, e = "", s = 0;
            i.weekNumber && (s = 1, e += "<div class='webix_cal_week_header' style='width: " + t[0] + "px;' >" + (i.calendarWeekHeader || "") + "</div>");
            for (var n = Ys.startOnMonday ? 1 : 0, h = 0; h < 7; h++) {
                var r = (n + h) % 7, o = $.calendar.dayShort[r];
                e += "<div day='" + r + "' style='width: " + t[h + s] + "px;' >" + o + "</div>"
            }
            return e
        },
        blockDates_setter: function (t) {
            return v(t, this.$scope)
        },
        cp: function (t, i) {
            var e = "", s = !1;
            return Ys.equal(t, this.np) && (e += " webix_cal_today"), this.fp(t) || (e += " webix_cal_day_disabled"), t.getMonth() != i.Q_ && (s = !0, e += " webix_cal_outside"), !s && this.lp(t) && (e += " webix_cal_select"), this.B.events && (e += " " + (this.B.events(t, s) || "")), e += " webix_cal_day"
        },
        rp: function (t, i, e, s) {
            for (var n = this.B, h = "", r = Ys.datePart(Ys.copy(e.tp)), o = n.weekNumber ? 1 : 0, a = Ys.getISOWeek(Ys.add(r, 2, "day", !0)), u = 0; u < i.length; u++) {
                h += "<div class='webix_cal_row' style='height:" + i[u] + "px;line-height:" + i[u] + "px'>", o && (!r.getMonth() && r.getDate() < 7 && (a = Ys.getISOWeek(Ys.add(r, 2, "day", !0))), h += "<div class='webix_cal_week_num' aria-hidden='true' style='width:" + t[0] + "px'>" + a + "</div>");
                for (var c = o; c < t.length; c++) {
                    var f = this.cp(r, e), l = this.B.dayTemplate.call(this, r), d = this.lp(r), v = "",
                        _ = r.getMonth() != e.Q_;
                    "object" == M(l) ? (v = l.aria || v, l = l.text) : v = Ys.dateToStr($.aria.dateFormat)(r), h += "<div day='" + c + "' role='gridcell' " + (_ ? "aria-hidden='true'" : "") + " aria-label='" + v + "' tabindex='" + (d && !_ ? "0" : "-1") + "' aria-selected='" + (d && !_ ? "true" : "false") + "' class='" + f + "' style='text-align:center; width:" + t[c] + "px'><span aria-hidden='true' class='webix_cal_day_inner' style='display:inline-block; " + this.vp(s, s) + "'>" + l + "</span></div>", (r = Ys.add(r, 1, "day")).getHours() && (r = Ys.datePart(r))
                }
                h += "</div>", a++
            }
            return h
        },
        Rd: function (t, i) {
            var e = this.B.date;
            i || (i = this.zd[this.dd].Vd), this.dd || (e = Ys.copy(e)).setDate(1);
            var s = Ys.add(e, t * i, "month", !0);
            this._p(e, s)
        },
        _p: function (t, i) {
            this.callEvent("onBeforeMonthChange", [t, i]) && (this.dd ? this.pp(i) : this.showCalendar(i), this.callEvent("onAfterMonthChange", [i, t]))
        },
        zd: {
            "-2": {
                mp: function (t) {
                    var i = this.B, e = i.date, s = !1, n = i.minTime ? i.minTime[0] : 0,
                        h = i.maxTime ? i.maxTime[0] + (i.maxTime[1] ? 1 : 0) : 24,
                        r = i.minTime && e.getHours() == n ? i.minTime[1] : 0,
                        o = i.maxTime && i.maxTime[1] && e.getHours() == h - 1 ? i.maxTime[1] : 60;
                    if (this.B.blockTime) {
                        var a = Ys.copy(e);
                        a.setMinutes(t), s = this.B.blockTime(a)
                    }
                    return t < r || o <= t || s
                }, bp: function (t, i) {
                    t.setMinutes(i)
                }, gp: function (t, i, e) {
                    if (!this.mp.call(e, t.getMinutes())) return t;
                    var s = e.B.minuteStep, n = Ys.add(t, "right" == i ? s : -s, "minute", !0);
                    return t.getHours() === n.getHours() ? this.gp(n, i, e) : void 0
                }
            }, "-1": {
                mp: function (t) {
                    var i = this.B, e = i.date, s = i.minTime ? i.minTime[0] : 0,
                        n = i.maxTime ? i.maxTime[0] + (i.maxTime[1] ? 1 : 0) : 24;
                    if (t < s || n <= t) return !0;
                    if (i.blockTime) {
                        var h = Ys.copy(e);
                        h.setHours(t);
                        for (var r = i.minTime && t == s ? i.minTime[1] : 0, o = i.maxTime && i.maxTime[1] && t == n - 1 ? i.maxTime[1] : 60, a = r; a < o; a += i.minuteStep) if (h.setMinutes(a), !i.blockTime(h)) return !1;
                        return !0
                    }
                }, bp: function (t, i) {
                    t.setHours(i)
                }, K_: function (t, i, e) {
                    var s, n, h = e.B.minuteStep;
                    return "bottom" === i || "top" === i ? (t.setHours("bottom" === i ? 23 : 0), t.setMinutes("bottom" === i ? 55 : 0), t.setSeconds(0), t.setMilliseconds(0), s = t) : "left" === i || "right" === i ? (n = "right" === i ? h : -h, "left" === i && t.getMinutes() < h && (n = 60 - h), "right" === i && t.getMinutes() >= 60 - h && (n = h - 60), n -= t.getMinutes() % h, s = e.zd[-2].gp(Ys.add(t, n, "minute"), i, e)) : "up" === i || "down" === i ? (n = "down" === i ? 1 : -1, "down" === i && 23 === t.getHours() && (n = -23), "up" === i && 0 === t.getHours() && (n = 23), s = this.gp(Ys.add(t, n, "hour"), i, e)) : !1 === i && (s = this.gp(t, i, e)), e.selectDate(s, !1), s && (e.pp(s), e.selectDate(s, !1)), "webix_cal_block" + ("left" === i || "right" === i ? "_min" : "")
                }, gp: function (t, i, e) {
                    if (!this.mp.call(e, t.getHours())) return t;
                    var s = Ys.add(t, "down" == i ? 1 : -1, "hour", !0);
                    return t.getDate() === s.getDate() ? this.gp(s, i, e) : void 0
                }
            }, 0: {
                Vd: 1, K_: function (t, i, e) {
                    var s = t;
                    return "pgup" === i || "pgdown" === i ? s = Ys.add(t,
                        "pgdown" === i ? 1 : -1, "month") : "bottom" === i ? s = new Date(t.getFullYear(), t.getMonth() + 1, 0) : "top" === i ? s = new Date(t.setDate(1)) : "left" === i || "right" === i ? s = Ys.add(t, "right" === i ? 1 : -1, "day") : "up" !== i && "down" !== i || (s = Ys.add(t, "down" === i ? 1 : -1, "week")), e.fp(s) || (s = e.gp(t, i)), s && e.selectDate(s, !0), "webix_cal_day"
                }
            }, 1: {
                mp: function (t, i) {
                    var e = !1, s = i.B.minDate, n = i.B.maxDate, h = i.B.date.getFullYear();
                    if (s) {
                        var r = s.getFullYear();
                        e = h < r || h == r && s.getMonth() > t
                    }
                    if (n && !e) {
                        var o = n.getFullYear();
                        e = o < h || h == o && n.getMonth() < t
                    }
                    return e
                }, el: function (t, i) {
                    return (t = Ys.monthStart(t)) < i.B.minDate ? t = Ys.copy(i.B.minDate) : t > i.B.maxDate && (t = Ys.copy(i.B.maxDate)), t
                }, wp: function (t) {
                    return t.getFullYear()
                }, xp: function (t) {
                    return $.calendar.monthShort[t]
                }, bp: function (t, i) {
                    i != t.getMonth() && t.setDate(1), t.setMonth(i)
                }, Vd: 12, K_: function (t, i, e) {
                    var s = t;
                    return "pgup" === i || "pgdown" === i ? s = Ys.add(t, "pgdown" === i ? 1 : -1, "year") : "bottom" === i ? s = new Date(t.setMonth(11)) : "top" === i ? s = new Date(t.setMonth(0)) : "left" === i || "right" === i ? s = Ys.add(t, "right" === i ? 1 : -1, "month") : "up" !== i && "down" !== i || (s = Ys.add(t, "down" === i ? 4 : -4, "month")), s = e.el(s), e.fp(s) || (s = e.gp(t, i)), s && (e.pp(s), e.selectDate(s, !1)), "webix_cal_block"
                }
            }, 2: {
                mp: function (t, i) {
                    t += i.yp;
                    var e = i.B.minDate, s = i.B.maxDate;
                    return !!(e && e.getFullYear() > t || s && s.getFullYear() < t)
                }, el: function (t, i) {
                    return (t = Ys.yearStart(t)) < i.B.minDate ? t = Ys.copy(i.B.minDate) : t > i.B.maxDate && (t = Ys.copy(i.B.maxDate)), t
                }, wp: function (t, i) {
                    var e = t.getFullYear();
                    return i.yp = e = e - e % 10 - 1, e + " - " + (e + 10 + 1)
                }, xp: function (t, i) {
                    return i.yp + t
                }, bp: function (t, i, e) {
                    t.setFullYear(e.yp + i)
                }, Vd: 120, K_: function (t, i, e) {
                    var s = t;
                    return "pgup" === i || "pgdown" === i ? s = Ys.add(t, "pgdown" === i ? 10 : -10, "year") : "bottom" === i ? s = new Date(t.setYear(e.yp + 10)) : "top" === i ? s = new Date(t.setYear(e.yp)) : "left" === i || "right" === i ? s = Ys.add(t, "right" === i ? 1 : -1, "year") : "up" !== i && "down" !== i || (s = Ys.add(t, "down" === i ? 4 : -4, "year")), s = e.el(s), e.fp(s) || (s = e.gp(t, i)), s && (e.pp(s), e.selectDate(s, !1)), "webix_cal_block"
                }
            }
        },
        Mp: function () {
            var t;
            if (this.zd[-1].mp.call(this, this.B.date.getHours())) for (t = 0; t < 24; t++) if (!this.zd[-1].mp.call(this, t)) {
                this.B.date.setHours(t);
                break
            }
            if (this.zd[-2].mp.call(this, this.B.date.getMinutes())) for (t = 0; t < 60; t += this.B.minuteStep) if (!this.zd[-2].mp.call(this, t)) {
                this.B.date.setMinutes(t);
                break
            }
        },
        pp: function (t) {
            var i, e, s, n, h, r, o, a, u, c, f, l, d = "", v = this.J_ + "px";
            if (h = 2 - ((i = this.B).weekHeader ? 0 : 1) - (i.monthHeader ? 0 : 1), c = this.zd[this.dd], r = this.Vi.childNodes, t && (i.date = t), a = i.type, this.sp || (this.Sp = this.Vi.offsetHeight - (i.monthHeader || this.Y_ ? i.headerHeight : 0) - 2 * (this.J_ + Ei.borderWidth), "year" != a && "month" != a && (this.Sp -= i.timepickerHeight), this.kp = r[h].offsetWidth, this.sp = 1), this.Y_) {
                s = this.Sp / 6;
                var _ = 6, p = (this.E_ || $.timeFormat).match(/%([a,A])/);
                for (p && _++, u = parseInt((this.kp - 3) / _, 10), l = Math.min(u, s), d += "<div class='webix_time_header' style='margin:0 " + v + "'>" + this.Cp(u, p) + "</div>", d += "<div  class='webix_cal_body' style='height:" + this.Sp + "px; margin:0 " + v + ";'>", this.Mp(), d += "<div class='webix_hours'>", o = i.date.getHours(), f = Ys.copy(i.date), n = 0; n < 24; n++) {
                    if (e = "", p && n % 4 == 0) {
                        var m = n ? 12 == n ? $.pm[0] : "" : $.am[0];
                        d += "<div class='webix_cal_block_empty" + e + "' style='" + this.vp(u, s) + "clear:both;'>" + m + "</div>"
                    }
                    this.zd[-1].mp.call(this, n) ? e += " webix_cal_day_disabled" : o == n && (e += " webix_selected"), f.setHours(n), d += "<div aria-label='" + Ys.dateToStr($.aria.hourFormat)(f) + "' role='gridcell' tabindex='" + (o == n ? "0" : "-1") + "' aria-selected='" + (o == n ? "true" : "false") + "' class='webix_cal_block" + e + "' data-value='" + n + "' style='" + this.vp(u, s) + (n % 4 != 0 || p ? "" : "clear:both;") + "'><span style='display:inline-block; " + this.vp(l, l) + "'>" + Ys.toFixed(p ? n && 12 != n ? n % 12 : 12 : n) + "</span></div>"
                }
                for (d += "</div>", d += "<div class='webix_minutes'>", o = i.date.getMinutes(), f = Ys.copy(i.date), n = 0; n < 60; n += i.minuteStep) e = "", this.zd[-2].mp.call(this, n) ? e = " webix_cal_day_disabled" : o == n && (e = " webix_selected"), f.setMinutes(n), d += "<div aria-label='" + Ys.dateToStr($.aria.minuteFormat)(f) + "' role='gridcell' tabindex='" + (o == n ? "0" : "-1") + "' aria-selected='" + (o == n ? "true" : "false") + "' class='webix_cal_block webix_cal_block_min" + e + "' data-value='" + n + "' style='" + this.vp(u, s) + (
                    n / i.minuteStep % 2 == 0 ? "clear:both;" : "") + "'><span style='display:inline-block; " + this.vp(l, l) + "'>" + Ys.toFixed(n) + "</span></div>";
                d += "</div>", d += "</div>", d += "<div class='webix_time_footer' style='margin:0 " + v + "'>" + this.$p() + "</div>", this.Vi.innerHTML = d, this.Vi.firstChild.style.marginTop = v
            } else {
                if (i.monthHeader) {
                    var b = r[0].childNodes, g = $.aria["nav" + (1 == this.dd ? "Year" : "Decade")];
                    b[0].innerHTML = c.wp(i.date, this), b[0].blur(), i.navigation && (b[1].setAttribute("aria-label", g[0]), b[2].setAttribute("aria-label", g[1]))
                } else c.wp(i.date, this);
                for (s = Math.floor(this.Sp / 3), u = Math.floor(this.kp / 4), l = Math.min(s, u), this.fp(i.date) && (o = 1 == this.dd ? i.date.getMonth() : i.date.getFullYear()), n = 0; n < 12; n++) {
                    e = o == (1 == this.dd ? n : c.xp(n, this)) ? " webix_selected" : "", c.mp(n, this) && (e += " webix_cal_day_disabled");
                    var w = $.aria[(1 == this.dd ? "month" : "year") + "Format"];
                    d += "<div role='gridcell' aria-label='" + Ys.dateToStr(w)(i.date) + "' tabindex='" + (-1 !== e.indexOf("selected") ? "0" : "-1") + "' aria-selected='" + (-1 !== e.indexOf("selected") ? "true" : "false") + "' class='webix_cal_block" + e + "' data-value='" + n + "' style='" + this.vp(u, s) + "'><span style='display:inline-block; " + this.vp(l, l) + "'>" + c.xp(n, this) + "</span></div>"
                }
                i.weekHeader && (r[h - 1].style.display = "none", 1 === h && (r[h].style.marginTop = v)), r[h].innerHTML = d, "year" != a && "month" != a ? r[h + 1] ? r[h + 1].innerHTML = this.$p() : this.Vi.innerHTML += "<div class='webix_time_footer' style='margin:0 " + v + "'>" + this.$p() + "</div>" : r[h + 1] && (r[h + 1].style.display = "none"), r[h].style.height = this.Sp + "px"
            }
        },
        vp: function (t, i) {
            return "width:" + t + "px; height:" + i + "px; line-height:" + i + "px;"
        },
        $p: function () {
            return "<input type='button' style='width:100%' class='webix_cal_done' value='" + $.calendar.done + "'>"
        },
        Cp: function (t, i) {
            var e = 2 * t;
            return "<div class='webix_cal_hours' style='width:" + t * (i ? 5 : 4) + "px'>" + $.calendar.hours + "</div><div class='webix_cal_minutes' style='width:" + e + "px'>" + $.calendar.minutes + "</div>"
        },
        ap: function (t, i) {
            var e = this.dd;
            this.callEvent("onBeforeZoom", [t, e]) && ((this.dd = t) ? this.pp(i) : this.showCalendar(i), this.callEvent("onAfterZoom", [t, e]))
        },
        el: function (t) {
            return !this.fp(t) && this.zd[this.dd].el && (t = this.zd[this.dd].el(t, this)), t
        },
        Dp: function (t) {
            var i = this.O_(t), e = this.dd - (this.q_ ? 0 : 1);
            if (i = this.el(i), this.fp(i)) {
                this.ap(e, i);
                var s = this.B.type;
                "month" != s && "year" != s || this.Ip(i)
            }
        },
        Ip: function (t, i) {
            this.callEvent("onBeforeDateSelect", [t]) && (this.selectDate(t, !0, i), this.callEvent("onDateSelect", [t]), this.callEvent("onAfterDateSelect", [t]))
        },
        L_: function (t) {
            var i = rt(t) - (this.B.weekNumber ? 1 : 0), e = rt(t.parentNode),
                s = Ys.add(this.G_().tp, i + 7 * e, "day", !0);
            return this.B.timepicker && (s.setHours(this.B.date.getHours()), s.setMinutes(this.B.date.getMinutes())), s
        },
        O_: function (t) {
            var i = 1 * t.getAttribute("data-value"),
                e = -1 != t.className.indexOf("webix_cal_block_min") ? this.dd - 1 : this.dd, s = this.B.date,
                n = Ys.copy(s);
            return this.zd[e].bp(n, i, this), n
        },
        on_click: {
            webix_cal_prev_button: function () {
                this.Rd(-1)
            }, webix_cal_next_button: function () {
                this.Rd(1)
            }, webix_cal_day_disabled: function () {
                return !1
            }, webix_cal_outside: function () {
                if (!this.B.navigation) return !1
            }, webix_cal_day: function (t, i, e) {
                var s = this.L_(e), n = "touch" === this.B.multiselect || t.ctrlKey || t.metaKey;
                this.Ip(s, n)
            }, webix_cal_time: function () {
                if (this.zd[this.dd - 1]) {
                    this.Y_ = !0;
                    var t = this.dd - 1;
                    this.ap(t)
                }
            }, webix_range_time_start: function () {
                ri(this.B.master).Td = "start"
            }, webix_range_time_end: function () {
                ri(this.B.master).Td = "end"
            }, webix_cal_done: function () {
                var t = Ys.copy(this.B.date);
                t = this.el(t), this.Ip(t)
            }, webix_cal_month_name: function () {
                if (this.B.navigation && (this.Y_ = !1, 2 != this.dd && this.B.monthSelect)) {
                    var t = Math.max(this.dd, 0) + 1;
                    this.ap(t)
                }
            }, webix_cal_block: function (t, i, e) {
                if (this.Y_) {
                    if (-1 !== e.className.indexOf("webix_cal_day_disabled")) return !1;
                    var s = this.O_(e);
                    this.pp(s)
                } else -1 == e.className.indexOf("webix_cal_day_disabled") && this.Dp(e)
            }
        },
        Md: function (t, i) {
            return t ? ("string" == typeof t && (t = i ? Ys.strToDate(i)(t) : $.parseFormatDate(t)), t) : Ys.datePart(new Date)
        },
        fp: function (t) {
            var i = this.B.blockDates && this.B.blockDates.call(this, t), e = this.B.minDate, s = this.B.maxDate;
            return !i && !(t < e || s < t)
        },
        gp: function (t, i) {
            var e,
                s = "top" === i || "left" === i || "pgup" === i || "up" === i ? -1 : 1, n = Ys.add(t, s, "day", !0);
            return this.fp(n) ? n : (0 === this.dd ? e = t.getMonth() === n.getMonth() : 1 === this.dd ? e = t.getFullYear() === n.getFullYear() : 2 === this.dd && (e = n.getFullYear() > this.yp && n.getFullYear() < this.yp + 10), e ? this.gp(n, i) : void 0)
        },
        showCalendar: function (t) {
            t = this.Md(t), this.B.date = t, this.render(), this.resize()
        },
        lp: function (t) {
            return t && this.W_[t.valueOf()]
        },
        getSelectedDate: function () {
            var t = [];
            for (var i in this.W_) t.push(Ys.copy(this.W_[i]));
            return this.config.multiselect ? t : t[0] || null
        },
        getVisibleDate: function () {
            return Ys.copy(this.B.date)
        },
        setValue: function (t) {
            this.selectDate(t, !0)
        },
        getValue: function (t) {
            var i = this.getSelectedDate();
            return t && (i = Ys.dateToStr(t)(i)), i
        },
        selectDate: function (t, i, e) {
            if (t && e && this.config.multiselect || (this.W_ = {}), t) {
                b(t) || (t = [t]);
                for (var s = 0; s < t.length; s++) {
                    var n = this.Md(t[s]), h = Ys.datePart(Ys.copy(n)).valueOf();
                    if (this.W_[h] && e ? delete this.W_[h] : this.W_[h] = n, !this.config.multiselect) break
                }
                t.length && i && this.showCalendar(t[0])
            }
            !1 !== i && this.render(), this.callEvent("onChange", [t])
        },
        locate: function () {
            return null
        }
    }), oh = (P.protoUI(rh, De, Ae, zi.view, c), {
        name: "colorboard",
        defaults: {
            template: '<div style="width:100%;height:100%;background-color:{obj.val}"></div>',
            palette: null,
            height: 220,
            width: 220,
            cols: 12,
            rows: 10,
            minLightness: .15,
            maxLightness: 1,
            navigation: !0
        },
        $init: function () {
            Jt(this.Tt, "click", S(function (t) {
                var i = vt(t, "webix_val");
                i && (this.setValue(i), this.callEvent("onItemClick", [this.B.value, t]), this.callEvent("onSelect", [this.B.value]))
            }, this)), this.$view.setAttribute("role", "grid"), this.Tt.setAttribute("aria-readonly", "true")
        },
        ou: function () {
            this.getValue() || this.moveSelection("up")
        },
        Ap: function (t) {
            var i = this.B.palette;
            t = (t || "").toUpperCase();
            for (var e = 0, s = i.length; e < s; e++) for (var n = 0, h = i[e].length; n < h; n++) if (i[e][n].toUpperCase() == t) return {
                row: e,
                col: n
            };
            return null
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.render()
        },
        getValue: function () {
            return this.B.value
        },
        Fp: function () {
            return this.Tt.firstChild
        },
        $prepareValue: function (t) {
            return (t = t ? t.toString(16) : "") && "#" != t.charAt(0) && /^[0-9a-fA-F]+$/.test(t) && (t = "#" + t), t
        },
        value_setter: function (t) {
            return this.$prepareValue(t)
        },
        setValue: function (t) {
            t = this.$prepareValue(t);
            var i = this.B.value;
            return this.B.value = t, this.$setValue(t, i), t
        },
        Tp: null,
        Vp: function () {
            if (this.Tp && this.Tp.parentNode) return this.Tp;
            var t = this.Tp = document.createElement("div");
            return t.className = "webix_color_selector", this.Tt.lastChild.appendChild(t), t
        },
        $setValue: function (t, i) {
            if (this.isVisible(this.B.id)) {
                var e, s, n, h, r, o = 0, a = 0;
                if (i && (n = this.Ap(i)), n || (n = {
                    row: 0,
                    col: 0
                }), this.Tt.lastChild.childNodes[n.row].childNodes[n.col].setAttribute("tabindex", "-1"), (n = this.Ap(t)) && (e = this.Tt.lastChild.childNodes[n.row].childNodes[n.col]), !(e && e.parentNode && e.parentNode.parentNode)) return this.Tp && (this.Tp.style.left = "-100px"), void this.Tt.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex", "0");
                h = e.parentNode, o = e.offsetLeft - h.offsetLeft, a = -(this.$height - (e.offsetTop - h.parentNode.offsetTop)), e.setAttribute("tabindex", "0"), e.setAttribute("aria-selected", "true"), e.setAttribute("tabindex", "0"), e.setAttribute("aria-selected", "true"), s = this.Vp(), r = ["left:" + o + "px", "top:" + a + "px", "width:" + e.style.width, "height:" + e.style.height].join(";"), "undefined" != typeof s.style.cssText ? s.style.cssText = r : s.setAttribute("style", r)
            }
        },
        zp: function (t) {
            function s(t) {
                return Pe.toHex(t, 2)
            }

            function h(t, i, e) {
                return "#" + s(Math.floor(t)) + s(Math.floor(i)) + s(Math.floor(e))
            }

            function i(t, i, e) {
                var s, n, h;
                if (i) {
                    var r = e < .5 ? e * (1 + i) : e + i - e * i, o = 2 * e - r;
                    s = a(o, r, t + 1 / 3), n = a(o, r, t), h = a(o, r, t - 1 / 3)
                } else s = n = h = e;
                return {r: 255 * s, g: 255 * n, b: 255 * h}
            }

            function a(t, i, e) {
                return e < 0 && (e += 1), 1 < e && (e -= 1), e < 1 / 6 ? t + 6 * (i - t) * e : e <= .5 ? i : e < 2 / 3 ? t + (i - t) * (2 / 3 - e) * 6 : t
            }

            var e = [], n = t.rows - 1, r = 1 / t.cols, o = (t.maxLightness - t.minLightness) / n, u = null;
            e.push(function _(t) {
                for (var i = [], e = 255, s = e / t, n = 0; n < t; n++) e = Math.round(0 < e ? e : 0), i.push(h(e, e, e)), e -= s;
                return i[i.length - 1] = "#000000", i
            }(t.cols));
            for (var c = 0, f = t.minLightness; c < n; c++) {
                u = [];
                for (var l = 0, d = 0; l < t.cols; l++) {
                    var v = i(d, 1, f);
                    u.push(h(v.r, v.g, v.b)), d += r
                }
                e.push(u), f += o
            }
            this.B.palette = e
        },
        moveSelection: function (t, i, e) {
            var s, n, h = this.getValue();
            if (h && (s = this.Ap(h)), s || (s = {
                row: 0,
                col: 0
            }), s && ("up" == t || "down" == t ? s.row = s.row + ("up" == t ? -1 : 1) : "right" == t || "left" == t ? s.col = s.col + ("right" == t ? 1 : -1) : "top" == t ? s.row = s.col = 0 : "bottom" == t && (s.row = this.Tt.lastChild.querySelectorAll(".webix_color_row").length - 1, s.col = this.Tt.lastChild.childNodes[s.row].childNodes.length - 1), s.row = Math.max(s.row, 0), 0 <= s.row && (n = this.Tt.lastChild.childNodes[s.row].childNodes[s.col]), n && (h = n.getAttribute("webix_val"), this.setValue(h), this.callEvent("onSelect", [this.B.value]), !1 !== e))) {
                var r = this.Tt.querySelector("div[tabindex='0']");
                r && r.focus()
            }
        },
        render: function () {
            if (this.isVisible(this.B.id)) {
                this.B.palette || this.zp(this.B);
                var t = this.B.palette;
                this.callEvent("onBeforeRender", []);
                for (var h = Wt('<div role=\'gridcell\' tabindex=\'-1\' aria-label="{obj.val}" style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">' + (this.B.template || "") + "</div>"), r = {
                    width: 0,
                    height: 0,
                    val: 0
                }, i = this.$width, e = this.$height, s = [], n = '<div class="webix_color_palette"role="rowgroup">', o = "object" == M(t[0]) ? t[0] : t, a = 0; a < o.length; a++) s[a] = Math.floor(i / (o.length - a)), i -= s[a];
                if ("object" == M(t[0])) for (var u = 0; u < t.length; u++) {
                    var c = Math.floor(e / (t.length - u));
                    e -= c, n += f(t[u], s, c)
                } else n += f(t, s, e);
                n += "</div>", this.Tt.innerHTML = n, this.Tp = null, this.B.value ? this.$setValue(this.B.value) : this.Tt.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex", "0"), this.callEvent("onAfterRender", [])
            }

            function f(t, i, e) {
                for (var s = '<div class="webix_color_row" role="row">', n = 0; n < t.length; n++) r.width = i[n], r.height = e, r.val = t[n], s += h(r);
                return s += "</div>"
            }
        },
        refresh: function () {
            this.render()
        }
    }), ah = (P.protoUI(oh, De, zi.view, c), {
        name: "button",
        touchable: !0,
        $skin: function () {
            this.defaults.height = Ei.buttonHeight || Ei.inputHeight
        },
        defaults: {
            template: function (t, i) {
                var e = i.$renderInput(t, i);
                return (t.badge || 0 === t.badge) && (e = e.replace("</button>", "<span class='webix_badge'>" + t.badge + "</span></button>")), "<div class='webix_el_box' style='width:" + t.awidth + "px; height:" + t.aheight + "px'>" + e + "</div>"
            }, label: "", value: "", borderless: !0
        },
        $renderInput: function (t) {
            return "<button type='button' " + (t.popup ? "aria-haspopup='true'" : "") + " class='webix_button'>" + (t.label || t.value) + "</button>"
        },
        $init: function (t) {
            this.Tt.className += " webix_control webix_el_" + (this.$cssName || this.name), this.Hp(t), this.data = this.B, this.Q = this.Tt, this.$ready.push(function () {
                this.Rp(this.config)
            })
        },
        hotkey_setter: function (t) {
            var e = this;
            this.Bp(t, function (t, i) {
                e.isVisible() && (wt(e.$view.firstChild, "MouseEvents", "click"), bt(i))
            })
        },
        Hp: function (t) {
            t.css && this.Pp(t.css) && (!this.defaults.css || this.Pp(this.defaults.css)) || (this.Tt.className += " webix_secondary")
        },
        Pp: function (t) {
            if ("string" == typeof t) {
                for (var i in {
                    webix_danger: 1,
                    webix_transparent: 1,
                    webix_primary: 1
                }) if (-1 !== t.indexOf(i)) return !0
            }
            return !1
        },
        Bp: function (t, i, e) {
            var s = xi.addHotKey(t, i, e);
            this.attachEvent("onDestruct", function () {
                xi.removeHotKey(s, i, e)
            })
        },
        type_setter: function (t) {
            return this.vd[t] && (this.$renderInput = Wt(this.vd[t])), t
        },
        jp: !1,
        vd: {
            image: "<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'>#label#</button>",
            imageTop: "<button type='button' class='webix_button webix_img_btn_top'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'></div><div class='webix_img_btn_text'>#label#</div></button>",
            icon: "<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;'></span>#label#</button>",
            iconTop: "<button type='button' class='webix_button webix_img_btn_top' style='width:100%;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"
        },
        Ep: function () {
            for (var t = [], i = ["input", "select", "textarea", "button"], e = 0; e < i.length; e++) for (var s = this.$view.getElementsByTagName(i[e]), n = 0; n < s.length; n++) t.push(s[n]);
            return t
        },
        disable: function () {
            var t, i, e = this.Fp();
            if (
                Fi.api.disable.apply(this, arguments), e && -1 == e.className.indexOf(" webix_disabled_box")) {
                e.className += " webix_disabled_box";
                var s = this.Ep();
                for (t = 0; t < s.length; t++) s[t].setAttribute("disabled", !0);
                if ((i = this.getInputNode()) && "div" == i.tagName.toLowerCase() && (this.Np = i.getAttribute("tabIndex"), i.removeAttribute("tabIndex")), "top" == this.B.labelPosition) {
                    var n = this.Q.firstChild;
                    n && (n.className += " webix_disabled_top_label")
                }
            }
        },
        enable: function () {
            Fi.api.enable.apply(this, arguments);
            var t, i = this.Fp();
            if (i) {
                i.className = i.className.replace(" webix_disabled_box", "");
                for (var e = this.Ep(), s = 0; s < e.length; s++) e[s].removeAttribute("disabled");
                if ((t = this.getInputNode()) && !j(this.Np) && t.setAttribute("tabIndex", this.Np), "top" == this.B.labelPosition) {
                    var n = this.Q.firstChild;
                    n && (n.className = n.className.replace(" webix_disabled_top_label", ""))
                }
            }
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.render()
        },
        setValue: function (t) {
            t = this.$prepareValue(t);
            var i = this.B.value;
            if (this.$compareValue(i, t)) return this.Lp && t != this.$getValue() && this.$setValue(t), !1;
            this.B.value = t, this.Lp && this.$setValue(t), this.callEvent("onChange", [t, i])
        },
        $compareValue: function (t, i) {
            return "number" == typeof i && (i = i.toString()), "number" == typeof t && (t = t.toString()), t == i
        },
        $prepareValue: function (t) {
            return 0 === t ? "0" : (t || "").toString()
        },
        Op: function (t) {
            return t
        },
        value_setter: function (t) {
            return this.$prepareValue(t)
        },
        $setValue: function (t) {
            var i = this.getInputNode();
            i && !this.vd[this.B.type] && (t = this.B.label || t, "BUTTON" == i.tagName ? i.innerHTML = t : i.value = t)
        },
        getValue: function () {
            var t = this.Lp ? this.$getValue() : this.B.value;
            return void 0 === t ? "" : t
        },
        $getValue: function () {
            return this.B.value || ""
        },
        focus: function () {
            if (!xi.canFocus(this)) return !1;
            var t = this.getInputNode();
            t && t.focus && t.focus()
        },
        blur: function () {
            var t = this.getInputNode();
            t && t.blur && t.blur()
        },
        getInputNode: function () {
            return this.Q.getElementsByTagName("input")[0] || this.Q.getElementsByTagName("button")[0]
        },
        Fp: function () {
            for (var t = 0; t < this.Q.childNodes.length; t++) if (0 <= this.Q.childNodes[t].className.indexOf("webix_el_box")) return this.Q.childNodes[t];
            return null
        },
        xe: function (t, i) {
            var e = i.target || i.srcElement, s = this.Fp();
            return s && s.contains(e) ? this.B : null
        },
        Up: Math.sqrt(2),
        Rp: function (t) {
            if ((t = t || this.B).autowidth) {
                var i = Mt(t.value || t.label || "", "webixbutton").width + (t.badge || 0 === t.badge ? 2 * Mt(t.badge, "webix_badge").width - 32 : 0) + ("icon" === t.type ? 24 : 0) + ("image" === t.type ? t.height - Ei.inputPadding : 0);
                i = Math.max(t.minWidth || 0, i), t.width = Math.min(t.maxWidth || Infinity, i)
            }
        },
        Wp: function () {
            this.Yp = this.B.inputWidth || (2 < this.oe - this.B.width ? this.B.width : 0) || this.oe, this.qp = this.B.inputHeight || this.Gp || 0
        },
        resize: function () {
            return this.Rp(), zi.api.resize.apply(this, arguments)
        },
        render: function () {
            if (this.Wp(), this.B.awidth = this.Yp || this.oe, this.B.aheight = this.qp || this.ue, this.B.bheight = this.B.aheight + 2, this.B.cheight = this.B.aheight - 2 * Ei.inputPadding, this.B.dheight = this.B.cheight - 2, Yt.render.call(this)) {
                if (this.Lp = !0, this.jp && this.jp(), this.B.align) {
                    var t = this.Q.firstChild;
                    switch ("top" == this.B.labelPosition && t.nextSibling && (t = t.nextSibling), this.B.align) {
                        case"right":
                            t.style.cssFloat = "right";
                            break;
                        case"center":
                            t.style.display = "inline-block", t.parentNode.style.textAlign = "center";
                            break;
                        case"middle":
                            t.style.marginTop = Math.round((this.ue - this.qp) / 2) + "px";
                            break;
                        case"bottom":
                            t.style.marginTop = this.ue - this.qp + "px";
                            break;
                        case"left":
                            t.style.cssFloat = "left";
                            break;
                        default:
                            this.B.align
                    }
                }
                this.$render && this.$render(this.data), this.B.disabled && this.disable(), this.Qn && (this.Qn(this.data), this.Qn = 0)
            }
        },
        refresh: function () {
            this.render()
        },
        on_click: {
            Xp: function (t) {
                var i = vt(t, "button_id"), e = this.getOption(i);
                e && !e.disabled && this.callEvent("onBeforeTabClick", [i, t]) && (this.setValue(i), this.focus(), this.callEvent("onAfterTabClick", [i, t]))
            }, webix_all_segments: function (t, i) {
                this.on_click.Xp.call(this, t, i)
            }, webix_all_tabs: function (t, i) {
                this.on_click.Xp.call(this, t, i)
            }, webix_inp_counter_next: function () {
                this.B.readonly || this.next()
            }, webix_inp_counter_prev: function () {
                this.B.readonly || this.prev()
            }, webix_input_icon: function () {
                this.getInputNode().focus()
            },
            webix_inp_checkbox_border: function (t) {
                this.B.disabled || "DIV" == (t.target || t.srcElement).tagName || this.B.readonly || this.toggle()
            }, webix_inp_checkbox_label: function () {
                this.B.readonly || this.toggle()
            }, webix_inp_radio_border: function (t) {
                var i = vt(t, "radio_id"), e = this.getOption(i);
                e && !e.disabled && (this.setValue(i), this.focus())
            }, webix_tab_more_icon: function (t, i, e) {
                var s = this.getPopup();
                s.isVisible() ? s.hide() : (s.resize(), s.show(e, null, !0))
            }, webix_tab_close: function (t) {
                var i = vt(t, "button_id"), e = this.getOption(i);
                return e && !e.disabled && this.callEvent("onBeforeTabClose", [i, t]) && this.removeOption(i), !1
            }
        },
        Jp: function (t) {
            this.name, b(t), this.name;
            for (var i = 0; i < t.length; i++) t[i].text, t[i].label, "string" == typeof t[i] ? t[i] = {
                id: t[i],
                value: t[i]
            } : (j(t[i].id) && (t[i].id = t[i].value), j(t[i].value) && (t[i].value = t[i].id));
            return t
        },
        Kp: function (t) {
            var i = t ? t.placeholder : this.B.placeholder;
            return i ? "<span class='webix_placeholder'>" + i + "</span>" : ""
        }
    }), uh = {api: ah, view: P.protoUI(ah, zi.view, Bi, Yt, yi, c)}, ch = {
        name: "label",
        defaults: {template: "<div class='webix_el_box' style='width:#awidth#px;height:#aheight#px;line-height:#cheight#px'>#label#</div>"},
        $skin: function () {
            uh.api.$skin.call(this), this.defaults.height = Ei.inputHeight
        },
        focus: function () {
            return !1
        },
        Fp: function () {
            return this.Q.firstChild
        },
        setHTML: function (t) {
            this.B.label = t, this.refresh()
        },
        setValue: function (t) {
            this.B.label = t, uh.api.setValue.apply(this, arguments)
        },
        $setValue: function (t) {
            this.Q.firstChild.innerHTML = t
        },
        $render: function (t) {
            "right" === t.align && (this.Q.firstChild.style.textAlign = "right")
        },
        jp: !1,
        Hp: function () {
        },
        Rp: function (t) {
            var i = "webix_el_box webixlabel" + (this.queryView("toolbar", "parent") ? " webixtoolbarlabel" : "");
            (t = t || this.B).autowidth && (t.width = Mt(t.label, i).width)
        }
    }, fh = (P.protoUI(ch, uh.view), {});
    for (var lh in xi.Qt) fh[xi.Qt[lh]] = lh;
    var dh = {9: "tab", 38: "up", 40: "down", 37: "left", 39: "right"}, vh = {
        $init: function (t) {
            var i = this.defaults.pattern || t.pattern, e = this.defaults.format || t.format;
            t.value = j(t.value) ? "" : t.value, (i || e && !this.format_setter) && (this.attachEvent("onKeyPress", function (t, i) {
                i.ctrlKey || i.altKey || this.B.readonly || this.Zp || (105 < t && t < 112 && (t -= 64), fh[t] && 8 !== t && 46 !== t ? dh[t] || bt(i) : (bt(i), this.Qp(i, t)))
            }), this.attachEvent("onAfterRender", this.tm), this.getText = function () {
                return this.getInputNode().value
            }, this.Op = function (t, i) {
                return !1 === i ? this.im(t) : this.em(t)
            }, e && ("object" === M(e) ? this.Zp = e : (e = qs.getConfig(e), this.Zp = {
                parse: function (t) {
                    return qs.parse(t, e)
                }, edit: function (t) {
                    return qs.format(t, e)
                }
            })))
        }, pattern_setter: function (t) {
            var i = sn[t] || t;
            return "string" == typeof i && (i = {mask: i}), i.allow = i.allow || /[A-Za-z0-9]/g, this.sm(i), i
        }, nm: function () {
            this.config.validate = this.config.validate || S(function () {
                var t = this.getText(), i = t.replace(this.hm, "");
                return (t.toString().match(this.rm) || []).join("").length == i.length && t.length == this.B.pattern.mask.length
            }, this)
        }, tm: function () {
            var t = Y.isIE8 ? "propertychange" : "input";
            this.Zp || Jt(this.getInputNode(), t, function () {
                var t = (new Date).valueOf();
                this.$view.offsetWidth;
                (!this.om || 100 < t - this.om) && (this.om = t, this.$setValue(this.getText()))
            }, {bind: this}), Jt(this.getInputNode(), "blur", function () {
                this.ri()
            }, {bind: this})
        }, sm: function (t) {
            for (var i = t.mask, e = {}, s = "", n = 0, h = 0; h < i.length; h++) "#" === i[h] ? (e[h] = n, n++) : (e[h] = !1, -1 === s.indexOf(i[h]) && (s += "\\" + i[h]));
            this.rm = t.allow, this.hm = new RegExp("[" + s + "]", "g"), this.um = e, this.nm()
        }, Qp: function (t, i) {
            var e = this.getInputNode(), s = e.value, n = $t(e), h = "";
            8 == i || 46 == i ? n.start == n.end && (8 == i ? n.start-- : n.end++) : (h = String.fromCharCode(i), t.shiftKey || (h = h.toLowerCase())), s = s.substr(0, n.start) + h + s.substr(n.end), n = this.cm(h, s.length, n.start, i), this.fm = i, this.$setValue(s), Ct(e, n)
        }, cm: function (t, i, e, s) {
            if (t && t.match(this.rm) || 8 == s || 46 == s) e = t ? e + 1 : e, e = this.lm(e, s); else if (i - 1 == e && 8 !== s && 46 !== s) {
                var n = this.B.pattern.mask.indexOf("#", e);
                0 < n && (e += n)
            }
            return e
        }, lm: function (t, i) {
            var e = t - 1 * (46 !== i);
            return !1 === this.um[e] ? (t += 8 == i ? -1 : 1, this.lm(t, i)) : !1 === this.um[t] && 8 !== i ? this.lm(t + 1, i) - 1 : t
        }, im: function (t) {
            return this.Zp ? this.Zp.parse(t) : ((t = t || 0 === t ? t : "").toString().match(this.rm) || []).join("").replace(this.hm, "")
        }, em: function (t) {
            if (this.Zp
            ) return this.Zp.edit(this.Zp.parse(t));
            var i = this.im(t), e = this.B.pattern.mask, s = this.B.pattern.mask, n = this.um, h = !1, r = 0, o = 0,
                a = 0;
            for (var u in n) if (!1 !== n[u]) {
                if (!h) {
                    r = 1 * u;
                    var c = i[o = n[u]] || "", f = i[o + 1];
                    e = (c ? e.substr(0, r) : "") + c + (c && f ? e.substr(r + 1) : ""), f || (h = !0)
                }
                a++
            }
            var l = this.fm;
            if (l && 8 !== l || !l && a - 1 === o && e.length < s.length) if (i) {
                var d = r + 1;
                if ("#" !== s.charAt(d) && e.length < s.length) {
                    var v = s.indexOf("#", d);
                    v < 0 && (v = s.length), e += s.substr(d, v - d)
                }
            } else 46 !== l && (e += s.substr(0, s.indexOf("#")));
            return this.fm = null, e
        }
    }, _h = {
        name: "text", $allowsClear: !0, dm: function () {
            this.$allowsClear && (this.vm || Jt(this.getInputNode(), "change", this.ri, {bind: this}), this.B.suggest && ri(this.B.suggest).linkInput(this))
        }, ri: function () {
            var t = this.getValue(), i = this.setValue(t, !0);
            this.Zp && !1 === i && this.$setValue(t)
        }, $skin: function () {
            uh.api.$skin.call(this), this.defaults.height = Ei.inputHeight, this.defaults.inputPadding = Ei.inputPadding, this.A_ = Ei.inputSpacing, this.F_ = Ei.labelTopHeight
        }, $init: function (t) {
            "top" == t.labelPosition && j(t.height) && this.defaults.height && (t.height = this.defaults.height + (t.label ? this.F_ : 0)), this.zt = [], this.attachEvent("onAfterRender", this.dm), this.attachEvent("onBlur", function () {
                this.vm && this.vm()
            })
        }, $renderIcon: function () {
            var t = this.B;
            if (t.icon) {
                var i = t.aheight - 2 * t.inputPadding, e = (i - 18) / 2 - 1,
                    s = this.addSection ? "role='button' tabindex='0' aria-label='" + $.aria["multitext" + (t.mode || "") + "Section"] + "'" : "";
                return "<span style='height:" + (i - e) + "px;padding-top:" + e + "px;' class='webix_input_icon " + t.icon + "' " + s + "></span>"
            }
            return ""
        }, relatedView_setter: function (t) {
            return this.attachEvent("onChange", function () {
                var t = this.getValue(), i = this.B.relatedAction, e = this.B.relatedView, s = ri(e);
                if (!s) {
                    var n = this.getTopParentView();
                    n && n.$$ && (s = n.$$(e))
                }
                "enable" == i ? t ? s.enable() : s.disable() : t ? s.show() : s.hide()
            }), t
        }, validateEvent_setter: function (t) {
            return "blur" == t && this.attachEvent("onBlur", this.validate), "key" == t && this.attachEvent("onTimedKeyPress", this.validate), t
        }, validate: function () {
            var t = this.B.validate;
            !t && this.B.required && (t = re.isNotEmpty);
            var i = this.getFormView(), e = this.B.name, s = this.getValue(), n = {};
            return n[e] = s, !(t && !i.Wh(t, s, n, e))
        }, bottomLabel_setter: function (t) {
            return this.B.bottomPadding || (this.B.bottomPadding = 18), t
        }, _m: function () {
            var t = this.B.invalidMessage;
            return "function" == typeof t && t.call(this), t
        }, setBottomText: function (t, i) {
            var e = this.B;
            if (void 0 !== t) {
                if (e.bottomLabel == t) return;
                e.bottomLabel = t
            }
            var s = (e.invalid ? e.invalidMessage : "") || e.bottomLabel;
            s || e.bottomPadding || (e.inputHeight = 0), s && !e.bottomPadding ? (this.mm = 1, e.bottomPadding = e.bottomPadding || i || 18, this.render(), this.adjust(), this.resize()) : !s && this.mm ? (e.bottomPadding = this.mm = 0, e.height || this.render(), this.adjust(), this.resize()) : this.render()
        }, $getSize: function () {
            var t = zi.api.$getSize.apply(this, arguments), i = this.config.bottomPadding;
            return i && (t[2] += i, t[3] += i), t
        }, $setSize: function (t, i) {
            var e = this.B;
            if (zi.api.$setSize.call(this, t, i)) {
                if (!t || !i) return;
                "top" == e.labelPosition ? (e.inputHeight || (this.Gp = this.ue - (e.label ? this.F_ : 0) - (this.config.bottomPadding || 0)), e.labelWidth = 0) : e.bottomPadding && (e.inputHeight = this.ue - this.config.bottomPadding), this.render()
            }
        }, bm: function (t) {
            var i = (this.Yp || 0) - (t.label ? t.labelWidth : 0) - this.A_ - (t.iconWidth || 0);
            return i < 0 ? 0 : i
        }, gm: function (t, i) {
            var e = "x" + V(), s = i.bm(t), n = t.inputAlign || "left",
                h = this.B.aheight - 2 * Ei.inputPadding - 2 * Ei.borderWidth, r = t.text || t.value || this.Kp(t),
                o = "<div class='webix_inp_static' role='combobox' aria-label='" + Wt.escape(t.label) + "' tabindex='0'" + (t.readonly ? " aria-readonly='true'" : "") + (t.invalid ? "aria-invalid='true'" : "") + " onclick='' style='line-height:" + h + "px;width: " + s + "px; text-align: " + n + ";' >" + r + "</div>";
            return i.$renderInput(t, o, e)
        }, wm: function (t) {
            var i = "<" + t + (this.B.placeholder ? " placeholder='" + Wt.escape(this.B.placeholder) + "' " : " ");
            this.B.readonly && (i += "readonly='true' aria-readonly=''"), this.B.required && (i += "aria-required='true'"), this.B.invalid && (i += "aria-invalid='true'");
            var e = this.B.attributes;
            if (e) for (var s in e) i += s + "='" + e[s] + "' ";
            return i
        }, $renderLabel: function (t, i) {
            var e = "";
            if (t.label) {
                var s = "top" == this.B.labelPosition, n = "text-align:".concat(
                    t.labelAlign || "left", "; line-height:").concat(this.xm(s), "px; ");
                e = "<label style='" + (n += s ? "display:block;" : t.labelWidth ? "width:".concat(t.labelWidth, "px;") : "display:none;") + "' onclick='' for='" + i + "' class='webix_inp_" + (s ? "top_" : "") + "label " + (t.required ? "webix_required" : "") + "'>" + (t.label || "") + "</label>"
            }
            return e
        }, xm: function (t) {
            return t ? this.F_ - this.B.inputPadding : this.B.aheight - 2 * this.B.inputPadding
        }, $renderInput: function (t, i, e) {
            var s = t.inputAlign || "left", n = "top" == t.labelPosition, h = this.bm(t);
            e = e || V();
            var r = this.$renderLabel(t, e), o = "";
            if (i) o += i; else {
                var a = Wt.escape(t.text || this.Op(t.value));
                o += this.wm("input") + "id='" + e + "' type='" + (t.type || this.name) + "'" + (t.editable ? " role='combobox'" : "") + " value='" + a + "' style='width: " + h + "px; text-align: " + s + ";'";
                var u = t.attributes;
                if (u) for (var c in u) o += " " + c + "='" + u[c] + "'";
                o += " />"
            }
            o += this.$renderIcon ? this.$renderIcon(t) : "";
            var f = "";
            f = n ? r + "<div class='webix_el_box' style='width:" + t.awidth + "px; height:" + t.aheight + "px'>" + o + "</div>" : "<div class='webix_el_box' style='width:" + t.awidth + "px; height:" + t.aheight + "px'>" + r + o + "</div>";
            var l = t.awidth - h - 2 * Ei.inputPadding, d = (t.invalid ? t.invalidMessage : "") || t.bottomLabel;
            return d && (f += "<div class='webix_inp_bottom_label'" + (t.invalid ? "role='alert' aria-relevant='all'" : "") + " style='width:" + (h || t.awidth) + "px;margin-left:" + Math.max(l, Ei.inputPadding) + "px;'>" + d + "</div>"), f
        }, defaults: {
            template: function (t, i) {
                return i.$renderInput(t)
            }, label: "", labelWidth: 80
        }, labelWidth_setter: function (t) {
            return t ? Math.max(t, Ei.dataPadding) : 0
        }, type_setter: function (t) {
            return t
        }, jp: !1, Hp: function () {
        }, $setValue: function (t) {
            this.getInputNode().value = this.Op(t)
        }, $getValue: function () {
            return this.Op(this.getInputNode().value, !1)
        }, setValueHere: function (t, i, e) {
            if (e && e.symbol) {
                var s = e.symbol, n = this.getValue(), h = n.substring(e.pos);
                n = (n = n.substring(0, e.pos)).substring(0, n.lastIndexOf(s) + s.length) + t, this.setValue(n + h), Ct(this.getInputNode(), n.length)
            } else this.setValue(t)
        }, suggest_setter: function (t) {
            if (t) {
                if ("string" == typeof t) {
                    if (ri(t)) return ri(t).B.id;
                    t = {body: {url: t, dataFeed: t}}
                } else t.getItem ? t = {body: {data: t}} : b(t) ? t = {body: {data: this.Jp(t)}} : t.body || (t.body = {});
                P.extend(t, {view: "suggest"});
                var i = ei(t);
                return this.zt.push(i), i.B.id
            }
            return !1
        }
    }, ph = {api: _h, view: P.protoUI(_h, vh, uh.view)}, mh = P.proto({
        name: "DataCollection", isVisible: function () {
            return !!(this.data.order.length || this.data.mr || this.B.dataFeed)
        }, $init: function (t) {
            this.data.provideApi(this, !0);
            var i = t && t.id ? t.id : V();
            this.B.id = i, (ei.views[i] = this).data.attachEvent("onStoreLoad", S(function () {
                this.callEvent("onBindRequest", [])
            }, this))
        }, refresh: function () {
            this.callEvent("onBindRequest", [])
        }
    }, he, Si, $i, ls, le, Ie, c, Di, Mi, yi);
    t("DataCollection", mh);
    var bh = {
        name: "select", defaults: {
            template: function (i, t) {
                var e = "x" + V(), s = t.wm("select") + "id='" + e + "' style='width:" + t.bm(i) + "px;'>",
                    n = ri(i.options);
                if (n && n.data && n.data.each) n.data.each(function (t) {
                    s += "<option" + (t.id == i.value ? " selected='true'" : "") + " value='" + t.id + "'>" + t.value + "</option>"
                }); else for (var h = t.Jp(i.options), r = 0; r < h.length; r++) s += "<option" + (h[r].id == i.value ? " selected='true'" : "") + " value='" + h[r].id + "'>" + h[r].value + "</option>";
                return s += "</select>", t.$renderInput(i, s, e)
            }
        }, options_setter: function (t) {
            if (t) {
                if ("string" != typeof t) return t;
                var i = new mh({url: t});
                return i.data.attachEvent("onStoreLoad", S(this.refresh, this)), i
            }
        }, getInputNode: function () {
            return this.Q.getElementsByTagName("select")[0]
        }
    }, gh = (P.protoUI(bh, ph.view), {
        name: "checkbox", defaults: {
            checkValue: 1, uncheckValue: 0, template: function (t, i) {
                var e = "x" + V(), s = "";
                t.labelRight && (s = "<label class='webix_label_right'>" + t.labelRight + "</label>", t.labelWidth && (t.label = t.label || "&nbsp;"));
                var n = t.checkValue == t.value, h = Math.floor((i.B.aheight - 16) / 2),
                    r = i.wm("input") + "style='margin-top:" + h + "px;" + (t.customCheckbox ? "display:none" : "") + "' id='" + e + "' type='checkbox' " + (n ? "checked='1'" : "") + (t.labelRight ? " aria-label='" + Wt.escape(t.labelRight) + "'" : "") + "/>",
                    o = "webix_inp_checkbox_border webix_el_group webix_checkbox_" + (n ? "1" : "0"),
                    a = t.customCheckbox || "";
                a && (a = (a = (a = a.replace(/(aria-checked=')\w*(?=')/, "$1" + (t.value == t.checkValue ? "true" : "false"))).replace(
                    /(aria-label=')\w*(?=')/, "$1" + Wt.escape(t.labelRight || t.label))).replace(/(aria-invalid=')\w*(?=')/, "$1" + (t.invalid ? "true" : "false")));
                var u = "<div style='line-height:" + i.B.cheight + "px' class='" + o + "'>" + r + a + s + "</div>";
                return i.$renderInput(t, u, e)
            }
        }, customCheckbox_setter: function (t) {
            return !0 === t && Ei.customCheckbox && (t = "<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>"), t
        }, blur: function () {
            var t = this.getInputNode();
            t && t.blur()
        }, $prepareValue: function (t) {
            return t
        }, dm: function () {
        }, $setValue: function (t) {
            var i = t == this.B.checkValue, e = this.$view.getElementsByTagName("input")[0],
                s = e ? e.parentNode : null;
            if (s && this.B.customCheckbox) {
                var n = s.getElementsByTagName("BUTTON");
                n[0] && n[0].setAttribute("aria-checked", i ? "true" : "false")
            }
            s && (s.className = s.className.replace(/(webix_checkbox_)\d/, "$1" + (i ? 1 : 0))), e.checked = i
        }, toggle: function () {
            var t = this.getValue() != this.B.checkValue ? this.B.checkValue : this.B.uncheckValue;
            this.setValue(t)
        }, getValue: function () {
            return this.B.value == this.B.checkValue ? this.B.checkValue : this.B.uncheckValue
        }, getInputNode: function () {
            return this.$view.getElementsByTagName(this.B.customCheckbox ? "button" : "input")[0]
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.customCheckbox = !!Ei.customCheckbox
        }
    }), wh = {api: gh, view: P.protoUI(gh, ph.view)}, xh = {
        name: "radio", defaults: {
            template: function (t, i) {
                i.Jp(t.options);
                for (var e, s, n, h, r, o, a, u, c, f, l, d = i.Ka(t.options), v = i.Ja(), _ = [], p = 0; p < d.length; p++) s = "x" + V(), e = e || s, p && (d[p].newline || t.vertical) && _.push("<div class='webix_line_break'></div>"), l = (n = d[p].id == t.value) || !t.value && d[p].id === v, h = !!d[p].disabled, r = d[p].value || "", o = t.tooltip ? " webix_t_id='" + d[p].id + "'" : "", (a = t.customRadio || "") && (u = (0 === p ? t.label + " " : "") + r, a = (a = (a = (a = (a = a.replace(/(aria-label=')\w*(?=')/, "$1" + Wt.escape(u))).replace(/(aria-checked=')\w*(?=')/, "$1" + (n ? "true" : "false"))).replace(/(tabindex=')\w*(?=')/, "$1" + (!h && l ? "0" : "-1"))).replace(/(aria-invalid=')\w*(?=')/, "$1" + (t.invalid ? "true" : "false"))).replace(/(button_id=')\w*(?=')/, "$1" + d[p].id), h && (a = a.replace("role='radio'", "role='radio' webix_disabled='true'"))), c = i.wm("input") + " name='" + (t.name || t.id) + "' type='radio' " + (n ? "checked='1'" : "") + "tabindex=" + (!h && l ? "0" : "-1") + " value='" + d[p].id + "' id='" + s + "'" + (h ? " disabled='true'" : "") + " style='" + (a ? "display:none" : "") + "' />", f = "<div radio_id='" + d[p].id + "' class='webix_inp_radio_border webix_radio_" + (n ? "1" : "0") + "' role='presentation'>" + c + a + "</div>", r && (r = "<label for='" + s + "' class='webix_label_right'>" + r + "</label>"), _.push("<div class='webix_radio_option" + (h ? " webix_disabled" : "") + "' role='presentation'" + o + ">" + f + r + "</div>");
                return _ = "<div class='webix_el_group' role='radiogroup' style='margin-left:" + (t.label ? t.labelWidth : 0) + "px;'>" + _.join("") + "</div>", i.$renderInput(t, _, e)
            }
        }, refresh: function () {
            this.render(), this.re && this.$getSize(0, 0)[2] != this.re[1] && this.resize()
        }, $getSize: function (t, i) {
            var e = uh.api.$getSize.call(this, t, i), s = this.Ka(this.B.options);
            if (s) {
                for (var n = this.B.vertical ? 0 : 1, h = 0; h < s.length; h++) (this.B.vertical || s[h].newline) && n++;
                e[3] = e[2] = Math.max(e[2], (this.B.optionHeight || 25) * n + 2 * this.B.inputPadding + ("top" == this.B.labelPosition ? this.F_ : 0))
            }
            var r = this.config.bottomPadding;
            return r && (e[2] += r, e[3] += r), e
        }, qa: function () {
            return this.Q.getElementsByTagName(this.B.customRadio ? "button" : "input")
        }, $setValue: function (t) {
            for (var i, e, s, n, h, r = this.Q.getElementsByTagName("input"), o = this.Ja(), a = 0; a < r.length; a++) i = r[a].parentNode.getAttribute("radio_id"), e = this.getOption(i), r[a].checked = i == t, s = e && !e.disabled && (r[a].checked || !t && e.id == o), r[a].setAttribute("tabindex", s ? "0" : "-1"), (n = r[a] ? r[a].parentNode : null) && (n.className = n.className.replace(/(webix_radio_)\d/, "$1" + (r[a].checked ? 1 : 0)), this.B.customRadio && (h = n.getElementsByTagName("BUTTON"))[0] && (h[0].setAttribute("aria-checked", r[a].checked ? "true" : "false"), h[0].setAttribute("tabindex", s ? "0" : "-1")))
        }, getValue: function () {
            return this.B.value
        }, focus: function () {
            return this.oi()
        }, blur: function () {
            this.Ga()
        }, customRadio_setter: function (t) {
            return !0 === t && Ei.customRadio && (t = "<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' button_id='' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>"), t
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.customRadio = !!Ei.customRadio, Ei.optionHeight && (this.defaults.optionHeight = Ei.optionHeight)
        }
    }, yh = (P.protoUI(xh, ph.view, ke), {
        name: "datepicker", ym: !0, $init: function (t) {
            t.multiselect && (this.B.multiselect = t.multiselect), this.$ready.push(this.Mm)
        }, defaults: {
            template: function (t, i) {
                "time" == i.B.type && (i.B.icon = i.B.timeIcon);
                var e = t.type;
                t.type = "";
                var s = t.editable ? i.$renderInput(t) : i.gm(t, i);
                return t.type = e, s
            }, stringResult: !1, timepicker: !1, icon: "wxi-calendar", icons: !0, timeIcon: "wxi-clock", separator: ", "
        }, vm: function () {
            var t = this.getText();
            if (this.B.text != t && (!j(this.B.text) || t)) {
                var i = this.B.editable ? this.getValue() : this.getPopup().getValue();
                this.setValue(i || "")
            }
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.inputPadding = Ei.inputPadding, this.defaults.point = !Ei.popupNoPoint
        }, getPopup: function () {
            return ri(this.B.popup)
        }, Mm: function () {
            var t = this.B;
            if (t.suggest) t.popup = t.suggest; else if (!t.popup) {
                var i = this.B.timepicker;
                t.popup = t.suggest = this.suggest_setter({
                    type: "calendar",
                    point: !1 !== this.B.point,
                    padding: 0,
                    body: {
                        height: 240 + (i || this.B.icons ? 30 : 0),
                        width: 250,
                        multiselect: this.B.multiselect,
                        timepicker: i,
                        type: this.B.type,
                        icons: this.B.icons,
                        timeIcon: this.B.timeIcon
                    }
                })
            }
            this.Qn = function () {
            }
        }, $render: function (t) {
            this.$setValue(t.value)
        }, $prepareValue: function (t) {
            if (this.B.multiselect) {
                "string" == typeof t ? t = t.split(this.B.separator) : t instanceof Date ? t = [t] : t || (t = []);
                for (var i = 0; i < t.length; i++) t[i] = this.Sm(t[i]);
                return t
            }
            return this.Sm(t)
        }, Sm: function (t) {
            var i = this.B.type, e = "time" == i;
            if (isNaN(parseFloat(t)) || (t = "" + t), "string" == typeof t && t) {
                t = ("month" != i && "year" != i || !this.km ? e ? $.parseTimeFormatDate : $.parseFormatDate : this.km)(t)
            }
            if (t) {
                if (e && b(t)) {
                    var s = new Date;
                    s.setHours(t[0]), s.setMinutes(t[1]), t = s
                }
                isNaN(t.getTime()) && (t = "")
            }
            return t
        }, Cm: function (t) {
            var i = this;
            return this.B.multiselect ? [].concat(t).map(function (t) {
                return i.$m(t)
            }).join(this.config.separator) : this.$m(t)
        }, $m: function (t) {
            var i = this.Dm;
            return i || (i = "time" == this.B.type ? $.timeFormatStr : this.config.timepicker ? $.fullDateFormatStr : $.dateFormatStr), i(t)
        }, Im: function () {
            var t = this.getInputNode();
            j(t.value) ? t.innerHTML = this.B.text || this.Kp() : t.value = this.B.text || ""
        }, $compareValue: function (t, i) {
            return !t && !i || Ys.equal(t, i)
        }, $setValue: function (t) {
            this.B.text = t ? this.Cm(t) : "", this.Im()
        }, format_setter: function (t) {
            return t ? "function" == typeof t ? this.Dm = t : (this.Dm = Ys.dateToStr(t), this.km = Ys.strToDate(t)) : this.Dm = this.km = null, t
        }, getInputNode: function () {
            return this.B.editable ? this.Q.getElementsByTagName("input")[0] : this.Q.getElementsByTagName("DIV")[1]
        }, getValue: function () {
            var i = this;
            if (this.B.multiselect) {
                var t = this.B.value;
                if (!t) return [];
                var e = [].concat(t).map(function (t) {
                    return i.Am(t)
                });
                return this.B.stringResult ? e.join(this.B.separator) : e
            }
            return this.Am(this.B.value)
        }, Am: function (t) {
            var i = this.B.type, e = "time" == i;
            if (this.Lp) {
                if (this.B.editable) {
                    var s = this.km;
                    s || (s = e ? $.timeFormatDate : this.config.timepicker ? $.fullDateFormatDate : $.dateFormatDate), t = s(this.getInputNode().value)
                }
            } else t = this.$prepareValue(t) || null;
            if (this.B.stringResult) {
                var n = $.parseFormatStr;
                return e && (n = $.parseTimeFormatStr), !this.Dm || "month" != i && "year" != i || (n = this.Dm), this.B.multiselect ? [].concat(t).map(function (t) {
                    return t ? n(t) : ""
                }) : t ? n(t) : ""
            }
            return t || null
        }, getText: function () {
            var t = this.getInputNode(), i = "";
            return t && (i = j(t.value) ? t.innerHTML : t.value), i
        }
    }), Mh = {api: yh, view: P.protoUI(yh, ph.view)}, Sh = {
        name: "colorpicker", $init: function () {
            this.$ready.push(this.Mm)
        }, defaults: {icon: !0}, Mm: function () {
            var t = this.B;
            t.suggest ? t.popup = t.suggest : t.popup || (t.popup = t.suggest = this.suggest_setter({
                type: "colorboard",
                height: 200
            })), this.Qn = function () {
            }
        }, getValue: function () {
            return this.Lp && this.B.editable ? this.getInputNode().value : this.B.value
        }, $prepareValue: function (t) {
            return (t = t ? t.toString(16) : "") && "#" != t.charAt(0) && /^[0-9a-fA-F]+$/.test(t) && (
                t = "#" + t), t
        }, Fm: function () {
            return this.$view.getElementsByTagName("DIV")[this.B.editable ? 1 : 2]
        }, Cm: function (t) {
            return t
        }, $compareValue: function (t, i) {
            return t == i
        }, $setValue: function (t) {
            this.Fm().style.backgroundColor = t, this.B.text = t;
            var i = this.getInputNode();
            i.value == undefined ? i.innerHTML = t : i.value = t
        }, $renderIcon: function () {
            return '<div class="webix_input_icon" style="background-color:' + this.config.value + ';"> </div>'
        }
    }, kh = (P.protoUI(Sh, Mh.view), {
        name: "richselect", defaults: {
            template: function (t, i) {
                return i.gm(t, i)
            }, popupWidth: 200, icon: "wxi-menu-down"
        }, vm: function () {
            var t = this.getText();
            if (this.B.text != t && (!j(this.B.text) || t)) {
                var i = this.getPopup(), e = this.getInputNode().value, s = i.getSuggestion(e), n = this.getValue();
                !s || s == n || "" === e && "" !== i.getItemText(s) ? "" === e ? this.setValue("") : this.Tm && this.Tm() : this.setValue(s)
            }
        }, suggest_setter: function (t) {
            return this.options_setter(t)
        }, options_setter: function (t) {
            t = this.Vm ? this.Vm(t) : t;
            var i = this.B.popup = this.B.suggest = ph.api.suggest_setter.call(this, t), e = ri(i).getList();
            return e && e.attachEvent("onAfterLoad", S(this.zm, this)), i
        }, getList: function () {
            var t = ri(this.B.suggest);
            return t.getList()
        }, zm: function () {
            var t = this.B.value, i = this.B.text;
            j(t) || this.getPopup().isVisible() || i || !this.getInputNode() || this.$setValue(t)
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.inputPadding = Ei.inputPadding
        }, $render: function (t) {
            this.$setValue(t.value)
        }, getInputNode: function () {
            return this.Q.getElementsByTagName("DIV")[1]
        }, getPopup: function () {
            return ri(this.B.popup)
        }, getText: function () {
            var t = this.B.value, i = this.getInputNode();
            return i ? "undefined" == typeof i.value ? i.firstChild && "webix_placeholder" === i.firstChild.className ? "" : i.innerHTML : i.value : t ? this.getPopup().getItemText(t) : ""
        }, $prepareValue: function (t) {
            return t && t.id ? t : ph.api.$prepareValue.call(this, t)
        }, $setValue: function (t) {
            var i = t, e = this.getPopup();
            if (e && (i = e.getItemText(t)), t && t.id) {
                var s = e.getList(), n = s.exists(t.id);
                n || s.add(t), i = e.getItemText(t.id), s.B.dynamic && !n && s.remove(t.id), this.B.value = this.$prepareValue(t.id)
            }
            var h = this.getInputNode();
            j(h.value) ? h.innerHTML = i || this.Kp() : h.value = i = i.replace(/<[^>]*>/g, ""), this.B.text = i
        }, getValue: function () {
            return this.B.value || ""
        }, Hm: function (t) {
            this.focus(), bt(t)
        }
    }), Ch = {api: kh, view: P.protoUI(kh, ph.view)}, $h = {
        name: "combo", getInputNode: function () {
            return this.Q.getElementsByTagName("input")[0]
        }, Tm: function () {
            var t = this.getValue();
            this.$setValue(j(t) ? "" : t)
        }, ri: function () {
            var t = this.getInputNode(), i = "", e = this.getPopup();
            t.value && (i = this.B.value, e.getItemText(i) != this.getText() && (i = e.getSuggestion() || i)), i != this.B.value ? this.setValue(i, !0) : this.$setValue(i)
        }, $compareValue: function (t) {
            var i = Ch.api.$compareValue.apply(this, arguments);
            return i && t != this.getText() && this.Tm(), i
        }, defaults: {
            template: function (t, i) {
                return i.$renderInput(t).replace(/(<input)\s*(?=\w)/, "$1 role='combobox'")
            }, icon: "wxi-menu-down"
        }, on_click: {
            webix_inp_label: function (t) {
                this.Hm(t)
            }, webix_inp_top_label: function (t) {
                this.Hm(t)
            }
        }
    }, Dh = (P.protoUI($h, Ch.view), {
        name: "counter", defaults: {
            template: function (t, i) {
                var e = t.value, s = "x" + V(),
                    n = "<div role='spinbutton' aria-label='" + Wt.escape(t.label) + "' aria-valuemin='" + t.min + "' aria-valuemax='" + t.max + "' aria-valuenow='" + t.value + "' class='webix_el_group' style='width:" + i.bm(t) + "px'>";
                return n += "<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='" + $.aria.decreaseValue + "'>-</button>", n += i.wm("input") + " id='" + s + "' type='text' class='webix_inp_counter_value' aria-live='assertive' value='" + e + "'></input>", n += "<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='" + $.aria.increaseValue + "'>+</button></div>", i.$renderInput(t, n, s)
            }, min: 0, max: Infinity, value: 0, step: 1
        }, $init: function () {
            Jt(this.$view, "keydown", this.K_, {bind: this})
        }, K_: function (t) {
            var i = t.which || t.keyCode, e = this.B, s = this.getValue();
            32 < i && i < 41 && (36 === i ? s = e.min : 35 === i ? s = e.max === Infinity ? 1e6 : e.max : 33 === i ? this.next() : 34 === i ? this.prev() : s += 37 === i || 40 === i ? -1 : 1, 34 < i && s >= e.min && s <= e.max && this.setValue(s))
        }, $setValue: function (t) {
            this.getInputNode().value = t
        }, $prepareValue: function (t) {
            return t = parseFloat(t), isNaN(t) ? 0 : t
        }, getInputNode: function () {
            return this.Q.getElementsByTagName("input")[0]
        }, getValue: function () {
            return 1 * uh.api.getValue.apply(this, arguments)
        }, next: function (t) {
            t = 1 * (t || this.B.step), this.shift(t)
        }, prev: function (t) {
            t = -1 * (t || this.B.step), this.shift(t)
        }, shift: function (t) {
            var i = this.B.min, e = this.B.max, s = this.getValue() + t;
            i <= s && s <= e && this.setValue(s)
        }
    }), Ih = (P.protoUI(Dh, ph.view), {
        name: "icon", $skin: function () {
            uh.api.$skin.call(this), this.defaults.height = Ei.inputHeight, this.defaults.width = Ei.inputHeight
        }, defaults: {
            template: function (t, i) {
                var e = Math.min(t.awidth, t.aheight), s = Math.round((i.ue - t.aheight) / 2),
                    n = "<button type='button' style='height:" + e + "px;width:" + e + "px;' class='webix_icon_button'><span class='webix_icon " + t.icon + "'></span></button>";
                return "<div class='webix_el_box' style='width:" + t.awidth + "px;height:" + t.aheight + "px;line-height:" + t.aheight + "px;margin-top:" + s + "px'>" + n + (t.badge || 0 === t.badge ? "<span class='webix_badge'>" + t.badge + "</span>" : "") + "</div>"
            }
        }, jp: !1, Hp: function () {
        }, $setValue: function () {
        }
    }), Ah = (P.protoUI(Ih, uh.view), {
        name: "search", on_click: {
            webix_input_icon: function (t) {
                this.getInputNode().focus(), this.callEvent("onSearchIconClick", [t])
            }
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.inputPadding = Ei.inputPadding
        }, defaults: {type: "text", icon: "wxi-search"}
    }), Fh = (P.protoUI(Ah, ph.view), {
        name: "segmented", $allowsClear: !1, $init: function () {
            this.attachEvent("onChange", function (t) {
                this.B.multiview && this.Rm(t)
            }), this.attachEvent("onAfterRender", o(function () {
                this.B.multiview && this.B.value && this.Rm(this.B.value)
            }))
        }, Rm: function (t) {
            var i = this.getTopParentView(), e = null;
            i && i.$$ && (e = i.$$(t)), e || (e = ri(t)), e && e.show && e.show()
        }, defaults: {
            template: function (t, i) {
                i.Jp(t.options);
                var e, s, n = i.Ka(t.options), h = i.bm(t), r = t.optionWidth || Math.floor(h / n.length),
                    o = "<div style='width:" + h + "px' class='webix_all_segments' role='tablist' aria-label='" + Wt.escape(t.label) + "'>";
                t.value || (t.value = i.Ja(!0));
                for (var a = 0; a < n.length; a++) s = !!n[a].disabled, e = t.tooltip ? " webix_t_id='" + n[a].id + "'" : "", o += "<button type='button' style='width:" + (n[a].width || r) + "px' role='tab' aria-selected='" + (t.value == n[a].id ? "true" : "false") + "' tabindex='" + (s || t.value != n[a].id ? "-1" : "0") + "' class='webix_segment_" + (a == n.length - 1 ? "N" : 0 < a ? 1 : 0) + (t.value == n[a].id ? " webix_selected" : "") + (s ? " webix_disabled" : "") + "' " + (s ? "webix_disabled='true' " : "") + "button_id='" + n[a].id + "'" + e + ">" + n[a].value + "</button>";
                return i.$renderInput(t, o + "</div>", V())
            }
        }, qa: function () {
            return this.$view.getElementsByTagName("BUTTON")
        }, focus: function () {
            return this.oi()
        }, blur: function () {
            this.Ga()
        }, $setValue: function (t) {
            var i = this.config.tabbarPopup;
            if (i && ri(i) && ri(i).getBody().exists(t)) return this.refresh();
            for (var e, s, n = this.qa(), h = 0; h < n.length; h++) e = n[h].getAttribute("button_id"), s = this.getOption(e), n[h].setAttribute("aria-selected", t == e ? "true" : "false"), n[h].setAttribute("tabindex", s && !s.disabled && t == e ? "0" : "-1"), t == e ? xt(n[h], "webix_selected") : yt(n[h], "webix_selected")
        }, $getValue: function () {
            return this.B.value || ""
        }, getValue: function () {
            return this.B.value
        }, getInputNode: function () {
            return null
        }, jp: !1
    }), Th = {api: Fh, view: P.protoUI(Fh, ph.view, ke)}, Vh = {
        name: "textarea", defaults: {
            template: function (t, i) {
                var e = t.name || t.id, s = "x" + V(), n = i.wm("textarea") + "style='width:" + i.bm(t) + "px;'";
                return n += " id='" + s + "' name='" + e + "' class='webix_inp_textarea'>" + i.Op(t.value) + "</textarea>", i.$renderInput(t, n, s)
            }, minHeight: 60
        }, $skin: function () {
            ph.api.$skin.call(this), this.defaults.height = 0
        }, Mi: !0, xm: function (t) {
            return t ? this.F_ - this.B.inputPadding : ""
        }, getInputNode: function () {
            return this.Q.getElementsByTagName("textarea")[0]
        }
    }, zh = (P.protoUI(Vh, ph.view), {
        name: "toggle", $allowsClear: !0, $init: function () {
            this.attachEvent("onItemClick", function () {
                this.toggle()
            })
        }, $renderInput: function (t) {
            return "<button type='button' " + (t.popup ? "aria-haspopup='true'" : "") + " class='webix_button'>" + t.label + "</button>"
        }, $setValue: function (t) {
            var i = this.getInputNode(), e = this.B, s = t && "0" != t, n = (s ? e.onLabel : e.offLabel) || e.label,
                h = i.firstChild;
            i.setAttribute("aria-pressed", s ? "true" : "false"), i.innerHTML = n, h && this.vd[e.type] && (
                "SPAN" === h.nodeName && e.onIcon && e.offIcon && e.onIcon !== e.offIcon && (h.className = h.className.replace(s ? e.offIcon : e.onIcon, s ? e.onIcon : e.offIcon)), i.insertBefore(h, i.firstChild)), (s ? xt : yt)(i.parentNode, "webix_pressed")
        }, toggle: function () {
            this.setValue(!this.getValue())
        }, getValue: function () {
            var t = this.B.value;
            return t && "0" != t ? 1 : 0
        }, defaults: {
            template: function (t, i) {
                var e = t.value && "0" != t.value, s = e ? " webix_pressed" : "";
                t.label = (e ? t.onLabel : t.offLabel) || t.label, t.icon = (e ? t.onIcon : t.offIcon) || t.icon;
                var n = "<div class='webix_el_box" + s + "' style='width:" + t.awidth + "px; height:" + t.aheight + "px'>" + i.$renderInput(t, i) + "</div>";
                return n = n.replace(/(button)\s*(?=\w)/, "$1 aria-pressed='" + (e ? "true" : "false") + "' "), (t.badge || 0 === t.badge) && (n = n.replace(/<\/div>$/, "<span class='webix_badge'>" + t.badge + "</span></div>")), n
            }
        }, jp: !1
    }), Hh = (P.protoUI(zh, uh.view), {
        name: "multitext",
        $cssName: "text",
        defaults: {icon: "wxi-plus-circle", iconWidth: 25, separator: ", "},
        getValueHere: function () {
            return ph.api.getValue.call(this)
        },
        setValueHere: function (t) {
            return ph.api.$setValue.call(this, t)
        },
        getValue: function () {
            if ("extra" == this.config.mode) return this.getValueHere();
            if (this.Bm) return this.Bm;
            for (var t = [this.getValueHere(this)], i = 0; i < this.Pm.length; i++) {
                var e = ri(this.Pm[i]).getValueHere();
                e && t.push(e)
            }
            return t.join(this.config.separator)
        },
        $setValue: function (t) {
            if (t = t || "", "extra" == this.config.mode) return this.setValueHere(t);
            var i = (this.Bm = t).split(this.config.separator);
            if (i.length != this.Pm.length + 1) {
                this.removeSection(), this.setValueHere.call(this, i[0]);
                for (var e = 1; e < i.length; e++) this.addSection(i[e]);
                this.Bm = ""
            } else {
                this.setValueHere(i[0]);
                for (var s = 0; s < this.Pm.length; s++) ri(this.Pm[s]).setValueHere(i[s + 1]);
                this.Bm = ""
            }
        },
        jm: function () {
            var t = this.config.master ? ri(this.config.master) : this, i = t.getValue(), e = t.B.value;
            i !== e && (t.B.value = i, t.callEvent("onChange", [i, e]))
        },
        addSection: function (t) {
            var i = this.config, e = {
                labelWidth: i.labelWidth,
                inputWidth: i.inputWidth,
                width: i.width,
                label: i.label ? "&nbsp;" : "",
                view: this.name,
                mode: "extra",
                value: t || "",
                icon: "wxi-minus-circle",
                tooltip: i.tooltip,
                suggest: i.suggest || null,
                master: i.id
            };
            P.extend(e, i.subConfig || {}, !0);
            var s = this.getParentView().addView(e);
            return ri(s).attachEvent("onChange", this.jm), this.Pm.push(s), this.callEvent("onSectionAdd", [s, this.Pm.length]), s
        },
        removeSection: function (t) {
            for (var i = this.config.master ? ri(this.config.master) : this, e = i.Pm.length - 1; 0 <= e; e--) {
                var s = i.Pm[e];
                t && s != t || (i.Pm.removeAt(e), this.getParentView().removeView(s), i.callEvent("onSectionRemove", [s, e + 1]))
            }
        },
        on_click: {
            webix_input_icon: function () {
                if ("extra" == this.config.mode) {
                    this.removeSection(this.config.id);
                    var t = this.getParentView().getChildViews();
                    t[t.length - 1].focus(), this.jm()
                } else ri(this.addSection()).focus();
                return !1
            }
        },
        $init: function () {
            this.Pm = g([]), this.attachEvent("onKeyPress", this.ve)
        },
        $render: function (t) {
            this.$setValue(t.value)
        }
    }), Rh = (P.protoUI(Hh, ph.view), {
        name: "proto", $init: function () {
            this.data.provideApi(this, !0), this.Q = this.Q || this.Vi, this.data.attachEvent("onStoreUpdated", S(function () {
                this.render.apply(this, arguments)
            }, this))
        }, $setSize: function () {
            zi.api.$setSize.apply(this, arguments) && this.render()
        }, Eo: "webix_item", on_mouse_move: {}, type: {}
    }), Bh = {api: Rh, view: P.protoUI(Rh, Ve, ne, Bi, ls, He, le, zi.view, c, yi)}, Ph = {
        name: "list", Em: "webix_list", Zn: "webix_list_item", $init: function (t) {
            xt(this.Tt, this.Em + ("x" == (t.layout || this.defaults.layout) ? "-x" : "")), this.data.provideApi(this, !0), this.Nm = S(this.Nm, this), this.data.attachEvent("onStoreUpdated", this.Nm), this.data.attachEvent("onSyncApply", this.Nm), this.Tt.setAttribute("role", "listbox")
        }, dynamic_setter: function (t) {
            return t && P.extend(this, _s, !0), t
        }, $dragHTML: function (t, i, e) {
            var s;
            return "y" == this.B.layout && "auto" == this.type.width ? (this.type.width = this.oe, s = this.Z(t), this.type.width = "auto") : s = this.Z(t), b(e.source) && 1 < e.source.length && (s = this.Do(s, e.source.length)), s
        }, defaults: {select: !1, scroll: !0, layout: "y", navigation: !0, datafetch: 50}, Eo: "webix_l_id", on_click: {
            webix_list_item: function (t, i) {
                this.B.select && (this.Lm = !0, "multiselect" == this.B.select || this.B.multiselect ? this.select(i, !1,
                    t.ctrlKey || t.metaKey || "touch" == this.B.multiselect, t.shiftKey) : this.select(i), this.Lm = !1)
            }
        }, on_dblclick: {}, getVisibleCount: function () {
            return Math.floor(this.ue / this.Om())
        }, Nm: function () {
            var t = this.B;
            if (t.autoheight || t.autowidth) return this.resize();
            "y" == t.layout ? t.yCount && this.Um(t.yCount) : t.xCount && this.Wm(t.xCount)
        }, Um: function (t) {
            var i = this.data.$pagesize || this.count();
            this.lc(t && t < i, "y"), this.B.autoheight && i < (t || Infinity) && (t = i);
            var e = this.Om() * t + (this.type.margin || 0);
            return this.getUnits && (e += this.getUnits().length * this.type.headerHeight), Math.max(e, this.B.minHeight || 0)
        }, Om: function () {
            return this.type.height + (this.type.margin || 0)
        }, Wm: function (t) {
            var i = this.data.$pagesize || this.count();
            return this.lc(t && t < i, "x"), this.B.autowidth && i < (t || Infinity) && (t = i), this.type.width * t
        }, $getSize: function (t, i) {
            return "y" == this.B.layout ? ("auto" != this.type.width && (this.B.width = this.type.width + (this.ae ? Y.scrollSize : 0)), (this.B.yCount || this.B.autoheight) && (this.B.height = this.Um(this.B.yCount) || 1)) : ("auto" != this.type.height && (this.B.height = this.Om() + (this.ce ? Y.scrollSize : 0)), (this.B.xCount || this.B.autowidth) && (this.B.width = this.Wm(this.B.xCount) || 1)), zi.api.$getSize.call(this, t, i)
        }, $setSize: function () {
            zi.api.$setSize.apply(this, arguments)
        }, type: {
            css: "",
            widthSize: function (t, i) {
                return i.width + (-1 < i.width ? "px" : "")
            },
            heightSize: function (t, i) {
                return i.height + (-1 < i.height ? "px" : "")
            },
            classname: function (t, i, e) {
                var s = "webix_list_item";
                return i.css && (s += " " + i.css), t.disabled && (s += " webix_disabled"), t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css), e && e.$css && (s += " " + e.$css), s
            },
            aria: function (t, i, e) {
                return 'role="option"' + (e && e.webix_selected ? ' aria-selected="true" tabindex="0"' : ' tabindex="-1"') + (t.$count && t.$template ? 'aria-expanded="true"' : "") + (t.disabled ? ' aria-disabled="true" webix_disabled="true"' : "")
            },
            template: function (t) {
                return (t.icon ? "<span class='webix_list_icon webix_icon " + t.icon + "'></span>" : "") + t.value + (t.badge || 0 === t.badge ? "<div class='webix_badge'>" + t.badge + "</div>" : "")
            },
            width: "auto",
            templateStart: Wt('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>'),
            templateEnd: Wt("</div>")
        }, $skin: function () {
            this.type.height = Ei.listItemHeight
        }, disableItem: function (t) {
            this.Ym(t, !0)
        }, enableItem: function (t) {
            this.Ym(t, !1)
        }, Ym: function (t, i) {
            var e = this.getItem(t);
            e && (e.disabled = i, this.refresh(t))
        }, isItemEnabled: function (t) {
            var i = this.getItem(t);
            return i && !i.disabled
        }, fu: function (t, i, e) {
            return this.isItemEnabled(t) ? t : (t = this.getNextId(t, e) || null) && t != i ? this.fu(t, i, e) : i
        }
    }, jh = {api: Ph, view: P.protoUI(Ph, ee, De, he, ve, Ae, Be, Re, Bh.view, ie)}, Eh = {
        name: "multiselect",
        $cssName: "richselect",
        defaults: {separator: ",", stringResult: !0},
        Vm: function (t) {
            var i = !b(t) && "object" == M(t) && !t.name, e = {
                view: "checksuggest",
                separator: this.config.separator,
                buttonText: this.config.buttonText,
                button: this.config.button
            };
            this.B.optionWidth ? e.width = this.B.optionWidth : e.fitMaster = !0, i && P.extend(e, t, !0);
            var s = ei(e), n = s.getList();
            return "string" == typeof t ? n.load(t) : i || n.parse(t), s.attachEvent("onShow", function () {
                s.setValue(ri(s.B.master).config.value)
            }), s
        },
        $compareValue: function (t, i) {
            return t.toString() == i.toString()
        },
        $prepareValue: function (t) {
            return "string" == typeof t ? t.split(this.B.separator) : b(t) ? t : [uh.api.$prepareValue.call(this, t)]
        },
        $setValue: function (t) {
            if (this.Lp) {
                var i = this.getPopup(), e = "";
                i && "object" == M(e = i.setValue(t)) && (e = e.join(this.config.separator + " ")), this.B.text = e, this.getInputNode().innerHTML = e || this.Kp()
            }
        },
        getValue: function () {
            var t = this.B.value || [];
            return this.B.stringResult ? t.join(this.B.separator) : t
        }
    };
    ge.multiselect = P.extend({popupType: "multiselect"}, ge.richselect), Qt(jh.view, {
        name: "multilist",
        templateStart: Wt('<div webix_l_id="#!id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>')
    }), Qt(jh.view, {
        name: "checklist",
        templateStart: Wt(
            '<div webix_l_id="#!id#" {common.aria()} class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden; white-space:nowrap;">{common.checkbox()}'),
        checkbox: function (t) {
            var i = t.$checked ? "wxi-checkbox-marked" : "wxi-checkbox-blank";
            return "<span role='checkbox' tabindex='-1' aria-checked='" + (t.$checked ? "true" : "false") + "' class='webix_icon " + i + "'></span>"
        },
        aria: function (t) {
            return "role='option' tabindex='-1' " + (t.$checked ? "aria-selected='true'" : "")
        },
        template: Wt("#value#")
    });
    P.protoUI(Eh, Ch.view);
    var Nh = {
        name: "multicombo",
        $cssName: "text",
        defaults: {
            keepText: !1,
            separator: ",",
            stringResult: !0,
            icon: !1,
            iconWidth: 0,
            tagMode: !0,
            tagTemplate: function (t) {
                return t.length ? t.length + " item(s)" : ""
            },
            template: function (t, i) {
                return i.qm(t, i)
            }
        },
        $init: function () {
            this.$view.className += " webix_multicombo", this.attachEvent("onBeforeRender", function () {
                return this.Gp || (this.Gp = Ei.inputHeight), !0
            }), this.attachEvent("onAfterRender", function () {
                this.re = null
            })
        },
        on_click: {
            webix_multicombo_delete: function (t, i, e) {
                var s;
                return !this.B.readonly && e && (s = e.parentNode.getAttribute("optvalue")) && this.Gm(s), !1
            }, webix_inp_label: function (t) {
                this.Hm(t)
            }, webix_inp_top_label: function (t) {
                this.Hm(t)
            }
        },
        vm: function () {
            var t = this.getInputNode().value;
            t && this.B.newValues && 100 < new Date - (this.getPopup().Xm || 0) && this.Jm(t), this.B.keepText || (this.Km = ""), this.refresh()
        },
        Gm: function (t) {
            var i = this.B.value || [], e = ri(this.config.suggest);
            (i = g(_(i))).remove(t), this.setValue(i), e && e.B.selectAll && e.getBody().yi[0].setValue(0)
        },
        Zm: function (t) {
            var i = ri(this.config.suggest);
            if (i.getList().getItem(t)) {
                var e = i.getValue();
                e && "string" == typeof e && (e = e.split(i.config.separator)), (e = g(e || [])).find(t) < 0 && (e.push(t), i.setValue(e), this.setValue(i.getValue()))
            }
        },
        Jm: function (t) {
            var i, e = ri(this.config.suggest), s = e.getList();
            if (t = t.replace(/^\s+|\s+$/g, "")) for (var n in s.data.pull) e.getItemText(n) == t && (i = n);
            !i && t && (i = s.add({id: t, value: t})), this.Zm(i)
        },
        Vm: function (t) {
            var i = !b(t) && "object" == M(t) && !t.name, e = {
                view: "checksuggest",
                separator: this.config.separator,
                buttonText: this.config.buttonText,
                button: this.config.button
            }, s = this;
            i && P.extend(e, t, !0), !e.width && this.B.optionWidth && P.extend(e, {
                width: this.B.optionWidth,
                fitMaster: !1
            }, !0), e.width = e.fitMaster || j(e.fitMaster) ? 0 : e.width;
            var n = ei(e);
            e.width || (n.$customWidth = function () {
                this.config.width = s.bm(s.B)
            }), n.attachEvent("onBeforeShow", function (t, i, e) {
                if (this.B.master && (this.setValue(ri(this.B.master).config.value), ri(this.B.master).getInputNode().value || this.isVisible() ? (this.getList().refresh(), this.Qm = !0) : this.getList().filter(), t.tagName && "input" == t.tagName.toLowerCase())) return Wn.api.show.apply(this, [t.parentNode, i, e]), !1
            });
            var h = n.getList();
            return "string" == typeof t ? h.load(t) : i || h.parse(t), n.tb = function () {
            }, n
        },
        qm: function (t, i) {
            var e, s, n, h, r, o, a, u, c, f, l, d, v = "", _ = "top" == this.B.labelPosition;
            return e = "x" + V(), d = i.bm(t), s = t.inputAlign || "left", r = this.Gp - 2 * Ei.inputPadding - 2, h = this.Km || "", u = "<ul class='webix_multicombo_listbox' style='line-height:" + r + "px'></ul>", n = "width: " + Math.min(d, i.ib || 7) + "px;height:" + r + "px;max-width:" + (d - 20) + "px", l = t.readonly ? " readonly " : "", o = "<div class='webix_inp_static' onclick='' style='line-height:" + r + "px;width: " + d + "px;  text-align: " + s + ";height:auto' >" + u + ("<input id='" + e + "' role='combobox' aria-multiline='true' aria-label='" + Wt.escape(t.label) + "' tabindex='0' type='text' class='webix_multicombo_input' " + l + " style='" + n + "' value='" + h + "'/>") + "</div>", a = i.$renderLabel(t, e), f = this.B.awidth - d - 2 * Ei.inputPadding, (c = (t.invalid ? t.invalidMessage : "") || t.bottomLabel) && (v = "<div class='webix_inp_bottom_label' style='width:" + d + "px;margin-left:" + Math.max(f, Ei.inputPadding) + "px;'>" + c + "</div>"), _ ? a + "<div class='webix_el_box' style='width:" + this.B.awidth + "px; '>" + o + v + "</div>" : "<div class='webix_el_box' style='width:" + this.B.awidth + "px; min-height:" + this.B.aheight + "px;'>" + a + o + v + "</div>"
        },
        eb: function () {
            return this.Fp().getElementsByTagName("UL")[0]
        },
        jp: function () {
            var t = this.getPopup();
            if (t) {
                var i = t ? t.setValue(this.B.value) : null;
                t.sb && (this.B.value = t.sb(this.B.value));
                var e = "", s = this.eb(), n = i && i.length;
                if (n) {
                    var h = this.Gp - 2 * Ei.inputPadding - 8, r = this.B.value || [];
                    if (this.B.tagMode) for (var o = 0; o < i.length; o++) {
                        var a = "<span>" + i[o] + "</span><span class='webix_multicombo_delete' role='button' aria-label='" + $.aria.removeItem + "'>x</span>";
                        e += "<li class='webix_multicombo_value' style='line-height:" + h + "px;' optvalue='" + Wt.escape(r[o]) + "'>" + a + "</li>"
                    } else e += "<li class='webix_multicombo_tag' style='line-height:" + h + "px;'><span>" + this.B.tagTemplate(r) + "</span></li>"
                }
                s.innerHTML = e;
                var u = this.getInputNode();
                this.B.placeholder && (n ? (u.placeholder = "", !u.value && 20 < u.offsetWidth && (u.style.width = "20px")) : u.value || (u.placeholder = this.B.placeholder, u.style.width = this.bm(this.B) + "px")), !this.B.tagMode && s.firstChild && (u.style.width = this.nb() + "px")
            }
            this.hb()
        },
        rb: function (t) {
            if (t = t || this.getInputNode()) if (t.value.length) {
                if (t.createTextRange) {
                    var i = t.createTextRange();
                    i.moveStart("character", t.value.length), i.collapse(), i.select()
                } else if (t.selectionStart || "0" == t.selectionStart) {
                    var e = t.value.length;
                    t.selectionStart = e, t.selectionEnd = e, t.focus()
                }
            } else t.focus()
        },
        hb: function () {
            var t = "top" == this.B.labelPosition, i = this.ob(),
                e = Math.max(i.offsetHeight + 2 * Ei.inputPadding, this.Gp);
            if (t && (e += this.F_), (e += this.B.bottomPadding || 0) != this.$getSize(0, 0)[2]) {
                var s = i.offsetHeight + (t ? this.F_ : 0), n = this.getTopParentView();
                clearTimeout(n.Ld), n.Ld = k(function () {
                    var t = s + 2 * Ei.inputPadding;
                    this.config.height != t && (this.config.height = t, this.resize()), this.ab && (this.rb(this.getInputNode()), this.ab = !1), this.ub && (this.B.keepText ? this.getInputNode().select() : this.getInputNode().value = "", this.ub = !1), (this.getPopup().isVisible() || this.ab) && this.getPopup().show(this.ob())
                }, this)
            }
            this.ub && this.getInputNode().select()
        },
        ob: function () {
            for (var t = this.Fp(), i = t.childNodes, e = 0; e < i.length; e++) if (i[e].className && -1 != i[e].className.indexOf("webix_inp_static")) return i[e];
            return t
        },
        getInputNode: function () {
            return this.Q.getElementsByTagName("INPUT")[0]
        },
        $compareValue: function (t, i) {
            return t.toString() == i.toString()
        },
        $prepareValue: function (t) {
            return "string" == typeof t ? t.split(this.B.separator) : b(t) ? t : [uh.api.$prepareValue.call(this, t)]
        },
        $setValue: function () {
            this.Lp && this.jp()
        },
        getValue: function (t) {
            if ("object" == M(t) && t.options) return this.cb();
            var i = this.B.value || [];
            return this.B.stringResult ? i.join(this.B.separator) : i
        },
        getText: function () {
            var t = this.B.value || [];
            if (!t.length) return "";
            for (var i = [], e = 0; e < t.length; e++) i.push(this.getPopup().getItemText(t[e]));
            return i.join(this.B.separator)
        },
        cb: function () {
            var t, i, e, s = [], n = this.B.value || [];
            if (!n.length) return n;
            for (e = this.getPopup(), t = 0; t < n.length; t++) (i = e.getList().getItem(n[t]) || (e.fb ? e.fb[n[t]] : null)) && s.push(i);
            return s
        },
        $setSize: function (t, i) {
            var e = this.B;
            if (zi.api.$setSize.call(this, t, i)) {
                if (!t || !i) return;
                "top" == e.labelPosition && (e.labelWidth = 0), this.render()
            }
        },
        lb: function (t) {
            var i = document.createElement("span");
            i.className = "webix_multicombo_input", i.style.visibility = "visible", i.style.height = "0px", i.innerHTML = t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"), document.body.appendChild(i);
            var e = i.offsetWidth + 10;
            return document.body.removeChild(i), e
        },
        nb: function () {
            var t = this.eb(), i = t.offsetWidth - (t.firstChild.offsetWidth + 1);
            return i <= 25 ? t.offsetWidth - 12 : i - 15
        },
        dm: function () {
            Jt(this.Fp(), "click", function () {
                this.getInputNode().focus()
            }, {bind: this}), Jt(this.getInputNode(), "focus", function () {
                -1 == this.Fp().className.indexOf("webix_focused") && (this.Fp().className += " webix_focused")
            }, {bind: this}), Jt(this.getInputNode(), "blur", function () {
                this.Fp().className = this.Fp().className.replace(" webix_focused", "")
            }, {bind: this}), Jt(this.getInputNode(), "input", function () {
                !this.getInputNode().value && this.Km && (this.getInputNode().style.width = "20px", this.ib = 20, this.Km = "", this.ab = !0, this.getPopup().show(this.ob()), this.hb())
            }, {bind: this}), Jt(this.getInputNode(), "keyup", function (t) {
                var i, e, s = this.getInputNode();
                if (t = t || event, !this.B.placeholder || this.B.value || s.value ? (e = i = this.lb(s.value), !this.B.tagMode && this.eb().firstChild && (e = this.nb())) : e = this.bm(this.B), s.style.width = e + "px", i != this.ib ? (this.B.keepText || 13 != t.keyCode ? this.Km = s.value : this.Km = !1, this.ab = !0,
                this.ib && this.getPopup().show(this.ob()), this.ib = i || e, this.hb()) : this.db != this.getPopup().$height && this.getPopup().show(this.ob()), -1 < s.value.indexOf(this.B.separator) && this.B.tagMode) {
                    var n = s.value.replace(this.B.separator, "");
                    if (n) if (this.B.newValues) this.ub = !0, this.Jm(n); else {
                        var h = this.getPopup().getItemId(n);
                        h && this.Zm(h)
                    }
                    this.B.keepText ? (this.Km = n, s.value = n, this.ub = !0, this.ab = !0, this.hb()) : s.value = ""
                }
            }, {bind: this}), Jt(this.getInputNode(), "keydown", function (t) {
                if (this.ub = !1, this.isVisible()) {
                    t = t || event;
                    var i = this.eb().lastChild;
                    if (this.db = this.getPopup().$height, 8 == t.keyCode && i && (!this.getInputNode().value && 100 < (new Date).valueOf() - (this.vb || 0) ? (this.ab = !0, this.Gm(i.getAttribute("optvalue"))) : this.vb = (new Date).valueOf()), 13 == t.keyCode || 9 == t.keyCode) {
                        var e = this.getInputNode(), s = "", n = ri(this.B.suggest);
                        n.getList().getSelectedId() || (e.value && (s = n.getSuggestion(e.value)), this.B.newValues ? (13 == t.keyCode && (this.ub = !0), this.Jm(e.value), this.B.keepText ? this.Km = e.value : e.value = "") : s && (9 == t.keyCode ? (this.ab = !1, this.Km = "", this.ib = 10, e.value = "", this.Zm(s)) : (this.ub = !0, this.Zm(s), this.B.keepText ? this.Km = e.value : e.value = ""))), 13 == t.keyCode && (this.ub = !0, this.ab = !0, this.B.keepText ? this.Km = e.value : e.value = "")
                    }
                }
            }, {bind: this}), ri(this.B.suggest).linkInput(this)
        }
    }, Lh = (P.protoUI(Nh, Ch.view), {
        name: "slider",
        $touchCapture: !0,
        defaults: {
            min: 0, max: 100, value: 50, step: 1, title: !1, moveTitle: !0, template: function (t, i) {
                var e = i._b = "x" + V(), s = "",
                    n = "<div class='webix_slider_title" + (t.moveTitle ? " webix_slider_move" : "") + "'" + (!t.moveTitle && t.vertical ? " style='line-height:" + (t.aheight - 2 * t.inputPadding) + "px;'" : "") + ">&nbsp;</div>",
                    h = "<div class='webix_slider_left'>&nbsp;</div>", r = "<div class='webix_slider_right'></div>",
                    o = "<div class='webix_slider_handle' webix_disable_drag='true' role='slider' aria-label='" + t.label + (t.title ? " " + t.title(t) : "") + "' aria-valuemax='" + t.max + "' aria-valuemin='" + t.min + "' aria-valuenow='" + t.value + "' tabindex='0' id='" + e + "'>&nbsp;</div>";
                return s = t.vertical ? "<div class='webix_slider_box'>" + r + h + o + "</div>" + n : n + "<div class='webix_slider_box'>" + h + r + o + "</div>", i.$renderInput(t, s, e)
            }
        },
        type_setter: function (t) {
            this.Tt.className += " webix_slider_" + t
        },
        title_setter: function (t) {
            return "string" == typeof t ? Wt(t) : t
        },
        pb: function () {
            return this.$view.querySelector(".webix_slider_handle")
        },
        jp: function () {
            var t = this.pb(), i = this.B;
            if (t) {
                var e = i.vertical ? this.ue : this.bm(i),
                    s = i.value % i.step ? Math.round(i.value / i.step) * i.step : i.value, n = i.max - i.min;
                s = Math.max(Math.min(s, i.max), i.min), s = i.vertical ? n - (s - i.min) : s - i.min;
                var h = Math.ceil((e - 2 * this.mb) * s / n), r = e - 2 * this.mb - h, o = i.vertical ? "top" : "left",
                    a = i.vertical ? "height" : "width";
                t.style[o] = this.mb + h - this.bb / 2 + "px", t.parentNode.style[a] = e + "px", r = Math.min(Math.max(r, 2 * this.gb), e - 2 * this.mb - 2 * this.gb), h = Math.min(Math.max(h, 2 * this.gb), e - 2 * this.mb - 2 * this.gb);
                var u = t.previousSibling;
                u.style[a] = r + "px", u.previousSibling.style[a] = h + "px", this.wb(t, h, r, o)
            }
        },
        wb: function (t, i, e, s) {
            var n = this.B;
            if (this.B.title) {
                var h = t.parentNode[n.vertical ? "nextSibling" : "previousSibling"];
                if (h.innerHTML = this.B.title(this.B, this), this.B.moveTitle) {
                    var r = 0;
                    if (n.vertical) r = i + 2 * this.gb - this.bb / 2; else {
                        var o = h.clientWidth / 2, a = i < o ? o - i - 2 * this.gb : 0,
                            u = e < o ? o - e - 2 * this.gb - this.bb / 2 : 0;
                        r = this.mb + i - o + a - u
                    }
                    h.style[s] = r + "px"
                }
            }
        },
        xb: function () {
            this.pb().setAttribute("aria-valuenow", this.B.value)
        },
        refresh: function () {
            var t = this.pb();
            t && (this.xb(), this.B.title && t.setAttribute("aria-label", this.B.label + " " + this.B.title(this.B, this)), this.jp())
        },
        $setValue: function () {
            this.refresh()
        },
        $getValue: function () {
            return this.B.value
        },
        $prepareValue: function (t) {
            return t = parseFloat(t), isNaN(t) ? 0 : t
        },
        $init: function (t) {
            Y.touch ? this.attachEvent("onTouchStart", S(this.yb, this)) : Jt(this.Tt, "mousedown", S(this.yb, this)), Jt(this.$view, "keydown", S(this.Mb, this)), t.vertical && (t.height = t.height || Ei.vSliderHeight, this.Tt.className += " webix_slider_vertical", this.mb = Ei.vSliderPadding)
        },
        $skin: function () {
            ph.api.$skin.call(this), this.bb = Ei.sliderHandleWidth, this.mb = Ei.sliderPadding, this.gb = Ei.sliderBorder
        },
        Mb: function (t) {
            var i = t.keyCode, e = this.B, s = e.value;
            if (32 < i && i < 41) {
                bt(t);
                var n = t.target || t.srcElement,
                    h = /webix_slider_handle_(\d)/.exec(n.className);
                if (this.Sb = h ? parseInt(h[1], 10) : -1, h && (s = e.value[this.Sb]), s = s < e.min ? e.min : s > e.max ? e.max : s, 36 === i) s = e.min; else if (35 === i) s = e.max; else {
                    var r = 37 === i || 40 === i || 34 === i ? -1 : 1;
                    (33 === i || 34 === i || 1 < e.step) && (r *= e.step), s = 1 * s + r
                }
                if (h) {
                    var o = e.value[this.Sb ? 0 : 1];
                    s = this.Sb && s <= o || !this.Sb && o <= s ? o : s
                }
                if (s >= e.min && s <= e.max) {
                    if (h) {
                        for (var a = [], u = 0; u < e.value.length; u++) a[u] = u === this.Sb ? s : e.value[u];
                        s = a
                    }
                    this.setValue(s), this.Sb = -1
                }
            }
        },
        yb: function (t) {
            if (!this.kb) {
                var i = t.target || t.srcElement;
                this.Cb && this.Cb(t);
                var e = this.B.value;
                if (b(e) && (e = _(e)), -1 != i.className.indexOf("webix_slider_handle")) return this.$b = e, this.Db.apply(this, arguments);
                -1 != i.className.indexOf("webix_slider") && (this.$b = e, this.B.value = this.Ib.apply(this, arguments), this.Db(t))
            }
        },
        Db: function () {
            Y.touch ? this.kb = [this.attachEvent("onTouchMove", S(this.Ab, this)), this.attachEvent("onTouchEnd", S(this.Fb, this))] : this.kb = [Kt(document.body, "mousemove", S(this.Ab, this)), Kt(window, "mouseup", S(this.Fb, this))], xt(document.body, "webix_noselect")
        },
        Fb: function () {
            this.kb && (Y.touch ? (this.detachEvent(this.kb[0]), this.detachEvent(this.kb[1])) : (Zt(this.kb[0]), Zt(this.kb[1])), this.kb = null), yt(document.body, "webix_noselect");
            var t = this.B.value;
            b(t) && (t = _(t)), this.B.value = this.$b, this.setValue(t), this.pb(this.Sb).focus(), this.Sb = -1
        },
        Ab: function () {
            this.B.value = this.Ib.apply(this, arguments), this.refresh(), this.callEvent("onSliderDrag", [])
        },
        Ib: function (t, i) {
            var e = 0, s = this.B.vertical ? "y" : "x";
            return e = Y.touch ? i ? i[s] : t[s] : mt(t)[s], this.Tb(e)
        },
        Tb: function (t) {
            var i = this.B, e = i.max - i.min, s = i.vertical ? "y" : "x", n = _t(this.pb().parentNode)[s] + this.mb,
                h = (i.vertical ? this.ue : this.bm(i)) - 2 * this.mb, r = h ? (t - n) * e / h : 0;
            return i.vertical && (r = e - r), r = Math.round((r + 1 * i.min) / i.step) * i.step, Math.max(Math.min(r, i.max), i.min)
        },
        dm: function () {
        }
    }), Oh = {api: Lh, view: P.protoUI(Lh, ph.view)}, Uh = {
        name: "rangeslider", $cssName: "slider webix_rangeslider", defaults: {
            separator: ",", value: [20, 80], template: function (t, i) {
                var e = "x" + V();
                i._b = [e + "_0", e + "_1"];
                var s = "role='slider' aria-label='" + t.label + (t.title ? " " + t.title(t) : "") + "' aria-valuemax='" + t.max + "' aria-valuemin='" + t.min + "' tabindex='0'",
                    n = "<div class='webix_slider_handle webix_slider_handle_0' webix_disable_drag='true' id='" + i._b[0] + "' " + s + " aria-valuenow='" + t.value[0] + "'>&nbsp;</div>";
                n += "<div class='webix_slider_handle webix_slider_handle_1' webix_disable_drag='true' id='" + i._b[1] + "' " + s + " aria-valuenow='" + t.value[1] + "'>&nbsp;</div>";
                var h = "<div class='webix_slider_title" + (t.moveTitle ? " webix_slider_move" : "") + "'" + (!t.moveTitle && t.vertical ? " style='line-height:" + (t.aheight - i.mb - 2 * t.inputPadding) + "px;'" : "") + ">&nbsp;</div>";
                t.moveTitle && (h = "<div class='webix_slider_title_box'>" + (h + h) + "</div>");
                var r = "<div class='webix_slider_right'>&nbsp;</div><div class='webix_slider_left'></div>", o = "";
                return o = t.vertical ? "<div class='webix_slider_box'>" + r + n + "</div>" + h : h + "<div class='webix_slider_box'>" + r + n + "</div>", i.$renderInput(t, o, e)
            }
        }, $prepareValue: function (t) {
            if (b(t) || (t = (t || "").toString().split(this.B.separator)), t[0] = parseFloat(t[0]), t[0] = isNaN(t[0]) ? 0 : t[0], t.length < 2 ? t[1] = t[0] : (t[1] = parseFloat(t[1]), t[1] = isNaN(t[1]) ? 0 : t[1]), t[0] > t[1]) {
                var i = [t[1], t[0]];
                t[0] = i[0], t[1] = i[1]
            }
            return t
        }, pb: function (t) {
            return t = t && 0 <= t ? t : 0, this.$view.querySelector(".webix_slider_handle_" + (t || 0))
        }, Vb: function (t, i) {
            var e, s, n;
            return s = (e = this.B).max - e.min, n = e.value[i] % e.step ? Math.round(e.value[i] / e.step) * e.step : e.value[i], n = Math.max(Math.min(n, e.max), e.min), Math.ceil((t - 2 * this.mb) * (n - e.min) / s)
        }, zb: function (t, i, e) {
            var s = this.mb + i - this.bb / 2 * (e ? -1 : 1);
            return (s = e ? t - s : s) + "px"
        }, Hb: function (t, i, e, s) {
            var n = i + this.mb + 2 * this.gb;
            return s && (n = t - n - e), n + "px"
        }, jp: function () {
            var t, i, e, s, n, h, r, o, a, u, c;
            i = this.pb(0), e = this.pb(1), b((t = this.B).value) || this.define("value", t.value), i && (a = t.vertical ? "height" : "width", c = t.vertical ? "top" : "left", h = (u = t.vertical ? this.ue : this.bm(t)) - 2 * this.mb - 2 * this.gb, s = this.Vb(u, 0), r = (n = this.Vb(u, 1)) - s, i.style[c] = this.zb(u, s, t.vertical), e.style[c] = this.zb(u, n, t.vertical), (o = i.parentNode).style[a] = u + "px", o.firstChild.style[a] = h + "px", o.childNodes[1].style[a] = r + "px",
                o.childNodes[1].style[c] = this.Hb(u, s, r, t.vertical), this.wb(i, [s, n], h, c))
        }, Rb: 0, Bb: function (t, i) {
            j(this.Rb) || (t[this.Rb].style.visibility = "visible"), j(i) || (t[i].style.visibility = "hidden", this.Rb = i)
        }, wb: function (t, i, e, s) {
            var n = this.B;
            if (this.B.title) {
                var h = t.parentNode, r = n.vertical ? "nextSibling" : "previousSibling";
                if (n.moveTitle) {
                    for (var o = h[r].childNodes, a = [], u = 0; u < 2; u++) a.push(this.Pb(o[u], n.value[u], i[u], e, s, u));
                    var c = n.vertical ? a[0] - a[1] - this.bb : a[1] - a[0],
                        f = n.vertical ? "clientHeight" : "clientWidth";
                    o[0][f] / 2 + o[1][f] / 2 > c ? this.Bb(o, j(this.Sb) ? 0 : this.Sb ? 0 : 1) : this.Bb(o);
                    for (var l = 0; l < 2; l++) o[l].style[s] = a[l] + "px"
                } else h[r].innerHTML = this.B.title(this.B, this)
            }
        }, Pb: function (t, i, e, s, n, h) {
            t.innerHTML = this.B.title({value: i}, this);
            var r = t.clientWidth / 2, o = 0;
            return o = this.B.vertical ? s - e - this.bb / 2 - (h ? this.mb : 0) + 2 * this.gb : (o = e + this.bb / 2 + 2 * this.gb - r, o = e < r ? r - e + o : o, h && s < r + e ? o - r + (s - e) : o)
        }, xb: function () {
            for (var t = 0; t < 2; t++) this.pb(t).setAttribute("aria-valuenow", this.B.value[t])
        }, Cb: function (t) {
            var i = t.target || t.srcElement, e = /webix_slider_handle_(\d)/.exec(i.className);
            this.Sb = e ? parseInt(e[1], 10) : -1, e && this.jb(this.Sb)
        }, $compareValue: function (t, i) {
            return i = this.$prepareValue(i), t[0] === i[0] && t[1] === i[1]
        }, $getValue: function () {
            var t = this.B.value;
            return this.B.stringResult ? t.join(this.B.separator) : t
        }, jb: function (t) {
            var i = this.pb(t), e = this.pb(1 - t);
            -1 == i.className.indexOf("webix_slider_active") && (i.className += " webix_slider_active"), e.className = e.className.replace(" webix_slider_active", ""), i.focus()
        }, Tb: function (t) {
            var i = this.B, e = i.value, s = i.max - i.min, n = i.vertical ? "y" : "x", h = _t(this.pb().parentNode)[n],
                r = Math.ceil((t - h) * s / (i.vertical ? this.ue : this.bm(i)));
            r = Math.round((r + 1 * i.min) / i.step) * i.step, i.vertical && (r = s - r);
            var o = null, a = _t(this.pb(0))[n], u = _t(this.pb(1))[n];
            a != u || i.value[0] != i.min && i.value[0] != i.max ? 0 <= this.Sb ? o = this.Sb : a == u ? o = t < a ? 0 : 1 : (o = Math.abs(a - t) < Math.abs(u - t) ? 0 : 1, this.Sb = o) : (this.Sb = o = i.value[0] == i.min ? 1 : 0, this.jb(o));
            return e[o] = o ? Math.max(Math.min(r, i.max), e[0]) : Math.max(Math.min(r, e[1]), i.min), e
        }
    }, Wh = (P.protoUI(Uh, Oh.view), {
        name: "switch", defaults: {
            template: function (t, i) {
                i.Eb();
                var e = t.name || "x" + V(), s = "";
                t.labelRight && (s = "<label class='webix_label_right'>" + t.labelRight + "</label>", t.labelWidth && (t.label = t.label || "&nbsp;"));
                var n = t.checkValue == t.value,
                    h = 'aria-label="' + (t.label || t.labelRight || "") + '" role="checkbox" tabindex="0" aria-checked="' + (n ? "true" : "false") + '" ' + (t.readonly ? "aria-readonly='true'" : "") + '"',
                    r = '<div class="webix_switch_box ' + (n ? " webix_switch_on" : "") + '" style="width:' + i.Nb + 'px"><span class="webix_switch_text">' + ((n ? t.onLabel : t.offLabel) || "") + '</span><button class="webix_switch_handle" ' + h + ' style="left:' + (n ? i.Nb - i.Lb : 0) + 'px;"><input  id="' + e + '" class="webix_switch_toggle" type="checkbox" ' + (n ? "checked" : "") + "></button></div>" + s;
                return i.$renderInput(t, r, e)
            }
        }, $skin: function () {
            wh.api.$skin.call(this), this.Lb = Ei.switchHeight, this.Nb = Ei.switchWidth
        }, $setValue: function (t) {
            var i = this.B, e = t == i.checkValue, s = this.$view.querySelector(".webix_switch_box");
            if (s) {
                var n = s.childNodes[1], h = (e ? i.onLabel : i.offLabel) || "";
                e ? xt(s, "webix_switch_on") : yt(s, "webix_switch_on"), n.style.left = (e ? this.Nb - this.Lb : 0) + "px", n.firstChild.checked = e, n.setAttribute("aria-checked", e ? "true" : "false"), h && (s.childNodes[0].innerHTML = h)
            }
        }, Eb: function () {
            var t = this.B;
            if (t.onLabel || t.offLabel) {
                var i = t.onLabel ? Mt(t.onLabel, "webix_switch_text").width : 0,
                    e = t.onLabel ? Mt(t.offLabel, "webix_switch_text").width : 0;
                this.Nb = Math.max(i, e) + this.Lb
            }
        }, on_click: {
            webix_switch_box: function () {
                this.B.readonly || this.toggle()
            }, webix_label_right: function () {
                this.B.readonly || this.toggle()
            }
        }
    }), Yh = (P.protoUI(Wh, wh.view), {
        name: "tabbar", $init: function () {
            this.attachEvent("onKeyPress", this.ve)
        }, $skin: function () {
            var t = Ei, i = this.defaults;
            i.topOffset = t.tabTopOffset || 0, i.tabOffset = "undefined" != typeof t.tabOffset ? t.tabOffset : 10, i.bottomOffset = t.tabBottomOffset || 0, i.height = t.tabbarHeight, i.tabMargin = t.tabMargin, i.inputPadding = t.inputPadding, i.tabMinWidth = t.tabMinWidth || 100, i.tabMoreWidth = t.tabMoreWidth || 40, i.borderless = !t.tabBorder
        }, Ob: function () {
            var t, i, e = this.B, s = this.Ka(e.options),
                n = this.Yp - 2 * e.tabOffset, h = e.optionWidth || e.tabMinWidth;
            if (i = s.length, e.tabMinWidth && n / i < h) return {max: parseInt(n / h, 10) || 1};
            if (!e.optionWidth) for (t = 0; t < i; t++) s[t].width && (n -= s[t].width + (t || e.type ? 0 : e.tabMargin), i--);
            return {width: i ? n / i : e.tabMinWidth}
        }, Mm: function () {
            var i = this, t = this.B;
            if (!t.tabbarPopup) {
                var e = ei({
                    view: "popup",
                    autofocus: !1,
                    width: t.popupWidth || 200,
                    body: {
                        view: "list",
                        borderless: !0,
                        select: !0,
                        navigation: !0,
                        css: "webix_tab_list",
                        autoheight: !0,
                        yCount: t.yCount,
                        type: {template: t.popupTemplate}
                    }
                }), s = e.getBody();
                e.attachEvent("onShow", function () {
                    s.unselect(), xi.setFocus(s);
                    var t = s.getItemNode(s.getFirstId());
                    t && t.focus()
                }), s.attachEvent("onItemClick", function (t) {
                    return i.Ub(t)
                }), s.attachEvent("onEnter", function () {
                    return i.Ub()
                }), t.tabbarPopup = e.B.id, this.zt.push(e)
            }
            this.Mm = function () {
            }
        }, Ub: function (t) {
            var i = ri(this.B.tabbarPopup);
            return (t = t || i.getBody().getSelectedId()) && this.callEvent("onBeforeTabClick", [t]) && (this.setValue(t), i.hide(), this.callEvent("onAfterTabClick", [t]), this.refresh(), this.focus()), !1
        }, getPopup: function () {
            return this.Mm(), ri(this.B.tabbarPopup)
        }, moreTemplate_setter: Wt, popupTemplate_setter: Wt, defaults: {
            popupWidth: 200,
            popupTemplate: "#value#",
            yCount: 7,
            moreTemplate: '<span class="webix_icon wxi-dots"></span>',
            template: function (t, i) {
                i.Jp(t.options);
                var e, s, n, h, r, o, a, u = i.Ka(t.options);
                if (u.length) {
                    t.value || (t.value = i.Ja(!0)), e = "", t.tabOffset && (e += "<div class='webix_tab_filler' style='width:" + t.tabOffset + "px;'>&nbsp;</div>"), i.Yp - 2 * t.tabOffset - (t.type ? 0 : t.tabMargin * (u.length - 1)), o = t.topOffset + t.bottomOffset;
                    var c = i.Ob();
                    if (c.max && c.max < u.length) {
                        var f = i.getPopup();
                        f.hide();
                        var l = f.getBody() || null;
                        if (l) if (c.max) {
                            for (var d = 0, v = !1; d < u.length && !v; d++) if (u[d].id == t.value && (v = !0, d + 1 > c.max)) {
                                var _ = u.splice(d, 1);
                                u = u.splice(0, c.max - 1).concat(_).concat(u)
                            }
                            l.clearAll(), l.parse(u.slice(c.max))
                        } else l.clearAll()
                    } else i.B.tabbarPopup && ri(i.B.tabbarPopup).hide();
                    r = t.tabOffset;
                    for (var p = 0, m = !1; p < u.length && !m; p++) a = c && c.max ? (c.max == p + 1 && (m = !0), (i.Yp - 2 * t.tabOffset - (!t.type && 1 < c.max ? t.tabMargin * (c.max - 1) : 0) - t.tabMoreWidth) / c.max) : c.width, r += (a = u[p].width || t.optionWidth || a) + (p && !t.type ? t.tabMargin : 0), 0 < t.tabMargin && p && !t.type && (e += "<div class='webix_tab_filler' style='width:" + t.tabMargin + "px;'></div>"), e += i.Wb(u[p], a), m && (e += '<div role="button" tabindex="0" aria-label="' + $.aria.showTabs + '" class="webix_tab_more_icon" style="width:' + t.tabMoreWidth + 'px;">' + t.moreTemplate(t, i) + "</div>", r += t.tabMoreWidth);
                    0 < (s = i.oe - r) && !t.type && (e += "<div class='webix_tab_filler' style='width:" + s + "px;'>&nbsp;</div>")
                } else e = "<div class='webix_tab_filler' style='width:" + i.Yp + "px; border-right:0px;'></div>";
                return n = "", h = o && !t.type ? "height:" + (i.ue - o) + "px" : "", t.topOffset && !t.type && (n += "<div class='webix_before_all_tabs' style='width:100%;height:" + t.topOffset + "px'></div>"), n += "<div style='" + h + "' role='tablist' class='webix_all_tabs " + (t.type ? "webixtype_" + t.type : "") + "'>" + e + "</div>", t.bottomOffset && !t.type && (n += "<div class='webix_after_all_tabs' style='width:100%;height:" + t.bottomOffset + "px'></div>"), n
            }
        }, qa: function () {
            return this.$view.querySelectorAll(".webix_item_tab")
        }, Wb: function (t, i) {
            var e, s = "", n = "", h = !!t.disabled, r = this.config;
            if (t.id == r.value && (s += " webix_selected"), h && (s += " webix_disabled"), t.css && (s += " " + t.css), r.tooltip && (n = " webix_t_id='" + t.id + "'"), i = t.width || i, e = '<div class="webix_item_tab' + s + '" button_id="' + t.id + '" role="tab" aria-selected="' + (t.id == r.value ? "true" : "false") + '" tabindex="' + (h || t.id != r.value ? "-1" : "0") + '" style="width:' + i + 'px;"' + (h ? ' webix_disabled="true"' : "") + n + ">", this.Yb) {
                var o = this.ue - 2 * r.inputPadding - 2, a = this.ue - 2, u = P.extend({cheight: o, aheight: a}, t);
                e += this.Yb(u)
            } else {
                e += (t.icon ? "<span class='webix_icon " + t.icon + "'></span> " : "") + t.value
            }
            return h || !t.close && !r.close || (e += "<span role='button' tabindex='0' aria-label='" + $.aria.closeTab + "' class='webix_tab_close webix_icon wxi-close'></span>"), e += "</div>"
        }, Fp: function () {
            return this.Q.firstChild
        }, vd: {
            image: "<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",
            icon: "<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",
            iconTop: "<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"
        }, type_setter: function (t) {
            return this.B.tabOffset = 0, this.vd[t] && (this.Yb = Wt(this.vd[t])), t
        }
    }), qh = (P.protoUI(Yh, Th.view), {
        name: "richtext", defaults: {label: "", labelWidth: 80, labelPosition: "left"}, $init: function () {
            this.Tt.className += " webix_richtext", this.$ready.unshift(this.qb)
        }, $skin: function () {
            pn.api.$skin.call(this), this.defaults.paddingX = Ei.inputSpacing / 2, this.defaults.paddingY = Ei.inputPadding
        }, getInputNode: function () {
            return this.$view.querySelector(".webix_richtext_editor")
        }, Gb: function (t) {
            return {
                view: "toggle",
                type: "icon",
                icon: "wxi-" + t,
                name: t,
                id: t,
                label: $.richtext[t],
                autowidth: !0,
                action: t,
                click: this.Xb
            }
        }, qb: function () {
            var t = this, i = {
                    view: "template",
                    css: "webix_richtext_container",
                    borderless: !0,
                    template: "<div class='webix_richtext_editor' contenteditable='true'>" + this.getValue() + "</div>",
                    on: {
                        onAfterRender: function () {
                            t.Lp = !0, t.refresh(), Jt(t.getInputNode(), "blur", function () {
                                t.Jb(this.innerHTML)
                            }), Jt(t.getInputNode(), "keyup", function () {
                                t.Kb()
                            })
                        }
                    },
                    onClick: {
                        webix_richtext_editor: function () {
                            t.Kb()
                        }
                    }
                }, e = [this.Gb("underline"), this.Gb("bold"), this.Gb("italic"), {}],
                s = {view: "toolbar", id: "toolbar", elements: e}, n = [s, i];
            "top" === this.config.labelPosition ? (s.elements = e.concat([{
                view: "label",
                label: this.config.label,
                align: "right"
            }, {width: 4}]), this.rows_setter(n)) : this.config.labelWidth ? (this.config.margin = 0, this.cols_setter([{
                template: this.config.label || " ",
                css: "webix_richtext_inp_label" + (this.config.required ? " webix_required" : ""),
                borderless: !0,
                width: this.config.labelWidth
            }, {rows: n}])) : this.rows_setter(n)
        }, labelWidth_setter: function (t) {
            return t ? Math.max(t, Ei.dataPadding) : 0
        }, Kb: function () {
            var t;
            this.$$("toolbar").setValues({
                italic: !1,
                underline: !1,
                bold: !1
            }), t = window.getSelection ? window.getSelection() : document.selection.createRange();
            for (var i = 0; i < t.rangeCount; ++i) this.$view.contains(this.getInputNode()) && (document.queryCommandState("bold") && this.$$("bold").setValue(!0), document.queryCommandState("underline") && this.$$("underline").setValue(!0), document.queryCommandState("italic") && this.$$("italic").setValue(!0))
        }, refresh: function () {
            this.Lp && (this.getInputNode().innerHTML = this.config.value || "")
        }, Zb: function (t) {
            var i, e;
            if (window.getSelection) {
                e = (i = window.getSelection()).toString().length;
                var s = this.getInputNode();
                if (s.contains(i.anchorNode) && s.contains(i.focusNode) && 0 < e) for (var n = 0; n < i.rangeCount; ++n) {
                    var h = i.getRangeAt(n);
                    if (i.isCollapsed) {
                        var r = i.focusNode.textContent, o = i.focusNode, a = i.anchorOffset,
                            u = r.substring(0, a).match(/[A-Za-z]*$/)[0], c = r.substring(a).match(/^[A-Za-z]*/)[0],
                            f = a - u.length, l = a + c.length;
                        h.setStart(o, f), h.setEnd(o, l), i.removeAllRanges(), i.addRange(h), document.execCommand(t, !1, "")
                    } else document.execCommand(t, !1, "")
                }
            }
        }, Xb: function () {
            this.getTopParentView().Zb(this.config.action)
        }, focus: function () {
            if (!xi.canFocus(this)) return !1;
            this.getInputNode().focus()
        }, Jb: function (t) {
            var i = this.config.value;
            this.config.value = t || "", i !== t && this.callEvent("onChange", [t, i])
        }, setValue: function (t) {
            this.Jb(t), this.refresh()
        }, getValue: function () {
            this.getInputNode() && (this.config.value = this.getInputNode().innerHTML);
            var t = this.config.value;
            return t || (0 === t ? "0" : "")
        }
    });
    P.protoUI(qh, $e, pn.view);
    Qt(jh.view, {
        name: "uploader",
        template: "{common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>{common.fileName()}",
        percent: function (t) {
            return "transfer" == t.status ? "<div style='width:60px; text-align:center; float:right'>" + t.percent + "%</div>" : "<div class='webix_upload_" + t.status + "'><span class='" + ("error" == t.status ? "error_icon" : "webix_icon wxi-check") + "'></span></div>"
        },
        removeIcon: function () {
            return "<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"
        },
        fileName: function (t) {
            return "<div style='text-overflow:ellipsis; white-space:nowrap; overflow:hidden; padding-right:8px;'>" + t.name + "</div>"
        },
        on_click: {
            webix_remove_upload: function (t, i) {
                ri(this.config.uploader).files.remove(i)
            }
        }
    });
    var Gh = {
        name: "uploader",
        defaults: {autosend: !0, multiple: !0, inputName: "upload"},
        $cssName: "button webix_uploader",
        $allowsClear: !0,
        on_click: {
            webix_hidden_upload: function () {
                return !1
            }
        },
        send: function () {
        },
        fileDialog: function () {
        },
        stopUpload: function () {
        },
        $skin: function () {
            uh.api.$skin.call(this), "material" != Ni && "mini" != Ni || (this.defaults.css = "webix_primary")
        },
        $init: function () {
            this.files = new mh, this.zt = [this.files], P.extend(this, fs, !0)
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.render()
        },
        apiOnly_setter: function (t) {
            return k(this.render, this), this.$apiOnly = t
        },
        yf: function (t) {
            for (var i = 0; i < t.length; i++) this.addFile(t[i])
        },
        link_setter: function (t) {
            return t && k(function () {
                var t = ri(this.B.link);
                if (!t) {
                    var i = this.getTopParentView();
                    i.$$ && (t = i.$$(this.B.link))
                }
                t.sync && t.filter ? t.sync(this.files) : t.setValues && this.files.data.attachEvent("onStoreUpdated", function () {
                    t.setValues(this)
                }), t.B.uploader = this.B.id
            }, this), t
        },
        addFile: function (t, i, e, s) {
            var n = null;
            "object" == M(t) && (t = (n = t).name, i = n.size);
            var h = this.Qb(i);
            e = e || t.split(".").pop();
            var r = {file: n, name: t, id: V(), size: i, sizetext: h, type: e, context: this.Cf, status: "client"};
            if (n && n.webkitRelativePath && (r.name = n.webkitRelativePath), s && P.extend(r, s, !0), this.callEvent("onBeforeFileAdd", [r])) {
                this.B.multiple || this.files.clearAll();
                var o = this.files.add(r);
                this.callEvent("onAfterFileAdd", [r]), o && this.B.autosend && this.send(o)
            }
            return r
        },
        Df: function (t) {
            var i = this.B.upload, e = P.extend(t.urlData || {}, this.B.urlData || {});
            if (i && e) {
                var s = [];
                for (var n in e) s.push(encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
                s.length && (i += (-1 == i.indexOf("?") ? "?" : "&") + s.join("&"))
            }
            return i
        },
        addDropZone: function (t, i) {
            var e = C(t), s = "";
            i && (s = " " + ot({content: '"' + i + '"'}, ":before"));
            var n = "webix_drop_file" + s, h = null;
            Jt(e, "dragover", bt), Jt(e, "dragover", function () {
                xt(e, n, !0), h && (clearTimeout(h), h = null)
            }), Jt(e, "dragleave", function () {
                h = setTimeout(function () {
                    yt(e, n)
                }, 150)
            }), Jt(e, "drop", S(function (t) {
                return yt(e, n), this.$drop(t), bt(t)
            }, this))
        },
        Qb: function (t) {
            for (var i = 0; 1024 < t;) i++, t /= 1024;
            return Math.round(100 * t) / 100 + " " + $.fileSize[i]
        },
        Ff: function (t, i) {
            var e = this.files.getItem(t);
            P.extend(e, i, !0), e.status = "server", e.progress = 100, this.callEvent("onFileUpload", [e, i]), this.callEvent("onChange", []), this.files.updateItem(t), this.isUploaded() && this.Af(i)
        },
        Af: function (t) {
            this.callEvent("onUploadComplete", [t]), this.$f && (this.$f.call(this, t), this.$f = 0)
        },
        isUploaded: function () {
            for (var t = this.files.data.order, i = 0; i < t.length; i++) if ("server" != this.files.getItem(t[i]).status) return !1;
            return !0
        },
        $onUploadComplete: function () {
        },
        $updateProgress: function (t, i) {
            this.files.getItem(t).percent = Math.round(i), this.files.updateItem(t)
        },
        setValue: function (t) {
            "string" == typeof t && t && (t = {
                value: t,
                status: "server"
            }), this.files.clearAll(), t && this.files.parse(t), this.callEvent("onChange", [])
        },
        getValue: function () {
            var i = [];
            return this.files.data.each(function (t) {
                "server" == t.status && i.push(t.value || t.name)
            }), i.join(",")
        }
    }, Xh = (P.protoUI(Gh, uh.view), {
        name: "texthighlight", defaults: {
            template: function (t, i) {
                var e = t.name || t.id, s = "x" + V(), n = i.bm(t),
                    h = '<div class="webix_text_highlight" style="width:'.concat(n, 'px;"><div class="webix_text_highlight_value"');
                return "textarea" == t.type && Y.mobile && Y.isSafari && (h += ' style="margin-left:'.concat(Ei.dataPadding + 3, "px; margin-right:").concat(Ei.dataPadding + 3, 'px;"')), h += "></div></div>", "textarea" == t.type ? (h += "".concat(i.wm("textarea"), ' style="width:').concat(n, 'px;" id="').concat(s, '" name="').concat(e, '" class="webix_inp_textarea">').concat(i.Op(t.value), "</textarea>"), i.$renderInput(t, h, s)) : h + i.$renderInput(t)
            }, highlight: function (t) {
                return Wt.escape(t)
            }, type: "text"
        }, $init: function (t) {
            var i = this, e = t.type || this.defaults.type;
            this.Tt.className += " webix_el_" + e, "textarea" == e ? (t.height = t.height || 0, t.minHeight = t.minHeight || 60, this.Mi = !0) : (this.scrollEv = Kt(document, "selectionchange", function () {
                i.$view.contains(document.getSelection(
                ).focusNode) && i.tg()
            }), this.attachEvent("onDestruct", function () {
                Zt(i.scrollEv)
            })), this.attachEvent("onChange", function () {
                return i.tg()
            }), this.attachEvent("onAfterRender", function () {
                i.ig();
                ["scroll", "focus", "blur", "paste", "cut", "keyup", "input"].forEach(function (t) {
                    return Jt(i.getInputNode(), t, function () {
                        return i.tg()
                    })
                }), i.eg(!0)
            })
        }, $setSize: function () {
            ph.api.$setSize.apply(this, arguments), this.ig()
        }, xm: function (t) {
            return "textarea" == this.B.type ? t ? this.F_ - this.B.inputPadding : "" : ph.api.xm.apply(this, arguments)
        }, getInputNode: function () {
            return this.Q.querySelector("text" == this.B.type ? "input" : "textarea")
        }, sg: function () {
            return this.Q.querySelector(".webix_text_highlight")
        }, eg: function (t) {
            var i = this.sg().firstElementChild, e = this.getValue();
            (t || e != (this.ng || "")) && (this.ng = e, i.innerHTML = this.B.highlight.apply(this, [e]) + "&nbsp;")
        }, hg: function () {
            var t = this.sg();
            "text" == this.B.type && (t = t.firstElementChild);
            var i = this.getInputNode();
            t.scrollTop = i.scrollTop, t.scrollLeft = i.scrollLeft
        }, ig: function () {
            if (this.isVisible()) {
                var t = this.getInputNode(), i = this.sg().style;
                i.left = t.offsetLeft + "px", i.top = t.offsetTop + "px", i.height = t.getBoundingClientRect().height + "px"
            }
        }, tg: function () {
            var t = this;
            k(function () {
                t.eg(), t.hg()
            })
        }
    }), Jh = (P.protoUI(Xh, ph.view), {
        name: "suggest",
        defaults: {
            autofocus: !1,
            type: "list",
            keyPressTimeout: 1,
            body: {yCount: 10, autoheight: !0, body: !0, select: !0, borderless: !0, navigation: !0},
            filter: function (t, i) {
                return 0 === t.value.toString().toLowerCase().indexOf(i.toLowerCase())
            }
        },
        template_setter: Wt,
        filter_setter: function (t) {
            return v(t, this.$scope)
        },
        rg: !0,
        $init: function (t) {
            var i = {};
            P.extend(i, _(this.defaults.body)), i.view = t.type || this.defaults.type;
            var e = this.og(i);
            t.body && P.extend(e, t.body, !0), t.data && (e.data = t.data), t.url && (e.url = t.url), t.datatype && (e.datatype = t.datatype), t.id && (i.id = i.id || t.id + "_" + i.view), t.body = i, this.$ready.push(this.ag), this.attachEvent("onShow", function () {
                if (this.B.master) {
                    var t = ri(this.B.master);
                    if (t) (t.ob ? t.ob() : t.getInputNode()).setAttribute("aria-expanded", "true")
                }
                this.sa()
            }), this.attachEvent("onHide", function () {
                if (this.B.master) {
                    var t = ri(this.B.master);
                    if (t) (t.ob ? t.ob() : t.getInputNode()).setAttribute("aria-expanded", "false")
                }
            }), this.ug = {}
        },
        og: function (t) {
            return t
        },
        cg: function () {
            return null
        },
        fg: function (t) {
            this.ea.value = t
        },
        lg: function (t) {
            var i, e = t.id ? this.getItemText(t.id) : t.text || t.value;
            if (this.B.master) {
                var s = ri(this.B.master);
                if (i = s.getInputNode()) {
                    var n = s.B.text;
                    s.options_setter ? s.$setValue(t.$empty ? "" : t.id) : s.$setValueHere ? s.$setValueHere(e, t, this.cg()) : s.$setValue(e), s.B.text = n
                }
            } else this.ea && this.fg(e);
            (i = i || this.ea) && i.focus()
        },
        setMasterValue: function (t, i) {
            var e = t.id ? this.getItemText(t.id) : t.text || t.value;
            if (this.B.master) {
                var s = ri(this.B.master);
                i && t.id ? s.refresh() : s.options_setter ? s.setValue(t.$empty ? "" : t.id) : s.setValueHere ? s.setValueHere(e, t, this.cg()) : s.setValue(e)
            } else this.ea && this.fg(e);
            i || (this.hide(), this.ea && this.ea.focus()), this.callEvent("onValueSuggest", [t, e]), k(function () {
                D("onEditEnd", [])
            })
        },
        getMasterValue: function () {
            return this.B.master ? ri(this.B.master).getValue() : null
        },
        getItemId: function (t) {
            var i = this.getList();
            for (var e in i.data.pull) {
                var s = i.getItem(e);
                if (this.B.filter.call(this, s, t)) return s.id
            }
        },
        getItemText: function (t) {
            var i = this.getList().getItem(t);
            if (!i) return this.ug[t] || "";
            if (this.B.template) return this.B.template.call(this, i, this.type);
            if (this.B.textValue) return "" + i[this.B.textValue];
            var e = this.getList().type, s = e.template.call(e, i, e);
            return this.ug[t] = s
        },
        getSuggestion: function (t) {
            var i, e = this.getList(), s = e.data.order;
            return e.getSelectedId && (i = e.getSelectedId()), t && s.length && (!i || s.find(i) < 0) && (i = s[0], !e.config.dataFeed && !this.config.filter.call(this, e.data.pull[i], t)) ? null : i && ("object" == M(i) && (i += ""), e.getItem(i).$empty) ? null : i
        },
        getList: function () {
            return this.Ct
        },
        ag: function () {
            var i = this.getList(), t = this.B.type;
            i.count ? (i.attachEvent("onItemClick", S(function (t) {
                this.setMasterValue(i.getItem(t))
            }, this)), i.data.attachEvent("onstoreupdated", S(function (t, i, e) {
                "delete" == e && t == this.getMasterValue() ? this.setMasterValue({
                    id: "",
                    text: ""
                }, 1) : "update" == e && t == this.getMasterValue(
                ) && this.setMasterValue(i, 1)
            }, this)), i.data.attachEvent("onAfterFilter", S(this.tb, this)), i.data.attachEvent("onStoreLoad", S(this.tb, this)), j(this.B.fitMaster) && (this.B.fitMaster = !0)) : "calendar" == t ? (i.attachEvent("onDateSelect", function () {
                this.getParentView().setMasterValue({value: i.getSelectedDate()}, i.config.multiselect)
            }), i.attachEvent("onTodaySet", function (t) {
                this.getParentView().setMasterValue({value: t})
            }), i.attachEvent("onDateClear", function (t) {
                this.getParentView().setMasterValue({value: t})
            })) : "colorboard" == t && i.attachEvent("onItemClick", function (t) {
                this.getParentView().setMasterValue({value: t})
            })
        },
        input_setter: function (t) {
            return this.linkInput(t), 0
        },
        linkInput: function (i) {
            var e;
            i.getInputNode ? (e = i.getInputNode()).webix_master_id = i.B.id : e = C(i), Jt(e, "keydown", function (t) {
                e == document.body && !this.isVisible() || (i.config ? i.config.readonly : e.getAttribute("readonly")) || this.dg(t)
            }, {bind: this}), i.ob && (e = i.ob()), e.setAttribute("aria-autocomplete", "list"), e.setAttribute("aria-expanded", "false"), "DIV" === e.tagName && (e.setAttribute("aria-live", "assertive"), e.setAttribute("aria-atomic", "true")), this.vg = !0
        },
        dg: function (t) {
            t = t || event;
            var e = this.getList(), s = t.target || t.srcElement;
            if ((s != document.body || this.isVisible()) && "webix_clipbuffer" != s.className) {
                this.ea = s, this.B.master = s.webix_master_id;
                var i = t.keyCode;
                if (16 != i && 17 != i) {
                    if (9 == i) return this._g(t, e);
                    if (27 == i) return this.pg(t, e);
                    if (13 == i) return this.$enterKey(t, e);
                    if (this.mg(t) && this.isVisible()) return bt(t), !1;
                    var n = "true" == s.getAttribute("contentEditable");
                    j(s.value) && !n || (this.gg && (this.gg = clearTimeout(this.gg)), this.gg = k(function () {
                        if (this.vg || xi.getFocus() == ri(this.B.master)) {
                            this.wg = !0;
                            var i = n ? s.innerText : s.value;
                            this.xg && this.xg(), e.config.dataFeed ? e.filter("value", i) : e.filter && e.filter(S(function (t) {
                                return this.B.filter.call(this, t, i)
                            }, this))
                        }
                    }, this, [], this.B.keyPressTimeout))
                }
            }
        },
        tb: function () {
            if (!this.wg) return !0;
            this.wg = !1, 0 < this.getList().count() ? (this.adjust(), this.isVisible() || (this.Qm = !0), this.show(this.ea, null, !0), this.Qm = !1) : (this.hide(), this.ea = null)
        },
        show: function (t) {
            var i = !t || "INPUT" != t.tagName && "TEXTAREA" != t.tagName ? null : t;
            if (!this.isVisible() || i && i != this.ea) {
                var e = this.getList();
                e.filter && !this.Qm && e.filter(""), this.$customWidth ? this.$customWidth(t) : t && t.tagName && this.B.fitMaster && (this.B.width = t.offsetWidth - 2), e.dd && e.render(), this.adjust(), i && (this.ea = i)
            }
            Wn.api.show.apply(this, arguments)
        },
        sa: function (t) {
            t = t || this.getList();
            var i = this.getMasterValue();
            t.select && t.showItem ? i && t.exists && t.exists(i) ? (t.select(i), t.showItem(i)) : (t.unselect(), t.showItem(t.getFirstId())) : t.setValue && (this.B.master && (i = ri(this.B.master).$prepareValue(i)), t.setValue(i))
        },
        $enterKey: function (t, i) {
            var e, s, n = this.isVisible();
            this.B.master && (s = ri(this.B.master)), s && s.ym && s.B.editable ? s.ri() : n && (i.count ? (e = i.getSelectedId(!1, !0), 1 == i.count() && i.getFirstId() != e && (e = i.getFirstId()), e && (e = i.getItem(e))) : (i.getSelectedDate ? e = i.getSelectedDate() : i.getValue && (e = i.getValue()), e && (e = {value: e})), e && this.setMasterValue(e)), n ? this.hide() : this.rg && this.show(this.ea)
        },
        pg: function () {
            return this.hide()
        },
        _g: function () {
            return this.hide()
        },
        mg: function (t) {
            var i, e = this.getList(), s = t.keyCode;
            if (!(e.moveSelection && s < 41 && 32 < s) || t.ctrlKey || t.metaKey || t.shiftKey || t.altKey) return !1;
            if (40 === s || 38 === s) {
                this.rg && !this.isVisible() && this.show(this.ea);
                var n = 38 === s ? "up" : "down";
                e.moveSelection(n, !1, !1)
            } else {
                if (e.count || !e.count && !e.isVisible()) return !1;
                var h;
                33 == s && (h = "pgup"), 34 == s && (h = "pgdown"), 35 == s && (h = "bottom"), 36 == s && (h = "top"), 37 == s && (h = "left"), 39 == s && (h = "right"), e.moveSelection(h, !1, !1)
            }
            return e.count ? i = e.getSelectedItem(!1) : (e.getSelectedDate ? i = e.getSelectedDate() : e.getValue && (i = e.getValue()), i && (i = {value: i})), i && this.isVisible() && this.lg(i), !0
        },
        getValue: function () {
            var t = this.getList(), i = (t.getValue ? t.getValue() : t.getSelectedId()) || "";
            if (i = i.id || i, t.getItem) {
                var e = t.getItem(i);
                if (e && e.$empty) return ""
            }
            return i
        },
        setValue: function (t) {
            var i = this.getList();
            t ? i.exists(t) && (i.select(t), i.showItem(t)) : (i.unselect(), i.showItem(i.getFirstId()))
        }
    }), Kh = {api: Jh, view: P.protoUI(Jh, Wn.view)}, Zh = {
        name: "multisuggest", defaults: {
            separator: ",",
            type: "layout",
            button: !0,
            width: 0,
            filter: function (t, i) {
                return -1 < this.getItemText(t.id).toString().toLowerCase().indexOf(i.toLowerCase())
            },
            body: {
                rows: [{
                    view: "list",
                    type: "multilist",
                    borderless: !0,
                    autoheight: !0,
                    yCount: 5,
                    multiselect: "touch",
                    select: !0,
                    on: {
                        onItemClick: function (t) {
                            var i = this.getParentView().getParentView();
                            k(function () {
                                i.yg(t)
                            })
                        }
                    }
                }, {
                    view: "button", click: function () {
                        this.getParentView().getParentView().hide(), k(function () {
                            D("onEditEnd", [])
                        })
                    }
                }]
            }
        }, yg: function (t, i, e) {
            var s = this.getValue(), n = e || g(s ? this.getValue().split(this.B.separator) : []),
                h = ri(this.B.master);
            e || (n.find(t) < 0 ? n.push(t) : n.remove(t));
            var r = n.join(this.B.separator), o = this.setValue(n).join(this.B.separator);
            if (h ? h.setValue(r) : this.ea && (this.ea.value = o), this.callEvent("onValueSuggest", [{
                id: r,
                text: o
            }]), i) {
                var a = this.getList().getItemNode(t).getElementsByTagName("SPAN");
                a && a.length && a[0].focus()
            }
        }, og: function (t) {
            return t.rows[0]
        }, ag: function () {
            var t = this.getButton(), i = this.B.button ? this.B.buttonText || $.combo.select : 0;
            if (t && (i ? (t.B.value = i, t.refresh()) : t.hide()), this.B.selectAll) return this.getBody().getChildViews()[0].show();
            this.getList().data.attachEvent("onAfterFilter", S(function () {
                return this.tb()
            }, this))
        }, sa: function () {
            var t = this.getList(), i = this.getMasterValue();
            if (i && (i = i.toString().split(this.config.separator))[0]) for (var e = 0; e < i.length; e++) t.exists(i[e]) && t.select(i[e], !0)
        }, getButton: function () {
            return this.getBody().getChildViews()[1]
        }, getList: function () {
            return this.getBody().getChildViews()[0]
        }, setValue: function (t) {
            var i = [], e = this.getList();
            if (e.unselect(), t && (b(t) || (t = t.toString().split(this.config.separator)), t[0])) for (var s = 0; s < t.length; s++) e.getItem(t[s]) && (e.exists(t[s]) && e.select(t[s], !0), i.push(this.getItemText(t[s])));
            return this.B.value = t ? t.join(this.config.separator) : "", i
        }, getValue: function () {
            return this.B.value
        }
    }, Qh = {api: Zh, view: P.protoUI(Zh, Kh.view)}, tr = {
        name: "checksuggest", defaults: {
            button: !1, selectAll: !1, body: {
                rows: [{
                    view: "checkbox",
                    hidden: !0,
                    customCheckbox: !1,
                    borderless: !1,
                    css: "webix_checksuggest_select_all",
                    labelRight: $.combo.selectAll,
                    labelWidth: 0,
                    height: 28,
                    inputHeight: 20,
                    on: {
                        onItemClick: function (t) {
                            for (var i = this.getParentView().getParentView(), e = i.getList(), s = e.data.order, n = 0; n < s.length; n++) {
                                e.getItem(s[n]).$checked = this.getValue()
                            }
                            var h = this.getValue() ? [].concat(s) : [];
                            i.yg(s[0], t, h), e.refresh()
                        }, onChange: function () {
                            var t = this.$view.querySelector("label"), i = $.combo;
                            t.textContent = this.getValue() ? i.unselectAll : i.selectAll
                        }, onAfterRender: function () {
                            var t = this.getParentView().getParentView();
                            this.setValue(1 * t.Mg())
                        }
                    }
                }, {
                    view: "list",
                    css: "webix_multilist",
                    borderless: !0,
                    autoheight: !0,
                    yCount: 5,
                    type: "checklist",
                    on: {
                        onItemClick: function (t, i) {
                            var e = this.getItem(t);
                            e.$checked = e.$checked ? 0 : 1, this.refresh(t);
                            var s = this.getParentView().getParentView();
                            s.Xm = new Date, s.yg(t, i), s.config.selectAll && (e.$checked ? s.Mg() && s.getBody().yi[0].setValue(1) : s.getBody().yi[0].setValue(0))
                        }
                    }
                }, {
                    view: "button", click: function () {
                        this.getParentView().getParentView().hide(), k(function () {
                            D("onEditEnd", [])
                        })
                    }
                }]
            }
        }, Mg: function () {
            return (this.getValue() || "").split(this.config.separator).length === this.getList().count()
        }, og: function (t) {
            return t.rows[1]
        }, getButton: function () {
            return this.getBody().getChildViews()[2]
        }, getList: function () {
            return this.getBody().getChildViews()[1]
        }, $init: function () {
            this.fb = {}, this.$ready.push(this.Sg)
        }, Sg: function () {
            var t = this.getList();
            if (t.config.dataFeed) {
                var i = this;
                t.attachEvent("onAfterLoad", function () {
                    i.setValue(i.B.value)
                }), t.getItem = function (t) {
                    return this.data.pull[t] || i.fb[t]
                }
            }
            this.config.master && !this.config.selectAll && this.getBody().getChildViews()[0].hide()
        }, $enterKey: function (t, i) {
            if (i.count && i.count()) if (this.isVisible()) {
                var e = i.getSelectedId(!1, !0);
                e && this.yg(e), this.hide()
            } else this.show(this.ea); else this.isVisible() && this.hide()
        }, sa: function () {
            var t = this.getList();
            t.select && t.unselect()
        }, setValue: function (t) {
            var i, e = this.getList(), s = [], n = {}, h = [];
            for (b(t = t || []) ? e.config.dataFeed && (t = this.sb(t)) : t = t.toString().split(this.config.separator), i = 0; i < t.length; i++) n[t[i]] = 1, e.getItem(t[i]) && (this.fb && (this.fb[t[i]] = _(
                e.getItem(t[i]))), s.push(this.getItemText(t[i])));
            for (e.data.each(function (t) {
                t.$checked ? n[t.id] || (t.$checked = 0, h.push(t.id)) : n[t.id] && (t.$checked = 1, h.push(t.id))
            }, this, !0), i = 0; i < h.length; i++) e.refresh(h[i]);
            return this.B.value = t.length ? t.join(this.config.separator) : "", s
        }, getValue: function () {
            return this.B.value
        }, lg: function () {
            var t;
            this.B.master && (t = ri(this.B.master).getInputNode()), (t = t || this.ea) && t.focus()
        }, sb: function (t) {
            if (t && b(t)) {
                for (var i = [], e = 0; e < t.length; e++) t[e].id ? (this.fb[t[e].id] = _(t[e]), i.push(t[e].id)) : i.push(t[e]);
                t = i
            }
            return t
        }
    }, ir = (P.protoUI(tr, Qh.view), P.protoUI({
        name: "datasuggest",
        defaults: {type: "dataview", fitMaster: !1, width: 0, body: {xCount: 3, autoheight: !0, select: !0}}
    }, Kh.view), {
        name: "gridsuggest",
        defaults: {
            type: "datatable",
            fitMaster: !1,
            width: 0,
            body: {navigation: !0, autoheight: !0, autowidth: !0, select: !0},
            filter: function (t, i) {
                return 0 === this.config.template(t).toString().toLowerCase().indexOf(i.toLowerCase())
            }
        },
        $init: function (t) {
            t.body.columns || (t.body.autoConfig = !0), t.template || (t.template = S(this.kg, this))
        },
        kg: function (t) {
            var i = this.getBody(), e = this.config.textValue || i.config.columns[0].id;
            return i.getText(t.id, e)
        }
    }), er = (P.protoUI(ir, Kh.view), {
        name: "mentionsuggest", defaults: {
            symbol: "@", filter: function (t, i) {
                var e = this.B.symbol;
                return -1 !== (i = i.substring(0, this.Cg)).indexOf(e) && (!!(i = i.substring(i.lastIndexOf(e) + e.length)).length && -1 !== (t.id ? this.getItemText(t.id) : t.text || t.value).toString().toLowerCase().indexOf(i.toLowerCase()))
            }
        }, $init: function () {
            this.attachEvent("onValueSuggest", this.xg)
        }, $enterKey: function (t) {
            var i;
            this.isVisible() && (bt(t), this.B.master && (i = ri(this.B.master)), i && i.callEvent && i.callEvent("onEnter"));
            return Kh.api.$enterKey.apply(this, arguments)
        }, xg: function () {
            this.ea && (this.Cg = $t(this.ea).start)
        }, cg: function () {
            return {pos: this.Cg, symbol: this.B.symbol}
        }, lg: function () {
        }, fg: function (t) {
            var i = this.B.symbol, e = this.ea.value, s = e.substring(this.Cg);
            e = (e = e.substring(0, this.Cg)).substring(0, e.lastIndexOf(i) + i.length) + t, this.ea.value = e + s, Ct(this.ea, e.length)
        }, rg: !1
    }), sr = (P.protoUI(er, Kh.view), {
        name: "daterangesuggest",
        defaults: {type: "daterange", body: {view: "daterange", icons: !0, button: !0, borderless: !0}},
        getValue: function () {
            return this.getRange().getValue()
        },
        setValue: function (t) {
            this.getRange().setValue(_(t))
        },
        getRange: function () {
            return this.getBody()
        },
        getButton: function () {
            return this.getBody().getChildViews()[1].getChildViews()[1]
        },
        $g: function (t, i) {
            var e = ri(this.B.master);
            e ? (e.setValue(t), i && this.hide()) : this.setValue(t)
        },
        ag: function () {
            var t = this.getRange();
            t.attachEvent("onAfterDateSelect", S(function (t) {
                this.$g(t)
            }, this)), t.attachEvent("onDateClear", S(function (t) {
                this.$g(t)
            }, this)), t.attachEvent("onTodaySet", S(function (t) {
                this.$g(t)
            }, this))
        }
    }), nr = (P.protoUI(sr, Kh.view), {
        $cssName: "datepicker", name: "daterangepicker", $init: function (t) {
            delete t.type, delete t.multiselect, delete this.B.multiselect
        }, defaults: {value: {}, separator: " - "}, Mm: function () {
            var t = this.B;
            t.suggest ? t.popup = t.suggest : t.popup || (t.popup = t.suggest = this.suggest_setter({
                view: "daterangesuggest",
                body: {
                    timepicker: t.timepicker,
                    calendarCount: t.calendarCount,
                    height: 250 + (t.button || t.icons ? 30 : 0)
                }
            })), this.Qn = function () {
            }
        }, $prepareValue: function () {
            return bn.api.$prepareValue.apply(this, arguments)
        }, Md: function (t) {
            return "string" == typeof t && (t = $.parseFormatDate(t)), isNaN(1 * t) ? null : t
        }, $compareValue: function (t, i) {
            var e = Mh.api.$compareValue, s = e.call(this, t.start, i.start), n = e.call(this, t.end, i.end);
            return s && n
        }, $setValue: function (t) {
            t = t || {}, this.B.text = (t.start ? this.Cm(t.start) : "") + (t.end ? this.B.separator + this.Cm(t.end) : ""), this.Im()
        }, getValue: function () {
            var t = this.B.value;
            if (this.Lp) {
                if (this.B.editable) {
                    var i = this.km || $.dateFormatDate, e = (this.getInputNode().value || "").split(this.B.separator);
                    t = this.Dg(i, {start: e[0], end: e[1]})
                }
            } else t = this.$prepareValue(t) || null;
            if (this.B.stringResult) {
                var s = $.parseFormatStr;
                return this.Dg(s, t)
            }
            return t || null
        }, Dg: function (t, i) {
            return i.start && (i.start = t(i.start)), i.end && (i.end = t(i.end)), i
        }
    }), hr = (P.protoUI(nr, Mh.view), P.protoUI({
        name: "excelbar", defaults: {padding: 0, type: "line"}, $init: function (t) {
            t.cols = [{
                view: "tabbar", options: [
                    ""], optionWidth: 200, borderless: !0, on: {
                    onaftertabclick: function () {
                        this.getParentView().callEvent("onExcelSheetSelect", [this.getValue()])
                    }
                }
            }]
        }, getValue: function () {
            return this.getInput().getValue()
        }, setValue: function (t) {
            return this.getInput().setValue(t)
        }, getInput: function () {
            return this.getChildViews()[0]
        }, setSheets: function (t) {
            var i = this.getInput();
            i.config.options = t, i.refresh()
        }
    }, qn.view), {
        name: "vscroll",
        $apiOnly: !0,
        defaults: {scroll: "x", scrollStep: 40, scrollPos: 0, scrollSize: 18, scrollVisible: 1, zoom: 1},
        $init: function (t) {
            var i = t.scroll || "x", e = this.Tt = C(t.container);
            e.className += " webix_vscroll_" + i, e.innerHTML = "<div class='webix_vscroll_body'></div>", Jt(e, "scroll", this.Ig, {bind: this}), this.Th = 0
        },
        reset: function () {
            this.config.scrollPos = 0, this.Tt["x" == this.config.scroll ? "scrollLeft" : "scrollTop"] = 0
        },
        Ag: function (t) {
            return 15e5 < t ? (this.B.zoom = t / 1e6, t = 1e6) : this.B.zoom = 1, t
        },
        scrollWidth_setter: function (t) {
            return t = this.Ag(t), this.Tt.firstChild.style.width = t + "px", t
        },
        scrollHeight_setter: function (t) {
            return t = this.Ag(t), this.Tt.firstChild.style.height = t + "px", t
        },
        sizeTo: function (t, i, e) {
            t = t - (i || 0) - (e || 0);
            var s = this.B.scrollSize;
            Y.isIE && s && (s += 1), s || !this.B.scrollVisible || Y.$customScroll || (this.Tt.style.pointerEvents = "none", s = 14), s ? (this.Tt.style.display = "block", i && (this.Tt.style.marginTop = i + "px"), this.Tt.style["x" == this.B.scroll ? "width" : "height"] = Math.max(0, t) + "px", this.Tt.style["x" == this.B.scroll ? "height" : "width"] = s + "px") : this.Tt.style.display = "none", this.Th = t
        },
        getScroll: function () {
            return Math.round(this.B.scrollPos * this.B.zoom)
        },
        getSize: function () {
            return Math.round((this.B.scrollWidth || this.B.scrollHeight) * this.B.zoom)
        },
        Fg: function () {
            var t = this.getScroll(), i = Math.max(this.getSize() - this.Th, 0);
            i < t && this.scrollTo(i)
        },
        scrollTo: function (t) {
            t < 0 && (t = 0);
            var i = this.B;
            if ((t /= i.zoom) < 0 && (t = 0), t != this.B.scrollPos) return this.Tt["x" == i.scroll ? "scrollLeft" : "scrollTop"] = t, this.Tg(t, !0), !0
        },
        Ig: function () {
            var t = this.Tt["x" == this.B.scroll ? "scrollLeft" : "scrollTop"];
            Math.floor(t) != Math.floor(this.B.scrollPos) && this.Tg(t, !1)
        },
        Tg: function (t, i) {
            var e = this.B.scrollWidth || this.B.scrollHeight;
            t >= e - this.Th / (i ? this.B.zoom : 1) && (t = Math.max(0, e - this.Th / this.B.zoom)), this.B.scrollPos = t || 0, this.callEvent("onScroll", [this.getScroll()])
        },
        activeArea: function (t, i) {
            this.Vg = i, Jt(t, Y.isIE8 ? "mousewheel" : "wheel", this.zg, {bind: this, passive: !1}), this.Hg(t)
        },
        Hg: function (t) {
            !Y.touch && window.navigator.pointerEnabled && (xt(t, "webix_scroll_touch_ie", !0), Jt(t, "pointerdown", function (t) {
                "touch" != t.pointerType && "pen" != t.pointerType || (this.Pe = Ui.As(t), this.Rg = this.getScroll())
            }, {bind: this}), Kt(document.body, "pointermove", function (t) {
                var i;
                this.Pe && (this.je = Ui.As(t), "x" == this.B.scroll ? i = this.je.x - this.Pe.x : "y" == this.B.scroll && (i = this.je.y - this.Pe.y), i && 5 < Math.abs(i) && this.scrollTo(this.Rg - i))
            }, {bind: this}), Kt(window, "pointerup", function () {
                this.Pe && (this.Pe = this.je = null)
            }, {bind: this}))
        },
        zg: function (t) {
            var i = 0, e = 0 === t.deltaMode ? 30 : 1;
            if (Y.isIE8 && (i = t.detail = -t.wheelDelta / 30), t.deltaX && Math.abs(t.deltaX) > Math.abs(t.deltaY) ? this.Vg && this.B.scrollVisible && (i = t.deltaX / e) : !this.Vg && this.B.scrollVisible && (i = j(t.deltaY) ? t.detail : t.deltaY / e), Y.isSafari && (this.Bg = t.target || t.srcElement), i && this.scrollTo(this.getScroll() + i * this.B.scrollStep)) return bt(t)
        }
    }), rr = (P.protoUI(hr, c, yi), {
        Pg: function () {
            this.jg = !0, this.Eg = {}, this.define("select", "area"), this.attachEvent("onAfterScroll", function () {
                this.refreshSelectArea()
            }), this.attachEvent("onAfterRender", function () {
                this.refreshSelectArea(), this.Ng()
            }), this.attachEvent("onColumnResize", function () {
                this.refreshSelectArea()
            }), this.attachEvent("onBeforeColumnHide", function (t) {
                this.Lg = this.getColumnIndex(t)
            }), this.attachEvent("onAfterColumnHide", function () {
                this.Og(this.Lg)
            }), this.attachEvent("onSyncScroll", this.Ug), this.Wg = function (t, i, e, s) {
                if (t.row && i.row) {
                    if (e) return this.addSelectArea(t, i, !0), !(this.jg = !0);
                    if (!this.callEvent("onAreaDrag", [t, i, s])) return !1;
                    this.Yg || !this.jg || this.B.multiselect && s && s.ctrlKey || (this.removeSelectArea(), this.jg = !1)
                }
            }, this.attachEvent("onBeforeAreaAdd", this.qg), Jt(this.et, Y.mouse.down, this.Gg, {bind: this})
        }, Ug: function (t, i, e) {
            Ui.os(this.Xg, t
                , i, e), Ui.os(this.Jg, t, i, e), Ui.os(this.Kg, t, i, e)
        }, Zg: !0, Og: function (t) {
            var i = this.Eg;
            for (var e in i) {
                var s = i[e];
                if (this.getColumnIndex(s.start.column) < 0) if (s.start.column == s.end.column) this.removeSelectArea(s.name); else {
                    var n = this.columnId(t);
                    n && this.Qg(s.name, {row: s.start.row, column: n}, null)
                } else if (this.getColumnIndex(s.end.column) < 0) {
                    var h = this.columnId(t - 1);
                    h && this.Qg(s.name, null, {row: s.end.row, column: h})
                }
            }
        }, tw: function (t, i, e, s) {
            var n, h, r, o, a, u, c, f;
            if (i) {
                n = this.getColumnIndex(i.start.column), h = this.getColumnIndex(i.end.column), r = this.getIndexById(i.start.row), o = this.getIndexById(i.end.row), a = this.getColumnIndex(t.column), u = this.getIndexById(t.row), c = this.getIndexById(i.init.row), f = this.getColumnIndex(i.init.column), a < n || "left" == e ? "left" === e && s.ctrl ? (n = this.iw(c, n, e), h = f) : "left" === e && f < h ? h-- : n = a : (h <= a || "right" == e) && ("right" == e && s.ctrl ? (h = this.iw(c, h, e), n = f) : "right" == e && n < f ? n++ : h = a), u < r || "up" == e ? "up" == e && s.ctrl ? (r = this.iw(r, f, e), o = c) : "up" == e && c < o ? o-- : r = u : (o < u || "down" == e) && ("down" == e && s.ctrl ? (o = this.iw(o, f, e), r = c) : "down" == e && r < c ? r++ : o = u);
                var l = {row: this.getIdByIndex(r), column: this.columnId(n)},
                    d = {row: this.getIdByIndex(o), column: this.columnId(h)};
                this.callEvent("onBeforeBlockSelect", [l, d, !0]) && (this.Qg(i.name, l, d), this.callEvent("onSelectChange", []), this.callEvent("onAfterBlockSelect", [l, d]))
            }
        }, iw: function (t, i, e) {
            var s = this.config.columns, n = this.data.order, h = this.data.pull[n[t]], r = s[i].id, o = 0;
            if ("right" == e) for (var a = i + 1; a < s.length; a++) {
                if (h[s[a].id]) {
                    o = a;
                    break
                }
                o = a
            } else if ("left" == e) {
                for (var u = i - 1; 0 <= u; u--) if (h[s[u].id]) {
                    o = u;
                    break
                }
            } else if ("down" == e) for (var c = t + 1; c < n.length; c++) {
                if (this.getItem(n[c])[r]) {
                    o = c;
                    break
                }
                o = c
            } else if ("up" == e) for (var f = t - 1; 0 <= f; f--) if (this.getItem(n[f])[r]) {
                o = f;
                break
            }
            return o
        }, Qg: function (t, i, e, s) {
            var n = this.Eg[t];
            if (!n) return !1;
            var h = _(n), r = {start: i || n.start, end: e || n.end};
            this.qg(r), P.extend(n, r, !0), this.refreshSelectArea(), this.Ng(h), s && this.callEvent("onSelectChange", [])
        }, areaselect_setter: function (t) {
            return t && (this.Pg(), this.Pg = function () {
            }), this.define("blockselect", t), t
        }, addSelectArea: function (t, i, e, s, n, h) {
            var r, o, a, u, c;
            r = this.getIndexById(t.row), o = this.getIndexById(i.row), a = this.getColumnIndex(t.column), o < r && (c = r, r = o, o = c), (u = this.getColumnIndex(i.column)) < a && (c = a, a = u, u = c), s = s || this.Yg || V(), this.Yg = null;
            var f = {
                start: {row: this.getIdByIndex(r), column: this.columnId(a)},
                end: {row: this.getIdByIndex(o), column: this.columnId(u)}
            };
            if (n && (f.css = n), (h || !1 === h) && (f.handle = h), this.Eg[s]) return this.Qg(s, f.start, f.end, !0);
            f.handle = !0, f.name = s, f.init = f.start, this.callEvent("onBeforeAreaAdd", [f]) && (this.ew = s, e || this.removeSelectArea(), this.Eg[f.name] = f, this.sw.push(f), this.refreshSelectArea(), this.Ng(), this.callEvent("onAfterAreaAdd", [f]), this.callEvent("onSelectChange", []))
        }, nw: function () {
            var t = ct("DIV");
            return t.className = "webix_area_selection_layer", t.style.top = this.hw + "px", t
        }, refreshSelectArea: function () {
            var t, i, e, s, n = null, h = null, r = null, o = this.B.prerender;
            if (this.rw) {
                t = this.ow(o), i = this.aw(!0 === o), this.Xg || (this.Xg = this.nw(), this.et.childNodes[1].appendChild(this.Xg), this.Jg = this.nw(), this.et.childNodes[0].appendChild(this.Jg), this.Kg = this.nw(), this.et.childNodes[2].appendChild(this.Kg)), this.Xg.innerHTML = "", this.Jg.innerHTML = "", this.Kg.innerHTML = "";
                var a = this.B.leftSplit, u = this.B.rightSplit;
                for (e in this.Eg) {
                    s = this.Eg[e];
                    var c = this.uw(s, t, i);
                    if (null !== c) {
                        var f = this.getColumnIndex(s.start.column), l = this.getColumnIndex(s.end.column);
                        if (c.r0 <= c.r1) {
                            if (this.B.topSplit && this.B.topSplit <= void 0 && void 0 < this.cw) return !1;
                            f < a && (h = this.lw(c.r0, f, c.r1, Math.min(l, a - 1))), c.c0 <= c.c1 && (n = this.lw(c.r0, c.c0, c.r1, c.c1)), u && l >= this.dw && (r = this.lw(c.r0, Math.max(f, this.dw), c.r1, l)), (h || n || r) && this.vw(h, n, r, e, s.css, s.handle)
                        }
                    } else this.removeSelectArea(e)
                }
            }
        }, uw: function (t, i, e) {
            var s, n, h = this.getIndexById(t.start.row), r = this.getIndexById(t.end.row),
                o = this.getColumnIndex(t.start.column), a = this.getColumnIndex(t.end.column);
            if (-1 === o || -1 === a) return null;
            if (-1 === h || -1 === r) return null;
            if (n = Math.min(e[1], r), this.B.topSplit) {
                if ((s = h) >= this.B.topSplit && (s = Math.max(e[0] - this.B.topSplit, h)), n >= this.B.topSplit) {
                    var u = this.ot(
                        this.getIdByIndex(r), t.end.column),
                        c = this.ot(this.getIdByIndex(this.B.topSplit - 1), t.end.column);
                    c.top + c.height > u.top + u.height && (n = this.B.topSplit - 1)
                }
            } else s = Math.max(e[0], this.getIndexById(t.start.row));
            return {r0: s, r1: n, c0: Math.max(i[0], o), c1: Math.min(this.dw ? i[1] - 1 : i[1], a)}
        }, lw: function (t, i, e, s) {
            return [this.ot(this.getIdByIndex(t), this.columnId(i)), this.ot(this.getIdByIndex(e), this.columnId(s))]
        }, vw: function (t, i, e, d, v, s) {
            var n, h, r = this.Eg[d], _ = 0;
            this.B.topSplit && (_ = this._w(r.start, !0));
            var o = function (t, i, e, s, n) {
                var h, r, o, a, u, c, f = {top: 1, right: 1, bottom: 1, left: 1};
                for (h in s && delete f.left, n && delete f.right, r = e.top - i.top + e.height - 1, o = e.left - i.left + e.width, f) {
                    a = i.top + _, "bottom" == h && (a = e.top + e.height), u = i.left, "right" == h && (u = e.left + e.width), c = "top" == h || "bottom" == h, t.appendChild(ct("DIV", {
                        "class": "webix_area_selection webix_area_selection_" + h + (v ? " " + v : ""),
                        style: "left:" + u + "px;top:" + a + "px;" + (c ? "width:" + o + "px;" : "height:" + (r - _) + "px;"),
                        webix_area_name: d
                    }, ""));
                    var l = t.lastChild;
                    "right" == h && (l.style.left = u - l.offsetWidth + "px"), "bottom" == h && (l.style.top = a - l.offsetHeight + "px"), _ && ("top" == h && (l.style.display = "none"), e.height == _ && "bottom" == h && (l.style.display = "none"))
                }
            };
            e && o(this.Kg, e[0], e[1], !!i, !1), i && o(this.Xg, i[0], i[1], !!t, !!e), t && o(this.Jg, t[0], t[1], !1, !!i), s && (h = e ? e[1] : i ? i[1] : t[1], (n = e ? this.Kg : i ? this.Xg : this.Jg).appendChild(ct("DIV", {
                "class": "webix_area_selection_handle" + (v ? " " + v : ""),
                style: "left:" + (h.left + h.width) + "px;top:" + (h.top + h.height) + "px;",
                webix_area_name: d
            }, "")), _ && h.height == _ && (n.lastChild.style.display = "none"))
        }, pw: function (s) {
            if (s) {
                var t = function (t) {
                    for (var i = t.childNodes, e = i.length - 1; 0 <= e; e--) i[e].getAttribute("webix_area_name") == s && t.removeChild(i[e])
                };
                t(this.Xg), t(this.Jg), t(this.Kg)
            }
        }, removeSelectArea: function (t) {
            if (t && this.Eg[t]) {
                if (this.callEvent("onBeforeAreaRemove", [t])) {
                    for (var i in this.Ng(_(this.Eg[t]), !0), delete this.Eg[t], this.pw(t), this.sw = [], this.Eg) this.sw.push(this.Eg[i]);
                    this.callEvent("onAfterAreaRemove", [t])
                }
            } else for (var e in this.Eg) this.removeSelectArea(e)
        }, Gg: function (t) {
            var i = t.target || t.srcElement, e = kt(i);
            if (e && -1 != e.indexOf("webix_area_selection_handle")) {
                var s = i.getAttribute("webix_area_name");
                this.Yg = s;
                var n = this.Eg[s], h = this.ot(n.start.row, n.start.column), r = this.ot(n.end.row, n.end.column),
                    o = this.B.prerender, a = this.getColumnIndex(n.start.column) < this.B.leftSplit ? 0 : this.mw,
                    u = this.getColumnIndex(n.end.column) < this.B.leftSplit ? 0 : this.mw;
                this.bw = [h.left + 1 + a - this.ah, h.top + 1 - (o ? this.rh : 0), {
                    row: n.start.row,
                    column: n.start.column
                }], this.gw = _t(this.et), this.ww(t), this.xw = [r.left + 1 + u - this.ah, r.top + 1 - (o ? this.rh : 0)], this.yw(!1, !1, t), bt(t), this.Mw()
            }
        }, getSelectArea: function (t) {
            return this.Eg[t || this.ew]
        }, getAllSelectAreas: function () {
            return this.Eg
        }, qg: function (t, i) {
            var e, s, n, h, r, o, a, u, c, f, l, d, v, _ = !1, p = t.start, m = t.end;
            for (f = r = this.getIndexById(p.row), l = n = this.getColumnIndex(p.column), d = o = this.getIndexById(m.row), v = h = this.getColumnIndex(m.column), e = r; e <= o; e++) {
                if (this.getItem(this.getIdByIndex(e)).$row && !i) _ = !0, v = this.Xf.length - 1; else if (this.config.spans) for (s = n; s <= h; s++) (a = this.getSpan(this.getIdByIndex(e), this.columnId(s))) && ((u = this.getIndexById(a[0])) < f && (f = u, _ = !0), (c = this.getColumnIndex(a[1])) < l && (_ = !0, l = c), u + a[3] - 1 > d && (_ = !0, d = u + a[3] - 1), c + a[2] - 1 > v && (_ = !0, v = c + a[2] - 1))
            }
            _ && (t.start = {row: this.getIdByIndex(f), column: this.columnId(l)}, t.end = {
                row: this.getIdByIndex(d),
                column: this.columnId(v)
            }, this.qg(t, !0))
        }, Ng: function (t, i) {
            var e;
            if (t && (e = this.getItemNode({
                row: t.start.row,
                column: t.start.column
            })) && e.removeAttribute("tabindex"), !i && this.sw.length) {
                var s = this.getSelectedId(!0)[0];
                (e = this.getItemNode(s)) && e.setAttribute("tabindex", "1")
            }
        }
    }), or = {
        filterByAll: function () {
            var r = !1;
            this.data.silent(function () {
                    this.filter();
                    var t = !1;
                    for (var e in this.lo) if (this.isColumnVisible(e)) {
                        var i = this.lo[e], s = i[2].getValue(i[0]), n = s;
                        i[1].prepare && (n = i[1].prepare.call(i[2], n, i[1], this)), i[1].value = s;
                        var h = i[1].compare;
                        if (this.callEvent("onBeforeFilter", [e, n, i[1]])) if (i[2].$server || r) r = !0; else {
                            if ("" === n) continue;
                            h ? (h = this.Sw(e, h), this.filter(S(function (t, i) {
                                return !!t && h(t[e], i, t)
                            }, this), n, t)) : this.filter(e, n, t), t = !0
                        }
                    }
                    r && this.kw()
                },
                this), r || (this.refresh(), this.callEvent("onAfterFilter", []))
        }, Sw: function (t, h) {
            var i = this.getColumnConfig(t), r = i ? i.optionslist : null;
            return r ? ("string" != typeof r && (r = ","), function (t, i, e) {
                if (!t) return !1;
                for (var s = t.toString().split(r), n = 0; n < s.length; n++) if (h(s[n], i, e)) return !0
            }) : h
        }, filterMode_setter: function (t) {
            return P.extend(this.data.Wr, t, !0)
        }, getFilter: function (t) {
            var i = this.lo[t];
            return i && i[2].getInputNode ? i[2].getInputNode(i[0]) : null
        }, registerFilter: function (t, i, e) {
            this.lo[i.columnId] = [t, i, e]
        }, collectValues: function (t, i) {
            var e = this.getColumnConfig(t), s = i && i.visible ? null : e.collection,
                n = {values: s ? this.Dl.call(s, "id", "value") : this.Dl(e.id, e.id)};
            return this.callEvent("onCollectValues", [t, n]), n.values
        }, Dl: function (s, n) {
            var h = {"": !0}, r = [];
            if (this.data.each(function (t) {
                var i = t ? t[s] : "";
                if (i !== undefined && !h[i]) {
                    h[i] = !0;
                    var e = t[s];
                    0 === e && (e = "0"), r.push({id: e, value: t[n]})
                }
            }, this, !0), r.length) {
                var t = "string" == typeof r[0].value ? "string" : "raw";
                r.sort(this.data.sorting.create({as: t, by: "value", dir: "asc"}))
            }
            return r
        }, kw: function () {
            var i = this;
            this.loadNext(0, 0, 0, 0, 1).then(function (t) {
                i.editStop && i.editStop(), i.clearAll(!0), i.parse(t), i.callEvent("onAfterFilter", [])
            })
        }
    }, ar = {
        hover_setter: function (t) {
            var s = this;
            return t && !this.Cw && (this.Fu(), this.config.experimental = !0, this.attachEvent("onMouseMoving", function (t) {
                var i = s.locate(t);
                !i && Y.isEdge && t.relatedTarget && (i = s.locate(t.relatedTarget));
                var e = i ? i.row : null;
                s.$w != e && (s.$w && s.removeRowCss(s.$w, s.B.hover), s.$w = e, s.$w && s.addRowCss(s.$w, s.B.hover))
            }), Jt(this.$view, "mouseout", function (t) {
                var i = t.target || t.srcElement;
                s.$w && document.body.contains(i) && ((t.relatedTarget ? s.locate(t.relatedTarget) : null) || (s.removeRowCss(s.$w, s.B.hover), s.$w = null))
            }), this.Cw = 1), t
        }, select_setter: function (t) {
            return !this.select && t && (P.extend(this, this.Iw.Dw, !0), !0 === t ? t = "row" : "multiselect" == t && (t = "row", this.B.multiselect = !0), this.Iw[t], P.extend(this, this.Iw[t], !0)), t
        }, getSelectedId: function (t) {
            return t ? [] : ""
        }, getSelectedItem: function (t) {
            return Be.getSelectedItem.call(this, t)
        }, Iw: {
            Dw: {
                Aw: " webix_cell_select", $init: function () {
                    this.Fw(), this.on_click.webix_cell = S(this.Tw, this), this.Vw = this._c = function () {
                        this.unselect()
                    }, this.data.attachEvent("onStoreUpdated", S(this.dc, this)), this.data.attachEvent("onSyncApply", S(this.zw, this)), this.data.attachEvent("onClearAll", S(this.Vw, this)), this.data.attachEvent("onAfterFilter", S(this._c, this)), this.data.attachEvent("onIdChange", S(this.mc, this)), this.$ready.push(Be.bc)
                }, mc: function (t, i) {
                    for (var e = 0; e < this.Hw.length; e++) this.Hw[e] == t && (this.Hw[e] = i);
                    for (var s = 0; s < this.sw.length; s++) {
                        var n = this.sw[s];
                        n.row == t && (t = this.Rw(n), n.row = i, i = this.Rw(n), n.id = i, delete this.Bw[t], this.Bw[i] = !0)
                    }
                }, dc: function (t, i, e) {
                    "delete" == e && this.unselect(t)
                }, zw: function () {
                    for (var t = this.sw.length - 1; 0 <= t; t--) {
                        var i = this.sw[t].row;
                        this.exists(i) || (this.sw.splice(t, 1), delete this.Bw[i])
                    }
                }, Fw: function () {
                    this.sw = [], this.Bw = {}, this.Hw = []
                }, isSelected: function (t, i) {
                    var e;
                    return e = j(i) ? "object" === M(t) ? this.Rw(t) : t : this.Rw({row: t, column: i}), this.Bw[e]
                }, getSelectedId: function (t, i) {
                    var e;
                    if (1 < this.sw.length || t) {
                        if (e = [].concat(this.sw), i) for (var s = 0; s < e.length; s++) e[s] = e[s].id
                    } else if (e = this.sw[0], i && e) return e.id;
                    return e
                }, Pw: function () {
                    return this.row
                }, wo: function (t, i) {
                    var e = this.Rw(t);
                    if (null !== e) {
                        if (-1 === i) return this.jw(t);
                        if (t.id = e, t.toString = this.Pw, !this.callEvent("onBeforeSelect", [t, i])) return !1;
                        if (!this.Bw[e] || !i && 1 != this.sw.length) return i || this.Ew(), this.sw.push(t), this.Bw[e] = !0, this.callEvent("onAfterSelect", [t, i]), this.Nw(this.Lw(t)), !0
                    }
                }, Ew: function () {
                    if (!this.sw.length) return !1;
                    for (var t = 0; t < this.sw.length; t++) if (!this.callEvent("onBeforeUnSelect", [this.sw[t]])) return !1;
                    for (var i = 0; i < this.Hw.length; i++) this.data.removeMark(this.Hw[i], "webix_selected");
                    var e = this.B.columns;
                    if (e) for (var s = 0; s < e.length; s++) e[s].$selected = null;
                    var n = this.sw;
                    this.Fw();
                    for (var h = 0; h < n.length; h++) this.callEvent("onAfterUnSelect", [n[h]]);
                    return !0
                }, unselectAll: function () {
                    this.clearSelection()
                }, selectAll: function () {
                    this.selectRange()
                }, clearSelection: function () {
                    this.Ew() && (this.callEvent("onSelectChange", []), this.render())
                },
                jw: function (t) {
                    var i = this.Rw(t);
                    if (!i && this.sw.length && (this.clearSelection(), this.callEvent("onSelectChange", [])), this.Bw[i]) {
                        if (!this.callEvent("onBeforeUnSelect", [t])) return !1;
                        for (var e = 0; e < this.sw.length; e++) if (this.sw[e].id == i) {
                            this.sw.splice(e, 1);
                            break
                        }
                        delete this.Bw[i], this.callEvent("onAfterUnSelect", [t]), this.Nw(0, this.Ow(t))
                    }
                }, Uw: function (t) {
                    var i = this.getItem(t);
                    return this.data.addMark(i.id, "webix_selected", 0, {$count: 0}, !0)
                }, Nw: function (t) {
                    t && this.Hw.push(t), this.wc || (this.render(), this.callEvent("onSelectChange", []))
                }, Tw: function (t, i) {
                    var e = t.ctrlKey || t.metaKey || "touch" == this.B.multiselect, s = t.shiftKey;
                    if (this.B.multiselect || "multiselect" == this.B.select || "area" == this.B.select || (e = s = !1), s && this.sw.length) {
                        var n = this.sw[this.sw.length - 1];
                        this.Ww(i, n)
                    } else e && this.Bw[this.Rw(i)] ? this.jw(i) : this.wo({row: i.row, column: i.column}, e)
                }, Yw: function (t, i, e) {
                    var s = this.B.columns;
                    if (i) {
                        for (var n = [], h = 0; h < s.length; h++) s[h].$selected && n.push(s[h]);
                        s = n
                    }
                    for (var r = this.data.order, o = 0, a = 0; a < r.length; a++) {
                        var u = this.getItem(r[a]);
                        if (u) {
                            var c = this.data.getMark(u.id, "webix_selected");
                            if (c || i) {
                                for (var f = 0, l = 0; l < s.length; l++) {
                                    var d = s[l].id;
                                    if (e || i || c[d]) {
                                        if (!t) return {row: r[a], column: d};
                                        u[d] = t(u[d], r[a], d, o, f), f++
                                    }
                                }
                                o++
                            }
                        }
                    }
                }
            }, row: {
                Aw: " webix_row_select", Rw: function (t) {
                    return t.row
                }, select: function (t, i) {
                    t && (t = t.toString()), this.data.exists(t), this.wo({row: t}, i)
                }, Lw: function (t) {
                    return this.Uw(t.row).$row = !0, t.row
                }, unselect: function (t) {
                    this.jw({row: t})
                }, Ow: function (t) {
                    return this.data.removeMark(t.row, "webix_selected", 0, 1), t.row
                }, mapSelection: function (t) {
                    return this.Yw(t, !1, !0)
                }, Ww: function (t, i) {
                    return this.selectRange(t.row, i.row)
                }, selectRange: function (t, i, e) {
                    j(e) && (e = !0);
                    var s = t ? this.getIndexById(t) : 0, n = i ? this.getIndexById(i) : this.data.order.length - 1;
                    if (n < s) {
                        var h = s;
                        s = n, n = h
                    }
                    this.wc = !0;
                    for (var r = s; r <= n; r++) {
                        var o = this.getIdByIndex(r);
                        if (!o) {
                            t && this.select(t);
                            break
                        }
                        this.select(o, e)
                    }
                    this.wc = !1, this.Nw()
                }
            }, cell: {
                Rw: function (t) {
                    return t.column ? t.row + "_" + t.column : null
                }, select: function (t, i, e) {
                    this.data.exists(t), this.wo({row: t, column: i}, e)
                }, Lw: function (t) {
                    var i = this.Uw(t.row);
                    return i.$count++, i[t.column] = !0, t.row
                }, unselect: function (t, i) {
                    this.jw({row: t, column: i})
                }, Ow: function (t) {
                    var i = this.Uw(t.row);
                    return i.$count--, i[t.column] = !1, i.$count <= 0 && this.data.removeMark(t.row, "webix_selected"), t.row
                }, mapSelection: function (t) {
                    return this.Yw(t, !1, !1)
                }, Ww: function (t, i) {
                    return this.selectRange(t.row, t.column, i.row, i.column)
                }, selectRange: function (t, i, e, s, n) {
                    j(n) && (n = !0);
                    var h = t ? this.getIndexById(t) : 0, r = e ? this.getIndexById(e) : this.data.order.length - 1,
                        o = i ? this.getColumnIndex(i) : 0, a = s ? this.getColumnIndex(s) : this.Xf.length - 1;
                    if (r < h) {
                        var u = h;
                        h = r, r = u
                    }
                    if (a < o) {
                        var c = o;
                        o = a, a = c
                    }
                    this.wc = !0;
                    for (var f = h; f <= r; f++) for (var l = o; l <= a; l++) this.select(this.getIdByIndex(f), this.columnId(l), n);
                    this.wc = !1, this.Nw()
                }
            }, column: {
                Aw: " webix_column_select", Rw: function (t) {
                    return t.column
                }, Pw: function () {
                    return this.column
                }, select: function (t, i) {
                    this.wo({column: t}, i)
                }, Lw: function (t) {
                    this.B.columns[this.getColumnIndex(t.column)].$selected = !0, this.wc || this.qw()
                }, unselect: function (t) {
                    this.jw({column: t})
                }, Ow: function (t) {
                    this.B.columns[this.getColumnIndex(t.column)].$selected = null, this.qw()
                }, mapSelection: function (t) {
                    return this.Yw(t, !0, !1)
                }, Ww: function (t, i) {
                    return this.selectRange(t.column, i.column)
                }, selectRange: function (t, i, e) {
                    j(e) && (e = !0);
                    var s = t ? this.getColumnIndex(t) : 0, n = i ? this.getColumnIndex(i) : this.Xf.length - 1;
                    if (n < s) {
                        var h = s;
                        s = n, n = h
                    }
                    this.wc = !0;
                    for (var r = s; r <= n; r++) this.select(this.columnId(r), e);
                    this.wc = !1, this.qw(), this.Nw()
                }, zw: function () {
                }
            }, area: {
                Rw: function (t) {
                    return t.row + "_" + t.column
                }, getSelectedId: function (t) {
                    var i = this.getSelectArea(), e = [];
                    if (i) if (!t || i.start.row == i.end.row && i.start.column == i.end.column) e.push(i.end); else {
                        var s = this.getIndexById(i.start.row), n = this.getIndexById(i.end.row);
                        if (-1 == s || -1 == n) return e;
                        for (var h = this.getColumnIndex(i.start.column), r = this.getColumnIndex(i.end.column), o = s; o <= n; o++) for (var a = h; a <= r; a++) e.push({
                            row: this.getIdByIndex(o),
                            column: this.columnId(a)
                        })
                    }
                    return t ? e : e[0]
                }, unselect: function () {
                    this.jw()
                }, jw: function () {
                    this.removeSelectArea(),
                        this.callEvent("onSelectChange", [])
                }, mapSelection: function (t) {
                    var i = this.getSelectArea();
                    if (i) for (var e = this.getColumnIndex(i.start.column), s = this.getColumnIndex(i.end.column), n = this.getIndexById(i.start.row), h = this.getIndexById(i.end.row), r = n; r <= h; r++) for (var o = this.data.order[r], a = this.getItem(o), u = e; u <= s; u++) {
                        var c = this.Xf[u].id;
                        if (!t) return {row: o, column: c};
                        a[c] = t(a[c], o, c, r - n, u - e)
                    }
                }, select: function (t, i, e) {
                    this.data.exists(t), this.wo({row: t, column: i}, e)
                }, Ww: function (t, i) {
                    this.tw(t, i)
                }, wo: function (t) {
                    return this.addSelectArea(t, t, !1), !0
                }, zw: function () {
                    this.sw.length && this.refreshSelectArea()
                }
            }
        }
    }, ur = {
        blockselect_setter: function (t) {
            return t && this.Zg && (Y.touch ? this.attachEvent("onLongTouch", this.Gw) : Jt(this.Tt, Y.mouse.down, this.Gw, {bind: this}), Jt(this.Tt, Y.mouse.move, this.Xw, {bind: this}), this.Zg = this.bw = this.xw = !1, this.attachEvent("onAfterScroll", this.Jw), P.extend(this, qt, !0), this.attachEvent("onBeforeAutoScroll", function () {
                return this.xw
            })), t
        }, Zg: !0, Kw: function (t, i) {
            for (var e = t.target || t.srcElement; e;) {
                if (e.getAttribute && e.getAttribute("webixignore")) return !1;
                if (e == i) return !0;
                e = e.parentNode
            }
            return !1
        }, Gw: function (t) {
            if ((!this.B.subview || this == ri(t.target || t.srcElement)) && this.Kw(t, this.et)) {
                if (t.target && "INPUT" == t.target.tagName || this.bv) return;
                this.gw = _t(this.et);
                var i = Y.touch ? t : mt(t);
                this.bw = [i.x - this.gw.x, i.y - this.gw.y], bt(t), this.Mw()
            }
        }, Mw: function () {
            var i = this, e = Kt(document.body, Y.mouse.up, function (t) {
                return Zt(e), i.Zw(t)
            })
        }, Zw: function (t) {
            this.Qw && (this.yw("select", !0, t), this.Qw = lt(this.Qw)), yt(document.body, "webix_noselect"), this.bw = this.xw = !1, this.ht && (this.ht = window.clearTimeout(this.ht))
        }, Jw: function () {
            this.xw && k(this.yw, this, [!1, !1])
        }, yw: function (t, i, e) {
            var s;
            this.bw[2] || (this.bw[2] = this.tx.apply(this, this.bw)), s = this.bw[2];
            var n = this.tx.apply(this, this.xw);
            if (this.callEvent("onBeforeBlockSelect", [s, n, i, e])) {
                if ((!this.Wg || !1 !== this.Wg(s, n, i, e)) && s.row && n.row) if ("select" === t) this.Ew(), this.Ww(s, n); else {
                    var h, r, o, a;
                    if ("box" === t) h = Math.min(this.bw[0], this.xw[0]), o = Math.max(this.bw[0], this.xw[0]), r = Math.min(this.bw[1], this.xw[1]), a = Math.max(this.bw[1], this.xw[1]); else {
                        var u = this.ot(s.row, s.column), c = this.ot(n.row, n.column), f = this.getScrollState(),
                            l = u.width, d = c.width;
                        this.ix && this.bw[0] > this.mw + this.nx ? u.left += this.mw + this.nx : this.mw ? this.bw[0] > this.mw && (u.left < f.x ? (l -= f.x - u.left, u.left = this.mw) : u.left += this.mw - f.x) : u.left -= f.x, this.ix && this.xw[0] > this.mw + this.nx ? c.left += this.mw + this.nx : this.mw ? this.xw[0] > this.mw && (c.left < f.x ? (d -= f.x - c.left, c.left = this.mw) : c.left += this.mw - f.x) : c.left -= f.x, this.B.prerender && (u.top -= this.rh, c.top -= this.rh), h = Math.min(u.left, c.left), o = Math.max(u.left + l, c.left + d), r = Math.min(u.top, c.top), a = Math.max(u.top + u.height, c.top + c.height), this.B.topSplit && (r += this._w(s)), this.ht && (this.ht = window.clearTimeout(this.ht)), !e || Y.touch && !this.B.prerender || (this.ht = k(this.it, this, [mt(e)], 250))
                    }
                    var v = this.Qw.style;
                    v.left = h + "px", v.top = r + "px", v.width = o - h + "px", v.height = a - r + "px"
                }
                i && this.callEvent("onAfterBlockSelect", [s, n])
            }
        }, ww: function () {
            this.Qw = ct("div", {"class": "webix_block_selection"}, ""), this.et.appendChild(this.Qw)
        }, Xw: function (t) {
            if (!1 !== this.bw) {
                this.xw || xt(document.body, "webix_noselect");
                var i = Y.touch ? Y.mouse.context(t) : mt(t), e = [i.x - this.gw.x, i.y - this.gw.y];
                if (Math.abs(this.bw[0] - e[0]) < 5 && Math.abs(this.bw[1] - e[1]) < 5) return;
                !1 === this.xw && this.ww(t), this.xw = e, this.yw(this.config.blockselect, !1, t), Y.touch && bt(t)
            }
        }, tx: function (t, i) {
            var e = !1, s = null, n = null;
            if (this.ix && t > this.mw + this.nx ? t += this.oh.getSize() - this.nx - this.mw - this.ix : (!this.mw || t > this.mw) && (t += this.oh.getScroll()), this.B.topSplit && this.cw > this.B.topSplit) {
                var h = this.ot(this.getIdByIndex(this.B.topSplit - 1), this.columnId(0));
                h.top + h.height > i && (e = !0)
            }
            e || (i += this.getScrollState().y), t < 0 && (t = 0), i < 0 && (i = 0);
            for (var r = this.B.columns, o = this.data.order, a = 0, u = 0; u < r.length; u++) if (t <= (a += r[u].width)) {
                n = r[u].id;
                break
            }
            n || (n = r[r.length - 1].id), a = 0;
            var c = this.data.$min || 0;
            if (this.B.fixedRowHeight) s = o[c + Math.floor(i / this.B.rowHeight)]; else for (var f = c; f < o.length; f++) if (i <= (a += this.hx(f))) {
                s = o[f];
                break
            }
            return s || (s = o[o.length - 1]), {row: s, column: n}
        }, _w: function (t,
                         i) {
            var e = 0, s = this.getIndexById(t.row);
            if (s >= this.B.topSplit) {
                var n = this.ot(this.getIdByIndex(s), t.column),
                    h = this.ot(this.getIdByIndex(this.B.topSplit - 1), t.column);
                h.top + h.height > n.top && (e = h.top + h.height - (0 < n.top || !i ? n.top : 0))
            }
            return e
        }
    }, cr = {
        resizeRow_setter: function (t) {
            return this.B.scrollAlignY = !1, this.B.fixedRowHeight = !1, this.resizeColumn_setter(t)
        }, resizeColumn_setter: function (t) {
            return t && this.ox && (Jt(this.Tt, "mousemove", this.ax, {bind: this}), Jt(this.Tt, "mousedown", this.ux, {bind: this}), Jt(this.Tt, "mouseup", this.cx, {bind: this}), this.ox = !1), t
        }, ox: !0, ux: function (t) {
            this.B.subview && this != ri(t.target || t.srcElement) || this.vx && (this.bv = [mt(t), this.vx[2]], xt(document.body, "webix_noselect"), nt())
        }, cx: function () {
            this.bv = !1, yt(document.body, "webix_noselect"), ht()
        }, _x: function () {
            if (!this.yv) {
                var t = this.vx[0], i = this.bv[1], e = this.Ms(i);
                if (e) {
                    var s, n = this.bv[0];
                    if ("x" == t ? (s = _t(i).x + this.vx[1] - _t(this.et).x, n = n.x, this.vx[1] || (e.cind -= i.parentNode.colSpan || 1)) : (s = _t(i).y + this.vx[1] - _t(this.et).y + this.jo, n = n.y, this.vx[1] || e.rind--), 0 <= e.cind && 0 <= e.rind) this.yv = [t, e, s], new ei.resizearea({
                        container: this.Tt,
                        dir: t,
                        eventPos: n,
                        start: s,
                        cursor: ("x" == t ? "col" : "row") + "-resize"
                    }).attachEvent("onResizeEnd", S(this.bx, this));
                    this.ux = this.vx = !1
                }
            }
        }, bx: function (t) {
            if (this.yv) {
                var i = this.yv[0], e = this.yv[1], s = t - this.yv[2];
                if ("x" == i) {
                    this.B.rightSplit && e.cind + 1 >= this.dw && e.cind !== this.Xf.length - 1 && (e.cind++, s *= -1);
                    var n = this.Xf[e.cind], h = n.width;
                    delete n.fillspace, delete n.adjust, this.po(e.cind, h + s, !0, !0), this.mo()
                } else {
                    var r = this.getIdByIndex(e.rind), o = this.gx(this.getItem(r));
                    this.setRowHeight(r, o + s)
                }
                this.cx()
            }
            this.yv = null
        }, ax: function (t) {
            var i = null, e = this.B;
            if (this.vx && this.bv) return this._x(t);
            var s = (t = t || event).target || t.srcElement, n = !1;
            if ("TD" != s.tagName && "TABLE" != s.tagName) {
                var h = s.className || "", r = "string" == typeof h && -1 != h.indexOf("webix_cell");
                if (!r || !e.drag) {
                    var o = "string" == typeof h && -1 != h.indexOf("webix_hcell");
                    if (this.vx = !1, r || o) {
                        var a = s.offsetWidth, u = s.offsetHeight, c = pt(t), f = e.resizeRow;
                        "object" == M(f) && f.headerOnly && 0 < (i = this.Ms(s)).cind && (f = !1), r && f && (f = "object" == M(f) && f.size ? f.size : 3, c.y < f ? (i || (i = this.Ms(s)), i.rind && (this.vx = ["y", 0, s], n = "row-resize")) : u - c.y < f + 1 && (this.vx = ["y", u, s], n = "row-resize"));
                        var l = e.resizeColumn;
                        "object" == M(l) && l.headerOnly && r && (l = !1), l && (l = "object" == M(l) && l.size ? l.size : 3, c.x < l ? (this.vx = ["x", 0, s], n = "col-resize") : a - c.x < l + 1 && (this.vx = ["x", a, s], n = "col-resize"))
                    }
                    this.wx && window.clearTimeout(this.wx), this.wx = k(this.xx, this, [n], n ? 100 : 0)
                }
            }
        }, xx: function (t) {
            this.yx != t && (this.yx = t, this.Tt.style.cursor = t || "default")
        }
    };
    I("onDataTable", function (t, i) {
        Y.touch && (Ui.$init(), i.scrollSize = 0, Ui.be && Ui.limit(), t.$ready.push(t.$touch))
    });
    var fr = {
        $touch: function () {
            var t = this.B;
            t.scrollAlignY = !1, P.extend(this, !0 === t.prerender ? this.Mx : this.Sx);
            var i = "";
            t.autowidth || !1 === t.scrollX || (i += "x"), t.autoheight || !1 === t.scrollY || (i += "y"), this.et.setAttribute("touch_scroll", i), Ui.ws(this.et.childNodes[1].firstChild), Ui.os(this.et.childNodes[1].firstChild, 0, 0, "0ms"), this.cs(0, 0, "0ms")
        }, Mx: {
            kx: function (t, i) {
                Ui.os(this.et.childNodes[1].firstChild, -t, -i, "0ms"), this.cs(-t, -i, "0ms"), this.callEvent("onAfterScroll", [{
                    e: -t,
                    f: -i
                }])
            }, Cx: function () {
                var t = Ui.ns(this.et.childNodes[1].firstChild);
                return {x: -t.e, y: -t.f}
            }, $init: function () {
                this.attachEvent("onBeforeScroll", function () {
                    Ui.Oe = this.et.childNodes[1].firstChild, Ui.Ds(Ui.Oe), Ui.us = this
                }), this.attachEvent("onTouchEnd", function () {
                    Ui.us = null
                }), this.attachEvent("onAfterScroll", function (t) {
                    t && (this.ah = -t.e, this.rh = -t.f, this.oh && (this.oh.B.scrollPos = this.ah), this.hh && (this.hh.B.scrollPos = this.rh))
                })
            }, cs: function (t, i, e) {
                Ui.os(this.et.childNodes[1].firstChild, t, i, e), this.B.leftSplit && Ui.os(this.et.childNodes[0].firstChild, 0, i, e), this.B.rightSplit && Ui.os(this.et.childNodes[2].firstChild, 0, i, e), this.B.header && Ui.os(this.S.childNodes[1].firstChild, t, 0, e), this.B.footer && Ui.os(this.qf.childNodes[1].firstChild, t, 0, e), this.callEvent("onSyncScroll", [t, i, e])
            }, gs: function () {
            }
        }, Sx: {
            kx: function (t, i) {
                k(function () {
                    this.callEvent("onAfterScroll", [{e: -t, f: -i}])
                }, this)
            }, $scroll: {gravity: 0, elastic: !1}, $hasYScroll: function () {
                return 2 < this.$x - this.Dx
            }, $init: function () {
                this.attachEvent("onAfterColumnHide", function () {
                    this.kx(0, 0)
                }), this.attachEvent("onBeforeScroll", function () {
                    var t = Ui;
                    t.Oe = this.et.childNodes[1].firstChild, t.Ds(t.Oe), t.Ue.left = this.ah, t.Ue.hidden = this.oh.B.scrollVisible || this.hh.B.scrollVisible, t.Ue.dy = this.$x, t.us = this
                }), this.attachEvent("onAfterRender", function () {
                    this.oh && this.B.scrollX && this.oh.Fg(), this.hh && this.B.scrollY && this.hh.Fg()
                }), this.attachEvent("onAfterScroll", function (t) {
                    if (t) {
                        var i = this.ah != -t.e, e = this.rh != -t.f;
                        Ui.us = null, Ui.Ix = null, this.rh = 0, this.ah = 0;
                        var s = Ui.config.translate;
                        return Ui.config.translate = "translate", this.cs(this.oh ? 0 : t.e, 0, 0), Ui.config.translate = s, this.ah = -t.e, this.rh = -t.f, this.Ax(), this.render(), i && (this.oh && this.oh.scrollTo(this.ah), this.callEvent("onScrollX", [])), e && (this.hh && this.hh.scrollTo(this.rh), this.callEvent("onScrollY", [])), !1
                    }
                })
            }, cs: function (t, i, e) {
                i += this.rh, t += this.ah, Ui.os(this.et.childNodes[1].firstChild, t, i, e), this.B.leftSplit && Ui.os(this.et.childNodes[0].firstChild, 0, i, e), this.B.rightSplit && Ui.os(this.et.childNodes[2].firstChild, 0, i, e), this.B.header && Ui.os(this.S.childNodes[1].firstChild, t, 0, e), this.B.footer && Ui.os(this.qf.childNodes[1].firstChild, t, 0, e), this.callEvent("onSyncScroll", [t, i, e])
            }, gs: function (t) {
                t.f -= this.rh, t.e -= this.ah
            }
        }
    }, lr = {
        $init: function () {
            this.data.attachEvent("onStoreUpdated", S(function (t) {
                t || this.Fx()
            }, this)), this.attachEvent("onStructureLoad", this.Fx), this.attachEvent("onStructureUpdate", this.Tx), this.attachEvent("onColumnResize", function (t, i, e, s) {
                s && this.Tx()
            }), this.attachEvent("onResize", this.Tx)
        }, Fx: function () {
            for (var t = !1, i = this.Xf, e = 0; e < i.length; e++) i[e].adjust && ("header" == i[e].adjust || this.count()) && (t = this.Vx(e, i[e].adjust, !0) || t);
            t && (this.mo(!0), this.Tx())
        }, Tx: function () {
            var t = this.B.columns, i = [], e = 0;
            if (t && !this.B.autowidth) for (var s = 0; s < t.length; s++) {
                var n = t[s].fillspace;
                n && (e += 1 * (i[s] = n) || 1)
            }
            e && this.zx(i, e)
        }, zx: function (t, i) {
            var e = this.B.columns;
            if (e) {
                var s = this.oe - this.Hx, n = !1;
                if (0 < s) {
                    for (var h = 0; h < e.length; h++) t[h] || (s -= e[h].width || this.B.columnWidth);
                    for (var r = 0; r < t.length; r++) if (t[r]) {
                        var o = Math.min(s, Math.round(s * t[r] / i));
                        n = this.po(r, o, !0) || n, s -= e[r].width, i -= t[r]
                    }
                    n && this.mo(!0)
                }
            }
        }, Rx: function (t, i) {
            var e = this.B.columns[t], s = e.minWidth || this.B.minColumnWidth;
            if ("header" != i) {
                var n = this.data.order.length;
                e.adjustBatch && e.adjustBatch < n && (n = e.adjustBatch);
                for (var h = this.data.order.slice(0, n), r = 0; r < n; r++) h[r] = h[r] ? this.Bx(this.getItem(h[r]), e, 0) : "";
                s = Math.max(s, Mt(h, "webix_table_cell webix_cell").width)
            }
            if ("data" != i) {
                for (var o = 0; o < e.header.length; o++) {
                    var a = e.header[o];
                    if (a) {
                        var u = 0;
                        if (a.rotate) for (var c = 0; c < (a.rowspan || 1); c++) u += this.Kf[c];
                        var f = "webix_table_cell webix_cell " + (a.css || "") + (a.rotate ? "webix_measure_rotate" : ""),
                            l = Mt([a.text], f, u);
                        s = Math.max(s, a.rotate ? l.height : l.width)
                    }
                }
                e.sort && (s += 10)
            }
            return s += Y.isIE ? Ei.layoutPadding.space : 0, Math.min(s, e.maxWidth || this.B.maxColumnWidth || 1e5)
        }, Vx: function (t, i, e) {
            if (0 <= t) {
                var s = this.Rx(t, i);
                return this.po(t, s, e)
            }
        }, adjustColumn: function (t, i) {
            this.Vx(this.getColumnIndex(t), i)
        }, adjustRowHeight: function (t, i) {
            if (t) this.Px(t); else {
                for (var e = {}, s = this.B.columns, n = 0; n < s.length; n++) this.Px(s[n].id, e);
                this.data.each(function (t) {
                    t.$height = e[t.id]
                })
            }
            i || this.refresh()
        }, Px: function (t, e) {
            var i, s = this.getColumnConfig(t),
                n = ct("DIV", {"class": "webix_table_cell webix_measure_size webix_cell"}, "");
            n.style.cssText = "width:" + s.width + "px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;", this.$view.appendChild(n), n.offsetHeight < 1 && (i = this.$view.cloneNode(!0), document.body.appendChild(i), i.appendChild(n)), this.data.each(function (t) {
                var i;
                n.innerHTML = this.Bx(t, s, 0), i = Math.max(n.scrollHeight, this.B.rowHeight, this.B.minRowHeight || 0), i = Math.min(i, this.B.maxRowHeight || 1e5), e ? e[t.id] = Math.max(i, e[t.id] || 0) : t.$height = i
            }, this), n = lt(n), i && lt(i)
        }
    }, dr = {
        math_setter: function (t) {
            return t && this.jx(), t
        }, Ex: "$", jx: function () {
            Y.strict || (this.data.attachEvent("onStoreUpdated", S(this.Nx, this)), this.data.attachEvent("onStoreLoad", S(this.Lx, this)), this.attachEvent("onStructureLoad", this.Lx))
        }, Nx: function (t, i, e
        ) {
            if (t && "paint" != e) if ("delete" == e) for (var s = 0; s < this.Xf.length; s++) this.Ox(i, this.Xf[s].id); else {
                "add" == e && this.Ux(i);
                for (var n = 0; n < this.Xf.length; n++) this.Wx = {}, this.Yx(t, this.Xf[n].id);
                this.Wx = {}
            }
        }, Yx: function (t, i) {
            var e, s = this.getItem(t);
            if ((e = s[this.Ex + i] || s[i]) && 0 < e.length && "=" === e.toString().substr(0, 1) ? (s[this.Ex + i] = e, s[i] = this.qx(e, t, i)) : ("undefined" != typeof s[this.Ex + i] && delete s[this.Ex + i], this.Ox(s, i)), "undefined" != typeof s.depends && "undefined" != typeof s.depends[i]) for (var n in s.depends[i]) {
                var h = s.depends[i][n][0] + "__" + s.depends[i][n][1];
                "undefined" == typeof this.Wx[h] && (this.Wx[h] = !0, this.Yx(s.depends[i][n][0], s.depends[i][n][1]))
            }
        }, Gx: function (t, i) {
            var e = this.getItem(t);
            "undefined" != typeof e[this.Ex + i] && (e[i] = e[this.Ex + i])
        }, Lx: function () {
            if (this.Xf && this.count()) {
                this.Ux();
                for (var t = 0; t < this.Xf.length; t++) {
                    var i = this.columnId(t);
                    this.data.each(function (t) {
                        this.Wx = {}, this.Yx(t.id, i)
                    }, this)
                }
                this.Wx = {}
            }
        }, Ux: function (t) {
            for (var i = 0; i < this.Xf.length; i++) if (this.Xf[i].math) {
                var e = this.columnId(i), s = "=" + this.Xf[i].math;
                s = s.replace(/\$c/g, "#$c#"), t ? (t[e] = this.Xx(s, t.id, e), delete t[this.Ex + e], this.Ox(t, e)) : this.data.each(function (t) {
                    t[e] = this.Xx(s, t.id, e), delete t[this.Ex + e], this.Ox(t, e)
                }, this)
            }
        }, Xx: function (t, i, e) {
            return Wt(t)({$r: i, $c: e})
        }, Jx: function (t, i) {
            var e;
            if (!this.exists(t)) return "#out_of_range";
            var s = (e = this.getItem(t))[this.Ex + i] || e[i] || 0;
            return "=" !== (s = s.toString()).substring(0, 1) ? s : ("undefined" == typeof e[this.Ex + i] && (e[this.Ex + i] = e[i]), e[i] = this.qx(s, t, i, !0), e[i])
        }, qx: function (t, i, e, s) {
            if (!0 === s) {
                if (this.Kx(i, e)) return "#selfreference"
            } else this.Zx();
            this.Qx(i, e);
            var n = this.getItem(i);
            t = t.substring(1);
            var h = this.ty(t), r = this.iy(t, i);
            t = h ? (t = this.ey(t, r), this.ny(t, h)) : this.ey(t, r, !0);
            var o = this.hy(t);
            if (!1 !== o) return o;
            this.oy(i, e), this.Ox(n, e);
            for (var a = 0; a < r.length; a++) this.ay([i, e], r[a]);
            return !1 !== (o = this.hy(t)) ? o : t ? (t = this.uy(t.replace(/\$r/g, n.id)), !1 !== (o = this.hy(t)) ? o : t) : t
        }, ty: function (t) {
            return t.replace(/\[[^)]*?\]/g, "").match(/(\+|-|\*|\/)/g)
        }, iy: function (t, i) {
            var e = t.match(/\[([^\]]+),([^\]]+)\]/g);
            null === e && (e = []);
            for (var s = 0; s < e.length; s++) {
                var n = e[s], h = n;
                (n = (n = n.substr(1, n.length - 2)).split(","))[0] = this.cy(n[0]), n[1] = this.cy(n[1]), ":" === n[0].substr(0, 1) && (n[0] = this.getIdByIndex(n[0].substr(1))), "$r" === n[0] && (n[0] = i), ":" === n[1].substr(0, 1) && (n[1] = this.columnId(n[1].substr(1))), n[2] = h, e[s] = n
            }
            return e
        }, ey: function (t, i, e) {
            var s = "(", n = ")";
            e && (s = n = "");
            for (var h = 0; h < i.length; h++) {
                var r = i[h], o = this.Jx(r[0], r[1]);
                isNaN(o) && (o = '"' + o + '"'), t = t.replace(r[2], s + o + n)
            }
            return t
        }, ny: function (t, i) {
            for (var e = [], s = 0; s < i.length; s++) {
                var n = i[s], h = this.fy(t, n);
                e.push(h[0]), t = h[1]
            }
            e.push(t);
            for (var r = 0; r < e.length; r++) {
                var o = this.cy(e[r]);
                e[r] = o
            }
            for (var a = "", u = 0; u < e.length - 1; u++) a += e[u] + i[u];
            return a += e[e.length - 1]
        }, uy: function (t) {
            var i;
            try {
                i = window.eval(t)
            } catch (e) {
                i = ""
            }
            return i.toString()
        }, fy: function (t, i) {
            var e = t.indexOf(i);
            return [t.substr(0, e), t.substr(e + 1)]
        }, cy: function (t) {
            return t = (t = t.replace(/^ */g, "")).replace(/ *$/g, "")
        }, Zx: function () {
            this.ly = []
        }, Qx: function (t, i) {
            this.ly[t + "__" + i] = !0
        }, oy: function (t, i) {
            "undefined" != typeof this.ly[t + "__" + i] && delete this.ly[t + "__" + i]
        }, Kx: function (t, i) {
            return "undefined" != typeof this.ly[t + "__" + i]
        }, ay: function (t, i) {
            var e = this.getItem(i[0]);
            "undefined" == typeof e.depends && (e.depends = {}), "undefined" == typeof e.depends[i[1]] && (e.depends[i[1]] = {}), e.depends[i[1]][t[0] + "__" + t[1]] = t, "undefined" == typeof (e = this.getItem(t[0])).triggers && (e.triggers = {}), "undefined" == typeof e.triggers[t[1]] && (e.triggers[t[1]] = {}), e.triggers[t[1]][i[0] + "__" + i[1]] = i
        }, Ox: function (t, i) {
            if (t && "undefined" != typeof t.triggers) for (var e in t.triggers[i]) {
                var s = t.triggers[i][e], n = this.getItem(s[0]);
                n && delete n.depends[s[1]][t.id + "__" + i]
            }
        }, hy: function (t) {
            var i = t.match(/#\w+/);
            return null !== i && 0 < i.length && i[0]
        }
    }, vr = {
        headermenu_setter: function (t) {
            return t && (t.data && (this.vy = !0), t = this._y(t)), t
        }, _y: function (n) {
            var t = {
                view: "contextmenu",
                template: "<span class='webix_icon {common.hidden()}'></span> &nbsp; #value#",
                type: {
                    hidden: function (t) {
                        return t.hidden ? "wxi-eye-slash" : "wxi-eye"
                    }
                },
                on: {
                    onMenuItemClick: S(function (t) {
                        var i = ri(
                            this.B.headermenu), e = i.getItem(t).hidden;
                        i.getItem(t).hidden = !e, i.refresh(t), i.$blockRender = !0;
                        var s = {spans: "object" == M(n) && n.spans};
                        return e ? this.showColumn(t, s) : this.hideColumn(t, s), i.$blockRender = !1
                    }, this)
                },
                data: []
            };
            "object" == M(n) && P.extend(t, n, !0);
            var i = ei(t);
            return i.attachTo(this.S), this.zt.push(i), this.attachEvent("onStructureLoad", this.gy), this.attachEvent("onStructureUpdate", this.gy), this._y = function (t) {
                return t
            }, i.B.id
        }, gy: function () {
            var t = ri(this.B.headermenu), i = this.vo;
            if (!t.$blockRender) {
                if (this.vy) return t.data.each(function (t) {
                    t.hidden = !!i[t.id]
                }), void t.refresh();
                var e = [], s = this.uo;
                s.length || (s = this.Xf);
                for (var n = 0; n < s.length; n++) {
                    var h = this.getColumnConfig(s[n].id || s[n]), r = h.header[0], o = !!i[h.id];
                    !1 !== h.headermenu && r && e.push({id: h.id, value: o ? r.text : r.groupText || r.text, hidden: o})
                }
                e.length && t.data.importData(e)
            }
        }
    };
    fn.headerMenu = {
        getValue: function () {
        }, setValue: function () {
        }, refresh: function (t, i) {
            t.B.headermenu || (t.define("headermenu", !0), t.gy()), i.onclick = function () {
                ri(t.config.headermenu).show(i)
            }
        }, render: function () {
            return "<span class='webix_icon wxi-columns' role='button' tabindex='0' aria-label='" + $.aria.headermenu + "'>"
        }
    };
    var _r = {
        _a: function (t) {
            return this.getColumnConfig(t.column).editor
        }, getEditor: function (t, i) {
            return t ? (1 == arguments.length && (i = t.column, t = t.row), (this.na[t] || {})[i]) : this.Di
        }, Ca: function (t) {
            for (var i in this.na) {
                var e = this.na[i];
                for (var s in e) "$count" != s && t.call(this, e[s])
            }
        }, pa: function (t, i, e) {
            var s = t.row, n = t.column, h = i.config = this.getColumnConfig(n);
            !1 !== e && this.showCell(s, n);
            var r = i.render();
            i.$inline && (r = this.aa(t)), i.node = r;
            var o, a = this.getItem(s), u = h.editFormat;
            return this.B.editMath && (o = a["$" + n]), j(o = o || a[n]) && (o = ""), i.setValue(u ? u(o) : o, a), i.value = a[n], this.wa(t, i), i.$inline || (i.wy = this.xa(t, r, !0)), i.afterRender && i.afterRender(), this.B.liveValidation && (Jt(i.node, "keyup", this.xy(t, this)), this.validateEditor(t)), r
        }, xy: function (t, i) {
            return function () {
                i.validateEditor(t)
            }
        }, $a: function (t) {
            var i = this.getColumnConfig(t.column).editParse, e = t.getValue();
            return i ? i(e) : e
        }, da: function (t, i, e) {
            var s = e ? {} : this.getItem(t.row);
            return s[t.column] = i, this.B.editMath && (s["$" + t.column] = null), s
        }, wa: function (t, i) {
            var e = this.na[t.row] = this.na[t.row] || {};
            e.$count = (e.$count || 0) + 1, i.row = t.row, i.column = t.column, this.Di = e[t.column] = i, this.bi++, this.yy = this.getScrollState()
        }, Ma: function (t) {
            this.Di == t && (this.Di = 0), t.destroy && t.destroy();
            var i = this.na[t.row];
            delete i[t.column], i.$count--, i.$count || delete this.na[t.row], this.bi--
        }, ua: function (t, i) {
            var e = this.na[t];
            if (e) for (var s in this.na[i] = e, delete this.na[t], e) "$count" != s && (e[s].row = i)
        }, ya: function (t) {
            var i, e, s, n, h, r = this.getColumnConfig(t.column), o = 0;
            if (r && r.node && r.attached) {
                if (s = this.getIndexById(t.row), this.Zf && this.getSpan(t.row, t.column)) for (e = 0; e < 3; e++) for (i = this.My[e], n = 0; !o && n < i.childNodes.length; n++) (h = i.childNodes[n]).getAttribute("row") == s && h.getAttribute("column") == this.getColumnIndex(t.column) && (o = h);
                !o && s >= r.Sy - this.B.topSplit && s < r.ky && (o = r.node.childNodes[s - r.Sy + this.B.topSplit])
            }
            return o
        }, editCell: function (t, i, e, s) {
            return i = i || this.B.columns[0].id, we.edit.call(this, {row: t, column: i}, e, s)
        }, editRow: function (i) {
            i && i.row && (i = i.row);
            var e = !1;
            this.eachColumn(function (t) {
                this.edit({row: i, column: t}, e, !e), e = !0
            })
        }, editColumn: function (i) {
            i && i.column && (i = i.column);
            var e = !1;
            this.eachRow(function (t) {
                this.edit({row: t, column: i}, e, !e), e = !0
            })
        }, eachRow: function (t, i) {
            var e = this.data.order;
            i && (e = this.data.mr || e);
            for (var s = 0; s < e.length; s++) t.call(this, e[s])
        }, eachColumn: function (t, i) {
            for (var e in this.Jf) {
                var s = this.Jf[e];
                t.call(this, s.id, s)
            }
            if (i) for (var n in this.vo) {
                var h = this.vo[n];
                t.call(this, h.id, h)
            }
        }, Ia: function (t) {
            if (this.getSelectedId && 1 == this.getSelectedId(!0).length) return this.wo(t), !1
        }, mi: function (t, i) {
            if (this.B.editable && !this.bi) {
                if (i.target && "INPUT" == i.target.tagName) return !0;
                var e = this.getSelectedId(!0);
                if (1 == e.length) {
                    var s = e[0];
                    return "row" == this.B.select && (s.column = this.B.columns[i.shiftKey ? 0 : this.B.columns.length - 1].id), this.editNext(t, s), !1
                }
            }
            return !0
        }, Da: function (t, i, e) {
            var s = this.getIndexById(t.row), n = this.getColumnIndex(t.column),
                h = this.data.order, r = this.Xf;
            if (e) for (var o = s; o < h.length; o++) {
                for (var a = n + 1; a < r.length; a++) {
                    var u = {row: h[o], column: r[a].id};
                    if (i.call(this, u) && (!this.Cy || !this.Cy(t, u))) return u
                }
                n = -1
            } else for (var c = s; 0 <= c; c--) {
                for (var f = n - 1; 0 <= f; f--) {
                    var l = {row: h[c], column: r[f].id};
                    if (i.call(this, l)) return l
                }
                n = r.length
            }
            return null
        }, $y: function () {
            this.bi && (this.Dy ? this.Dy = !1 : (this.hh.scrollTo(this.getScrollState().y + this.et.childNodes[1].firstChild.scrollTop), this.et.childNodes[1].firstChild.scrollTop = 0, this.Dy = !0))
        }, Iy: function () {
            this.bi && this.oh.scrollTo(this.et.childNodes[1].scrollLeft)
        }, fa: function () {
            this.attachEvent("onScrollY", this.Ay), this.attachEvent("onScrollX", this.Ay), this.attachEvent("onScrollY", this.ha), this.attachEvent("onColumnResize", function () {
                this.editStop()
            }), this.attachEvent("onAfterFilter", function () {
                this.editStop()
            }), this.attachEvent("onRowResize", function () {
                this.editStop()
            }), this.attachEvent("onAfterScroll", function () {
                this.B.topSplit && this.editStop()
            }), this.et.childNodes[1].firstChild.onscroll = S(this.$y, this), this.et.childNodes[1].onscroll = S(this.Iy, this)
        }, Ay: function () {
            if (this.bi) {
                var t = this.yy;
                this.yy = this.getScrollState();
                var r = this.yy.y - t.y;
                this.Ca(function (t) {
                    if (t.getPopup) {
                        var i = this.getItemNode(t), e = !1;
                        if (this.B.prerender) {
                            var s = t.wy, n = s.top - this.rh, h = s.left - this.ah;
                            e = n < 0 || n + s.height > this.Dx || h < 0 || h + s.width > this.$width - this.Fy
                        }
                        !i || e ? t.getPopup().show({x: -1e4, y: -1e4}) : t.getPopup().show(i)
                    }
                    this.B.prerender || t.linkInput || t.$inline || (t.node.top -= r, t.node.style.top = t.node.top + "px")
                })
            }
        }
    }, pr = {
        $init: function () {
            this.Ty(), this.attachEvent("onStructureLoad", this.Vy)
        }, Ty: function () {
            this.vo = {}, this.uo = g(), this._o = [0, 0]
        }, Vy: function () {
            for (var t = this.Xf, i = 0; i < t.length; i++) t[i].header && this.zy(t, t[i].header), t[i].footer && this.zy(t, t[i].footer);
            for (var e = t.length - 1; 0 <= e; e--) t[e].hidden ? this.hideColumn(t[e].id, {}, !0, !0) : t[e].batch && this.config.visibleBatch && t[e].batch != this.config.visibleBatch && this.hideColumn(t[e].id, {}, !0, !0)
        }, zy: function (t, i) {
            for (var e = 0; e < i.length; e++) {
                var s = i[e];
                s && s.colspan && !s.$colspan && (s.$colspan = s.colspan)
            }
        }, moveColumn: function (t, i) {
            var e = this.getColumnIndex(t);
            if (e != i) {
                var s = this.B.columns, n = s.splice(e, 1), h = i - (e < i ? 1 : 0);
                x.insertAt.call(s, n[0], h);
                var r = this.uo;
                if (r.length) {
                    var o = (r = g(r)).find(t);
                    r.removeAt(o), 0 === h ? r.unshift(t) : r.insertAt(t, r.find(s[h - 1].id) + 1)
                }
                this.Hy()
            }
        }, Ry: function () {
            var t = this.uo, i = this.B.columns;
            if (!t.length) {
                for (var e = 0; e < i.length; e++) t[e] = i[e].id;
                this._o = [this.B.leftSplit, this.dw]
            }
        }, isColumnVisible: function (t) {
            return !this.vo[t]
        }, hideColumn: function (t, i, e, s) {
            var n, h = this.B.columns, r = this.uo, o = this.vo, a = 1;
            if (i = i || {}, !1 !== s) {
                var u = this.getColumnIndex(t);
                if (-1 === u || !this.callEvent("onBeforeColumnHide", [t])) return;
                if (-1 == u) return;
                if (this.Ry(), i.spans) for (var c = h[u].header, f = 0; f < c.length; f++) c[f] && (c[f].$groupSpan = c[f].colspan || 1, a = Math.max(a, c[f].$groupSpan));
                u < this.B.leftSplit && (this.B.leftSplit -= a), u >= this.dw ? this.B.rightSplit -= a : this.dw -= a;
                for (var l = u + a - 1; u <= l; l--) this.By(u), (o[(n = h.splice(u, 1)[0]).id] = n).Sy = -1, delete this.Jf[n.id];
                this.callEvent("onAfterColumnHide", [t])
            } else {
                if (!(n = o[t]) || !this.callEvent("onBeforeColumnShow", [t])) return;
                for (var d = null, v = 0, _ = 0; v < r.length; v++) {
                    if (r[v] == t) {
                        _ = v;
                        break
                    }
                    o[r[v]] || (d = r[v])
                }
                var p = d ? this.getColumnIndex(d) + 1 : 0;
                if (i.spans) for (var m = n.header, b = 0; b < m.length; b++) m[b] && (m[b].colspan = m[b].$groupSpan || m[b].colspan, delete m[b].$groupSpan, a = Math.max(a, m[b].colspan || 1));
                for (var g = _ + a - 1; _ <= g; g--) {
                    var w = o[r[g]];
                    w ? (x.insertAt.call(h, w, p), delete w.hidden, delete o[w.id], this.Jf[w.id] = w) : a--
                }
                _ < this._o[0] && (this.B.leftSplit += a), _ >= this._o[1] ? this.B.rightSplit += a : this.dw += a, this.callEvent("onAfterColumnShow", [t])
            }
            n.header && this.Py(n, !1 !== s ? 0 : 1, "header"), n.footer && this.Py(n, !1 !== s ? 0 : 1, "footer"), e || this.Hy()
        }, Py: function (t, i, e) {
            for (var s = t[e].length - 1; 0 <= s; s--) for (var n, h = this.uo, r = !1, o = 0, a = 0; a < h.length; a++) {
                var u = this.getColumnConfig(h[a]), c = u[e][s];
                this.isColumnVisible(h[a]) ? (r && 0 < o && n && 0 < n.colspan ? n = c = u[e][s] = n : c && c.$colspan && o <= 0 && (o = c.colspan = c.$colspan, n = c), r = null) : (c && c.$colspan && o <= 0 && (o = c.colspan = c.$colspan, r = n = c), n && 0 < o && n.colspan--), o--
            }
        },
        refreshColumns: function (t, i) {
            this.jy = !0, (t && t != this.config.columns || i) && (this.Ty(), this.lo = {}, t && (this.dw = t.length - (this.config.rightSplit || 0))), this.Jf = {};
            for (var e = 0; e < this.Xf.length; e++) {
                var s = this.Xf[e];
                (this.Jf[s.id] = s).attached = s.node = null
            }
            for (var n = 0; n < 3; n++) this.S.childNodes[n].innerHTML = "", this.et.childNodes[n].firstChild.innerHTML = "";
            this.Xf = this.config.columns = t || this.config.columns, this.dw = this.Xf.length - this.B.rightSplit, this["do"] = 0, this.Ey(), this.Ih(), this.callEvent("onStructureUpdate"), this.render(), this.jy = 0
        }, Hy: function () {
            this["do"] = 0, this.callEvent("onStructureUpdate"), this.Ny(), this.render()
        }, showColumn: function (t, i, e) {
            return this.hideColumn(t, i, e, !1)
        }, showColumnBatch: function (s, n) {
            var h = void 0 !== n;
            n = !1 !== n, this.eachColumn(function (t, i) {
                if (i.batch) {
                    var e = this.vo[i.id];
                    n || (e = !e), i.batch == s && e ? this.hideColumn(i.id, {spans: !0}, !0, !n) : h || i.batch == s || e || this.hideColumn(i.id, {spans: !0}, !0, n)
                }
            }, !0), this.Hy()
        }
    }, mr = {
        $init: function () {
            this.attachEvent("onAfterScroll", this.ru), this.attachEvent("onFocus", function () {
                xt(this.$view, "webix_dtable_focused")
            }), this.attachEvent("onBlur", function () {
                yt(this.$view, "webix_dtable_focused")
            })
        }, ru: function () {
            if (!this.Ly()) {
                var t = this.Q.querySelector(".webix_cell");
                t && t.setAttribute("tabindex", "0")
            }
        }, Ly: function () {
            for (var t = this.getSelectedId(!0), i = 0; i < t.length; i++) if (this.isColumnVisible(t[i].column)) return this.getItemNode(t[i]);
            return null
        }, moveSelection: function (t, i, e) {
            if (this.Oy(), !this.B.disabled) {
                i = i || {};
                var s = this.getSelectedId(!0), n = s.length - 1,
                    h = !(!this.B.multiselect && !this.B.areaselect) && i.shift;
                if (1 < s.length && "cell" !== this.B.select && (s = s.sort(S(function (t, i) {
                    return this.getIndexById(t.row) > this.getIndexById(i.row) || this.getColumnIndex(t.column) > this.getColumnIndex(i.column) ? 1 : -1
                }, this)), "up" != t && "left" != t && "top" != t && "pgup" != t || (n = 0)), n < 0 && this.count()) {
                    if ("down" == t || "right" == t) t = "top"; else {
                        if ("up" != t && "left" != t) return;
                        t = "bottom"
                    }
                    n = 0, s = [{row: 1, column: 1}]
                }
                if (0 <= n) {
                    var r = s[n].row, o = s[n].column;
                    if ("top" == t || "bottom" == t) r && ("top" == t ? r = this.data.getFirstId() : "bottom" == t && (r = this.data.getLastId())), o && (n = 0, "bottom" == t && (n = this.config.columns.length - 1), o = this.columnId(n)); else if ("up" == t || "down" == t || "pgup" == t || "pgdown" == t) {
                        if (r) {
                            var a = this.getIndexById(r), u = 1;
                            "pgup" != t && "pgdown" != t || (u = this.tc ? this.tc.config.size : Math.round(this.Dx / this.B.rowHeight)), "up" == t || "pgup" == t ? a -= u : "down" != t && "pgdown" != t || (a += u), a < 0 && (a = 0), a >= this.data.order.length && (a = this.data.order.length - 1), !(r = this.getIdByIndex(a)) && this.B.pager && this.showItemByIndex(a)
                        }
                    } else {
                        if ("right" != t && "left" != t) return;
                        if (o && "row" != this.config.select) {
                            var c = this.getColumnIndex(o);
                            "right" == t ? c++ : "left" == t && c--, c < 0 && (c = 0), c >= this.config.columns.length && (c = this.config.columns.length - 1), o = this.columnId(c)
                        } else {
                            if ((this.open || this.Uy) && "right" == t) return this.open ? this.open(r) : this.openSub(r);
                            if ((this.close || this.Uy) && "left" == t) return this.close ? this.close(r) : this.closeSub(r)
                        }
                    }
                    if (r) {
                        this.showCell(r, o), this.select || (P.extend(this, this.Iw.Dw, !0), this.B.select = this.open || this.Uy ? "row" : "cell", P.extend(this, this.Iw[this.B.select], !0));
                        var f = {row: r, column: o};
                        if (h && "area" == this.B.select) {
                            var l = this.sw[this.sw.length - 1];
                            this.tw(f, l, t, i)
                        } else this.wo(f, h);
                        if (!this.B.clipboard && !1 !== e) {
                            var d = this.getItemNode(f);
                            d && d.focus()
                        }
                    }
                }
                return !1
            }
        }
    }, br = {
        To: function (t) {
            for (var i = 0; i < this.Xf.length; i++) {
                var e = this.Xf[i], s = this.getItemNode({row: t, cind: i});
                s ? s.parentNode.insertBefore(qi["in"][i], s) : e.node.appendChild(qi["in"][i])
            }
        }, Ro: function () {
            var t = [], i = this.Xf.length, e = document.createElement("div");
            e.className = "webix_drop_area", e.style.height = this.B.rowHeight + "px", e.innerHTML = this.$dropHTML();
            for (var s = 0; s < i; s++) t.push(e.cloneNode(!0));
            return t
        }
    }, gr = {
        drag_setter: function (t) {
            return this.attachEvent("onBeforeDrag", function (t) {
                return this.Wy(t.source)
            }), this.attachEvent("onBeforeDragIn", function (t) {
                var i = this.Wy(t.target);
                return !i && qi["in"] && (lt(qi["in"]), this.Po = qi["in"] = null), i
            }), ve.drag_setter.call(this, t), "order" != t && "move" != t || P.extend(this, br, !0), t
        }, Fo: function (t, i, e) {
            var s = qi.Ps;
            this.B.prerender || e || (t = [s.start]);
            for (var n = 0; n < t.length; n++) {
                for (
                    var h = 0; h < this.Xf.length; h++) {
                    var r = this.getItemNode({row: t[n], cind: h});
                    r && xt(r, i)
                }
                this.data.addMark(t[n], i, 1, 1, !0)
            }
        }, Ao: function (t, i, e) {
            var s = qi.Ps;
            this.B.prerender || e || (t = [s.start]);
            for (var n = 0; n < t.length; n++) {
                for (var h = 0; h < this.Xf.length; h++) {
                    var r = this.getItemNode({row: t[n], cind: h});
                    r && yt(r, i)
                }
                this.data.removeMark(t[n], i, 1, !0)
            }
        }, Wy: function (t) {
            var i, e, s = !1;
            if (this.B.topSplit && t) for (b(t) || (t = [t]), i = 0; !s && i < t.length; i++) s = 0 <= (e = this.getIndexById(t[i])) && e < this.B.topSplit;
            return !s
        }, Z: function (t) {
            for (var i = "<div class='webix_dd_drag' style='width:" + (this.oe - this.Hx) + "px;'>", e = this.B.columns, s = 0; s < e.length; s++) {
                var n = this.Bx(t, e[s]);
                i += "<div style='width:" + e[s].width + "px;'>" + n + "</div>"
            }
            return i + "</div>"
        }, getHeaderNode: function (t, i) {
            return this.Yy(t, i, this.S)
        }, getFooterNode: function (t, i) {
            return this.Yy(t, i, this.qf)
        }, Yy: function (t, i, e) {
            if (this.isColumnVisible(t)) {
                var s = this.getColumnIndex(t), n = this.B.leftSplit > s ? 0 : this.dw <= s ? 2 : 1;
                i = i || 0;
                var h = e.childNodes[n].getElementsByTagName("TR");
                if (h.length) for (var r = h[i + 1].childNodes, o = 0; o < r.length; o++) if (r[o].getAttribute("column") == s) return r[o].firstChild
            }
            return null
        }, getItemNode: function (t) {
            if (t && !t.header) {
                var i = t.row || t, e = "number" == typeof t.rind ? t.rind : this.getIndexById(i), s = this.aw(),
                    n = s[0] - this.B.topSplit;
                if (e < n && e > s[1]) return;
                var h = this.ow(), r = this.B.leftSplit ? 0 : h[0], o = "number" == typeof t.cind;
                if ((t.column || o) && (r = o ? t.cind : this.getColumnIndex(t.column)) < this.dw && r >= this.B.leftSplit && (r < h[0] || r > h[1])) return;
                var a = this.B.columns[r];
                if (a.attached && a.node) {
                    if ("$webix-drop" === i) return qi["in"][r];
                    for (var u = e < this.B.topSplit || this.B.prerender ? e : e - n, c = a.node.childNodes, f = Math.min(c.length, u + 1), l = 0; l < f; l++) "webix_drop_area" === c[l].className && u++;
                    return c[u]
                }
            }
        }, qy: function (t) {
            var i = (t.target || t.srcElement).nodeName;
            return "INPUT" != i && "TEXTAREA" != i
        }, dragColumn_setter: function (t) {
            var r;
            "order" == t ? r = {
                $drag: S(function (t, i) {
                    if (!this.qy(i) || this.bv) return !1;
                    var e = this.locate(i);
                    if (!e || !this.callEvent("onBeforeColumnDrag", [e.column, i])) return !1;
                    qi.Ps = {from: r, start: e, custom: "column_dnd"};
                    var s = this.getColumnConfig(e.column);
                    return this.Gy = pt(i), this.Xy = s.width, this.yo = !0, "<div class='webix_dd_drag_column' style='width:" + s.width + "px'>" + (s.header[0].text || "&nbsp;") + "</div>"
                }, this), $dragPos: S(function (t, i, e) {
                    var s = this, n = qi.getContext(), h = _t(this.$view);
                    e.style.display = "none";
                    var r = document.elementFromPoint(t.x, h.y + 1), o = r ? this.locate(r) : null,
                        a = qi.getContext().start.column;
                    if (o && o.column != a && (!this.Jy || o.column != this.Ky) && "column_dnd" == n.custom && ri(r) == this) {
                        if (!this.callEvent("onBeforeColumnDropOrder", [a, o.column, i])) return;
                        var u = this.getColumnIndex(a), c = this.getColumnIndex(o.column);
                        i.touches && (this.Zy = i.target, this.Zy.style.display = "none", this.$view.parentNode.appendChild(this.Zy)), this.moveColumn(a, c + (u < c ? 1 : 0)), this.Ky = o.column, this.Jy = !0
                    }
                    if (o && o.column == a && (this.Jy = !1), e.style.display = "block", t.x = t.x - this.Gy.x, t.y = h.y, t.x < h.x) t.x = h.x; else {
                        var f = h.x + this.$view.offsetWidth - this.Hx - this.Xy;
                        t.x > f && (t.x = f)
                    }
                    qi.Xs = !0, this.ht && (this.ht = window.clearTimeout(this.ht)), !1 !== this.B.dragscroll && (this.ht = k(function (t) {
                        return s.rt(t)
                    }, this, [mt(i)], 250))
                }, this), $dragDestroy: S(function (t, i) {
                    this.yo = null, this.ht && (this.ht = window.clearTimeout(this.ht)), lt(i), this.Zy && lt(this.Zy);
                    var e = qi.getContext().start;
                    this.callEvent("onAfterColumnDropOrder", [e.column, this.Ky, t])
                }, this), $drop: function () {
                }
            } : t && (r = {
                Mo: !0, $drag: S(function (t, i) {
                    if (!this.qy(i) || this.bv) return !1;
                    var e = this.locate(i);
                    if (!e || !this.callEvent("onBeforeColumnDrag", [e.column, i])) return !1;
                    qi.Ps = {from: r, start: e, custom: "column_dnd"};
                    for (var s = this.getColumnConfig(e.column).header, n = "&nbsp;", h = 0; h < s.length; h++) if (s[h]) {
                        n = s[h].text;
                        break
                    }
                    return this.yo = !0, "<div class='webix_dd_drag_column'>" + n + "</div>"
                }, this), $drop: S(function (t, i, e) {
                    var s = e;
                    e.touches && this.Qy && (s = this.Qy);
                    var n = this.locate(s);
                    if (!n) return !1;
                    var h = qi.getContext().start.column;
                    if (h != n.column) {
                        if (!this.callEvent("onBeforeColumnDrop", [h, n.column, e])) return;
                        var r = this.getColumnIndex(h), o = this.getColumnIndex(n.column);
                        this.moveColumn(h, o + (r < o ? 1 : 0)), this.callEvent("onAfterColumnDrop", [h, n.column, e])
                    }
                }, this), $dragIn: S(function (t, i, e) {
                    var s = this, n = qi.getContext();
                    if ("column_dnd" != n.custom || n.from != r) return !1;
                    for (var h = e.target || e.srcElement; -1 == (h.className || "").indexOf("webix_hcell");) if (!(h = h.parentNode)) return;
                    return this.ht && (this.ht = window.clearTimeout(this.ht)), !1 !== this.B.dragscroll && (this.ht = k(function (t) {
                        return s.rt(t)
                    }, this, [mt(e)], 250)), h != this.Qy && (this.Qy && yt(this.Qy, "webix_dd_over_column"), xt(h, "webix_dd_over_column")), this.Qy = h
                }, this), $dragDestroy: S(function (t, i) {
                    this.yo = null, this.ht && (this.ht = window.clearTimeout(this.ht)), this.Qy && yt(this.Qy, "webix_dd_over_column"), lt(i)
                }, this)
            }), t && (qi.addDrag(this.S, r), qi.addDrop(this.S, r, !0), this.attachEvent("onDestruct", function () {
                return qi.unlink(r)
            }), this.it || P.extend(this, qt, !0))
        }
    }, wr = {
        Yn: function (t, i) {
            if (t.scroll && !i) return !0;
            t.header = j(t.header) ? !!this.config.header : t.header, t.footer = j(t.footer) ? !!this.config.footer : t.footer, t.xCorrection = t.xCorrection || 0
        }, Ap: function (t, i) {
            for (var e = -1, s = 0; e < 0 && s < t.length; s++) i(t[s]) && (e = s);
            return e
        }, tM: function (e, c, f) {
            var l = {}, d = 0;
            return e.forEach(S(function (t, o) {
                var i = t[0], a = [], u = i.length;
                i.forEach(S(function (t, i) {
                    for (var e = c[i + d], s = 0; s < e[f].length; s++) {
                        var n = e[f][s];
                        if (n || l[o] && l[o][s]) {
                            if (n = _(n || {text: ""}), l[o] && l[o][s] && 0 === i && (n.colspan = l[o][s], l[o][s] = 0), n.colspan) {
                                var h = Math.min(n.colspan, u - i);
                                l[o + 1] = l[o + 1] || {}, l[o + 1][s] = n.colspan - h, n.colspan = h
                            }
                            n.rowspan && 1 === u && (n.height = (n.height || this.config.headerRowHeight) * n.rowspan, n.rowspan = null);
                            var r = {
                                txt: n.rotate ? this.getHeaderNode(e.id, s).innerHTML : n.text || (n.contentId ? this.getHeaderContent(n.contentId).getValue() : ""),
                                className: "webix_hcell webix_" + f + "_cell " + (n.css || ""),
                                style: {
                                    height: (n.height || this.config.headerRowHeight) + "px",
                                    width: n.colspan ? "auto" : e.width + "px"
                                },
                                span: n.colspan || n.rowspan ? {colspan: n.colspan || 1, rowspan: n.rowspan || 1} : null
                            };
                            a[s] = a[s] || [], a[s][i] = r
                        }
                    }
                }, this)), e[o] = "header" == f ? a.concat(t) : t.concat(a), d += u
            }, this)), e
        }, qn: function (v, t, _) {
            var p = this.config.columns, m = this.getSelectedId(!0), b = this.Xn(v), g = 0, w = 0, x = [], y = 0;
            return _ = _ || 0 + v.xCorrection, t = t || [], this.eachRow(S(function (i) {
                for (var t = 0, e = this.getItem(i), s = this.getIndexById(i), n = [], h = !1, r = _; r < p.length; r++) {
                    var o = p[r].id, a = this.getColumnIndex(o) - _;
                    if (p[r]) {
                        if (t += p[r].width, b < t && _ < r) {
                            y = r;
                            break
                        }
                        if ("selection" !== v.data || "selection" == v.data && -1 !== this.Ap(m, function (t) {
                            return t.column == o && t.row == i
                        })) {
                            var u;
                            if (this.getSpan && (u = this.getSpan(i, o)), u && this.getColumnIndex(o) === _) {
                                var c = this.getColumnIndex(u[1]);
                                c < _ && (u[2] = u[2] - (_ - c), u[4] = u[4] ? u[4] : e[u[1]] ? this.getText(i, u[1]) : null, u[1] = o)
                            }
                            if (!u || u && u[0] == i && u[1] == o) {
                                var f = u && u[4] ? u[4] : this.Jf[o] ? this.getText(i, o) : "",
                                    l = this.getCss(i, o) + " " + (p[r].css || "") + (u ? " webix_dtable_span " + (u[5] || "") : ""),
                                    d = {
                                        height: u && 1 < u[3] ? "auto" : (e.$height || this.config.rowHeight) + "px",
                                        width: u && 1 < u[2] ? "auto" : p[r].width + "px"
                                    };
                                n.push({
                                    txt: f,
                                    className: l,
                                    style: d,
                                    span: u ? {
                                        colspan: u[2],
                                        spanStart: this.getColumnIndex(u[1]),
                                        rowspan: u[3]
                                    } : null
                                }), f && (g = Math.max(a + 1, g), w = Math.max(s + 1, w)), h = h || !!f
                            } else u && (n.push({$inspan: !0}), g = Math.max(a + 1, g), w = Math.max(s + 1, w))
                        }
                    }
                }
                v.skiprows && !h || x.push(n)
            }, this)), w && g && (v.trim && (x.length = w, x = x.map(function (t) {
                for (var i = t.length - 1; 0 <= i; i--) if (t[i].span && t[i].span.colspan) {
                    t[i].span.colspan = Math.min(t[i].span.colspan, t.length - i);
                    break
                }
                return t.length = g, t
            })), t.push(x)), y ? this.qn(v, t, y) : (v.footer && (t = this.tM(t, p, "footer")), v.header && (t = this.tM(t, p, "header"))), t
        }, Gn: function (n, h) {
            var r = ct("div");
            return n.forEach(S(function (t, i) {
                var e = ct("table", {
                    "class": "webix_table_print " + this.$view.className + (h.borderless ? " borderless" : ""),
                    style: "border-collapse:collapse",
                    id: this.$view.getAttribute("id")
                });
                if (t.forEach(function (t) {
                    var s = ct("tr");
                    t.forEach(function (t) {
                        if (!t.$inspan) {
                            var i = ct("td");
                            for (var e in i.innerHTML = t.txt, i.className = t.className, t.style) i.style[e] = t.style[e];
                            t.span && (i.colSpan = t.span.colspan, i.rowSpan = t.span.rowspan), s.appendChild(i)
                        }
                    }), e.appendChild(s)
                }), r.appendChild(e), i + 1 < n.length) {
                    var s = ct("DIV", {"class": "webix_print_pagebreak"});
                    r.appendChild(s)
                }
            }, this)), r
        }
    }, xr = {
        $exportView: function (t) {
            if (this.isBranchOpen && P.extend(t, {filterHTML: !0}),
            "excel" !== t.export_mode || t.dataOnly || !t.styles) return this;
            t.dataOnly = !0, t.heights = j(t.heights) ? "all" : t.heights;
            var i = Cs(this, t);
            return i[0].styles = this.iM(t), delete t.dataOnly, i
        }, iM: function (t) {
            var c = this.config.columns, f = [];
            return this.eM = this.eM || {}, t.docHeader && (f = [{0: this.sM(t.docHeader.css)}, {0: {}}]), !1 !== t.header && (f = this.nM(t, "header", f)), this.data.each(function (t) {
                for (var i = {}, e = 0; e < c.length; e++) {
                    var s = this.getCss(t.id, c[e].id), n = c[e].node.className, h = "",
                        r = this.getIndexById(t.id) % 2 ? "even" : "odd", o = null, a = null;
                    if (this.Zf && (o = this.getSpan(t.id, c[e].id)) ? (a = this.getSpanNode({
                        row: o[0],
                        column: o[1]
                    }), h = "webix_dtable_span " + (o[5] || "")) : a = this.getItemNode({
                        row: t.id,
                        column: c[e].id
                    }), !a) {
                        a = ct("div", {"class": s, style: "visibility:hidden"});
                        var u = c[e].node;
                        c[e].attached || (u = ct("div", {
                            "class": n,
                            style: "visibility:hidden"
                        }), this.et.appendChild(u)), u.appendChild(a)
                    }
                    i[e] = this.hM(a, [s, n, h, r].join(":"))
                }
                f[f.length] = i
            }, this), !1 !== t.footer && this.config.footer && (f = this.nM(t, "footer", f)), t.docFooter && (f = f.concat([{0: {}}, {0: this.sM(t.docFooter.css)}])), f
        }, nM: function (t, i, e) {
            for (var s = this.config.columns, n = [], h = 0; h < s[0][i].length; h++) {
                for (var r = {}, o = 0; o < s.length; o++) {
                    var a = s[o][i][h];
                    if (a) {
                        var u = a.colspan ? s[o + a.colspan - 1].id : s[o].id,
                            c = "header" == i ? this.getHeaderNode(u, h) : this.getFooterNode(u, h);
                        if (c) {
                            var f = [c.parentNode.className, a.css || "", "webix_hcell", i];
                            r[o] = this.hM(c, f.join(":")), (a.colspan || a.rowspan) && n.push([h, o, {
                                colspan: a.colspan - 1 || 0,
                                rowspan: a.rowspan - 1 || 0
                            }, r[o]])
                        }
                    } else for (var l = 0; l < n.length; l++) {
                        var d = n[l][2], v = n[l][1], _ = n[l][0];
                        v + d.colspan >= o && _ + d.rowspan >= h && (r[o] = n[l][3])
                    }
                }
                e[e.length] = r
            }
            return e
        }, hM: function (t, i) {
            if (this.eM[i]) return this.eM[i];
            var e = this.rM(t), s = {font: {}, alignment: {}, border: {}};
            s.font.name = e["font-family"].replace(/,.*$/, ""), s.font.sz = .75 * e["font-size"].replace("px", ""), s.font.color = {rgb: Pe.rgbToHex(e.color)}, "normal" !== e["font-weight"] && 400 != e["font-weight"] && (s.font.bold = !0), "underline" === e["text-decoration-line"] && (s.font.underline = !0), "italic" === e["font-style"] && (s.font.italic = !0), "line-through" === e["text-decoration-line"] && (s.font.strike = !0), s.alignment.horizontal = e["text-align"], s.alignment.vertical = e.height == e["line-height"] ? "center" : "top", "normal" == e["white-space"] && (s.alignment.wrapText = !0), t.firstChild && t.firstChild.className && -1 !== t.firstChild.className.indexOf("webix_rotate") && (s.alignment.textRotation = 90);
            var n = Pe.rgbToHex(e["background-color"]) || "FFFFFF";
            return s.fill = {fgColor: {rgb: n}}, -1 !== e["background-image"].indexOf("gradient") && (s.fill = {fgColor: {rgb: Pe.rgbToHex(e["background-image"].substring(e["background-image"].lastIndexOf("(")))}}), t.parentNode && "TD" == t.parentNode.nodeName && (e = this.rM(t.parentNode)), "0px" !== e["border-right-width"] && (s.border.right = {
                style: "thin",
                color: {rgb: Pe.rgbToHex(e["border-right-color"]) || n}
            }), "0px" !== e["border-bottom-width"] && (s.border.bottom = {
                style: "thin",
                color: {rgb: Pe.rgbToHex(e["border-bottom-color"]) || n}
            }), "0px" !== e["border-left-width"] && (s.border.left = {
                style: "thin",
                color: {rgb: Pe.rgbToHex(e["border-left-color"]) || n}
            }), "0px" !== e["border-top-width"] && (s.border.top = {
                style: "thin",
                color: {rgb: Pe.rgbToHex(e["border-top-color"]) || n}
            }), this.eM[i] = s
        }, sM: function (t) {
            t = P.extend(t || {}, {visibility: "hidden", "white-space": "nowrap", "text-align": "left"});
            var i = "";
            for (var e in t) i += e + ":" + t[e] + ";";
            var s = ct("div", {style: i});
            this.et.appendChild(s);
            var n = this.hM(s, i);
            return lt(s), n
        }, rM: function (t) {
            return window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle
        }
    }, yr = {
        subrow_setter: function (t) {
            return !!t && (this.oM(), this.B.fixedRowHeight = !1, Wt(t))
        }, subview_setter: function (t) {
            return t && (this.B.subrow = this.subrow_setter("<div></div>")), t
        }, defaults: {subRowHeight: 35}, aM: function () {
            this.data.each(function (t) {
                t && (t.$sub = this.B.subrow(t, this.type))
            }, this), this.uM()
        }, uM: function (t) {
            if ("auto" === this.B.subRowHeight && this.oe && this.cM(), t && this.B.subview) for (var i in this.Uy) {
                var e = ri(this.Uy[i]);
                e.B.hidden || e.adjust()
            }
        }, fM: function (t) {
            var i = this.getItem(t);
            i.$sub = this.B.subrow(i, this.type), "auto" === this.B.subRowHeight && this.cM(i.id, i.$sub)
        }, $init: function () {
            this.oM = o(function () {
                var t = "#" + this.lM + " .webix_cell.webix_dtable_subview { line-height:normal;}";
                this.B.fixedRowHeight && (t += "#" + this.lM + " .webix_column .webix_cell { white-space: nowrap;}"), at(t), this.Uy = {}, this.attachEvent("onSubViewRender", this.dM), this.data.attachEvent("onStoreUpdated", S(function (t, i, e) {
                    t ? "update" == e || "add" == e ? this.fM(t) : "delete" == e && i.$subContent && (ri(i.$subContent).destructor(), delete this.Uy[i.$subContent]) : this.aM()
                }, this)), this.attachEvent("onResize", function (t, i, e) {
                    e != t && this.uM(!0)
                })
            }), this.type.subrow = function (t) {
                return t.$sub ? t.$subopen ? "<div class='webix_tree_open webix_sub_open'></div>" : "<div class='webix_tree_close webix_sub_close'></div>" : "<div class='webix_tree_none'></div>"
            }, this.on_click.webix_sub_open = function (t, i) {
                return this.closeSub(i), !1
            }, this.on_click.webix_sub_close = function (t, i) {
                return this.openSub(i), !1
            }
        }, openSub: function (t) {
            var i = this.getItem(t);
            if (!i.$subopen) {
                i.$row = this.B.subrow, i.$subHeight = i.$subHeight || this.B.subRowHeight, i.$subopen = !0;
                var e = this.Uy[i.$subContent];
                e && (e.repaintMe = !0), this.refresh(t), this.callEvent("onSubViewOpen", [t])
            }
        }, getSubView: function (t) {
            var i = this.getItem(t);
            if (i) {
                var e = this.Uy[i.$subContent];
                if (e) return ri(e)
            }
            return null
        }, resizeSubView: function (t) {
            var i = this.getSubView(t);
            i && this.vM(this.getItem(t), i)
        }, vM: function (t, i) {
            var e = i.$getSize(0, 0)[2], s = t.$subHeight || this.B.subRowHeight;
            2 < Math.abs(e - (s || 0)) && (t.$subHeight = e, this.refresh(t.id))
        }, _M: function (t) {
            var i = t.$width;
            if (t.zl) {
                var e = t.yi.length - t.Nl;
                t.Rl ? i -= t.za.left + t.za.right + 2 : i -= t.Ra * (e - 1) + t.za.left + t.za.right + 2 * e
            }
            return 0 < i
        }, dM: function (n, t) {
            var i, e = this.Uy[n.$subContent];
            if (e) t.firstChild.appendChild(e), i = ri(n.$subContent), this._M(i) || i.adjust(), e.repaintMe && (delete e.repaintMe, i.config.hidden = !1, i.le()); else {
                var s, h = this.B.subview;
                (i = "function" == typeof h ? h.call(this, n, t.firstChild) : ((s = _(h)).$scope = this.$scope, ei(s, t.firstChild))).getMasterView = S(function () {
                    return this
                }, this), n.$subContent = i.config.id, this.Uy[n.$subContent] = i.$view, this.zt.push(i), i.attachEvent("onResize", S(function (t, i, e, s) {
                    i && i != s && this.refresh(n.id)
                }, this)), this.callEvent("onSubViewCreate", [i, n])
            }
            this.vM(n, i || ri(e))
        }, cM: function (i, e) {
            var s = ct("DIV", {"class": "webix_measure_size webix_cell webix_dtable_subrow"}, "");
            s.style.cssText = "width:" + this.oe + "px; height:auto; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;", this.$view.appendChild(s), this.data.each(function (t) {
                (t && !i || t.id == i && t.$sub) && (s.innerHTML = e || this.B.subrow(t, this.type), t.$subHeight = s.offsetHeight)
            }, this), s = lt(s)
        }, closeSub: function (t) {
            var i = this.getItem(t);
            if (i.$subopen) {
                i.$row = !1, i.$subopen = !1;
                var e = this.Uy[i.$subContent];
                e && (ri(e).config.hidden = !0), this.refresh(t), this.callEvent("onSubViewClose", [t])
            }
        }
    }, Mr = {
        spans_setter: function (t) {
            return t && !this.Zf && this.pM(), t
        }, pM: function () {
            this.Zf = {}, this.My = [], this.data.attachEvent("onStoreLoad", S(function (t, i) {
                i && i.spans && this.addSpan(i.spans)
            }, this)), this.data.attachEvent("onClearAll", S(function () {
                this.Zf = {}
            }, this)), this.attachEvent("onSyncScroll", function (t, i, e) {
                for (var s = 0; s < 3; s++) Ui.os(this.My[s], 1 == s ? t : 0, i, e)
            }), this.attachEvent("onScrollY", this.mM), this.attachEvent("onScrollX", this.mM), this.attachEvent("onAfterRender", this.bM), this.attachEvent("onColumnResize", this.bM), this.attachEvent("onSelectChange", this.gM)
        }, addSpan: function (t, i, e, s, n, h) {
            if ("object" != M(t)) s = s || 1, e = e || 1, this.Zf[t] || (this.Zf[t] = {}), this.Zf[t][i] = [e, s, n, h]; else for (var r = 0; r < t.length; r++) this.addSpan.apply(this, t[r])
        }, removeSpan: function (t, i) {
            arguments.length || (this.Zf = {});
            var e = this.Zf[t];
            e && delete e[i]
        }, getSpan: function (t, i) {
            if (!t) return this.Zf;
            var e, s, n, h, r, o = this.Zf;
            for (t in e = this.getIndexById(t), n = this.getColumnIndex(i), o) for (i in o[t]) if (r = o[t][i], s = this.getIndexById(t), 0 <= (h = this.getColumnIndex(i)) && 0 <= s && !(e > s + r[1] - 1 || e < s || n > h + r[0] - 1 || n < h)) return [t, i].concat(r);
            return null
        }, bM: function () {
            var t, i, e = this.Xf.length - this.B.rightSplit;
            for (lt(this.My), i = 0; i < 3; i++) t = this.My[i] = ct("DIV", {"class": "webix_span_layer"}), this.et.childNodes[i].appendChild(t);
            this.mM(), this.B.leftSplit && this.wM(this.My[0], 0, this.B.leftSplit),
            this.B.rightSplit && this.wM(this.My[2], e, this.Xf.length), this.wM(this.My[1], this.B.leftSplit, e), this.B.topSplit && !Y.touch && this.xM()
        }, yM: function () {
            for (var t, i = 0, e = 0, s = 0, n = 0; i < this.B.leftSplit;) e += this.Xf[i].width, i++;
            for (t = (i = this.Xf.length - 1) - this.B.rightSplit; t <= i;) n += this.Xf[i].width, i--;
            for (i = this.B.leftSplit; i < this.Xf.length - this.B.rightSplit; i++) s += this.Xf[i].width;
            return [e, s, n]
        }, xM: function () {
            var t, i, e, s = this.Xf.length - this.B.rightSplit;
            for (i = 3; i < 6; i++) t = this.My[i] = ct("DIV", {"class": "webix_span_layer_top"}), this.et.childNodes[i - 3].appendChild(t);
            e = this.yM(), this.B.leftSplit && (this.My[3].style.width = e[0] + "px", this.wM(this.My[3], 0, this.B.leftSplit, !0)), this.B.rightSplit && (this.My[5].style.width = e[2] + "px", this.wM(this.My[5], s, this.Xf.length, !0)), this.My[4].style.width = e[1] + "px", this.wM(this.My[4], this.B.leftSplit, s, !0)
        }, wM: function (t, i, e, s) {
            for (var n = 0, h = this.data.$min || 0, r = this.data.$max || this.data.order.length, o = h; o < r; o++) {
                var a = this.data.order[o];
                if (a) {
                    var u = this.Zf[a];
                    if (u && (!s || o < this.B.topSplit)) for (var c = i; c < e; c++) {
                        var f = this.Xf[c].id;
                        u[f] && this.MM(t, o, c, u, n, i, a, f)
                    }
                    n += this.gx(this.getItem(a))
                }
            }
        }, gM: function () {
            for (var t = this.config.select, i = "cell" == t || "column" == t, e = this.getSelectedId(!0), s = [], n = this.SM || [], h = V() + "", r = !1, o = 0; o < e.length; o++) {
                var a = this.Zf[e[o]];
                !a || i && !a[e[o].column] || (a.$selected && a.$selected.id == e[o].id || (r = !0), a.$selected = e[o], a.$time = h, s.push(e[o].id))
            }
            for (var u = 0; u < n.length; u++) {
                var c = this.Zf[n[u]];
                c && c.$time !== h && (delete c.$selected, r = !0)
            }
            this.SM = [].concat(e), r && this.bM()
        }, kM: function (t, i) {
            for (var e = 0, s = t; s < i; s++) {
                var n = this.Xf[s];
                e += n ? n.width : 0
            }
            return e
        }, CM: function (t, i) {
            for (var e = 0, s = t; s < i; s++) {
                var n = this.getItem(this.data.order[s]);
                e += n ? this.gx(n) : this.B.rowHeight
            }
            return e
        }, MM: function (t, i, e, s, n, h, r, o) {
            var a = s[o], u = a[2] || this.getText(r, o), c = "";
            !s.$selected || "row" !== this.B.select && s.$selected.column !== o || (c = "webix_selected ");
            var f = {
                column: e,
                row: i,
                "class": c + "webix_cell webix_table_cell webix_dtable_span " + (a[3] || ""),
                "aria-colindex": e + 1,
                "aria-rowindex": i + 1
            };
            1 < a[0] && (f["aria-colspan"] = a[0]), 1 < a[1] && (f["aria-rowspan"] = a[1]);
            var l = ct("DIV", f, "" + u);
            l.style.top = n + "px", l.style.left = this.kM(h, e) + "px", l.style.width = this.kM(e, e + a[0]) + "px", l.style.height = this.CM(i, i + a[1]) + "px", t.appendChild(l)
        }, mM: function () {
            if (!this.B.prerender) for (var t = this.getScrollState(), i = 0; i < 3; i++) this.My[i].style.top = "-" + (t.y || 0) + "px"
        }, Cy: function (t, i) {
            var e, s, n = !1;
            return this.Zf && (e = this.getSpan(t.row, t.column), s = this.getSpan(i.row, i.column), e && s && e[0] == s[0] && e[1] == s[1] && (n = !0)), n
        }, getSpanNode: function (t) {
            for (var i = this.My, e = this.getIndexById(t.row), s = this.getColumnIndex(t.column), n = 0; n < i.length; n++) for (var h = i[n].childNodes, r = 0; r < h.length; r++) if (h[r].getAttribute("row") == e && h[r].getAttribute("column") == s) return h[r];
            return null
        }
    }, Sr = {
        name: "datatable",
        defaults: {
            leftSplit: 0,
            rightSplit: 0,
            topSplit: 0,
            columnWidth: 100,
            prerender: !1,
            autoheight: !1,
            autowidth: !1,
            header: !0,
            fixedRowHeight: !0,
            scrollAlignY: !0,
            scrollX: !0,
            scrollY: !0,
            datafetch: 50,
            navigation: !0
        },
        $skin: function () {
            this.defaults.rowHeight = Ei.rowHeight, this.defaults.minRowHeight = Ei.rowHeight - 6, this.defaults.headerRowHeight = Ei.barHeight - 2 * Ei.borderWidth, this.defaults.minColumnWidth = 2 * Ei.dataPadding + Ei.borderWidth
        },
        on_click: {
            webix_richfilter: function () {
                return !1
            }, webix_table_checkbox: function (t, i) {
                i = this.locate(t);
                var e = this.getItem(i.row), s = this.getColumnConfig(i.column), n = t.target || t.srcElement,
                    h = ("checkbox" == n.type ? n.checked : e[i.column] != s.checkValue) ? s.checkValue : s.uncheckValue,
                    r = {};
                return r[i.column] = h, this.updateItem(i.row, r, this.B.checkboxRefresh ? "update" : "save"), this.callEvent("onCheck", [i.row, i.column, h]), !1
            }, webix_table_radio: function (t) {
                var e = this.locate(t), i = this.getItem(e.row), s = this.getColumnConfig(e.column);
                return this.eachRow(function (t) {
                    var i = this.data.pull[t];
                    i && i[e.column] == s.checkValue && (i[e.column] = s.uncheckValue)
                }), i[e.column] = s.checkValue, this.callEvent("onCheck", [e.row, e.column, !0]), this.refresh(), !1
            }
        },
        on_dblclick: {
            webix_table_checkbox: function () {
                return this.on_click.webix_table_checkbox.apply(this, arguments)
            }
        },
        on_context: {},
        $init: function (t) {
            this.on_click = P.extend({}, this.on_click);
            this.Vi.innerHTML = "<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div><div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div><div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div><div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>", this.lM = this.Vi.id = this.name + V(), this.Vi.className += " webix_dtable", this.Q = this.Vi, this.S = this.Vi.firstChild, this.et = this.S.nextSibling, this.qf = this.et.nextSibling.nextSibling, this.Tt.setAttribute("role", "grid"), t.editable || this.Tt.setAttribute("aria-readonly", "true"), this.data.provideApi(this, !0), this.data.attachEvent("onParse", S(this.$M, this)), this.$ready.push(this.DM), this.Xf = [], this.uo = [], this.Kf = [], this.Qf = [], this.IM = [], this.go = {}, this.lo = {}, this.jo = this.AM = 0, this.zt = [], this.data.attachEvent("onServerConfig", S(this.FM, this)), this.data.attachEvent("onServerOptions", S(this.TM, this)), this.attachEvent("onViewShow", function () {
                this.Gv(), this.VM()
            }), this.data.attachEvent("onClearAll", S(function (t) {
                t || (this.ah = this.rh = 0, this.oh && this.oh.reset(), this.hh && this.hh.reset(), this.zM(0))
            }, this)), this.attachEvent("onDestruct", this.HM), this.attachEvent("onKeyPress", this.ve), this.attachEvent("onScrollY", this.RM), D("onDataTable", [this, t])
        },
        BM: function () {
            this.Fy = this.Hx = Y.scrollSize, at("#" + this.lM + " .webix_cell { height:" + this.B.rowHeight + "px; line-height:" + (this.B.rowLineHeight || this.B.rowHeight) + "px;" + (this.B.fixedRowHeight ? "" : "white-space:normal;") + " }"), at("#" + this.lM + " .webix_hcell { height:" + this.B.headerRowHeight + "px; line-height:" + this.B.headerRowHeight + "px;}"), this.BM = function () {
            }
        },
        DM: function () {
            this.data.attachEvent("onStoreLoad", S(this.VM, this)), this.data.attachEvent("onSyncApply", S(this.VM, this)), this.data.attachEvent("onStoreUpdated", S(function () {
                return this.render.apply(this, arguments)
            }, this)), this.data.attachEvent("onStoreUpdated", S(this.PM, this)), this.render()
        },
        refresh: function () {
            this.render()
        },
        Oy: function () {
            var t = this;
            clearTimeout(this.jM), this.jM = k(function () {
                t.jM = 0, j(t.EM) || (t.zM(t.EM), delete t.EM), t.render()
            })
        },
        render: function (t, i, e) {
            if ("save" != e && !this.jM) {
                if (!this.Xf.length) {
                    var s = this.B.columns;
                    if (!s || !s.length) {
                        if (!this.B.autoConfig || !this.data.order.length || this.uo.length) return;
                        this["do"] = 0, this.NM()
                    }
                    this.Ey()
                }
                if (!this.isVisible(this.B.id) || this.$blockRender) return this.BM();
                var n = this.config.experimental && !this.B.subview;
                return !t || -1 == i || "paint" != e && "update" != e || n ? (this.LM && (clearTimeout(this.LM), this.LM = 0), this.callEvent("onBeforeRender", [this.data]) ? (this.BM(), this["do"] || this.Ny(), this.oe && (n && ("paint" == e || "update" == e) && t ? this.OM(t) : this.UM(!0, !0)), t && "update" == e || (this.$x = this.WM(), this.YM()), this.Tt.setAttribute("aria-colcount", Math.max(this.uo.length, this.Xf.length)), this.Tt.setAttribute("aria-rowcount", this.data.count()), this.callEvent("onAfterRender", [this.data]), !0) : void 0) : (this.LM && clearTimeout(this.LM), void (this.LM && this.qM != t ? (this.qM = null, this.LM = k(function () {
                    this.render()
                }, this)) : (this.qM = t, this.LM = k(function () {
                    this.render(t, -1, e)
                }, this))))
            }
        },
        getColumnConfig: function (t) {
            return this.Jf[t] || this.vo[t]
        },
        TM: function (t) {
            for (var i in t) {
                var e = this.getColumnConfig(i), s = new mh({data: t[i]});
                this.zt.push(s), this.xu(s, e)
            }
        },
        FM: function (t) {
            t.columns && this["do"] && this.refreshColumns(null, !0)
        },
        Ey: function () {
            if (this.B.columns) {
                this.Xf = this.B.columns, this.Jf = {};
                for (var t = 0; t < this.Xf.length; t++) {
                    var i = this.Xf[t], e = (this.Jf[i.id] = i).cssFormat;
                    if (e && (i.cssFormat = v(e, this.$scope)), i.width = this.GM(i.width || this.B.columnWidth, i), "string" == typeof i.format && (
                        i.format = $[i.format] || window[i.format]), i.numberFormat) {
                        var s = i.numberFormat;
                        "string" == typeof s && (i.numberFormat = s = qs.getConfig(s)), i.format = qs.numToStr(s), i.editFormat = i.editFormat || function (t) {
                            return qs.format(t, s)
                        }, i.editParse = i.editParse || function (t) {
                            return qs.parse(t, s)
                        }
                    }
                    j(i.checkValue) && (i.checkValue = 1), j(i.uncheckValue) && (i.uncheckValue = 0), i.css && "object" == M(i.css) && (i.css = ot(i.css));
                    var n = i.template;
                    n && ("string" == typeof n && (n = n.replace(/#\$value#/g, "#" + i.id + "#")), i.template = Wt(n))
                }
                this.XM("header", this.Kf), this.XM("footer", this.Qf), this.callEvent("onStructureLoad", [])
            }
        },
        JM: function () {
            this.Ny()
        },
        HM: function () {
            for (var t = 0; t < this.Xf.length; t++) delete this.Xf[t].attached, delete this.Xf[t].node
        },
        Ny: function () {
            this.dw = this.Xf.length - this.B.rightSplit;
            for (var t = this.KM = 0; t < this.Xf.length; t++) {
                if (!this.Xf[t].node) {
                    var i = ct("DIV");
                    i.style.width = this.Xf[t].width + "px", this.Xf[t].node = i
                }
                t >= this.B.leftSplit && t < this.dw && (this.KM += this.Xf[t].width)
            }
            var e = [];
            if (this.B.rightSplit) {
                var s = this.Xf.length - this.B.rightSplit;
                e[s] = " webix_first", e[s - 1] = " webix_last"
            }
            if (this.B.leftSplit) {
                var n = this.B.leftSplit;
                e[n] = " webix_first", e[n - 1] = " webix_last"
            }
            e[0] = (e[0] || "") + " webix_first webix_select_mark";
            var h = this.Xf.length - 1;
            e[h] = (e[h] || "") + " webix_last";
            for (var r = 0; r < this.Xf.length; r++) {
                var o = this.Xf[r].node;
                o.setAttribute("column", r), o.className = "webix_column " + (this.Xf[r].css || "") + (e[r] || "")
            }
            this.ZM(), this.QM(), this.tS(), this.qw(), this["do"] = !0
        },
        QM: function () {
            for (var t = 0, i = 0; i < this.Xf.length; i++) {
                var e = this.Xf[i];
                i != this.B.leftSplit && i != this.dw || (t = 0), e.node && (e.node.style.left = t + "px", (this.B.leftSplit || this.B.rightSplit) && (lt(e.node), e.attached = !1)), t += e.width
            }
        },
        qw: function () {
            this.iS || (this.iS = 0), this.jo = this.AM = 0, this.B.header && (this.eS(this.S, 0, 1), this.XM("header", this.Kf), this.jo = this.Kf.sS, this.nS(this.S, "header", this.Kf)), this.B.footer && (this.eS(this.qf, 0, 1), this.XM("footer", this.Qf), this.AM = this.Qf.sS, this.nS(this.qf, "footer", this.Qf)), this.refreshHeaderContent(!1, !1), this.hS(), this.co && this.markSorting(this.co, this.fo)
        },
        rS: function (t, i, e) {
            var s = 0, n = t.colspan || 1, h = "webix_hcell " + (t.css || "");
            if (t.rotate) h += " webix_measure_rotate"; else for (var r = 0; r < n; r++) s += this.Xf[e + r] ? this.Xf[e + r].width : this.config.columnWidth;
            var o = Mt([t.text], h, s);
            return (t.rotate ? o.width : o.height) + 1
        },
        XM: function (t, i) {
            for (var e = 0, s = 0; s < this.Xf.length; s++) {
                var n = this.Xf[s][t];
                n && "object" == M(n) && n.length || (j(n) && (n = "header" == t ? this.Xf[s].id : ""), n = [n]);
                for (var h = 0; h < n.length; h++) "object" != M(n[h]) && (n[h] = {text: n[h]}), n[h] && n[h].height && (i[h] = n[h].height), n[h] && n[h].autoheight && (i[h] = this.rS(n[h], this.Xf[s], s)), n[h] && n[h].css && "object" === M(n[h].css) && (n[h].css = ot(n[h].css));
                e = Math.max(e, n.length), this.Xf[s][t] = n
            }
            for (var r = (i.sS = e) - 1; 0 <= r; r--) i[r] = i[r] || this.B.headerRowHeight, i.sS += 1 * i[r];
            for (var o = 0; o < this.Xf.length; o++) for (var a = this.Xf[o][t], u = 0; u < a.length; u++) {
                if (a[u] && a[u].rowspan) for (var c = 1; c < a[u].rowspan; c++) a[u + c] = null;
                if (a[u] && a[u].colspan) for (var f = 1; f < a[u].colspan; f++) this.Xf[o + f][t][u] = null
            }
            for (var l = 0; l < this.Xf.length; l++) {
                var d = this.Xf[l][t];
                if (d.length < e) {
                    var v = d.length - 1;
                    d[v].rowspan = e - d.length + 1;
                    for (var _ = v + 1; _ < e; _++) d[_] = null
                }
            }
            return e
        },
        oS: function (t, i) {
            for (var e = t.getElementsByTagName("TD"), s = 0; s < e.length; s++) if (e[s].getAttribute("active_id") == i) return e[s]
        },
        getHeaderContent: function (t) {
            var i = this.oS(this.S, t);
            if (i || (i = this.oS(this.qf, t)), i) {
                var e = this.go[t], s = fn[e.content], n = {
                    type: s, getValue: function (t) {
                        return s.getValue(i, t)
                    }, setValue: function (t) {
                        return s.setValue(i, t)
                    }
                };
                return s.getHelper && P.extend(n, s.getHelper(i, e)), n
            }
        },
        aS: function (t, i, e) {
            var s = e ? -1 : 0;
            for (e += i; i < e; i++) s += t[i] + 1;
            return s
        },
        uS: function (t, i, e, s, n) {
            if (t == i) return "";
            var h = "<table role='presentation' style='width:" + e + "px' cellspacing='0' cellpadding='0'>";
            h += "<tr class='webix_size_row'>";
            for (var r = t; r < i; r++) h += "<td style='width:" + this.Xf[r].width + "px;'></td>";
            h += "</tr>";
            for (var o = this.Xf[0][s].length, a = 0; a < o; a++) {
                h += "<tr section='" + s + "' role='row'>";
                for (var u = t; u < i; u++) {
                    var c = this.Xf[u][s][a];
                    if (null !== c) {
                        c.content && (c.contentId = c.contentId || V(), c.columnId = this.Xf[u].id,
                            c.format = this.Xf[u].format, fn[c.content], c.content, c.text = fn[c.content].render(this, c), this.go[c.contentId] = c, this.cS = !0), h += "<td  role='presentation' column='" + (c.colspan ? c.colspan - 1 + u : u) + "'";
                        var f = "";
                        u == t && (f += "webix_first"), i - 1 <= u + (c.colspan ? c.colspan - 1 : 0) && (f += " webix_last"), (c.rowspan && a + c.rowspan === o || a === o - 1) && (f += " webix_last_row"), f && (h += ' class="' + f + '"');
                        var l = n[a], d = "";
                        c.contentId && (h += " active_id='" + c.contentId + "'"), c.colspan && (h += " colspan='" + c.colspan + "'"), c.rowspan && (h += " rowspan='" + c.rowspan + "'", l = this.aS(this.Kf, a, c.rowspan)), l != this.B.headerRowHeight && (d = " style='line-height:" + l + "px; height:" + l + "px;'");
                        var v = "webix_hcell";
                        c.css && (v += " " + c.css), this.Xf[u].$selected && (v += " webix_sel_hcell"), h += "><div role='columnheader' class='" + v + "'" + d + ">";
                        var _ = "" === c.text ? "&nbsp;" : c.text;
                        c.rotate && (_ = "<div class='webix_rotate' style='width:" + (l - 10) + "px; transform-origin:center " + (l - 15) / 2 + "px;-webkit-transform-origin:center " + (l - 15) / 2 + "px;'>" + _ + "</div>"), h += _ + "</div></td>"
                    }
                }
                h += "</tr>"
            }
            return h += "</tr></table>"
        },
        showItemByIndex: function (t, i) {
            var e = this.B.pager;
            if (e) {
                var s = Math.floor(t / e.size);
                s != e.page && ri(e.id).select(s)
            }
            var n = this.getScrollState();
            if (-1 != t) {
                var h = this.aw();
                if (t < h[0] + 1 || t >= h[1] - 1) {
                    var r = this.fS(e ? this.data.$min : 0, t), o = this.Dx + 1, a = this.hx(t);
                    if (t < h[0] + 1) r = Math.max(0, r) - (this.lS || 0); else if (o < r + a) {
                        r += a - o;
                        for (var u = t; 0 < u && 0 < o; u--) o -= this.hx(u);
                        0 < t && o && (r += this.hx(t + 1))
                    } else r = n.y;
                    n.y = r
                }
            }
            if (-1 != i) {
                if (i < this.B.leftSplit || i >= this.dw) return this.scrollTo(n.x, n.y);
                var c = this.ow();
                if (i < c[0] + 1 || i >= c[1] - 1) {
                    for (var f = 0, l = this.B.leftSplit; l < i; l++) f += this.Xf[l].width;
                    var d = this.Xf[i].width;
                    i < c[0] + 1 || (f + d > this.nx ? f += d - this.nx : f = n.x), n.x = f
                }
            }
            this.scrollTo(n.x, n.y)
        },
        showCell: function (t, i) {
            if (!i || !t) {
                var e = this.getSelectedId(!0);
                1 == e.length && (i = i || e[0].column, t = t || e[0].row)
            }
            i = i ? this.getColumnIndex(i) : -1, t = t ? this.getIndexById(t) : -1, this.showItemByIndex(t, i)
        },
        scrollTo: function (t, i) {
            if (this.oh) {
                if (this.kx) return this.kx(t, i);
                null !== t && this.oh.scrollTo(t), null !== i && this.hh.scrollTo(i)
            }
        },
        ec: "touch",
        getScrollState: function () {
            if (this.Cx) return this.Cx();
            var t = this.hw ? 0 : this.dS || 0;
            return {x: this.ah || 0, y: this.rh + t}
        },
        showItem: function (t) {
            this.showItemByIndex(this.getIndexById(t), -1)
        },
        nS: function (t, i, e) {
            var s = t.childNodes;
            s[0].innerHTML = this.uS(0, this.B.leftSplit, this.mw, i, e), s[1].innerHTML = this.uS(this.B.leftSplit, this.dw, this.KM, i, e), s[2].innerHTML = this.uS(this.dw, this.Xf.length, this.ix, i, e), this.jy && (s[1].scrollLeft = this.getScrollState().x), s[1].onscroll = S(this.vS, this)
        },
        vS: function () {
            var t = this.getScrollState().x, i = this.S.childNodes[1].scrollLeft;
            Math.ceil(i) != Math.ceil(t) && this.scrollTo(i, null)
        },
        PM: function () {
            this.refreshHeaderContent(!0, !0)
        },
        VM: function () {
            this.refreshHeaderContent(!1, !0)
        },
        refreshHeaderContent: function (t, i, e) {
            this.B.header && (i && this.eS(this.S, t, 1, e), this.eS(this.S, t, 0, e)), this.B.footer && (i && this.eS(this.qf, t, 1, e), this.eS(this.qf, t, 0, e))
        },
        refreshFilter: function (t) {
            this.refreshHeaderContent(!1, !0, t)
        },
        eS: function (t, i, e, s) {
            if (this.cS && t) for (var n = t.getElementsByTagName("TD"), h = 0; h < n.length; h++) if (n[h].getAttribute("active_id")) {
                var r = this.go[n[h].getAttribute("active_id")];
                if (s && s != r.columnId) continue;
                var o = fn[r.content];
                e ? o.getValue && (r.value = o.getValue(n[h])) : i && !o.trackCells || o.refresh(this, n[h], r)
            }
        },
        headerContent: [],
        _S: function (t, i, e) {
            if (this.Hx) {
                if (t.style.height = Math.max(i, 1) - 1 + "px", t.style.width = (this.dw ? 0 : e) + this.Hx - 1 + "px", Y.isWebKit) t.offsetWidth
            } else t.style.display = "none"
        },
        hS: function () {
            this.B.header && this._S(this.pS, this.jo, this.iS), this.B.footer && this._S(this.mS, this.AM, this.iS)
        },
        Ih: function () {
            var t = !(this.B.autowidth || !1 === this.B.scrollX);
            this.Fy = t ? Y.scrollSize : 0;
            var i = !(this.B.autoheight || !1 === this.B.scrollY);
            this.Hx = i ? Y.scrollSize : 0, Y.touch && (t = i = !1), this.oh && (this.oh.B.scrollSize = this.Fy, this.oh.B.scrollVisible = t), this.hh && (this.hh.B.scrollSize = this.Hx, this.hh.B.scrollVisible = i)
        },
        ZM: function () {
            var t, i;
            if (this.rh = 0, this.ah = 0, t = i = 1, (this.B.autoheight || !1 === this.B.scrollY) && (i = this.Hx = 0), (this.B.autowidth || !1 === this.B.scrollX) && (t = this.Fy = 0), Y.touch && (t = i = 0), this.oh || (this.oh = ei({
                view: "vscroll",
                container: this.qf.previousSibling, scrollWidth: this.KM, scrollSize: this.Fy, scrollVisible: t
            }), !t || this.Fy || Y.$customScroll || (this.oh.Tt.style.position = "absolute"), this.oh.attachEvent("onScroll", S(this.bS, this))), !this.hh) {
                this.pS = this.qf.nextSibling;
                var e = this.pS.nextSibling;
                this.mS = e.nextSibling, this.hh = ei({
                    view: "vscroll",
                    container: e,
                    scrollHeight: 100,
                    scroll: "y",
                    scrollSize: this.Hx,
                    scrollVisible: i
                }), this.hh.activeArea(this.et), this.oh.activeArea(this.et, !0), this.hh.attachEvent("onScroll", S(this.gS, this))
            }
            this.oe && this.callEvent("onResize", [this.oe, this.ue]), Y.$customScroll && se.enable(this), this.ZM = function () {
            }
        },
        columnId: function (t) {
            return this.Xf[t].id
        },
        getColumnIndex: function (t) {
            for (var i = 0; i < this.Xf.length; i++) if (this.Xf[i].id == t) return i;
            return -1
        },
        wS: function (t, i) {
            var e, s = 0, n = 0, h = 0, r = 0, o = 0;
            for (e = 0; e < this.Xf.length && (this.dw != e && this.B.leftSplit != e || (s = 0, o++), this.Xf[e].id != i); e++) s += this.Xf[e].width;
            for (n += this.Xf[e].width, e = 0; e < this.data.order.length && this.data.order[e] != t; e++) r += this.hx(e);
            return h += this.hx(e), [s, n, r - this.rh, h, this.et.childNodes[o]]
        },
        Pw: function () {
            return this.row
        },
        locate: function (t, i) {
            if (this != ri(t)) return null;
            for (t = t.target || t.srcElement || t; t && t.getAttribute && t !== this.$view;) {
                var e = kt(t).toString(), s = null;
                if (-1 != e.indexOf("webix_cell") && (s = this.Ms(t)) && (s.row = this.data.order[s.rind]), -1 != e.indexOf("webix_hcell") && (s = this.Ms(t)) && (s.header = !0), -1 != e.indexOf("webix_drop_area") && (s = this.Ms(t)) && (s.row = s.rind = "$webix-drop"), s) return i ? s.header ? null : s.row : (s.column = this.Xf[s.cind].id, s.toString = this.Pw, s);
                t = t.parentNode
            }
            return null
        },
        Ms: function (t) {
            var i = t.parentNode;
            if (!i) return null;
            var e = 1 * (t.getAttribute("column") || i.getAttribute("column")), s = t.getAttribute("aria-rowindex");
            return {
                rind: t.getAttribute("row") || (s ? s - 1 : 0),
                cind: e,
                span: 1 * (t.getAttribute("colspan") || i.getAttribute("colspan"))
            }
        },
        Ax: function () {
            for (var t = -this.nx, i = 0; i < this.Xf.length; i++) t += this.Xf[i].width;
            this.ah = Math.min(this.ah, Math.max(0, t))
        },
        mo: function (t) {
            this["do"] && (this.Ax(), this.QM(), this.tS(), this.qw(), t || this.UM(!1, !1))
        },
        setColumnWidth: function (t, i, e) {
            return this.po(this.getColumnIndex(t), i, e)
        },
        po: function (t, i, e, s) {
            if (!(isNaN(i) || t < 0)) {
                var n = this.Xf[t];
                i = this.GM(i, n);
                var h = n.width;
                return h != i && (t >= this.B.leftSplit && t < this.dw && (this.KM += i - h), n.width = i, !!n.node && (n.node.style.width = i + "px", e || this.mo(), this.callEvent("onColumnResize", [n.id, i, h, !!s]), !0))
            }
        },
        GM: function (t, i) {
            return t = Math.max(t, i.minWidth || this.B.minColumnWidth || 0), t = Math.min(t, i.maxWidth || this.B.maxColumnWidth || 1e5)
        },
        gx: function (t) {
            return (t.$height || this.B.rowHeight) + (t.$subopen ? t.$subHeight : 0)
        },
        hx: function (t) {
            var i = this.data.order[t];
            return i ? this.gx(this.data.pull[i]) : this.B.rowHeight
        },
        fS: function (t, i) {
            if (this.B.fixedRowHeight) return (i - t) * this.B.rowHeight;
            for (var e = 0; t < i; t++) e += this.hx(t);
            return e
        },
        ot: function (t, i) {
            1 == arguments.length && (i = t.column, t = t.row);
            for (var e = this.getItem(t), s = this.getColumnConfig(i), n = 0, h = 0, r = 0; r < this.Xf.length; r++) {
                r != this.B.leftSplit && r != this.dw || (n = 0);
                var o = this.Xf[r];
                if (o.id == i) {
                    var a = r < this.B.leftSplit ? 0 : r >= this.dw ? 2 : 1;
                    h = this.et.childNodes[a].firstChild;
                    break
                }
                n += o.width
            }
            var u, c = this.getIndexById(t);
            if (c < this.B.topSplit) u = this.fS(0, c); else {
                var f = this.cw || 0;
                u = this.fS(f, c) + (this.hw || 0) + (f <= c && this.lS || 0)
            }
            return {parent: h, top: u, left: n, width: s.width, height: e.$height || this.B.rowHeight}
        },
        WM: function () {
            var t = this.B.pager, i = 0, e = this.data.order.length;
            return t && (i = t.size * t.page, e = Math.min(e, i + t.size), t.level && (i = this.data.$min, e = this.data.$max)), this.fS(i, e)
        },
        setRowHeight: function (t, i) {
            if (!isNaN(i)) {
                i = Math.max(i, this.B.minRowHeight || 0), i = Math.min(i, this.B.maxRowHeight || 1e5);
                var e = this.getItem(t), s = e.$height || this.B.rowHeight;
                s != i && (e.$height = i, this.config.fixedRowHeight = !1, this.render(), this.callEvent("onRowResize", [t, i, s]))
            }
        },
        gS: function (t) {
            var i = this.rh !== t;
            if (this.rh = t, this.B.prerender) for (var e = this.et.childNodes, s = 0; s < e.length; s++) e[s].scrollTop = t; else this.UM();
            Y.$customScroll && se.Ih(this.et), i && (this.callEvent("onScrollY", []), this.callEvent("onAfterScroll", []))
        },
        zM: function (t) {
            this.et.childNodes[1].scrollLeft = this.ah = t, this.B.header && (
                this.S.childNodes[1].scrollLeft = t), this.B.footer && (this.qf.childNodes[1].scrollLeft = t)
        },
        bS: function (t) {
            var i = this.ah !== t;
            this.jM ? this.EM = t : this.zM(t), !1 === this.B.prerender && this.UM(!this.xS), Y.$customScroll && se.Ih(this.et), i && (this.callEvent("onScrollX", []), this.callEvent("onAfterScroll", []))
        },
        ow: function (t) {
            if (t) return [0, this.Xf.length];
            for (var i = this.ah, e = this.B.leftSplit; 0 < i && this.Xf.length - 1 > e;) i -= this.Xf[e].width, e++;
            var s = e;
            for (i && 0 < e && e--, i += this.nx; 0 < i && s < this.dw;) i -= this.Xf[s].width, s++;
            return [e, s]
        },
        getVisibleCount: function () {
            return Math.floor(this.Dx / this.config.rowHeight)
        },
        aw: function (t) {
            var i = this.rh, e = 0, s = this.count(), n = this.B.pager;
            if (n && (e = n.page * n.size, s = Math.min(s, e + n.size), n.level && (e = this.data.$min, s = this.data.$max)), this.B.autoheight) return [e, s, 0];
            if (t) return [e, s, 0];
            var h = e, r = this.B.topSplit || 0;
            r && (h += r);
            var o = this.B.fixedRowHeight ? this.B.rowHeight : 0;
            if (o) {
                var a = Math.ceil(i / o);
                i -= a * o, h += a
            } else for (; 0 < i;) i -= this.hx(h), h++;
            var u = 0 < h && i ? -(this.hx(h - 1) + i) : 0, c = h;
            if (i && h--, i += (this.Dx || this.ue) - (this.lS || 0), o) {
                var f = Math.ceil(i / o);
                i -= f * o, c += f
            } else for (; 0 < i && c < s;) i -= this.hx(c), c++;
            return s < c && (c = s), [h, c, u]
        },
        OM: function (t) {
            var i = this.getItem(t), e = this.getIndexById(t), s = this.aw(), n = this.config.topSplit, h = "";
            if (n <= e) {
                if (e < s[0] || e >= s[1]) return;
                e -= s[0] - n
            } else h = e == n - 1 ? " webix_topcell webix_last_topcell" : " webix_topcell";
            for (var r = this.ow(), o = 0; o < this.Xf.length; o++) {
                var a = this.Xf[o];
                if (o < this.dw && o >= this.B.leftSplit && (o < r[0] || o > r[1]) && (a.Sy = -999), a.attached && a.node) {
                    var u = a.node.childNodes[e];
                    if (!u) continue;
                    var c = this.Bx(i, this.Xf[o], 0);
                    u.innerHTML = c, u.className = this.yS(this.Xf[o], c, i, t) + h
                }
            }
        },
        UM: function (t, i) {
            if (this.Xf.length && !this.jM) {
                i && this.MS();
                var e = this.ow(this.B.prerender), s = this.aw(!0 === this.B.prerender);
                if (t) {
                    for (var n = this.B.leftSplit; n < e[0]; n++) this.By(n, i);
                    for (var h = e[1]; h < this.dw; h++) this.By(h, i)
                }
                this.rw = [];
                for (var r = 0; r < this.B.leftSplit; r++) this.SS(r, s, i);
                for (var o = e[0]; o < e[1]; o++) this.SS(o, s, i, o == e[0]);
                for (var a = this.dw; a < this.Xf.length; a++) this.SS(a, s, i);
                this.kS(s[0], s[1], i), this.CS(s)
            }
        },
        $S: function (t, i) {
            this.DS = t, this.IS = i, lt(this.IM), this.IM = []
        },
        RM: function () {
            if (this.B.prerender && this.AS) {
                var t = this.getScrollState();
                this.AS.style.top = "-" + (t.y || 0) + "px"
            }
        },
        kS: function (t, i, e) {
            if (this.AS && (this.AS.style.top = this.hw + "px"), e || t != this.DS || i != this.IS) {
                if (this.$S(t, i), this.FS) {
                    this.FS = !1;
                    for (var s = 0; s < this.rw.length; s++) {
                        var n, h = this.rw[s], r = this.getItem(h.id);
                        n = "function" == typeof r.$row ? r.$row.call(this, r, this.type) : this.Bx(r, this.getColumnConfig(r.$row), s);
                        var o = this.IM[s] = ct("DIV", null, n);
                        o.className = "webix_cell " + (r.$sub ? "webix_dtable_sub" + (this.B.subview ? "view" : "row") : "webix_dtable_colrow" + (r.$row ? " webix_topcell" + (this.data.getMark(r.id, "webix_selected") ? " webix_selected" : "") : "")), o.setAttribute("column", 0), o.setAttribute("row", h.index);
                        var a = r.$height || this.B.rowHeight;
                        r.$subopen ? o.style.height = r.$subHeight + "px" : o.style.height = a + "px", o.style.paddingRight = Y.scrollSize + "px";
                        var u = this.rw[s].index < this.config.topSplit ? -this.hw : 0;
                        o.style.top = u + h.top + (r.$subopen ? a - 1 : 0) + "px", this.AS || (this.AS = ct("DIV"), this.AS.style.position = "relative", this.AS.style.top = this.hw + "px", this.et.appendChild(this.AS)), this.AS.appendChild(o), this.attachEvent("onSyncScroll", function (t, i, e) {
                            Ui.os(this.AS, 0, i, e)
                        }), this.B.subview && this.callEvent("onSubViewRender", [r, o])
                    }
                }
            } else if (this.config.topSplit) for (var c = 0; c < this.rw.length; c++) {
                var f = this.IM[c];
                this.rw[c].index < this.config.topSplit && (f.style.top = this.rw[c].top - this.hw + "px")
            }
        },
        CS: function (t) {
            var i = this.B.pager, e = this.B.datafetch, s = !this.TS || t[0] >= this.TS;
            if (this.TS = t[0], this.VS) {
                if (i && (!e || e >= i.size) && this.zS([0, i.size * i.page], Math.max(e, i.size), !0)) return this.VS = null;
                this.Gf(this.VS, s), this.VS = null
            } else this.B.loadahead && this.zS(t, this.B.loadahead, s)
        },
        zS: function (t, i, e) {
            var s = t[1], n = s + i;
            e || (s = t[0] - i, n = t[0]), s < 0 && (s = 0), n = Math.min(n, this.data.order.length - 1);
            for (var h = !1, r = s; r < n; r++) this.data.order[r] || (h ? (h.last = r, h.count = r - s) : h = {
                start: r,
                count: n - s
            });
            if (h) return this.Gf(h, e), !0
        },
        Gf: function (t, i) {
            var e = Math.max(t.count, this.B.datafetch || this.B.loadahead || 0),
                s = i ? t.start : t.last - e + 1;
            this.ro(t.count, t.start) || this.loadNext(e, s)
        },
        HS: function (t) {
            if (Y.isSafari) {
                var i, e, s, n, h = [this.oh, this.hh];
                for (i = 0; i < 2; i++) (n = h[i]) && n.Bg && n.Bg.parentNode == t && (e = n.Bg);
                e && (this.RS && lt(this.RS), s = (this.RS = e).cloneNode(!0), e.parentNode.insertBefore(s, e), this.RS.style.display = "none", this.et.appendChild(this.RS))
            }
        },
        By: function (t) {
            var i = this.Xf[t];
            this.HS(i.node), lt(i.node), i.attached = !1
        },
        MS: function () {
            for (var t = 0; t < this.Xf.length; t++) this.Xf[t].Sy = -1;
            this.IM.length && (lt(this.IM), this.IM = [])
        },
        getText: function (t, i) {
            return this.Bx(this.getItem(t), this.getColumnConfig(i), 0)
        },
        getCss: function (t, i) {
            var e = this.getItem(t);
            return this.yS(this.getColumnConfig(i), e[i], e, t)
        },
        yS: function (t, i, e, s) {
            var n = "webix_cell";
            if (t.cssFormat) {
                var h = t.cssFormat(i, e, s, t.id);
                h && ("object" == M(h) ? n += " " + ot(h) : n += " " + h)
            }
            var r = e.$css;
            r && ("object" == M(r) && (e.$css = r = ot(r)), n += " " + r);
            var o = this.data.pr[s];
            if (o && (o.$css && (n += " " + o.$css), o.$cellCss)) {
                var a = o.$cellCss[t.id];
                a && (n += " " + a)
            }
            if (e.$cellCss) {
                var u = e.$cellCss[t.id];
                u && ("object" == M(u) && (u = ot(u)), n += " " + u)
            }
            var c = this.data.getMark(e.id, "webix_selected");
            return (c && (c.$row || c[t.id]) || t.$selected) && (n += this.Aw), n
        },
        Bx: function (t, i, e) {
            return t ? ((s = t[i.id]) !== undefined && null !== s || (s = ""), i.format && (s = i.format(s)), i.template && (s = i.template(t, this.type, s, i, e)), s) : "";
            var s
        },
        type: {
            checkbox: function (t, i, e, s) {
                return "<input class='webix_table_checkbox' type='checkbox' " + (e == s.checkValue ? 'checked="true"' : "") + ">"
            }, radio: function (t, i, e, s) {
                return "<input class='webix_table_radio' type='radio' " + (e == s.checkValue ? 'checked="true"' : "") + ">"
            }, editIcon: function () {
                return "<span class='webix_icon wxi-pencil'></span>"
            }, trashIcon: function () {
                return "<span class='webix_icon wxi-trash'></span>"
            }
        },
        type_setter: function (t) {
            return this.types && this.types[t] ? (this.type = l(this.types[t]), this.type.css && (this.Vi.className += " " + this.type.css)) : Qt(this, t), this.type.on_click && P.extend(this.on_click, this.type.on_click), t
        },
        SS: function (t, i, e, s) {
            var n = this.Xf[t];
            if (!n.attached) {
                var h = t < this.B.leftSplit ? 0 : t >= this.dw ? 2 : 1;
                this.et.childNodes[h].firstChild.appendChild(n.node), n.attached = !0, n.split = h
            }
            if (this.cw = i[0], this.hw = 0, this.dS = i[2], this.B.scrollAlignY ? i[1] == this.data.order.length || this.data.$pagesize && i[1] % this.data.$pagesize == 0 ? n.node.style.top = (this.hw = i[2]) + "px" : n.BS && (n.node.style.top = "0px") : (this.hw = i[2], n.node.style.top = i[2] + "px"), !(e || n.Sy != i[0] || n.ky != i[1] || this.B.topSplit && n.hw != this.hw)) return 0;
            for (var r = "", o = this.B.columns[t], a = {
                row: this.B.rowHeight,
                total: 0,
                single: s
            }, u = 0; u < this.B.topSplit; u++) r += this.PS(u, o, i, a, -this.hw, t);
            this.VS = null;
            for (var c = Math.max(i[0], this.B.topSplit); c < i[1]; c++) r += this.PS(c, o, i, a, -1, t);
            return this.HS(n.node), n.node.innerHTML = r, n.Sy = i[0], n.ky = i[1], n.BS = i[2], n.hw = this.hw, 1
        },
        PS: function (t, i, e, s, n, h) {
            var r = this.data.order[t], o = this.data.getItem(r), a = "";
            if (o) {
                var u = " role='gridcell' aria-rowindex='" + (t + 1) + "' aria-colindex='" + (this.getColumnIndex(i.id) + 1) + "'" + (o.$count || o.$sub ? " aria-expanded='" + (o.open || o.$subopen ? "true" : "false") + "'" : "") + (o.$level ? " aria-level='" + o.$level + "'" : "");
                if (s.single && o.$row && (this.FS = !0, this.rw.push({top: s.total, id: o.id, index: t}), !o.$sub)) {
                    var c = o.$height || s.row;
                    return s.total += c, "<div" + u + " class='webix_cell' style='height:" + c + "px;'></div>"
                }
                var f = this.Bx(o, i, t), l = this.yS(i, f, o, r), d = " aria-selected='true' tabindex='0'";
                if (-1 !== l.indexOf("select")) if (-1 !== l.indexOf("row")) this.ow()[0] === h && (u += d); else -1 !== l.indexOf("col") ? t === e[0] && (u += d) : u += d;
                var v = !!o.$subopen, _ = v ? "margin-bottom:" + o.$subHeight + "px;" : "";
                0 <= n && (0 < n && (_ += "top:" + n + "px;'"), l = "webix_topcell " + l, t == this.B.topSplit - 1 && (l = "webix_last_topcell " + l)), o.$height ? (a = "<div" + u + " class='" + l + "' style='height:" + o.$height + "px;" + _ + "'>" + f + "</div>", s.total += o.$height - s.row) : a = "<div" + u + " class='" + l + "'" + (_ ? " style='" + _ + "'" : "") + ">" + f + "</div>", v && (s.total += o.$subHeight)
            } else a = "<div role='gridcell' class='webix_cell'></div>", this.VS ? this.VS.last = t : this.VS = {
                start: t,
                count: e[1] - t
            };
            return s.total += s.row, a
        },
        YM: function () {
            if (this.Xf.length && !isNaN(1 * this.ue)) {
                var t = this.$x + (this.Fy ? this.Fy : 0);
                if (
                    !this.B.autoheight && !this.B.yCount || !this.resize()) {
                    this.hh.sizeTo(this.ue, this.jo, this.AM), this.hh.define("scrollHeight", t), this.lS = this.B.topSplit ? this.fS(0, this.B.topSplit) : 0, this.Dx = Math.max(0, this.ue - this.Fy - this.jo - this.AM);
                    for (var i = 0; i < 3; i++) this.et.childNodes[i].style.height = this.Dx + "px", this.B.prerender ? this.et.childNodes[i].firstChild.style.height = this.$x + "px" : this.et.childNodes[i].firstChild.style.height = this.Dx + "px";
                    this.S.style.height = this.jo + "px"
                }
            }
        },
        tS: function () {
            if (this.Xf.length) {
                var t = 0;
                for (this.mw = 0, this.ix = 0, this.nx = 0; t < this.B.leftSplit;) this.mw += this.Xf[t].width, t++;
                for (t = this.Xf.length - 1; t >= this.dw;) this.ix += this.Xf[t].width, t--;
                if (this.oe && (!this.B.autowidth || !this.resize())) {
                    this.nx = this.oe - this.ix - this.mw - this.Hx, this.et.childNodes[1].firstChild.style.width = this.KM + "px", this.et.childNodes[0].style.width = this.mw + "px", this.et.childNodes[1].style.width = this.nx + "px", this.et.childNodes[2].style.width = this.ix + "px", this.S.childNodes[0].style.width = this.mw + "px", this.S.childNodes[1].style.width = this.nx + "px", this.S.childNodes[2].style.width = this.ix + "px", this.qf.childNodes[0].style.width = this.mw + "px", this.qf.childNodes[1].style.width = this.nx + "px", this.qf.childNodes[2].style.width = this.ix + "px";
                    var i = this.nx - this.KM;
                    if (i < 0 && (i = 0), i != this.iS && (this.iS = i, this.hS()), Y.isWebKit) {
                        this.et.childNodes[0].offsetWidth;
                        this.et.childNodes[1].offsetWidth, this.et.childNodes[1].firstChild.offsetWidth, this.et.childNodes[2].offsetWidth
                    }
                    this.oh.sizeTo(this.oe - this.Hx), this.oh.define("scrollWidth", this.KM + this.mw + this.ix)
                }
            }
        },
        $getSize: function (t, i) {
            if ((this.B.autoheight || this.B.yCount) && this.B.columns) {
                var e = (this.B.yCount || 0) * this.B.rowHeight;
                e || (e = this.isVisible() ? this.$x : this.count() * this.B.rowHeight), this.B.height = Math.max(e + (this.Fy ? this.Fy : 0) - 1, this.B.minHeight || 0) + this.jo + this.AM
            }
            this.B.autowidth && this.B.columns && (this.B.width = Math.max(this.KM + this.mw + this.ix + this.Hx, this.B.minWidth || 0));
            var s = this.mw + this.ix + this.Hx, n = zi.api.$getSize.call(this, t, i);
            return n[0] = Math.max(n[0] || s), n
        },
        Gv: function () {
            if (this.oh && !Y.touch) {
                var t = this.getScrollState();
                this.oh.config.scrollPos = this.hh.config.scrollPos = 0, this.scrollTo(t.x, t.y)
            }
        },
        $setSize: function () {
            var t = this.oe, i = this.ue;
            zi.api.$setSize.apply(this, arguments) && (this["do"] && (this.callEvent("onResize", [this.oe, this.ue, t, i]), this.tS(), this.YM()), this.render())
        },
        jS: function (t) {
            var i = this.getColumnConfig(t);
            if (i.sort) {
                var e = "asc";
                i.id == this.co && (e = "asc" == this.fo ? "desc" : "asc"), this.bo(i.id, e, i.sort)
            }
        },
        markSorting: function (t, i) {
            this.ES || (this.ES = ct("DIV"));
            var e = this.ES.parentNode;
            if (e && (e.removeAttribute("aria-sort"), e.removeAttribute("tabindex")), lt(this.ES), i) {
                var s = this.NS(this.getColumnIndex(t));
                s && (this.ES.className = "webix_ss_sort_" + i, s.style.position = "relative", s.appendChild(this.ES), s.setAttribute("aria-sort", i + "ending"), s.setAttribute("tabindex", "0")), this.co = t, this.fo = i
            } else this.co = this.fo = null
        },
        scroll_setter: function (t) {
            return "string" == typeof t ? (this.B.scrollX = -1 != t.indexOf("x"), this.B.scrollY = -1 != t.indexOf("y"), t) : this.B.scrollX = this.B.scrollY = t
        },
        NS: function (t) {
            for (var i = this.S.getElementsByTagName("TD"), e = null, s = 0; s < i.length; s++) if (i[s].getAttribute("column") == t && !i[s].getAttribute("active_id") && (e = i[s].firstChild, (i[s].colSpan || 0) < 2)) return e;
            return e
        },
        bo: function (i, e, s) {
            var n = this;
            e = e || "asc", this.markSorting(i, e), "server" == s ? (this.callEvent("onBeforeSort", [i, e, s]), this.loadNext(0, 0, 0, 0, 1).then(function (t) {
                n.clearAll(!0), n.parse(t), n.callEvent("onAfterSort", [i, e, s])
            })) : ("text" == s && (this.data.each(function (t) {
                t.$text = this.getText(t.id, i)
            }, this), s = "string", i = "$text"), "function" == typeof s ? this.data.sort(s, e) : this.data.sort(i, e, s || "string"))
        },
        LS: function (t, i, e, s) {
            var n;
            if (t.length) for (n = 0; n < t.length; n++) if (!1 === v(t[n], this.$scope).call(this, i, e, s)) return !1
        },
        Hu: function (t, i, e, s) {
            var n = (t = t || event).target || t.srcElement;
            if (!this.B.subview || this == ri(n)) {
                for (var h = "", r = [], o = !1, a = null; n && n.parentNode && n != this.Tt.parentNode;) {
                    if (h = kt(n)) for (var u = (h = h.toString().split(" ")).length - 1; 0 <= u; u--) i[h[u]] && r.push(i[h[u]]);
                    if (n.parentNode.getAttribute && !a) {
                        var c = n.parentNode.getAttribute(
                            "column") || n.getAttribute("column");
                        if (c) {
                            var f = "DIV" == n.parentNode.tagName;
                            if (!this.Xf[c]) return;
                            if (o = !0, f) {
                                var l = n.parentNode.getAttribute("row") || n.getAttribute("row");
                                if (!l) {
                                    if (n.getAttribute("column")) return;
                                    (l = rt(n)) >= this.B.topSplit && !this.B.prerender && (l += this.Xf[c].Sy)
                                }
                                this.Cu = a = {row: this.data.order[l], column: this.Xf[c].id}, a.toString = this.Pw
                            } else this.Cu = a = {column: this.Xf[c].id};
                            if (!1 === this.LS(r, t, a, n)) return;
                            if (f) this.callEvent("on" + e, [a, t, n]) && s && this.callEvent("on" + s, [a, t, n]); else if ("ItemClick" == e) {
                                "header" == n.parentNode.parentNode.getAttribute("section") && this.callEvent("onHeaderClick", [a, t, n]) && this.jS(a.column)
                            }
                            r = []
                        }
                    }
                    n = n.parentNode
                }
                return this.LS(r, t, a, this.$view), o
            }
        },
        xe: function (t, i) {
            var e = this.locate(i);
            if (!e) return null;
            var s, n = oi.Et;
            if (e.header) {
                for (var h, r = i.target || i.srcElement, o = e.cind - (e.span ? e.span - 1 : 0), a = -1; r && !h;) h = (r = r.parentNode).getAttribute("section");
                for (; null !== (r = r.previousSibling);) a++;
                var u = this.Xf[o][h][a];
                if (!u.tooltip) return null;
                n.type.template = Wt(!0 === u.tooltip ? "#text#" : u.tooltip), s = u
            } else {
                var c = n.type.column = this.getColumnConfig(e.column);
                if (!c.tooltip && c.tooltip !== undefined) return null;
                if (!0 === c.tooltip || !c.tooltip && j(this.B.tooltip.template)) s = this.getText(e.row, e.column).toString(); else if (c.tooltip) {
                    var f = (i.target || i.srcElement).getAttribute("webix_area");
                    n.type.template = f ? function (t, i) {
                        var e = t[c.id];
                        return Wt(c.tooltip).call(this, t, i, e[f], f)
                    } : Wt(c.tooltip)
                } else n.type.template = Wt(this.B.tooltip.template)
            }
            return s !== undefined ? s : this.getItem(e.row)
        },
        $tooltipOut: function () {
            return oi.Ut(), delete oi.Et.type.column, null
        },
        showOverlay: function (t) {
            if (!this.OS) {
                var i = ct("DIV", {"class": "webix_overlay"}, "");
                this.et.appendChild(i), this.OS = i
            }
            this.OS.innerHTML = t
        },
        hideOverlay: function () {
            this.OS && (lt(this.OS), this.OS = null)
        },
        mapCells: function (t, i, e, s, n, h) {
            if (null === t && 0 < this.data.order.length && (t = this.data.order[0]), null === i && (i = this.columnId(0)), null === e && (e = this.data.order.length), null === s && (s = this.B.columns.length), this.exists(t) && (t = this.getIndexById(t), null !== (i = this.getColumnIndex(i)))) for (var r = 0; r < e && t + r < this.data.order.length; r++) {
                var o = t + r, a = this.data.order[o];
                if (a) for (var u = this.getItem(a), c = 0; c < s && i + c < this.B.columns.length; c++) {
                    var f = i + c, l = this.columnId(f), d = n(u[l], a, l, r, c);
                    h || (u[l] = d)
                }
            }
        },
        $M: function (t, i) {
            !this.B.columns && t.getConfig && this.define("columns", t.getConfig(i))
        },
        NM: function () {
            var t = this.getItem(this.getFirstId()), i = this.B.columns = [];
            for (var e in t) "id" != e && "$" != e[0] && i.push({
                id: e,
                header: e[0].toUpperCase() + e.substr(1),
                sort: "string",
                editor: "text"
            });
            i.length && (i[0].fillspace = !0), "undefined" == typeof this.B.select && this.define("select", "row")
        }
    }, kr = {
        api: Sr, view: P.protoUI(Sr, rr, de, is, he, we, De, Ve, ee, wr, ls, {
            clearValidation: function () {
                for (var t in this.data.pr) this.US(t);
                this.data.clearMark("webix_invalid", !0)
            }, Yh: function (t, i) {
                for (var e in this.US(t), i) this.addCellCss(t, e, "webix_invalid_cell");
                this.addCss(t, "webix_invalid")
            }, Oh: function (t) {
                this.US(t), this.removeCss(t, "webix_invalid")
            }, US: function (t) {
                var i = this.data.getMark(t, "$cellCss");
                if (i) for (var e in i) i[e] = i[e].replace("webix_invalid_cell", "").replace("  ", " ")
            }, addRowCss: function (t, i, e) {
                this.addCss(t, i, e)
            }, removeRowCss: function (t, i, e) {
                this.removeCss(t, i, e)
            }, addCellCss: function (t, i, e, s) {
                var n = this.data.getMark(t, "$cellCss"), h = n || {}, r = h[i] || "";
                h[i] = r.replace(e, "").replace("  ", " ") + " " + e, n || this.data.addMark(t, "$cellCss", !1, h, !0), s || this.refresh(t)
            }, removeCellCss: function (t, i, e, s) {
                var n = this.data.getMark(t, "$cellCss");
                if (n) {
                    var h = n[i] || "";
                    h && (n[i] = h.replace(e, "").replace("  ", " ")), s || this.refresh(t)
                }
            }
        }, xr, ve, gr, mr, pr, _r, dr, vr, lr, fr, cr, yr, ur, ar, or, {
            topSplit_setter: function (t) {
                return this.data && (this.data.$freeze = t), t
            }, freezeRow: function (t, i) {
                var r = this.B.topSplit, e = this.data.order, s = this.data.mr;

                function n(t, i, e, s, n) {
                    var h;
                    if (e && r <= t) {
                        for (n || r++, h = t; r <= h; h--) s[h] = s[h - 1];
                        s[r - 1] = i
                    }
                    if (!e && t < r) {
                        for (n || r--, h = t; h < r; h++) s[h] = s[h + 1];
                        s[r] = i
                    }
                }

                t ? (n(this.getIndexById(t), t = t.toString(), i, e), s && n(s.find(t), t, i, s, !0)) : i || (r = 0), this.define("topSplit", r), this.refresh()
            }
        }, Mr, Bi, Se, ne, le, Ae, Ie, zi.view, c, yi)
    }, Cr = {
        name: "excelviewer",
        $init: function () {
            this.$ready.push(function () {
                this.B.toolbar && ri(this.B.toolbar).attachEvent("onExcelSheetSelect", S(this.showSheet, this))
            })
        }, defaults: {datatype: "excel"}, $onLoad: function (t) {
            if (t.sheets) {
                this.WS = t, this.B.toolbar && ri(this.B.toolbar).setSheets(t.names);
                var i = t.names[0];
                return this.showSheet(i.id || i), !0
            }
            return !1
        }, $exportView: function (t) {
            if ("excel" !== t.export_mode || t.dataOnly) return this;
            !0 === t.sheets ? t.sheets = this.getSheets() : t.sheets && t.sheets.length ? "string" == typeof t.sheets && (t.sheets = [t.sheets]) : t.sheets = [this.YS], t.dataOnly = !0, t.heights = j(t.heights) && t.styles ? "all" : t.heights;
            for (var i = [], e = this.YS, s = 0; s < t.sheets.length; s++) this.showSheet(t.sheets[s]), i = i.concat(Cs(this, t)), t.styles && (i[s].styles = this.iM(t));
            return this.showSheet(e), delete t.dataOnly, i
        }, showSheet: function (t) {
            this.clearAll();
            var i = this.data.driver.sheetToArray(this.WS.sheets[t], {spans: this.B.spans}), e = this.B.excelHeader,
                s = {}, n = {};
            if (i.sizes) for (var h = 0; h < i.sizes.length; h++) "column" == i.sizes[h][0] ? s[i.sizes[h][1]] = Math.round(i.sizes[h][2]) : "row" == i.sizes[h][0] && (n[i.sizes[h][1]] = Math.round(i.sizes[h][2]));
            if (e) if (!0 === e) {
                e = i.data.splice(0, 1)[0];
                for (var r = 0; r < e.length; r++) e[r] = {
                    header: e[r],
                    id: "data" + r,
                    width: s[r],
                    adjust: !s[r],
                    editor: "text",
                    sort: "string"
                }
            } else e = _(e); else {
                e = _(i.data[0]);
                for (var o = 0; o < e.length; o++) e[o] = {
                    header: "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[o],
                    id: "data" + o,
                    width: s[o],
                    adjust: !s[o],
                    editor: "text",
                    sort: "string"
                }
            }
            this.config.columns = e, this.refreshColumns(), this.parse(i, this.B.datatype), this.YS = t;
            var a = this.qS(i.spans), u = this.GS(n), c = this.XS(i.styles, a);
            (a || u || c) && this.refresh()
        }, getSheets: function () {
            return this.WS.names
        }, JS: function (t, i, e, s) {
            for (var n = !1, h = 0; h < t.length; h++) if (t[h][0] === i && t[h][1] === e) {
                t[h][5] = ot(this.KS(s)), this.addSpan(t[h][0], t[h][1], t[h][2], t[h][3], t[h][4], t[h][5]), n = !0;
                break
            }
            return n
        }, XS: function (t, i) {
            var e = 0;
            if (t && t.length) {
                for (var s = 0; s < t.length; s++) {
                    var n = t[s][0] - (this.config.excelHeader ? 1 : 0);
                    if (0 <= n) {
                        var h = this.getIdByIndex(n);
                        if (this.exists(h)) {
                            var r = this.getItem(h), o = this.columnId(t[s][1]);
                            o && (i.length && this.JS(i, h, o, t[s][2]) || (r.$cellCss = r.$cellCss || {}, r.$cellCss[o] = this.KS(t[s][2])), e++)
                        }
                    }
                }
                return e
            }
            return !1
        }, ZS: function (t) {
            return 8 === (t = t || "000000").length && (t = t.substring(2)), "#" + t
        }, KS: function (t) {
            var i = {};
            if (t.fill && t.fill.fgColor && (i["background-color"] = this.ZS(t.fill.fgColor.rgb)), t.font) {
                var e = t.font;
                e.name && (i["font-family"] = e.name), e.sz && (i["font-size"] = e.sz / .75 + "px"), e.color && e.color.rgb && (i.color = this.ZS(e.color.rgb)), e.bold && (i["font-weight"] = "bold"), e.underline && (i["text-decoration"] = "underline"), e.italic && (i["font-style"] = "italic"), e.strike && (i["text-decoration"] = "line-through")
            }
            if (t.alignment) {
                var s = t.alignment;
                s.vertical && "center" == s.vertical && (i.display = "flex", i["justify-content"] = "flex-start", i["align-items"] = "center"), s.vertical && "bottom" == s.vertical && (i.display = "flex", i["justify-content"] = "flex-end", i["align-items"] = "flex-end"), s.horizontal && (!s.vertical || "center" != s.vertical && "bottom" != s.vertical ? i["text-align"] = s.horizontal : i["justify-content"] = "center"), s.wrapText && (i["white-space"] = "normal")
            }
            if (t.border) {
                var n = t.border;
                n.top && (i["border-top"] = "1px solid " + this.ZS(n.top.color.rgb)), n.bottom && (i["border-bottom"] = "1px solid " + this.ZS(n.bottom.color.rgb) + " !important"), n.left && (i["border-left"] = "1px solid " + this.ZS(n.left.color.rgb)), n.right && (i["border-right"] = "1px solid " + this.ZS(n.right.color.rgb) + " !important")
            }
            return i
        }, GS: function (t) {
            var i = 0;
            for (var e in t) {
                var s = this.config.excelHeader ? e - 1 : e;
                if (0 <= s) {
                    var n = this.getIdByIndex(s);
                    this.exists(n) && (this.getItem(n).$height = t[e], i++)
                }
            }
            return this.config.fixedRowHeight = !i, i
        }, qS: function (t) {
            var i = [];
            if (this.B.spans && t && t.length) {
                this.Zf = {};
                for (var e = 0; e < t.length; e++) this.config.excelHeader && t[e][0]--, 0 <= t[e][0] && (t[e][0] = this.getIdByIndex(t[e][0]), t[e][1] = "data" + t[e][1], i.push(t[e]));
                return this.addSpan(i), i
            }
            return !1
        }
    }, $r = (P.protoUI(Cr, kr.view), {
        name: "pdfbar", reset: function () {
            this.setPage(0), this.setValues(0, "auto")
        }, $init: function (t) {
            this.$view.className += " pdf_bar", t.cols = [{
                view: "button", type: "icon", css: "webix_transparent",
                icon: "wxi-angle-left", width: 35, click: function () {
                    this.getParentView().mg("prev")
                }
            }, {
                view: "text", width: 70, value: "0", on: {
                    onBlur: function () {
                        this.getParentView().mg(this.getValue())
                    }, onKeyPress: function (t) {
                        13 === t && this.getParentView().mg(this.getValue())
                    }
                }
            }, {template: $.PDFviewer.of + " #limit#", width: 70, data: {limit: 0}, borderless: !0}, {
                view: "button",
                type: "icon",
                css: "webix_transparent",
                icon: "wxi-angle-right",
                width: 35,
                click: function () {
                    this.getParentView().mg("next")
                }
            }, {}, {
                view: "button",
                type: "icon",
                css: "webix_transparent",
                icon: "wxi-minus",
                width: 35,
                click: function () {
                    this.getParentView().zoom("out")
                }
            }, {
                view: "richselect",
                options: [],
                maxWidth: 195,
                suggest: {
                    padding: 0,
                    css: "pdf_opt_list",
                    borderless: !0,
                    body: {type: {height: 25}, scroll: !1, yCount: 13}
                },
                on: {
                    onChange: function () {
                        this.getParentView().setMasterScale(this.getValue())
                    }
                }
            }, {
                view: "button",
                type: "icon",
                css: "webix_transparent",
                icon: "wxi-plus",
                width: 35,
                click: function () {
                    this.getParentView().zoom("in")
                }
            }, {
                view: "button",
                type: "icon",
                css: "webix_transparent",
                icon: "wxi-download",
                width: 35,
                click: function () {
                    this.getParentView().download()
                }
            }], this.$ready.push(this.QS)
        }, QS: function () {
            var t = this.getChildViews()[6].getPopup().getBody();
            t.clearAll(), t.parse([{id: "auto", value: $.PDFviewer.automaticZoom}, {
                id: "page-actual",
                value: $.PDFviewer.actualSize
            }, {id: "page-fit", value: $.PDFviewer.pageFit}, {
                id: "page-width",
                value: $.PDFviewer.pageWidth
            }, {id: "page-height", value: $.PDFviewer.pageHeight}, {id: "0.5", value: "50%"}, {
                id: "0.75",
                value: "75%"
            }, {id: "1", value: "100%"}, {id: "1.25", value: "125%"}, {id: "1.5", value: "150%"}, {
                id: "2",
                value: "200%"
            }, {id: "3", value: "300%"}, {id: "4", value: "400%"}]);
            var i = 0;
            t.data.each(function (t) {
                i = Math.max(Mt(t.value, "webixbutton").width, i)
            }), this.getChildViews()[6].define("width", i + 20), this.getChildViews()[6].resize()
        }, mg: function (t) {
            this.setMasterPage(t), this.setPage(this.$master.$pageNum)
        }, setScale: function (t) {
            var i = this.getChildViews()[6];
            i.blockEvent(), i.getPopup().getList().exists(t) ? i.setValue(t) : (i.setValue(""), i.getInputNode().innerHTML = (100 * t).toFixed(0) + "%"), i.unblockEvent()
        }, setMasterScale: function (t) {
            this.$master && this.$master.setScale(t)
        }, setMasterPage: function (t) {
            this.$master && ("prev" === t ? this.$master.prevPage() : "next" === t ? this.$master.nextPage() : isNaN(parseInt(t)) || this.$master.renderPage(parseInt(t)))
        }, zoom: function (t) {
            this.$master && ("out" === t ? this.$master.zoomOut() : "in" === t && this.$master.zoomIn())
        }, setPage: function (t) {
            this.getChildViews()[1].setValue(t)
        }, setValues: function (t, i) {
            this.getChildViews()[2].data.limit = t, this.getChildViews()[2].refresh(), this.setScale(i)
        }, download: function () {
            this.$master && this.$master.download()
        }
    }), Dr = (P.protoUI($r, qn.view), {
        name: "pdfviewer", defaults: {scale: "auto"}, $init: function (t) {
            this.$view.className += " webix_pdf";
            var i = document.createElement("DIV");
            i.className = "canvas_wrapper";
            var e = document.createElement("canvas");
            this.tk = this.$view, this.It = this.$view.appendChild(i), this.Ce = this.It.appendChild(e), this.$pdfDoc = null, this.$pageNum = 0, this.$numPages = 0, this.ik = !1, this.ek = null, this.sk = this.Ce.getContext("2d"), this.nk = .1, this.hk = t.scaleDelta || 1.1, this.rk = t.minScale || .25, this.ak = t.maxScale || 10, this.uk = 1.25, this.ck = 40, this.fk = 10, this.zt = [], this.$ready.push(this.lk)
        }, toolbar_setter: function (t) {
            if ("string" == typeof t) {
                var i = ri(t);
                return i && (i.$master = this, i.refresh()), this.attachEvent("onDocumentReady", function () {
                    i ? (i.setPage(this.$pageNum), i.setValues(this.$numPages, this.B.scale)) : this.toolbar_setter(t)
                }), t
            }
        }, lk: function () {
            if (delete this.B.datatype, this.attachEvent("onScaleChange", function (t) {
                this.B.toolbar && ri(this.B.toolbar).setScale && ri(this.B.toolbar).setScale(t)
            }), this.attachEvent("onPageRender", function (t) {
                this.B.toolbar && ri(this.B.toolbar).setPage && ri(this.B.toolbar).setPage(t)
            }), Y.touch) this.dk = !1, Jt(this.Tt, "touchstart", S(function (t) {
                var i = t.targetTouches;
                2 === i.length && (bt(t), this.dk = Math.abs(i[0].pageY - i[1].pageY))
            }, this)), Jt(this.$view, "touchmove", S(function (t) {
                var i = t.targetTouches;
                2 === i.length && !1 !== this.dk && (bt(t), Math.abs(i[0].pageY - i[1].pageY) > this.dk ? this.zoomIn() : this.zoomOut(), this.dk = !1)
            }, this)), this.attachEvent("onSwipeX", function (t, i) {
                this.$view.scrollLeft = this.$view.scrollLeft - (i.x - t.x)
            }), this.attachEvent("onSwipeY", function (t, i) {
                var e = this.$view.clientHeight, s = this.$view.scrollHeight, n = this.$view.offsetHeight,
                    h = this.$view.scrollTop, r = i.y - t.y;
                if (e === s || r < 0 && s - n < h || 0 < r && 0 === h) {
                    var o = this.$pageNum + (0 < r ? -1 : 1);
                    0 < o && o <= this.$numPages && (this.$pageNum = o, this.vk(this.$pageNum), this.$view.scrollTop = 0 < r ? s : 0)
                } else this.$view.scrollTop = h - r
            }); else {
                var t = Y.isFF ? "DOMMouseScroll" : "mousewheel";
                Jt(this.$view, t, function (t) {
                    var i = ("DOMMouseScroll" === t.type ? -t.detail : t.wheelDelta) < 0 ? "out" : "in";
                    t.ctrlKey && (bt(t), "in" == i ? this.zoomIn() : this.zoomOut())
                }, {bind: this, passive: !1})
            }
        }, $onLoad: function (t) {
            return window.PDFJS ? this._k(t) : Ft([Y.cdn + "/extras/pdfjs/compatibility.min.js", Y.cdn + "/extras/pdfjs/pdf.min.js"], function () {
                PDFJS.workerSrc = Y.cdn + "/extras/pdfjs/pdf.worker.min.js", this._k(t)
            }, this), !0
        }, _k: function (t) {
            if (t.name) {
                var i = new FileReader;
                i.onload = S(function (t) {
                    this._k({data: t.target.result})
                }, this), i.readAsArrayBuffer(t)
            } else this.pk({data: t.data})
        }, pk: function (i) {
            var e = this;
            return PDFJS.getDocument({data: i.data, password: i.password}).then(function (t) {
                e.clear(), e.$pdfDoc = t, e.$numPages = e.$pdfDoc.numPages, e.$pageNum = 1, e.mk(e.$pageNum).then(function () {
                    e.callEvent("onDocumentReady")
                })
            }, function (t) {
                "PasswordException" == t.name && e.bk(i)
            })
        }, getPopup: function () {
            var e = this;
            return this.gk || (this.gk = ei({
                view: "window",
                position: "center",
                modal: !0,
                head: $.PDFviewer.enterPassword,
                body: {
                    view: "form",
                    elements: [{
                        view: "text",
                        name: "password",
                        type: "password",
                        invalidMessage: $.PDFviewer.passwordError,
                        required: !0
                    }, {
                        cols: [{
                            view: "button", value: $.message.cancel, hotkey: "esc", click: function () {
                                e.getPopup().hide()
                            }
                        }, {
                            view: "button",
                            css: "webix_primary",
                            value: $.message.ok,
                            hotkey: "enter",
                            click: function () {
                                var t = e.getPopup(), i = t.getBody();
                                i.validate() ? (e.pk({
                                    data: e.wk,
                                    password: i.getValues().password
                                }), t.hide()) : i.focus()
                            }
                        }]
                    }]
                },
                on: {
                    onHide: function () {
                        var t = e.getPopup().getBody();
                        t.clear(), t.clearValidation(), delete e.wk
                    }
                }
            }), this.zt.push(this.gk)), this.gk
        }, bk: function (t) {
            var i = this.getPopup(), e = i.getBody();
            this.wk = t.data, t.password && (e.markInvalid("password"), e.setValues({password: t.password})), i.show(), e.focus()
        }, xk: function (t, i) {
            var e = t.getViewport(i);
            return this.Ce.height = e.height, this.Ce.width = e.width, this.It.style.width = e.width + "px", this.It.style.height = e.height + "px", e
        }, mk: function (t) {
            var n = this;
            return n.ik = !0, this.$pdfDoc.getPage(t).then(function (t) {
                var i = isNaN(parseFloat(n.B.scale)) ? n.nk : n.B.scale, e = n.xk(t, i);
                i !== n.B.scale && (i = n.yk(n.B.scale), e = n.xk(t, i), n.B.scale = i);
                var s = {canvasContext: n.sk, viewport: e};
                return t.cleanupAfterRender = !0, t.render(s).promise.then(function () {
                    n.callEvent("onPageRender", [n.$pageNum]), n.ik = !1, null !== n.ek && (n.mk(n.ek), n.ek = null)
                })
            })
        }, vk: function (t) {
            this.ik ? this.ek = t : this.mk(t)
        }, renderPage: function (t) {
            !this.$pdfDoc || t < 0 || t > this.$numPages || (this.$pageNum = t, this.vk(this.$pageNum))
        }, prevPage: function () {
            this.$pageNum <= 1 || (this.$pageNum--, this.vk(this.$pageNum))
        }, nextPage: function () {
            this.$pageNum >= this.$numPages || (this.$pageNum++, this.vk(this.$pageNum))
        }, zoomIn: function () {
            var t = this.B.scale;
            t = (t * this.hk).toFixed(2), t = Math.ceil(10 * t) / 10, t = Math.min(this.ak, t), this.setScale(t)
        }, zoomOut: function () {
            var t = this.B.scale;
            t = (t / this.hk).toFixed(2), t = Math.floor(10 * t) / 10, t = Math.max(this.rk, t), this.setScale(t)
        }, yk: function (t) {
            if (!isNaN(parseFloat(t))) return t;
            isNaN(parseFloat(this.B.scale)) && (this.B.scale = this.nk);
            var i = 1, e = ((this.tk.clientWidth - this.ck) * this.B.scale / this.Ce.clientWidth).toFixed(2),
                s = ((this.tk.clientHeight - this.fk) * this.B.scale / this.Ce.clientHeight).toFixed(2);
            switch (t) {
                case"page-actual":
                    i = 1;
                    break;
                case"page-width":
                    i = e;
                    break;
                case"page-height":
                    i = s;
                    break;
                case"page-fit":
                    i = Math.min(e, s);
                    break;
                case"auto":
                    var n = this.tk.clientWidth > this.tk.clientHeight ? Math.min(s, e) : e;
                    i = Math.min(this.uk, n)
            }
            return i
        }, setScale: function (t) {
            if (isNaN(parseFloat(t))) {
                var i = this.yk(t);
                this.Mk(i)
            } else this.Mk(t)
        }, Mk: function (t) {
            this.B.scale = t, this.renderPage(this.$pageNum), this.callEvent("onScaleChange", [t])
        }, download: function () {
            if (this.$pdfDoc) {
                var i = (this.B.downloadName || "document") + ".pdf";
                this.$pdfDoc.getData(
                ).then(function (t) {
                    St(PDFJS.createBlob(t, "application/pdf"), i)
                })
            }
        }, clear: function () {
            this.$pdfDoc && (this.sk.clearRect(0, 0, this.Ce.width, this.Ce.height), this.It.style.height = this.It.style.width = this.Ce.width = this.Ce.height = 0, this.B.scale = "auto", this.$pageNum = this.$numPages = 0, this.$pdfDoc.transport.startCleanup(), this.$pdfDoc.destroy(), this.$pdfDoc = null, this.B.toolbar && ri(this.B.toolbar) && ri(this.B.toolbar).reset())
        }
    }), Ir = (P.protoUI(Dr, c, Ht, zi.view), {
        name: "video", $init: function (t) {
            t.id || (t.id = V()), this.$ready.push(this.Sk)
        }, Sk: function () {
            var t = this.B;
            if (this.Vi = ct("video", {
                "class": "webix_view_video",
                style: "width:100%;height:100%;",
                autobuffer: "autobuffer"
            }, ""), t.poster && (this.Vi.poster = t.poster), t.src) {
                "object" != M(t.src) && (t.src = [t.src]);
                for (var i = 0; i < t.src.length; i++) this.Vi.innerHTML += ' <source src="' + t.src[i] + '">'
            }
            t.controls && (this.Vi.controls = !0), t.autoplay && (this.Vi.autoplay = !0), this.Tt.appendChild(this.Vi)
        }, getVideo: function () {
            return this.Vi
        }, defaults: {src: "", controls: !0}
    }), Ar = (P.protoUI(Ir, zi.view), {
        name: "gage",
        defaults: {
            value: 0,
            minRange: 0,
            maxRange: 100,
            minWidth: 250,
            minHeight: 200,
            smoothFlow: !0,
            scale: 3,
            stroke: 7
        },
        $init: function () {
            this.$ready.push(S(this.kk, this)), this.attachEvent("onDestruct", function () {
                this.Ck = this.$k = this.Dk = null
            })
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.Ik()
        },
        Ik: function () {
            this.Ak = this.config.value;
            var t = this.$view.querySelector(".webix_gage_curves"), i = this.$view.querySelector(".webix_gage_info"),
                e = this.config.scale, s = Math.min(this.$width, this.$height), n = s / 100 * this.config.stroke,
                h = s / e;
            t.setAttribute("r", h), t.setAttribute("strokeDasharray", Math.round(Math.PI * h)), t.style.r = h, t.style.strokeDasharray = Math.round(Math.PI * h), t.style["stroke-width"] = n + "px", i.setAttribute("style", "width: " + Math.round(2 * h) + "px;"), this.Dk.setAttribute("style", "height: " + Math.round(h + n) + "px;"), this.Ck.setAttribute("r", h), this.Ck.setAttribute("style", "stroke-dasharray: " + Math.round(this.gradientLength * Math.PI * h) + ", 1900; stroke-width:" + n + "px"), this.Fk(h), this.Tk()
        },
        Vk: function (t) {
            return Math.min(Math.max(t, this.B.minRange), this.B.maxRange)
        },
        Fk: function (t) {
            var i = this.$width, e = Math.min(this.$width, this.$height) / 100 * this.config.stroke;
            this.$k.style.transformOrigin = i / 2 + "px 0 0", this.$k.setAttribute("y1", "0"), this.$k.setAttribute("x1", Math.round(i) / 2 + e), this.$k.setAttribute("y2", "0"), this.$k.setAttribute("x2", Math.round((i + e) / 2 + t))
        },
        Tk: function () {
            var t = this.config.value, i = this.$view.querySelector(".webix_gage_value"),
                e = this.Vk(t) - this.config.minRange,
                s = Math.round(180 * e / (this.config.maxRange - this.config.minRange)),
                n = Math.min(this.$width, this.$height);
            this.$view.style.fontSize = Math.floor(n / 8) + "px", i.innerHTML = t, this.Ck.style.stroke = this.color, this.Ck.setAttribute("stroke", this.color), this.$k.setAttribute("transform", "rotate(" + s + " " + n / 2 + " 0)"), this.$k.style.transform = "rotate(" + s + "deg)"
        },
        zk: function () {
            this.config.minRange, this.config.maxRange, this.gradientLength = (this.Vk(this.config.value) - this.config.minRange) / (this.config.maxRange - this.config.minRange);
            var t = this.config.color;
            this.color = t ? "function" == typeof t ? t.call(this, this.config.value) : t : "hsl(" + (120 - Math.round(120 * this.gradientLength)) + ", 100%, 50%)", !0 === this.config.animation ? this.defaultColor = "hsl(125, 100%, 50%)" : this.defaultColor = "hsl(" + (120 - Math.round(120 * this.gradientLength)) + ", 100%, 50%)"
        },
        kk: function () {
            this.gradientLength = 0, this.zk(), this.$view.innerHTML = '<div class="webix_gage_box"><div>\n\t\t\t<div class="webix_gage_label"><span>'.concat(this.config.label || "", '</span></div>\n\t\t\t<svg class="webix_gage_body" style="height:300px; position: relative;">\n\t\t\t\t<circle class="webix_gage_curves" r="0" cx="50%" cy="0" stroke="#EEEEEE" fill="none"></circle>\n\t\t\t\t<circle class="webix_gage_gradient" r="0" stroke=').concat(this.defaultColor, ' cx="50%" cy="0" fill="none" style="stroke-dasharray: 0, 1900;"></circle>\n\t\t\t\t<line class="webix_gage_gradient_point" x1="0" x2="0" y1="0" y2="0" style="stroke:#B0B0B0; stroke-width:4;"></line>\n\t\t\t</svg>\n\t\t\t<div class="webix_gage_info">\n\t\t\t\t<div class="webix_gage_min_range">').concat(
                this.config.minRange, '</div>\n\t\t\t\t<div class="webix_gage_max_range">').concat(this.config.maxRange, '</div>\n\t\t\t\t<div class="webix_gage_placeholder">\n\t\t\t\t\t<div class="webix_gage_value">').concat(this.config.value, '</div>\n\t\t\t\t\t<div class="webix_gage_range_info">').concat(this.config.placeholder || "", "</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div></div>"), this.Ck = this.$view.querySelector(".webix_gage_gradient"), this.$k = this.$view.querySelector(".webix_gage_gradient_point"), this.Dk = this.$view.querySelector(".webix_gage_body"), !0 === this.isVisible() && !0 === this.config.smoothFlow && Y.svganimation && !Y.isEdge && (this.Ck.setAttribute("class", "webix_gage_gradient webix_gage_animated"), this.$k.setAttribute("class", "webix_gage_gradient_point webix_gage_gradient_point_animated"))
        },
        refresh: function () {
            var t = this.config.value;
            this.config.smoothFlow && t != this.Ak && (this.config.value = this.Ak), this.kk(), this.Ik(), this.Ak != t && this.Tt.parentNode.clientHeight && this.setValue(t)
        },
        setValue: function (t) {
            this.config.value = t, this.zk(), this.Ik()
        },
        getValue: function () {
            return this.config.value
        }
    }), Fr = (P.protoUI(Ar, c, zi.view), {
        name: "barcode",
        defaults: {
            type: "ean13",
            height: 160,
            width: 220,
            paddingY: 10,
            paddingX: 20,
            textHeight: 20,
            color: "#000",
            ariaLabel: "bars"
        },
        $init: function () {
            this.$view.className += " webix_barcode", this.types || (this.types = {"default": this.type}, this.type.name = "default")
        },
        type: {},
        render: function () {
            this.isVisible(this.B.id) && (this.canvas && this.canvas.clearCanvas(!0), this.$view.innerHTML = "", this.Hk())
        },
        Hk: function () {
            this.canvas = new Pi({
                container: this.$view,
                name: this.name,
                title: this.B.ariaLabel,
                width: this.$width,
                height: this.$height
            }), this.Rk()
        },
        Rk: function () {
            var t, i, e, s, n = this.B.value, h = this.B.type;
            if (!h || !this.types[h] || !n) return !1;
            if (s = (t = this.type.encode(n)).length, i = this.canvas.getCanvas(), s) {
                var r = (this.$width - 2 * this.config.paddingX) / s, o = 0;
                for (e = 0; e < s; e++) {
                    parseInt(t.charAt(e), 10) ? (o++, e == s - 1 && this.Bk(i, e + 1, r, o, s)) : o && (this.Bk(i, e, r, o, s), o = 0)
                }
                this.Pk(n, r)
            }
        },
        Bk: function (t, i, e, s, n) {
            var h, r, o, a;
            r = parseInt(i * e + this.config.paddingX, 10), h = parseInt(r - s * e, 10), o = this.config.paddingY, a = this.$height - this.config.paddingY - this.config.textHeight, this.jk() && (i < 4 || n - 4 < i || i < n / 2 + 2 && n / 2 - 2 < i) && (a += this.config.textHeight / 2), t.fillStyle = this.config.color, t.beginPath(), t.moveTo(h, o), t.lineTo(r, o), t.lineTo(r, a), t.lineTo(h, a), t.lineTo(h, o), t.fill()
        },
        Pk: function (t, i) {
            var e, s, n;
            if (this.type.template && (t = this.type.template(t)), this.jk()) {
                if (this.type.firstDigit && (this.canvas.renderTextAt(!0, "left", this.config.paddingX, this.$height - this.config.paddingY, t.charAt(0)), t = t.slice(1)), s = t.length, this.type.lastDigit && s--, s) {
                    var h = (this.$width - 2 * this.config.paddingX - 11 * i) / s;
                    for (e = 0; e < s; e++) n = this.config.paddingX + e * h + (e < s / 2 ? 3 : 8) * i + h / 2, this.canvas.renderTextAt(!0, !0, n, this.$height - this.config.paddingY, t.charAt(e));
                    this.type.lastDigit && (n = this.config.paddingX + s * h + 11 * i, this.canvas.renderTextAt(!0, !1, n, this.$height - this.config.paddingY, t.charAt(s)))
                }
            } else this.canvas.renderTextAt(!0, !0, this.$width / 2, this.$height - this.config.paddingY, t)
        },
        setValue: function (t) {
            return this.B.value = t, this.render(), t
        },
        getValue: function () {
            var t = this.B.value;
            return this.type.template ? this.type.template(t) : t
        },
        type_setter: function (t) {
            return this.types[t] ? (this.type = l(this.types[t]), this.type.css && (this.Vi.className += " " + this.type.css)) : this.customize(t), t
        },
        jk: function () {
            var t = this.config.type;
            return 0 === t.indexOf("ean") || -1 != t.indexOf("upcA")
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && this.render()
        }
    }), Tr = P.protoUI(Fr, zi.view);
    Qt(Tr, {
        name: "upcA", firstDigit: !0, lastDigit: !0, encode: function (t) {
            return t.length < 12 && (t = "0" + t), Vr.encode(t)
        }, template: function (t) {
            return t.replace(/[^0-9]/g, "").substring(0, 11) + this.checksum(t)
        }, checksum: function (t) {
            return t.length < 12 && (t = "0" + t), Vr.checksum(t)
        }
    }), Qt(Tr, {
        name: "ean8",
        encodings: [["0001101", "1110010"], ["0011001", "1100110"], ["0010011", "1101100"], ["0111101", "1000010"], ["0100011", "1011100"], ["0110001", "1001110"], ["0101111", "1010000"], ["0111011", "1000100"], ["0110111", "1001000"], ["0001011", "1110100"]],
        encode: function (t) {
            var i, e;
            if (7 != (t = t.replace(/[^0-9]/g,
                "").substring(0, 7)).length) return "";
            for (t += this.checksum(t), i = "101", e = 0; e < 4; e++) i += this.encodings[parseInt(t.charAt(e), 10)][0];
            for (i += "01010", e = 4; e < 8; e++) i += this.encodings[parseInt(t.charAt(e), 10)][1];
            return i += "101"
        },
        template: function (t) {
            return t.replace(/[^0-9]/g, "").substring(0, 7) + this.checksum(t)
        },
        checksum: function (t) {
            t = t.substring(0, 7);
            var i, e = !0, s = 0;
            for (i = 0; i < 7; i++) s += (e ? 3 : 1) * parseInt(t.charAt(i), 10), e = !e;
            return ((10 - s % 10) % 10).toString()
        }
    });
    var Vr = {
        name: "ean13",
        firstDigit: !0,
        encodings: [["0001101", "0100111", "1110010", "000000"], ["0011001", "0110011", "1100110", "001011"], ["0010011", "0011011", "1101100", "001101"], ["0111101", "0100001", "1000010", "001110"], ["0100011", "0011101", "1011100", "010011"], ["0110001", "0111001", "1001110", "011001"], ["0101111", "0000101", "1010000", "011100"], ["0111011", "0010001", "1000100", "010101"], ["0110111", "0001001", "1001000", "010110"], ["0001011", "0010111", "1110100", "011010"]],
        encode: function (t) {
            var i, e, s;
            if (12 != (t = t.replace(/[^0-9]/g, "").substring(0, 12)).length) return "";
            for (t += this.checksum(t), i = "101", e = this.encodings[parseInt(t.charAt(0), 10)][3], s = 1; s < 7; s++) i += this.encodings[parseInt(t.charAt(s), 10)][parseInt(e.charAt(s - 1), 10)];
            for (i += "01010", s = 7; s < 13; s++) i += this.encodings[parseInt(t.charAt(s), 10)][2];
            return i += "101"
        },
        template: function (t) {
            return t.replace(/[^0-9]/g, "").substring(0, 12) + this.checksum(t)
        },
        checksum: function (t) {
            var i, e = !1, s = 0;
            for (t = t.substring(0, 12), i = 0; i < 12; i++) s += (e ? 3 : 1) * parseInt(t.charAt(i), 10), e = !e;
            return ((10 - s % 10) % 10).toString()
        }
    };
    Qt(Tr, Vr);
    var zr, Hr, Rr, Br, Pr = {
        name: "bullet",
        defaults: {
            color: "#394646",
            marker: !1,
            layout: "x",
            barWidth: 40,
            flowTime: 500,
            labelWidth: 150,
            minRange: 0,
            maxRange: 100,
            stroke: 8,
            value: 0,
            smoothFlow: !0,
            tickSize: 10,
            bands: [{value: 100, color: "#5be5d6"}, {value: 80, color: "#fff07e"}, {value: 60, color: "#fd8b8c"}],
            scale: {step: 10}
        },
        label_setter: Wt,
        placeholder_setter: Wt,
        $init: function (t) {
            var i = "undefined" != typeof t.tickSize ? t.tickSize : this.defaults.tickSize;
            t && (t.layout && "x" !== t.layout || !j(t.height) || (t.height = !1 === t.scale ? 60 : i ? 76 + i : 74), "y" === t.layout && j(t.width) && (t.width = !1 === t.scale ? 60 : i ? 87 + i : 87))
        },
        scale_setter: function (t) {
            return t && (t.step = t.step || 10, t.template = Wt(t.template || "#value#")), t
        },
        $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && (this.kk("y" === this.B.layout ? i : t), (this.B.value || 0 === this.B.value) && this.Tk(0, this.B.value))
        },
        Vk: function (t) {
            return Math.min(Math.max(t, this.B.minRange), this.B.maxRange) - this.B.minRange
        },
        Ek: function (t) {
            var i;
            this.Nk = t - (this.Xe || t), this.Xe = t, (1e3 < (i = this.B.flowTime > this.Nk ? this.B.flowTime / this.Nk : this.B.flowTime) || i < 5) && (i = 30);
            var e = (this.B.value - this.Lk) / i;
            this.Ok += e, Math.abs(this.Ok - this.B.value) < Math.abs(e) && (this.Ok = this.B.value), this.Ok != this.B.value ? this.Uk = requestAnimationFrame(this.Ek.bind(this)) : (cancelAnimationFrame(this.Uk), this.Uk = null), this.Wk.setAttribute("width", Math.floor(this.Vk(this.Ok) * this.Yk)), this.Wk.style.fill = this.Rc()
        },
        Tk: function (t, i) {
            this.Lk = this.Ok = t, this.B.value = this.Ak = i, !0 === this.isVisible() && !0 === this.B.smoothFlow && window.requestAnimationFrame ? this.Uk || (this.Uk = requestAnimationFrame(this.Ek.bind(this))) : (this.Wk.setAttribute("width", Math.floor(this.Vk(i) * this.Yk)), this.Wk.style.fill = this.Rc())
        },
        Rc: function () {
            var t = this.B.color;
            return "function" == typeof t ? t(this.Ak) : t
        },
        qk: function (t, i, e) {
            for (var s = 0; s < i.length; s++) t.setAttribute(i[s], e[s])
        },
        Gk: function (t, i, e) {
            var s = document.createElementNS("http://www.w3.org/2000/svg", t);
            return i && this.qk(s, i, e), s
        },
        Xk: function (t) {
            var i = this.Gk(t[0], t[1], t[2]), e = t[3];
            if (e) for (var s = 0; s < e.length; s++) i.appendChild(this.Xk(e[s]));
            return i
        },
        Jk: function () {
            var t = "d" + V(), i = this.Gk("svg", ["class"], ["webix_bullet_graph_svg"]), e = this.Gk("g"),
                s = this.Gk("g"),
                n = this.Gk("rect", ["x", "y", "width", "height", "class", "style"], [this.Kk, this.Zk, 100, this.B.stroke, "webix_bullet_value", "filter:url(#" + t + ");fill:" + this.Rc()]),
                h = this.Gk("rect", ["x", "y", "width", "height", "fill"], [0, 5, 3, this.B.barWidth - 10, "rgba(0,0,0,0.5)"]),
                r = this.Gk("g", ["stroke", "stroke-width", "fill"], ["#8b94ac", "2", "none"]),
                o = this.Gk("text", ["text-anchor", "stroke", "fill"], ["end", "none", "#8b94ac"]),
                a = "y" == this.B.layout ? "50%" : this.Kk - 10,
                u = "y" == this.B.layout ? 11 : 17,
                c = this.Gk("tspan", ["x", "y", "class"], [a, u, "webix_bullet_header"]),
                f = this.Gk("tspan", ["x", "y", "class"], [a, u + 17, "webix_bullet_subheader"]),
                l = this.Gk("text", ["text-anchor", "stroke", "class", "fill"], ["middle", "none", "webix_bullet_scale", "#8b94ac"]),
                d = this.Xk(["filter", ["id", "x", "y", "width", "height"], [t, "0", "-150%", "110%", "400%"], [["feOffset", ["in", "dx", "dy"], ["SourceAlpha", 0, 0]], ["feGaussianBlur", ["stdDeviation"], ["2"]], ["feComponentTransfer", 0, 0, [["feFuncA", ["type", "slope"], ["linear", "0.5"]]]], ["feMerge", 0, 0, [["feMergeNode"], ["feMergeNode", ["in"], ["SourceGraphic"]]]]]]);
            i.appendChild(d);
            var v = document.createElement("div");
            e.appendChild(s), !1 !== this.B.marker && (h.setAttribute("x", this.Kk + this.Vk(this.B.marker) * this.Yk - 2), e.appendChild(h)), e.appendChild(n), o.appendChild(c), o.appendChild(f), i.appendChild(o);
            var _ = "y" === this.B.layout, p = this.B.tickSize;
            if (this.B.scale) {
                for (var m = this.Kk, b = this.B.minRange; b <= this.B.maxRange; b += this.B.scale.step) {
                    var g = Math.max(b - this.B.minRange, 0), w = Math.floor(g * this.Yk - (g ? .1 : -1)),
                        x = _ ? (this.$width - this.B.barWidth) / 2 + (p ? 2 - p : 4) : w + m,
                        y = _ ? this.Qk + m - w + 6 : this.B.barWidth + (p ? 16 + p : 14),
                        M = _ ? -4 : this.B.barWidth + 3 + p, S = _ ? "end" : "middle",
                        k = this.Gk("tspan", ["x", "y", "text-anchor"], [x, y, S]),
                        C = this.Gk("line", ["x1", "y1", "x2", "y2", "stroke-width"], [w + m, M, w + m, M - p, 1]);
                    v.innerHTML = this.B.scale.template({value: b}), k.appendChild(v.childNodes[0]), l.appendChild(k), r.appendChild(C)
                }
                e.appendChild(r), i.appendChild(l)
            }
            for (var $ = 0; $ < this.B.bands.length; $++) {
                var D = this.B.bands[$], I = this.Gk("path"), A = this.Vk(D.value) * this.Yk;
                I.setAttribute("d", "M " + this.Kk + ",0 l " + A + ",0 l 0," + this.B.barWidth + " l -" + A + ",0 z"), I.setAttribute("fill", D.color), s.appendChild(I)
            }
            if (i.appendChild(e), "y" === this.B.layout) {
                var F = this.B.scale ? this.$width / 2 - 10 : 0, T = this.$height + this.Kk - 28;
                e.setAttribute("transform", "translate(" + F + ", " + T + ") rotate(270)"), o.setAttribute("text-anchor", "middle"), o.childNodes[0].setAttribute("x", "55%"), o.childNodes[1].setAttribute("x", "55%"), l.setAttribute("text-anchor", "right")
            }
            return i.setAttribute("viewBox", "0 0 " + this.$width + " " + this.$height), i
        },
        kk: function (t) {
            this.config.minRange, this.config.maxRange, t = t || ("x" == this.B.layout ? this.$width : this.$height);
            var i = this.$view;
            i.innerHTML = "";
            var e = this.B, s = e.label && e.label(e) || e.placeholder && e.placeholder(e);
            this.Kk = s ? e.labelHeight || e.labelWidth : 7, this.Zk = Math.floor((this.B.barWidth - this.B.stroke) / 2), this.Qk = t - this.Kk - 30, this.Yk = this.Qk / (this.B.maxRange - this.B.minRange);
            var n = this.Jk();
            n.setAttribute("height", this.$height), n.setAttribute("width", this.$width), i.appendChild(n), this.Wk = i.querySelector(".webix_bullet_value");
            var h = this.B.label;
            h && (this.$view.querySelector(".webix_bullet_header").textContent = h(this.B));
            var r = this.B.placeholder;
            r && (this.$view.querySelector(".webix_bullet_subheader").textContent = r(this.B))
        },
        refresh: function () {
            this.kk(), this.Tk(this.Ak, this.B.value)
        },
        setValue: function (t) {
            this.B.value != t && this.Tk(this.B.value, t)
        },
        getValue: function () {
            return this.B.value
        }
    }, jr = (P.protoUI(Pr, zi.view), {
        name: "geochart",
        defaults: {chart: {displayMode: "auto", region: "world", resolution: "countries"}},
        $init: function (t) {
            this.$view.innerHTML = "<div class='webix_map_content' style='width:100%;height:100%'></div>", this.Vi = this.$view.firstChild, this.tC = m.defer(), t.chart = P.extend(t.chart || {}, this.defaults.chart), this.data.provideApi(this, !0), this.$ready.push(this.render), this.data.attachEvent("onClearAll", S(this.iC, this)), this.data.attachEvent("onStoreUpdated", S(this.eC, this))
        },
        getMap: function (t) {
            return t ? this.tC : this.tu
        },
        sC: function (t) {
            return S(function () {
                "function" == typeof t && t(), zr = zr || window.google, this.nC()
            }, this)
        },
        render: function () {
            "undefined" == typeof window.google || "undefined" == typeof window.google.charts ? (Hr || ((Hr = document.createElement("script")).type = "text/javascript", Hr.src = "//www.gstatic.com/charts/loader.js", document.getElementsByTagName("head")[0].appendChild(Hr)), Hr.onload = this.sC(Hr.onload)) : this.sC()()
        },
        nC: function () {
            zr.visualization && zr.visualization.GeoChart ? (this.tu = new zr.visualization.GeoChart(this.Vi), this.hC(), this.tC.resolve(this.tu)) : (zr.charts.load(
                "current", {
                    packages: ["geochart"],
                    mapsApiKey: this.B.key
                }), zr.charts.setOnLoadCallback(S(function () {
                this.nC()
            }, this)))
        },
        $onLoad: function (t) {
            return !this.tu && (this.tC.then(S(function () {
                this.parse(t, this.B.datatype)
            }, this)), !0)
        },
        eC: function () {
            if (this.tu) {
                var n = this.Xf && this.Xf.length ? this.Xf : this.rC(), h = [];
                if (this.data.each(function (t) {
                    for (var i = [], e = 0; e < n.length; e++) {
                        var s = t[n[e].label];
                        "number" == n[e].type ? s *= 1 : "tooltip" == n[e].role && (s = this.B.tooltip(t)), i.push(s)
                    }
                    h.push(i)
                }, this), n.length) {
                    for (var t = new zr.visualization.DataTable, i = 0; i < n.length; i++) t.addColumn(n[i]);
                    t.addRows(h);
                    var e = new zr.visualization.DataView(t);
                    this.tu.draw(e, this.B.chart)
                } else this.tu.draw(zr.visualization.arrayToDataTable([["", ""]]), {})
            } else this.tu || this.tC.then(S(this.eC, this))
        },
        setDisplayMode: function (t) {
            this.B.chart.displayMode = t, this.refresh()
        },
        setRegion: function (t) {
            this.B.chart.region = t, this.refresh()
        },
        refresh: function () {
            this.tu.clearChart(), this.eC()
        },
        tooltip_setter: function (t) {
            var i = this.B.chart.tooltip;
            return this.B.chart.tooltip = P.extend(i || {}, {isHtml: !0}), Wt(t)
        },
        $setSize: function (t, i) {
            zi.api.$setSize.apply(this, arguments) && this.tu && (P.extend(this.B, {
                width: t,
                height: i
            }), this.refresh())
        },
        iC: function () {
            this.Xf = null, this.eC()
        },
        oC: function (t, i) {
            if (!t || j(t[i])) return "string";
            var e = M(t[i]);
            return "string" != e || isNaN(1 * t[i]) || (e = "number"), e
        },
        rC: function () {
            var t = this.B.columns || [], i = this.data.pull[this.data.order[0]];
            if (!t.length && i) for (var e in i) "id" !== e && t.push(e);
            for (var s = 0; s < t.length; s++) "object" !== M(t[s]) && (t[s] = {type: this.oC(i, t[s]), label: t[s]});
            return this.B.tooltip && t.push({type: "string", role: "tooltip", p: {html: !0}}), this.Xf = t
        },
        hC: function () {
            zr.visualization.events.addListener(this.tu, "error", S(function () {
                this.callEvent("onMapError", arguments)
            }, this)), zr.visualization.events.addListener(this.tu, "ready", S(function () {
                this.callEvent("onMapReady", arguments)
            }, this)), zr.visualization.events.addListener(this.tu, "regionClick", S(function () {
                this.callEvent("onRegionClick", arguments)
            }, this)), zr.visualization.events.addListener(this.tu, "select", S(function () {
                var t = this.tu.getSelection()[0], i = t || this.aC;
                if (i) {
                    var e = this.data.order[i.row];
                    this.aC = i, this.callEvent("onItemClick", [e, !!t])
                }
            }, this))
        }
    }), Er = (P.protoUI(jr, le, c, zi.view), {
        name: "google-map", $init: function () {
            this.$view.innerHTML = "<div class='webix_map_content' style='width:100%;height:100%'></div>", this.Vi = this.$view.firstChild, this.tC = m.defer(), this.data.provideApi(this, !0), this.$ready.push(this.render)
        }, getMap: function (t) {
            return t ? this.tC : this.tu
        }, sC: function (t) {
            return S(function () {
                "function" == typeof t && t(), Rr = Rr || window.google, this.nC.call(this)
            }, this)
        }, render: function () {
            if ("undefined" == typeof window.google || "undefined" == typeof window.google.maps) {
                if (!Br) {
                    (Br = document.createElement("script")).type = "text/javascript";
                    var t = this.B, i = t.src || "//maps.google.com/maps/api/js";
                    i += -1 === i.indexOf("?") ? "?" : "&", t.key && (i += "&key=" + t.key), t.libraries && (i += "&libraries=" + t.libraries), Br.src = i, document.getElementsByTagName("head")[0].appendChild(Br)
                }
                Br.onload = this.sC(Br.onload)
            } else this.sC()()
        }, nC: function () {
            var t = this.config;
            this.isVisible(t.id) && (this.tu = new Rr.maps.Map(this.Vi, {
                zoom: t.zoom,
                center: new Rr.maps.LatLng(t.center[0], t.center[1]),
                mapTypeId: Rr.maps.MapTypeId[t.mapType]
            }), this.tC.resolve(this.tu), this.Vi.firstChild.setAttribute("webix_disable_drag", "true"))
        }, center_setter: function (t) {
            return this.tu && this.tu.setCenter(new Rr.maps.LatLng(t[0], t[1])), t
        }, mapType_setter: function (t) {
            return this.tu && this.tu.setMapTypeId(Rr.maps.MapTypeId[t]), t
        }, zoom_setter: function (t) {
            return this.tu && this.tu.setZoom(t), t
        }, layerType_setter: function (t) {
            return "heatmap" == t && (this.config.libraries = "visualization"), this.uC[t] && (P.extend(this, this.uC[t], !0), this.data.attachEvent("onStoreUpdated", S(function () {
                this.tC.then(S(function () {
                    this.drawData.call(this, arguments)
                }, this))
            }, this))), t
        }, defaults: {zoom: 5, center: [39.5, -98.5], mapType: "ROADMAP", layerType: "marker"}, $setSize: function () {
            zi.api.$setSize.apply(this, arguments), this.tu && Rr.maps.event.trigger(this.tu, "resize")
        }, $onLoad: function (t) {
            return !this.tu && (this.tC.then(S(function () {
                this.parse(t)
            }, this)), !0)
        }, uC: {
            marker: {
                drawData: function (t, i, e) {
                    switch (e) {
                        case"add":
                        case"update":
                            i.$marker = this.cC(i);
                            break;
                        case"delete":
                            i.$marker.setMap(null);
                            break;
                        default:
                            this.data.each(function (t) {
                                t.$marker = this.cC(t)
                            }, this)
                    }
                }, clearAll: function (t) {
                    this.data.each(function (t) {
                        t.$marker.setMap(null)
                    }), this.data.clearAll(t)
                }, showItem: function (t) {
                    var i = this.getItem(t);
                    this.tu.setCenter(new Rr.maps.LatLng(i.lat, i.lng))
                }, cC: function (t) {
                    var i = {};
                    for (var e in t) i[e] = t[e];
                    i.position = new Rr.maps.LatLng(t.lat, t.lng), i.map = t.hidden ? null : this.tu;
                    var s = t.$marker;
                    return s ? t.$marker.setMap(i.map) : (s = new Rr.maps.Marker(i), this.xt(s)), this.callEvent("onItemRender", [t]), s
                }, xt: function (t) {
                    var i = this;
                    t.addListener("click", function () {
                        i.callEvent("onItemClick", [this.id, this])
                    }), t.getDraggable() && (t.addListener("dragend", function () {
                        i.fC(this, !0)
                    }), t.addListener("drag", function () {
                        i.fC(this)
                    }))
                }, fC: function (t, i) {
                    var e = this.getItem(t.id), s = t.getPosition(), n = i ? "onAfterDrop" : "onDrag";
                    e.lat = s.lat(), e.lng = s.lng(), this.callEvent(n, [e.id, e])
                }
            }, heatmap: {
                heatmapConfig_setter: function (t) {
                    return t = t || {}
                }, drawData: function () {
                    this.lC && (this.lC.setMap(null), this.lC = null);
                    var i = [];
                    if (this.data.each(function (t) {
                        i.push(this.dC(t))
                    }, this), i.length) {
                        var t = P.extend(this.config.heatmapConfig, {data: i, map: this.tu}, !0);
                        this.lC = new Rr.maps.visualization.HeatmapLayer(t), this.callEvent("onHeatMapRender", [this.lC])
                    }
                }, getHeatmap: function () {
                    return this.lC
                }, dC: function (t) {
                    var i = {};
                    for (var e in t) i[e] = t[e];
                    return i.location = new Rr.maps.LatLng(t.lat, t.lng), i
                }
            }
        }
    }), Nr = (P.protoUI(Er, le, c, zi.view), {
        name: "organogram", defaults: {scroll: "auto", ariaLabel: "lines"}, $init: function () {
            this.Tt.className += " webix_organogram", this.Ti = document.createElement("DIV"), this.$ready.push(this.vC), P.extend(this.data, as, !0), this.data.provideApi(this, !0)
        }, Eo: "webix_dg_id", on_click: {
            webix_organogram_item: function (t, i) {
                this.B.select && ("multiselect" == this.B.select || this.B.multiselect ? this.select(i, !1, t.ctrlKey || t.metaKey || "touch" == this.B.multiselect, t.shiftKey) : this.select(i), this.Lm = !1)
            }
        }, on_context: {}, on_dblclick: {}, vC: function () {
            this.Q.style.position = "relative", this.data.attachEvent("onStoreUpdated", S(this.render, this))
        }, ef: function (t) {
            var i = this.data.pr[t.id];
            return this.callEvent("onItemRender", [t]), this.type.templateStart.call(this, t, this.type, i) + (t.$template ? this.type["template" + t.$template].call(this, t, this.type, i) : this.type.template.call(this, t, this.type, i)) + this.type.templateEnd.call(this)
        }, Z: function (t) {
            var i = this.ef(t);
            return this.data.branch[t.id] && (i += this._C(t.id)), i
        }, pC: function () {
            return this.type.listMarginX || this.type.listMarginY
        }, _C: function (t, i) {
            var e, s, n, h, r = "", o = this.data.branch[t], a = this.data.pr[t], u = this.getItem(t),
                c = !!u && u.$type;
            if (i = i || 0, "list" === c && (i += this.type.listMarginX), t || (this.mC = [], this.$xy = {}, h = this.$width - 2 * this.type.padding, this.$xy[0] = {
                totalWidth: h,
                start: this.type.padding,
                width: 0,
                height: 0,
                left: h / 2,
                top: this.type.padding || 0
            }), o) {
                n = this.$xy[t], "list" != c || this.pC() || (r += this.type.templateListStart.call(this, u, this.type, a));
                var f = 0, l = 0;
                for (e = 0; e < o.length; e++) {
                    s = o[e], h = this.bC[s];
                    var d = this.getItem(s);
                    d.open == undefined && (d.open = !0), "list" == c && this.data.addMark(s, "list_item", "", 1, !0);
                    var v = this.gC(s);
                    if ("list" == c) {
                        var _ = 0;
                        this.pC() ? _ = this.type.listMarginY : e || (_ = this.type.marginY), this.$xy[s] = {
                            totalWidth: h,
                            start: n.start,
                            width: this.type.width,
                            height: v,
                            left: n.start + h / 2 - this.type.width / 2 + i,
                            top: e ? this.$xy[o[e - 1]].top + this.$xy[o[e - 1]].height + _ + l : n.top + n.height + _
                        }, l = this.data.branch[s] ? this.wC(s) : 0
                    } else this.$xy[s] = {
                        totalWidth: h,
                        start: n.start + f,
                        width: this.type.width,
                        height: v,
                        left: n.start + f + h / 2 - this.type.width / 2,
                        top: n.top + n.height + (t ? this.type.marginY : 0)
                    };
                    r += this.ef(d), f += h
                }
                for (e = 0; e < o.length; e++) s = o[e], this.data.branch[s] && this.getItem(s).open ? r += this._C(s, i) : u && ("list" != u.$type ? this.mC.push(this.$xy[s].top + this.$xy[s].height) : e == o.length - 1 && this.mC.push(this.$xy[s].top + this.$xy[s].height));
                var p = 0;
                for (var m in this.$xy) {
                    var b = this.$xy[m];
                    p = Math.max(b.left + b.width, p)
                }
                this.Q.style.width = p + this.type.padding + this.type.marginX / 2 + "px", "list" != c || this.pC() || (r += this.type.templateListEnd(
                    u, this.type, a))
            }
            return r
        }, wC: function (t) {
            for (var i = this.data.branch[t], e = 0, s = 0; s < i.length; s++) e += this.gC(i[s]) + this.type.listMarginY, this.data.branch[i[s]] && (e += this.wC(i[s]));
            return e + this.type.marginY
        }, gC: function (t) {
            var i = this.getItem(t), e = this.type.height;
            return "function" == typeof e && (e = e.call(i, this.type, this.data.pr[t])), this.xC || (this.xC = ct("div"), this.Q.appendChild(this.xC)), this.xC.className = this.type.classname(i, this.type, this.data.pr[t]), this.xC.style.cssText = "width:" + this.type.width + "px;height:" + e + ("auto" == e ? "" : "px") + ";", this.xC.innerHTML = this.type.template.call(this, i, this.type, this.data.pr[t]), this.xC.scrollHeight
        }, yC: function () {
            var n = {}, h = this.type.width, r = this.type.marginX;
            return this.data.each(function (t) {
                n[t.id] = h + r;
                var i = this.getParentId(t.id);
                if (i && "list" != this.getItem(i).$type) for (; i;) {
                    for (var e = this.branch[i], s = n[i] = 0; s < e.length; s++) n[i] += n[e[s]] || 0;
                    i = this.getParentId(i)
                }
            }), this.bC = n
        }, getItemNode: function (t) {
            if (this.Ai) return this.Ai[t];
            this.Ai = {};
            for (var i = this.Q.childNodes, e = 0; e < i.length; e++) {
                var s = i[e].getAttribute(this.Eo);
                if (s && (this.Ai[s] = i[e]), -1 != i[e].className.indexOf("webix_organogram_list") && !this.pC()) for (var n = i[e].childNodes, h = 0; h < n.length; h++) (s = n[h].getAttribute(this.Eo)) && (this.Ai[s] = n[h])
            }
            return this.getItemNode(t)
        }, oc: function (t) {
            return this.Ti.innerHTML = this.ef(t), this.Ti.firstChild
        }, render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) {
                if ("update" != e) return this.callEvent("onBeforeRender", [this.data]) && (this.yC(), this.Ai = null, this.Q.innerHTML = this._C(0), this.xC = null, this.Q.style.height = Math.max.apply(Math, this.mC) + this.type.padding + "px", this.Hk(), this.resize(), this.callEvent("onAfterRender", [])), !0;
                var s = this.getItemNode(t);
                return dt(this.Ai[t] = this.oc(i), s), lt(s), !0
            }
        }, Hk: function () {
            this.canvas && this.canvas.clearCanvas(!0), this.canvas = new Pi({
                container: this.Q,
                name: this.name,
                title: this.B.ariaLabel,
                width: this.Q.offsetWidth,
                height: this.Q.offsetHeight
            }), this.MC(0)
        }, SC: function (t, i, e, s, n, h, r) {
            t.strokeStyle = h, t.lineCap = "square", t.lineWidth = r, t.beginPath(), t.moveTo(i, e), t.lineTo(s, n), t.stroke(), t.lineWidth = 1
        }, MC: function (t, i) {
            var e, s, n, h, r, o, a, u, c, f;
            if (i || (i = this.canvas.getCanvas()), this.$xy && (t = t || 0, n = this.data.branch[t], s = this.getItem(t), n && n.length)) {
                if (h = this.$xy[t], t) if (o = parseInt(h.left + h.width / 2, 10) + .5, a = parseInt(h.top + h.height, 10), u = parseInt(h.top + h.height + this.type.marginY / 2, 10), "list" == s.$type) {
                    if (!this.pC()) return u = parseInt(h.top + h.height + this.type.marginY, 10), void this.SC(i, o, a, o, u, this.type.lineColor)
                } else this.SC(i, o, a, o, u, this.type.lineColor);
                for (a = parseInt(h.top + h.height + this.type.marginY / 2, 10) + .5, e = 0; e < n.length; e++) t && (r = this.$xy[n[e]], "list" == s.$type && this.pC() ? (o = parseInt(h.left + this.type.listMarginX / 2, 10) + .5, e ? e == n.length - 1 && (f = o) : c = o, u = parseInt(r.top + r.height / 2, 10), this.SC(i, o, a - this.type.marginY / 2, o, u, this.type.lineColor), this.SC(i, o, u, o + this.type.listMarginX / 2, u, this.type.lineColor)) : (o = parseInt(r.left + r.width / 2, 10) + .5, e ? e == n.length - 1 && (f = o) : c = o, u = parseInt(r.top, 10), this.SC(i, o, a, o, u, this.type.lineColor))), this.getItem(n[e]).open && this.MC(n[e], i);
                t && this.SC(i, c, a, f, a, this.type.lineColor)
            }
        }, $getSize: function (t, i) {
            var e = this.B.autowidth, s = this.B.autoheight;
            return e && (t = this.Q.offsetWidth + (this.Q.offsetHeight > i && !s ? Y.scrollSize : 0)), s && (i = this.Q.offsetHeight + (this.Q.offsetWidth > t && !e ? Y.scrollSize : 0)), zi.api.$getSize.call(this, t, i)
        }, $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i) && (this.Q.style.width = this.$width + "px", this.Q.style.height = this.$height + "px", this.render())
        }, type: {
            width: 120,
            height: "auto",
            padding: 20,
            marginX: 20,
            marginY: 20,
            listMarginX: 0,
            listMarginY: 0,
            lineColor: Ei.organogramLineColor || "#90caf9",
            classname: function (t, i, e) {
                var s = "webix_organogram_item";
                return t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css), e && e.list_item && (s += " webix_organogram_list_item"), e && e.$css && (s += e.$css), s += " webix_organogram_level_" + t.$level, i.css && (s += " " + i.css), s
            },
            listClassName: function (t) {
                var i = "webix_organogram_list webix_organogram_list_" + t.$level;
                return t.$listCss && ("object" == M(t.$listCss) && (t.$listCss = ot(t.$listCss)), i += " " + t.$listCss), i
            },
            template: Wt("#value#"),
            templateStart: function (t, i, e) {
                var s = "";
                if ((!e || !e.list_item || i.listMarginX || i.listMarginY) && this.$xy) {
                    var n = this.$xy[t.id];
                    s += "width: " + n.width + "px; height: " + n.height + "px;", s += "top: " + n.top + "px; left: " + n.left + "px;"
                }
                return '<div webix_dg_id="' + t.id + '" class="' + i.classname.call(this, t, i, e) + '"' + (s ? 'style="' + s + '"' : "") + '">'
            },
            templateEnd: Wt("</div>"),
            templateListStart: function (t, i, e) {
                var s = "";
                if (this.$xy) {
                    var n = this.$xy[t.id];
                    s += "width: " + n.width + "px;", s += "top: " + (n.top + n.height + i.marginY) + "px; left: " + n.left + "px;"
                }
                return '<div class="' + i.listClassName.call(this, t, i, e) + '"' + (s ? 'style="' + s + '"' : "") + '">'
            },
            templateListEnd: Wt("</div>")
        }
    }), Lr = (P.protoUI(Nr, Bi, Se, es, ne, Be, Ae, Re, He, ns, le, zi.view, c), {
        $render_pie: function (t, i, e, s, n, h) {
            this.kC(t, i, e, s, 1, h, n)
        }, kC: function (t, i, e, s, n, h, r) {
            if (i.length) {
                var o = this.CC(e, s), a = this.B.radius ? this.B.radius : o.radius;
                if (!(a < 0)) {
                    var u = this.$C(i), c = this.jc(u), f = this.Pc(u, c), l = this.B.x ? this.B.x : o.x,
                        d = this.B.y ? this.B.y : o.y;
                    1 == n && this.B.shadow && this.DC(t, l, d, a), d /= n;
                    var v, _ = -Math.PI / 2, p = [];
                    if (t.scale(1, n), this.B.gradient) {
                        var m = 1 != n ? l + a / 3 : l, b = 1 != n ? d + a / 3 : d;
                        this.IC(t, l, d, a, m, b)
                    }
                    for (var g = 0; g < i.length; g++) if (u[g]) {
                        t.strokeStyle = this.B.lineColor.call(this, i[g]), t.beginPath(), t.moveTo(l, d), p.push(_);
                        var w = -Math.PI / 2 + f[g] - 1e-4;
                        t.arc(l, d, a, _, w, !1), t.lineTo(l, d);
                        var x = this.B.color.call(this, i[g]);
                        t.fillStyle = x, t.fill(), this.B.pieInnerText && this.AC(l, d, 5 * a / 6, _, w, n, this.B.pieInnerText(i[g], c), !0), this.B.label && this.AC(l, d, a + this.B.labelOffset, _, w, n, this.B.label(i[g])), 1 != n && (this.FC(t, l, d, _, w, a, !0), t.fillStyle = "#000000", t.globalAlpha = .2, this.FC(t, l, d, _, w, a, !1), t.globalAlpha = 1, t.fillStyle = x), h.addSector(i[g].id, _, w, l - e.x, d - e.y / n, a, n, r), _ = w
                    }
                    for (t.globalAlpha = .8, g = 0; g < p.length; g++) v = this.TC(p[g], l, d, a), this.SC(t, l, d, v.x, v.y, this.B.lineColor.call(this, i[g]), 2);
                    (t.globalAlpha = 1) == n && this.B.border && (t.lineWidth = this.B.borderWidth || 2, t.strokeStyle = this.B.borderColor ? this.B.borderColor.call(this) : "#ffffff", t.beginPath(), t.arc(l, d, a + 1, 0, 2 * Math.PI, !1), t.stroke()), t.scale(1, 1 / n)
                }
            }
        }, $C: function (t) {
            for (var i = [], e = 0; e < t.length; e++) i.push(Math.abs(parseFloat(this.B.value(t[e]) || 0)));
            return i
        }, jc: function (t) {
            for (var i = 0, e = 0; e < t.length; e++) i += t[e];
            return i
        }, Pc: function (t, i) {
            var e, s = [], n = 0;
            i = i || this.jc(t);
            for (var h = 0; h < t.length; h++) e = t[h], s[h] = 2 * Math.PI * (i ? (e + n) / i : 1 / t.length), n += e;
            return s
        }, CC: function (t, i) {
            var e = i.x - t.x, s = i.y - t.y;
            return {x: t.x + e / 2, y: t.y + s / 2, radius: Math.min(e / 2, s / 2)}
        }, FC: function (t, i, e, s, n, h, r) {
            if (t.lineWidth = 1, s <= 0 && 0 <= n || 0 <= s && n <= Math.PI || .003 < Math.abs(s - Math.PI) && s <= Math.PI && n >= Math.PI) {
                s <= 0 && 0 <= n && (s = 0, r = !1, this.VC(t, i, e, h, s, n)), s <= Math.PI && n >= Math.PI && (n = Math.PI, r = !1, this.VC(t, i, e, h, s, n));
                var o = (this.B.pieHeight || Math.floor(h / 4)) / this.B.cant;
                t.beginPath(), t.arc(i, e, h, s, n, !1), t.lineTo(i + h * Math.cos(n), e + h * Math.sin(n) + o), t.arc(i, e + o, h, n, s, !0), t.lineTo(i + h * Math.cos(s), e + h * Math.sin(s)), t.fill(), r && t.stroke()
            }
        }, VC: function (t, i, e, s, n, h) {
            t.beginPath(), t.arc(i, e, s, n, h, !1), t.stroke()
        }, DC: function (t, i, e, s) {
            t.globalAlpha = .5;
            for (var n = ["#c4c4c4", "#c6c6c6", "#cacaca", "#dcdcdc", "#dddddd", "#e0e0e0", "#eeeeee", "#f5f5f5", "#f8f8f8"], h = n.length - 1; -1 < h; h--) t.beginPath(), t.fillStyle = n[h], t.arc(i + 1, e + 1, s + h, 0, 2 * Math.PI, !0), t.fill();
            t.globalAlpha = 1
        }, zC: function (t) {
            return t.addColorStop(0, "#ffffff"), t.addColorStop(.7, "#7a7a7a"), t.addColorStop(1, "#000000"), t
        }, IC: function (t, i, e, s, n, h) {
            var r;
            t.beginPath(), r = "function" != typeof this.B.gradient ? (r = t.createRadialGradient(n, h, s / 4, i, e, s), this.zC(r)) : this.B.gradient(r), t.fillStyle = r, t.arc(i, e, s, 0, 2 * Math.PI, !0), t.fill(), t.globalAlpha = .7
        }, AC: function (t, i, e, s, n, h, r, o) {
            var a = this.canvases[0].renderText(0, 0, r, 0, 1);
            if (a) {
                var u = a.scrollWidth;
                a.style.width = u + "px", t < u && (u = t);
                var c = n - s < .2 ? 4 : 8;
                o && (c = u / 1.8);
                var f = s + (n - s) / 2;
                e -= (c - 8) / 2;
                var l = -c, d = "right";
                (f >= Math.PI / 2 && f < Math.PI || f <= 3 * Math.PI / 2 && f >= Math.PI) && (l = -u - l + 1, d = "left");
                var v = 0;
                !o && h < 1 && 0 < f && f < Math.PI && (v = (this.B.height || Math.floor(e / 4)) / h);
                var _ = (i + Math.floor((e + v) * Math.sin(f))) * h - 8,
                    p = t + Math.floor((e + c / 2) * Math.cos(f)) + l, m = n < Math.PI / 2 + .01, b = s < Math.PI / 2;
                b && m ? p = Math.max(p, t + 3) : b || m ? !o && (
                    f >= Math.PI / 2 && f < Math.PI || f <= 3 * Math.PI / 2 && f >= Math.PI) && (p += u / 3) : p = Math.min(p, t - u), a.style.top = _ + "px", a.style.left = p + "px", a.style.width = u + "px", a.style.textAlign = d, a.style.whiteSpace = "nowrap"
            }
        }, $render_pie3D: function (t, i, e, s, n, h) {
            this.kC(t, i, e, s, this.B.cant, h)
        }, $render_donut: function (t, i, e, s, n, h) {
            if (i.length) {
                this.kC(t, i, e, s, 1, h, n);
                var r = this.B, o = this.CC(e, s), a = r.radius ? r.radius : o.radius;
                if (!(a <= 0)) {
                    var u = r.innerRadius && r.innerRadius < a ? r.innerRadius : a / 3, c = r.x ? r.x : o.x,
                        f = r.y ? r.y : o.y;
                    t.fillStyle = "#ffffff", t.beginPath(), t.arc(c, f, u, 0, 2 * Math.PI, !0), t.fill()
                }
            }
        }
    }), Or = {
        $render_bar: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m, b, g = s.y - e.y;
            b = !!this.B.yAxis, m = !!this.B.xAxis, c = (u = this.HC()).max, f = u.min, o = (s.x - e.x) / i.length, n || "auto" != this.B.origin && !b || this.RC(i, e, s, f, c, o), b && (c = parseFloat(this.B.yAxis.end), f = parseFloat(this.B.yAxis.start)), l = (v = this.BC(f, c))[0], d = v[1], p = l ? g / l : l, b || "auto" != this.B.origin && m || (_ = 10, p = l ? (g - _) / l : _), !n && "auto" != this.B.origin && !b && this.B.origin > f && this.PC(t, i, e, s, o, s.y - p * (this.B.origin - f)), r = parseInt(this.B.barWidth, 10);
            var w = 0, x = 0;
            for (a = 0; a < this.jC.length; a++) a == n && (x = w), "bar" == this.jC[a].type && w++;
            this.jC && o < r * w + 4 && (r = parseInt(o / w - 4, 10));
            var y = (o - r * w) / 2,
                M = "undefined" != typeof this.B.radius ? parseInt(this.B.radius, 10) : Math.round(r / 5), S = !1,
                k = this.B.gradient;
            for (k && "function" != typeof k ? (S = k, k = !1) : k && (k = t.createLinearGradient(0, s.y, 0, e.y), this.B.gradient(k)), m || this.SC(t, e.x, s.y + .5, s.x, s.y + .5, "#edeff0", 1), a = 0; a < i.length; a++) {
                var C = parseFloat(this.B.value(i[a]) || 0);
                if (this.EC && (C = this.NC(C)), C && !isNaN(C)) {
                    c < C && (C = c), C -= f, C *= d;
                    var $ = e.x + y + a * o + (r + 1) * x, D = s.y, I = k || this.B.color.call(this, i[a]),
                        A = this.B.border ? 1 : 0, F = this.B.label(i[a]);
                    b || "auto" != this.B.origin && m ? C == this.B.origin || "auto" == this.B.origin && this.B.value(i[a]) == f ? (A = 0, F = "") : (C < 0 || this.B.yAxis && 0 === C && !("auto" != this.B.origin && this.B.origin > f)) && (C = A = 0, F = "") : C += _ / p, t.globalAlpha = this.B.alpha.call(this, i[a]);
                    var T = this.Bk(t, e, $, D, r, f, M, p, C, I, k, S, A);
                    S && this.LC(t, $, D, r, f, M, p, C, I, S, A), A && this.OC(t, $, D, r, f, M, p, C, I), t.globalAlpha = 1, T[0] != $ ? this.canvases[n].renderTextAt(!1, !0, $ + Math.floor(r / 2), T[1], F) : this.canvases[n].renderTextAt(!0, !0, $ + Math.floor(r / 2), T[3], F), h.addRect(i[a].id, [$ - e.x, T[3] - e.y, T[2] - e.x, T[1] - e.y], n)
                }
            }
        }, UC: function (t, i, e, s, n, h, r) {
            var o = e;
            return this.B.xAxis && "auto" != this.B.origin && this.B.origin > r && (o = e -= (this.B.origin - r) * n, (s -= this.B.origin - r) < 0 && (s *= -1, t.translate(i + h, e), t.rotate(Math.PI), e = i = 0), e -= .5), {
                value: s,
                x0: i,
                y0: e,
                start: o
            }
        }, Bk: function (t, i, e, s, n, h, r, o, a, u, c, f, l) {
            t.save(), t.fillStyle = u;
            var d = this.UC(t, e, s, a, o, n, h), v = this.WC(t, d.x0, d.y0, n, r, o, d.value, l);
            c && !f && t.lineTo(d.x0 + l, i.y), t.fill(), t.restore();
            var _ = d.x0, p = d.x0 != e ? e + v[0] : v[0];
            return [_, d.x0 != e ? d.start - v[1] - d.y0 : d.y0, p, d.x0 != e ? d.start - d.y0 : v[1]]
        }, YC: function (t, i) {
            var e, s;
            s = Pe.toRgb(i), (e = Pe.rgbToHsv(s[0], s[1], s[2]))[2] /= 1.4;
            var n = "rgb(" + Pe.hsvToRgb(e[0], e[1], e[2]) + ")";
            t.strokeStyle = n, 1 == t.globalAlpha && (t.globalAlpha = .9)
        }, OC: function (t, i, e, s, n, h, r, o, a) {
            var u;
            t.save(), u = this.UC(t, i, e, o, r, s, n), this.YC(t, a), this.WC(t, u.x0, u.y0, s, h, r, u.value, t.lineWidth / 2, 1), t.stroke(), t.restore()
        }, LC: function (t, i, e, s, n, h, r, o, a, u, c) {
            t.save();
            var f = this.UC(t, i, e, o, r, s, n),
                l = this.qC(t, f.x0, f.y0, f.x0 + s, f.y0 - r * f.value + 2, u, a, "y");
            t.fillStyle = l.gradient, this.WC(t, f.x0 + l.offset, f.y0, s - 2 * l.offset, h, r, f.value, l.offset + c), t.fill(), t.restore()
        }, WC: function (t, i, e, s, n, h, r, o, a) {
            t.beginPath();
            var u = 0;
            if (h * r < n) {
                var c = (n - h * r) / n;
                c <= 1 && -1 <= c && (u = -Math.acos(c) + Math.PI / 2)
            }
            t.moveTo(i + o, e);
            var f = e - Math.floor(h * r) + n + (n ? 0 : o);
            n < h * r && t.lineTo(i + o, f);
            var l = i + n;
            n && 0 < n && t.arc(l, f, Math.max(n - o, 0), -Math.PI + u, -Math.PI / 2, !1);
            var d = i + s - n - o, v = f - n + (n ? o : 0);
            t.lineTo(d, v), n && 0 < n && t.arc(d + o, f, Math.max(n - o, 0), -Math.PI / 2, 0 - u, !1);
            var _ = i + s - o;
            return t.lineTo(_, e), a || t.lineTo(i + o, e), [_, v]
        }
    }, Ur = {
        $render_line: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m;
            if (u = this.GC(t, i, e, s, n), r = this.B, i.length) {
                for (c = r.offset ? e.x + .5 * u.cellWidth : e.x, a = [], o = 0; o < i.length; o++) if ((m = this.XC(i[o], e, s, u)) || "0" == m) {
                    if (l = o ? u.cellWidth * o - .5 + c : c, v = "object" == M(m) ? m.y0 : m, o && this.B.fixOverflow) {
                        if ((p = this.XC(i[o - 1], e, s, u)).out && p.out == m.out) continue;
                        f = u.cellWidth * (o - 1) - .5 + c,
                            d = "object" == M(p) ? p.y0 : p, p.out && (_ = "min" == p.out ? s.y : e.y, a.push({
                            x: this.JC(f, l, d, v, _),
                            y: _
                        })), m.out && (_ = "min" == m.out ? s.y : e.y, a.push({x: this.JC(f, l, d, v, _), y: _}))
                    }
                    m.out || a.push({x: l, y: m, index: o})
                }
                for (this.KC = e, o = 1; o <= a.length; o++) f = a[o - 1].x, d = a[o - 1].y, o < a.length && (l = a[o].x, v = a[o].y, this.SC(t, f, d, l, v, r.line.color.call(this, i[o - 1]), r.line.width), r.line && r.line.shadow && (t.globalAlpha = .3, this.SC(t, f + 2, d + r.line.width + 8, l + 2, v + r.line.width + 8, "#eeeeee", r.line.width + 3), t.globalAlpha = 1)), "undefined" != typeof a[o - 1].index && this.ZC(t, f, d, i[a[o - 1].index], r.label(i[a[o - 1].index]), n, h, e)
            }
        }, JC: function (t, i, e, s, n) {
            return t + (n - e) * (i - t) / (s - e)
        }, ZC: function (t, i, e, s, n, h, r) {
            var o = this.B.item, a = parseInt(o.radius.call(this, s), 10) || 0, u = this.KC, c = o.type.call(this, s);
            if (a) {
                if (t.save(), o.shadow) {
                    t.lineWidth = 1, t.strokeStyle = "#bdbdbd", t.fillStyle = "#bdbdbd";
                    for (var f = [.1, .2, .3], l = f.length - 1; 0 <= l; l--) t.globalAlpha = f[l], t.strokeStyle = "#d0d0d0", t.beginPath(), this.QC(t, i, e + 2 * a / 3, a + l + 1, c), t.stroke();
                    t.beginPath(), t.globalAlpha = .3, t.fillStyle = "#bdbdbd", this.QC(t, i, e + 2 * a / 3, a + 1, c), t.fill()
                }
                t.restore(), t.lineWidth = o.borderWidth, t.fillStyle = o.color.call(this, s), t.strokeStyle = o.borderColor.call(this, s), t.globalAlpha = o.alpha.call(this, s), t.beginPath(), this.QC(t, i, e, a + 1, c), t.fill(), t.stroke(), t.globalAlpha = 1
            }
            if (n && this.canvases[h].renderTextAt(!1, !0, i, e - a - this.B.labelOffset, this.B.label.call(this, s)), r) {
                var d = this.B.eventRadius || a + 1;
                r.addRect(s.id, [i - d - u.x, e - d - u.y, i + d - u.x, e + d - u.y], h)
            }
        }, QC: function (t, i, e, s, n) {
            var h = [];
            if (!n || "square" != n && "s" != n) if (!n || "diamond" != n && "d" != n) h = !n || "triangle" != n && "t" != n ? [[i, e, s, 0, 2 * Math.PI, !0]] : [[i, e - s], [i + Math.sqrt(3) * s / 2, e + s / 2], [i - Math.sqrt(3) * s / 2, e + s / 2], [i, e - s]]; else {
                var r = 1 < t.lineWidth ? t.lineWidth * Math.sqrt(2) / 4 : 0;
                h = [[i, e - s], [i + s, e], [i, e + s], [i - s, e], [i + r, e - s - r]]
            } else h = [[i - (s *= Math.sqrt(2) / 2) - t.lineWidth / 2, e - s], [i + s, e - s], [i + s, e + s], [i - s, e + s], [i - s, e - s]];
            this.t$(t, h)
        }, XC: function (t, i, e, s) {
            var n = s.minValue, h = s.maxValue, r = s.unit, o = s.valueFactor, a = this.B.value(t);
            this.EC && (a = this.NC(a));
            var u = (parseFloat(a || 0) - n) * o;
            this.B.yAxis || (u += s.startValue / r);
            var c = e.y - r * u;
            return !this.B.fixOverflow || "line" != this.B.type && "area" != this.B.type ? (h < a && (c = i.y), (u < 0 || a < n) && (c = e.y)) : h < a ? c = {
                y: i.y,
                y0: c,
                out: "max"
            } : (u < 0 || a < n) && (c = {y: e.y, y0: c, out: "min"}), c
        }, GC: function (t, i, e, s, n) {
            var h, r = {};
            r.totalHeight = s.y - e.y, this.B.cellWidth ? r.cellWidth = Math.min(s.x - e.x, this.B.cellWidth) : r.cellWidth = (s.x - e.x) / (this.B.offset ? i.length : i.length - 1);
            var o = !!this.B.yAxis, a = -1 != this.B.type.indexOf("stacked") ? this.i$(i) : this.HC();
            r.maxValue = a.max, r.minValue = a.min, n || this.RC(i, e, s, r.minValue, r.maxValue, r.cellWidth), o && (r.maxValue = parseFloat(this.B.yAxis.end), r.minValue = parseFloat(this.B.yAxis.start));
            var u = this.BC(r.minValue, r.maxValue);
            return h = u[0], r.valueFactor = u[1], r.unit = h ? r.totalHeight / h : 10, r.startValue = 0, o || (r.startValue = 10, r.unit != r.totalHeight && (r.unit = h ? (r.totalHeight - r.startValue) / h : 10)), r
        }
    }, Wr = {
        $render_barH: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m, b, g, w, x, y, M, S, k, C;
            for (a = (s.y - e.y) / i.length, d = (l = this.HC("h")).max, v = l.min, x = s.x - e.x, C = !!this.B.xAxis, n || this.e$(t, i, e, s, v, d, a), C && (d = parseFloat(this.B.xAxis.end), v = parseFloat(this.B.xAxis.start)), m = (g = this.BC(v, d))[0], p = g[1], M = m ? x / m : 10, C || (w = 10, M = m ? (x - w) / m : 10), (o = parseInt(this.B.barWidth, 10)) * this.jC.length + 4 > a && (o = a / this.jC.length - 4), r = Math.floor((a - o * this.jC.length) / 2), b = "undefined" != typeof this.B.radius ? parseInt(this.B.radius, 10) : Math.round(o / 5), _ = !1, (c = this.B.gradient) && "function" != typeof c ? (_ = c, c = !1) : c && (c = t.createLinearGradient(e.x, e.y, s.x, e.y), this.B.gradient(c)), C || this.SC(t, e.x - .5, e.y, e.x - .5, s.y, "#edeff0", 1), f = 0; f < i.length; f++) if (y = parseFloat(this.B.value(i[f] || 0)), this.EC && (y = this.NC(y)), y && !isNaN(y)) if (d < y && (y = d), y -= v, y *= p, S = e.x, k = e.y + r + f * a + (o + 1) * n, y < 0 && "auto" == this.B.origin || this.B.xAxis && 0 === y && !("auto" != this.B.origin && this.B.origin > v)) this.canvases[n].renderTextAt("middle", "right", S + 10, k + o / 2 + r, this.B.label(i[f])); else {
                y < 0 && "auto" != this.B.origin && this.B.origin > v && (y = 0), C || (y += w / M), u = c || this.B.color.call(this, i[f]), this.B.border && this.s$(t, S, k, o, v, b, M, y, u), t.globalAlpha = this.B.alpha.call(this, i[f]);
                var $ = this.n$(t, s
                    , S, k, o, v, b, M, y, u, c, _);
                _ && this.h$(t, S, k, o, v, b, M, y, u, _), t.globalAlpha = 1, $[3] == k ? (this.canvases[n].renderTextAt("middle", "left", $[0] - 5, $[3] + Math.floor(o / 2), this.B.label(i[f])), h.addRect(i[f].id, [$[0] - e.x, $[3] - e.y, $[2] - e.x, $[3] + o - e.y], n)) : (this.canvases[n].renderTextAt("middle", !1, $[2] + 5, $[1] + Math.floor(o / 2), this.B.label(i[f])), h.addRect(i[f].id, [$[0] - e.x, k - e.y, $[2] - e.x, $[3] - e.y], n))
            }
        }, r$: function (t, i, e, s, n, h, r, o, a) {
            var u = 0;
            if (h * r < n) {
                var c = (n - h * r) / n;
                u = -Math.asin(c) + Math.PI / 2
            }
            t.moveTo(i, e + o);
            var f = i + h * r - n - (n ? 0 : o);
            f = Math.max(i, f), n < h * r && t.lineTo(f, e + o);
            var l = e + n;
            n && 0 < n && t.arc(f, l, n - o, -Math.PI / 2 + u, 0, !1);
            var d = e + s - n - (n ? 0 : o), v = f + n - (n ? o : 0);
            t.lineTo(v, d), n && 0 < n && t.arc(f, d, n - o, 0, Math.PI / 2 - u, !1);
            var _ = e + s - o;
            return t.lineTo(i, _), a || t.lineTo(i, e + o), [v, _]
        }, e$: function (t, i, e, s, n, h, r) {
            var o = 0;
            this.B.xAxis && (this.canvases.x || (this.canvases.x = this.o$("axis_x")), o = this.a$(this.canvases.x.getCanvas(), i, e, s, n, h)), this.B.yAxis && (this.canvases.y || (this.canvases.y = this.o$("axis_y")), this.u$(this.canvases.y.getCanvas(), i, e, s, r, o))
        }, u$: function (t, i, e, s, n, h) {
            if (this.B.yAxis) {
                var r, o = parseInt(h || e.x, 10) - .5, a = s.y + .5, u = e.y;
                this.SC(t, o, a, o, u, this.B.yAxis.color, 1);
                for (var c = 0; c < i.length; c++) {
                    var f = "auto" != this.B.origin && "barH" == this.B.type && parseFloat(this.B.value(i[c])) < this.B.origin;
                    r = u + n / 2 + c * n, this.canvases.y.renderTextAt("middle", !f && "left", f ? o + 5 : o - 5, r, this.B.yAxis.template(i[c]), "webix_axis_item_y", f ? 0 : o - 10), this.B.yAxis.lines.call(this, i[c]) && this.SC(t, e.x, r, s.x, r, this.B.yAxis.lineColor.call(this, i[c]), 1)
                }
                this.B.yAxis.lines.call(this, {}) && this.SC(t, e.x + .5, u + .5, s.x, u + .5, this.B.yAxis.lineColor.call(this, {}), 1), this.c$(e, s)
            }
        }, a$: function (t, i, e, s, n, h) {
            var r, o = {}, a = this.B.xAxis;
            if (a) {
                var u = s.y + .5, c = e.x - .5, f = s.x - .5, l = e.x;
                if (this.SC(t, c, u, f, u, a.color, 1), a.step && (r = parseFloat(a.step)), "undefined" != typeof this.f$.step && "undefined" != typeof this.f$.start && "undefined" != typeof this.f$.end || (n = (o = this.l$(n, h)).start, h = o.end, r = o.step, this.B.xAxis.end = h, this.B.xAxis.start = n, this.B.xAxis.step = r), 0 !== r) {
                    for (var d = (f - c) * r / (h - n), v = 0, _ = n; _ <= h; _ += r) {
                        var p = this.EC ? Math.pow(10, _) : _;
                        o.fixNum && (p = parseFloat(p).toFixed(o.fixNum));
                        var m = Math.floor(c + v * d) + .5;
                        if (_ == n && "auto" == this.B.origin || !a.lines.call(this, _) || this.SC(t, m, u, m, e.y, this.B.xAxis.lineColor.call(this, _), 1), _ == this.B.origin && (l = m + 1), r < 1 && !this.EC) {
                            var b = Math.min(Math.floor(this.NC(r)), n <= 0 ? 0 : Math.floor(this.NC(n))),
                                g = Math.pow(10, -b);
                            _ = p = Math.round(p * g) / g
                        }
                        this.canvases.x.renderTextAt(!1, !0, m, u + 2, a.template(p.toString()), "webix_axis_item_x"), v++
                    }
                    return this.canvases.x.renderTextAt(!0, !1, c, s.y + this.B.padding.bottom - 3, this.B.xAxis.title, "webix_axis_title_x", s.x - e.x), l
                }
            }
        }, d$: function (t, i, e, s, n, h, r) {
            var o = i;
            return this.B.yAxis && "auto" != this.B.origin && this.B.origin > r && (o = i += (this.B.origin - r) * n, (s -= this.B.origin - r) < 0 && (s *= -1, t.translate(i, e + h), t.rotate(Math.PI), i = .5, e = 0), i += .5), {
                value: s,
                x0: i,
                y0: e,
                start: o
            }
        }, n$: function (t, i, e, s, n, h, r, o, a, u, c, f) {
            t.save();
            var l = this.d$(t, e, s, a, o, n, h);
            t.fillStyle = u, t.beginPath();
            var d = this.r$(t, l.x0, l.y0, n, r, o, l.value, this.B.border ? 1 : 0);
            c && !f && t.lineTo(i.x, l.y0 + (this.B.border ? 1 : 0)), t.fill(), t.restore();
            var v = l.y0, _ = l.y0 != s ? s : d[1];
            return [l.y0 != s ? l.start - d[0] : l.start, v, l.y0 != s ? l.start : d[0], _]
        }, s$: function (t, i, e, s, n, h, r, o, a) {
            t.save();
            var u = this.d$(t, i, e, o, r, s, n);
            t.beginPath(), this.YC(t, a), t.globalAlpha = .9, this.r$(t, u.x0, u.y0, s, h, r, u.value, t.lineWidth / 2, 1), t.stroke(), t.restore()
        }, h$: function (t, i, e, s, n, h, r, o, a, u) {
            t.save();
            var c = this.d$(t, i, e, o, r, s, n), f = this.qC(t, c.x0, c.y0 + s, c.x0 + r * c.value, c.y0, u, a, "x");
            t.fillStyle = f.gradient, t.beginPath(), this.r$(t, c.x0, c.y0 + f.offset, s - 2 * f.offset, h, r, c.value, f.offset), t.fill(), t.globalAlpha = 1, t.restore()
        }
    }, Yr = {
        $render_stackedBar: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d = this.B, v = s.y - e.y, _ = !!d.yAxis, p = !!d.xAxis, m = this.i$(i),
                b = 0 === d.origin;
            r = m.max, o = m.min;
            var g = Math.floor((s.x - e.x) / i.length);
            n || (a = this.RC(i, e, s, o, r, g)), _ && (r = parseFloat(d.yAxis.end), o = parseFloat(d.yAxis.start));
            var w = this.BC(o, r);
            l = w[0], f = w[1];
            var x = l ? v / l : 10, y = parseInt(d.barWidth, 10);
            g < y + 4 && (y = g - 4);
            var M = Math.floor((g - y) / 2), S = !!d.gradient && d.gradient;
            p || this.SC(t, e.x, s.y + .5, s.x, s.y + .5, "#edeff0", 1)
            ;
            for (var k = 0; k < i.length; k++) {
                var C = Math.abs(parseFloat(d.value(i[k] || 0)));
                this.EC && (C = this.NC(C)), u = e.x + M + k * g;
                var $ = b && C < 0;
                if (n ? c = $ ? i[k].$startYN : i[k].$startY : (c = a - 1, i[k].$startY = c, b && ($ && (c = a + 1), i[k].$startYN = a + 1)), C && !isNaN(C) && (n || b || (C -= o), C *= f, !(c < e.y + 1))) {
                    var D = this.B.color.call(this, i[k]), I = Math.abs(c - (b ? s.y + o * x : s.y)) < 3;
                    t.globalAlpha = d.alpha.call(this, i[k]), t.fillStyle = t.strokeStyle = d.color.call(this, i[k]), t.beginPath();
                    var A = c - x * C + (I ? $ ? -1 : 1 : 0),
                        F = this.v$(t, u - (d.border ? .5 : 0), c, y + (d.border ? .5 : 0), A, 0, e.y);
                    if (t.fill(), t.stroke(), S) {
                        t.save();
                        var T = this.qC(t, u, c, u + y, F[1], S, D, "y");
                        t.fillStyle = T.gradient, t.beginPath(), F = this.v$(t, u + T.offset, c, y - 2 * T.offset, A, d.border ? 1 : 0, e.y), t.fill(), t.restore()
                    }
                    d.border && (t.save(), "string" == typeof d.border ? t.strokeStyle = d.border : this.YC(t, D), t.beginPath(), this.v$(t, u - .5, parseInt(c, 10) + .5, y + 1, parseInt(A, 10) + .5, 0, e.y, I), t.stroke(), t.restore()), t.globalAlpha = 1, this.canvases[n].renderTextAt(!1, !0, u + Math.floor(y / 2), F[1] + (c - F[1]) / 2 - 7, this.B.label(i[k])), h.addRect(i[k].id, [u - e.x, F[1] - e.y, F[0] - e.x, i[k][$ ? "$startYN" : "$startY"] - e.y], n), i[k][$ ? "$startYN" : "$startY"] = F[1]
                }
            }
        }, v$: function (t, i, e, s, n, h, r, o) {
            t.moveTo(i, e), n < r && (n = r), t.lineTo(i, n);
            var a = i + s, u = n;
            t.lineTo(a, u);
            var c = i + s;
            return t.lineTo(c, e), o || t.lineTo(i, e), [c, u]
        }
    }, qr = {
        $render_stackedBarH: function (t, i, e, s, n, h) {
            var r, o, a, u, c = s.x - e.x, f = !!this.B.yAxis, l = this.i$(i);
            r = l.max, o = l.min;
            var d = Math.floor((s.y - e.y) / i.length);
            n || this.e$(t, i, e, s, o, r, d), f && (r = parseFloat(this.B.xAxis.end), o = parseFloat(this.B.xAxis.start));
            var v = this.BC(o, r);
            u = v[0], a = v[1];
            var _ = u ? c / u : 10, p = 0;
            f || (p = 10, _ = u ? (c - p) / u : 10);
            var m = parseInt(this.B.barWidth, 10);
            d < m + 4 && (m = d - 4);
            var b = (d - m) / 2, g = !1, w = this.B.gradient;
            w && (g = !0), f || this.SC(t, e.x - .5, e.y, e.x - .5, s.y, "#edeff0", 1);
            var x = 0, y = 0;
            for (M = 0; M < this.jC.length; M++) M == n && (y = x), "stackedBarH" == this.jC[M].type && x++;
            for (var M = 0; M < i.length; M++) {
                y || (i[M].$startX = e.x);
                var S = Math.abs(parseFloat(this.B.value(i[M] || 0)));
                r < S && (S = r), S -= o, S *= a;
                var k = e.x, C = e.y + b + M * d;
                if (y ? k = i[M].$startX : i[M].$startX = k, S && !isNaN(S)) {
                    f || (S += p / _);
                    var $ = this.B.color.call(this, i[M]);
                    t.globalAlpha = this.B.alpha.call(this, i[M]), t.fillStyle = this.B.color.call(this, i[M]), t.beginPath();
                    var D = this.r$(t, k, C, m, 0, _, S, 0);
                    if (w && !g && t.lineTo(e.x + c, C + (this.B.border ? 1 : 0)), t.fill(), g) {
                        var I = this.qC(t, k, C + m, k, C, g, $, "x");
                        t.fillStyle = I.gradient, t.beginPath(), D = this.r$(t, k, C, m, 0, _, S, 0), t.fill()
                    }
                    this.B.border && this.s$(t, k, C, m, o, 0, _, S, $), t.globalAlpha = 1, this.canvases[n].renderTextAt("middle", !0, i[M].$startX + (D[0] - i[M].$startX) / 2 - 1, C + (D[1] - C) / 2, this.B.label(i[M])), h.addRect(i[M].id, [i[M].$startX - e.x, C - e.y, D[0] - e.x, D[1] - e.y], n), i[M].$startX = D[0]
                }
            }
        }
    }, Gr = {
        $render_area: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m, b, g, w;
            if (f = this.GC(t, i, e, s, n), u = (o = this.B).eventRadius || Math.floor(f.cellWidth / 2), i.length) {
                for (l = [], _ = o.offset ? e.x + .5 * f.cellWidth : e.x, a = 0; a < i.length; a++) if (c = i[a], v = this.XC(c, e, s, f), b = _ + f.cellWidth * a, v) {
                    if (g = "object" == M(v) ? v.y0 : v, a && this.B.fixOverflow) {
                        if ((d = this.XC(i[a - 1], e, s, f)).out && d.out == v.out) continue;
                        p = f.cellWidth * (a - 1) - .5 + _, m = "object" == M(d) ? d.y0 : d, d.out && (w = "min" == d.out ? s.y : e.y, l.push([this.JC(p, b, m, g, w), w])), v.out && (w = "min" == v.out ? s.y : e.y, l.push([this.JC(p, b, m, g, w), w]), a == i.length - 1 && w == e.y && l.push([b, e.y]))
                    }
                    v.out || (l.push([b, g]), h.addRect(c.id, [b - u - e.x, g - u - e.y, b + u - e.x, g + u - e.y], n)), o.yAxis || (r = o.offset || a != i.length - 1 ? "center" : "left", this.canvases[n].renderTextAt(!1, r, b, g - o.labelOffset, o.label(c)))
                }
                l.length && (l.push([b, s.y]), l.push([l[0][0], s.y])), t.globalAlpha = this.B.alpha.call(this, i[0]), t.fillStyle = this.B.color.call(this, i[0]), t.beginPath(), this.t$(t, l), t.fill(), t.lineWidth = 1, t.globalAlpha = 1, o.border && (t.lineWidth = o.borderWidth || 1, o.borderColor ? t.strokeStyle = o.borderColor.call(this, i[0]) : this.YC(t, t.fillStyle), t.beginPath(), this.t$(t, l), t.stroke())
            }
        }, $render_stackedArea: function (t, e, i, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m, b, g, w, x, y;
            if (v = this.GC(t, e, i, s, n), l = (u = this.B).eventRadius || Math.floor(v.cellWidth / 2), e.length) {
                _ = [], b = [], p = u.offset ? i.x + .5 * v.cellWidth : i.x;
                var M = function (t, i) {
                    return n ? e[t].$startY ? i - s.y + e[t].$startY : 0 : i
                };
                for (c = 0; c < e.length; c++) d = e[c], c ? p += v.cellWidth : (m = M(c, s.y),
                    _.push([p, m])), m = M(c, this.XC(d, i, s, v)), b.push(isNaN(m) && !c ? e[c].$startY || s.y : m), m && (_.push([p, m]), h.addRect(d.id, [p - l - i.x, m - l - i.y, p + l - i.x, m + l - i.y], n), u.yAxis || (u.offset, a = "center", this.canvases[n].renderTextAt(!1, a, p, m - u.labelOffset, u.label(d))));
                if (_.push([p, M(c - 1, s.y)]), n) for (c = e.length - 2; 0 < c; c--) p -= v.cellWidth, (m = e[c].$startY) && _.push([p, m]);
                for (_.push([_[0][0], _[0][1]]), t.globalAlpha = this.B.alpha.call(this, e[0]), t.fillStyle = this.B.color.call(this, e[0]), t.beginPath(), this.t$(t, _), t.fill(), c = 0; c < e.length; c++) {
                    if (!(m = b[c])) for (c == e.length - 1 && (m = e[c].$startY), f = c + 1; f < e.length; f++) if (b[f]) {
                        r = {x: i.x, y: b[0]}, o = {
                            x: i.x + v.cellWidth * f,
                            y: b[f]
                        }, g = i.x + v.cellWidth * c, void 0, m = (y = ((x = o).y - (w = r).y) / (x.x - w.x)) * g + w.y - y * w.x;
                        break
                    }
                    e[c].$startY = m
                }
            }
        }
    }, Xr = {
        $render_radar: function (t, i, e, s, n, h) {
            this._$(t, i, e, s, n, h)
        }, _$: function (t, i, e, s, n, h) {
            if (i.length) {
                for (var r = this.CC(e, s), o = this.B.radius ? this.B.radius : r.radius, a = this.B.x ? this.B.x : r.x, u = this.B.y ? this.B.y : r.y, c = [], f = 0; f < i.length; f++) c.push(1);
                var l = this.Pc(c, i.length);
                this.KC = e, n || this.p$(l, a, u, o, i), this.m$(t, l, a, u, o, i, n, h)
            }
        }, m$: function (t, i, e, s, n, h, r, o) {
            var a, u, c, f, l, d, v, _, p, m, b, g, w, x, y, M, S, k, C;
            for (l = (c = this.B).yAxis.start, d = c.yAxis.end, k = (g = (C = this.BC(l, d))[0]) ? n / g : n / 2, S = C[1], a = u = w = -Math.PI / 2, p = [], f = _ = 0; f < h.length; f++) y = M || (x = c.value(h[f]), this.EC && (x = this.NC(x)), (parseFloat(x || 0) - l) * S), m = Math.floor(k * y), x = c.value(f != h.length - 1 ? h[f + 1] : h[0]), this.EC && (x = this.NC(x)), M = (parseFloat(x || 0) - l) * S, b = Math.floor(k * M), a = u, u = f != h.length - 1 ? w + i[f] - 1e-4 : w, v = _ || this.TC(a, e, s, m), _ = this.TC(u, e, s, b), p.push(v);
            c.fill && this.b$(t, p, h), !c.disableLines && 2 < h.length && this.g$(t, p, h), (!c.disableItems || h.length < 3) && this.w$(t, p, h, r, o), p = null
        }, w$: function (t, i, e, s, n) {
            for (var h = 0; h < i.length; h++) this.ZC(t, i[h].x, i[h].y, e[h], this.B.label.call(this, e), s, n)
        }, b$: function (t, i, e) {
            var s, n;
            t.globalAlpha = this.B.alpha.call(this, {}), t.beginPath();
            for (var h = 0; h < i.length; h++) t.fillStyle = this.B.fill.call(this, e[h]), s = i[h], n = i[h + 1] || i[0], h || t.moveTo(s.x, s.y), t.lineTo(n.x, n.y);
            t.fill(), t.globalAlpha = 1
        }, g$: function (t, i, e) {
            for (var s, n, h = 0; h < i.length; h++) s = i[h], n = i[h + 1] || i[0], this.SC(t, s.x, s.y, n.x, n.y, this.B.line.color.call(this, e[h]), this.B.line.width)
        }, p$: function (t, i, e, s, n) {
            var h = this.B.yAxis, r = this.B.xAxis, o = h.start, a = h.end, u = h.step, c = {}, f = this.x$;
            if ("undefined" == typeof f.step || "undefined" == typeof f.start || "undefined" == typeof f.end) {
                var l = this.HC();
                o = (c = this.l$(l.min, l.max)).start, a = c.end, u = c.step, h.end = a, h.start = o
            }
            var d, v, _, p, m, b = [], g = 0, w = s * u / (a - o);
            u < 1 && (p = Math.min(this.NC(u), o <= 0 ? 0 : this.NC(o)), m = Math.pow(10, -p));
            var x = [];
            this.canvases.scale || (this.canvases.scale = this.o$("radar_scale"));
            var y = this.canvases.scale.getCanvas();
            for (d = a; o <= d; d -= u) {
                var M = this.EC ? Math.pow(10, d) : d;
                c.fixNum && (M = parseFloat(d).toFixed(c.fixNum)), b.push(Math.floor(g * w) + .5), m && !this.EC && (d = M = Math.round(M * m) / m);
                var S = e - s + b[b.length - 1];
                this.canvases.scale.renderTextAt("middle", "left", i, S, h.template(M.toString()), "webix_axis_item_y webix_radar");
                var k, C = -Math.PI / 2, $ = C;
                for (v = 0; v < t.length; v++) g || x.push($), k = C + t[v] - 1e-4, this.y$(y, 2 < t.length ? f.lineShape || "line" : "arc", i, e, s - b[b.length - 1], $, k, d, v, n[d]), $ = k;
                g++
            }
            for (d = 0; d < x.length; d++) _ = this.TC(x[d], i, e, s), r.lines.call(this, n[d], d) && this.SC(y, i, e, _.x, _.y, r ? r.lineColor.call(this, n[d]) : "#cfcfcf", 1), this.M$(y, i, e, s, x[d], r ? r.template.call(this, n[d]) : "&nbsp;")
        }, y$: function (t, i, e, s, n, h, r, o, a) {
            var u, c;
            if (n < 0) return !1;
            u = this.TC(h, e, s, n), c = this.TC(r, e, s, n);
            var f = this.B.yAxis;
            f.bg && (t.beginPath(), t.moveTo(e, s), "arc" == i ? t.arc(e, s, n, h, r, !1) : (t.lineTo(u.x, u.y), t.lineTo(c.x, c.y)), t.fillStyle = f.bg(o, a), t.moveTo(e, s), t.fill(), t.closePath()), f.lines.call(this, o) && (t.lineWidth = 1, t.beginPath(), "arc" == i ? t.arc(e, s, n, h, r, !1) : (t.moveTo(u.x, u.y), t.lineTo(c.x, c.y)), t.strokeStyle = f.lineColor.call(this, o), t.stroke())
        }, M$: function (t, i, e, s, n, h) {
            if (!h) return !1;
            var r = this.canvases.scale.renderText(0, 0, h, "webix_axis_radar_title", 1), o = r.scrollWidth,
                a = r.offsetHeight, u = this.TC(n, i, e, s + 5), c = 0, f = 0;
            (n < 0 || n > Math.PI) && (f = -a), n > Math.PI / 2 && (c = -o), Math.abs(n + Math.PI / 2) < .001 || Math.abs(n - Math.PI / 2) < .001 ? c = -o / 2 : (Math.abs(n) < .001 || Math.abs(n - Math.PI) < .001) && (f = -a / 2),
                r.style.top = u.y + f + "px", r.style.left = u.x + c + "px", r.style.width = o + "px", r.style.whiteSpace = "nowrap"
        }
    }, Jr = {
        $render_scatter: function (t, i, e, s, n, h) {
            if (this.B.xValue) {
                var r = this.B, o = !(r.disableLines || "undefined" == typeof r.disableLines), a = this.HC(),
                    u = this.HC("h", "xValue");
                n || (this.canvases.x || (this.canvases.x = this.o$("axis_x")), this.canvases.y || (this.canvases.y = this.o$("axis_y")), this.S$(this.canvases.y.getCanvas(), i, e, s, a.min, a.max), this.a$(this.canvases.x.getCanvas(), i, e, s, u.min, u.max)), a = {
                    min: r.yAxis.start,
                    max: r.yAxis.end
                }, u = {min: r.xAxis.start, max: r.xAxis.end};
                var c = this.k$(t, i, e, s, u, a);
                this.KC = e;
                for (var f, l, d, v, _, p = [], m = 0; m < i.length; m++) {
                    var b = this.C$(c, s, e, u, i[m], "X"), g = this.C$(c, e, s, a, i[m], "Y");
                    isNaN(b) || isNaN(g) || p.push({x: b, y: g, index: m})
                }
                for (var w = 0; w < p.length; w++) {
                    if (_ = p[w].index, o) {
                        var x = r.line.color.call(this, i[_]);
                        f = p[w].x, l = p[w].y, w == p.length - 1 ? r.shape && 2 < p.length && (this.SC(t, d, v, p[0].x, p[0].y, x, r.line.width), r.disableItems || this.D$(t, h, p[0], i[0], n), r.fill && this.I$(t, p, i)) : (d = p[w + 1].x, v = p[w + 1].y, this.SC(t, f, l, d, v, x, r.line.width))
                    }
                    !r.disableItems && p[w] && this.D$(t, h, p[w], i[_], n)
                }
            }
        }, I$: function (t, i, e) {
            var s, n;
            t.globalAlpha = this.B.alpha.call(this, {}), t.beginPath();
            for (var h = 0; h < i.length; h++) t.fillStyle = this.B.fill.call(this, e[h]), s = i[h], n = i[h + 1] || i[0], h || t.moveTo(s.x, s.y), t.lineTo(n.x, n.y);
            t.fill(), t.globalAlpha = 1
        }, k$: function (t, i, e, s, n, h) {
            var r = {};
            return r.totalHeight = s.y - e.y, r.totalWidth = s.x - e.x, this.A$(r, n.min, n.max, r.totalWidth, "X"), this.A$(r, h.min, h.max, r.totalHeight, "Y"), r
        }, D$: function (t, i, e, s, n) {
            this.ZC(t, e.x, e.y, s, this.B.label.call(this, s), n, i)
        }, C$: function (t, i, e, s, n, h) {
            var r = this.B["X" == h ? "xValue" : "value"].call(this, n), o = t["valueFactor" + h],
                a = (parseFloat(r || 0) - s.min) * o, u = t["unit" + h],
                c = e[h.toLowerCase()] - ("X" == h ? -1 : 1) * Math.floor(u * a);
            return a < 0 && (c = e[h.toLowerCase()]), r > s.max && (c = i[h.toLowerCase()]), r < s.min && (c = e[h.toLowerCase()]), c
        }, A$: function (t, i, e, s, n) {
            var h = this.BC(i, e);
            t["relValue" + (n = n || "")] = h[0], t["valueFactor" + n] = h[1], t["unit" + n] = t["relValue" + n] ? s / t["relValue" + n] : 10
        }
    }, Kr = {
        $render_splineArea: function (t, i, e, s, n, h) {
            var r, o, a, u, c, f, l, d, v, _, p, m, b, g = this.B, w = [];
            if (f = this.GC(t, i, e, s, n), c = g.eventRadius || Math.floor(f.cellWidth / 2), a = [], i.length) {
                for (v = e.x, o = 0; o < i.length; o++) ((m = this.XC(i[o], e, s, f)) || "0" == m) && (d = o ? f.cellWidth * o - .5 + v : v, a.push({
                    x: d,
                    y: m,
                    index: o
                }), h.addRect(i[o].id, [d - c - e.x, m - c - e.y, d + c - e.x, m + c - e.y], n));
                for (l = this.F$(a), o = 0; o < a.length; o++) if (_ = a[o].x, o < a.length - 1) {
                    for (p = a[o + 1].x, b = a[o + 1].y, u = _; u < p; u++) {
                        var x = this.T$(u, _, o, l.a, l.b, l.c, l.d);
                        x < e.y && (x = e.y), x > s.y && (x = s.y);
                        var y = this.T$(u + 1, _, o, l.a, l.b, l.c, l.d);
                        y < e.y && (y = e.y), y > s.y && (y = s.y), w.push([u, x]), w.push([u + 1, y])
                    }
                    w.push([p, b])
                }
                r = this.B.color.call(this, i[0]), w.length && (w.push([p, s.y]), w.push([w[0][0], s.y])), t.globalAlpha = this.B.alpha.call(this, i[0]), t.fillStyle = r, t.beginPath(), this.t$(t, w), t.fill(), t.lineWidth = 1, t.globalAlpha = 1, g.border && (t.lineWidth = g.borderWidth || 1, g.borderColor ? t.strokeStyle = g.borderColor.call(this, i[0]) : this.YC(t, r), t.beginPath(), w.splice(w.length - 3), this.t$(t, w), t.stroke())
            }
        }
    }, Zr = {
        dynamic_setter: function (t) {
            return t && function i(r) {
                if (r.V$) return;
                var o = r.B;
                o.cellWidth || (o.cellWidth = 30);
                o.animateDuration || (o.animateDuration = 400);
                o.offset = !1, r.V$ = r.attachEvent("onBeforeRender", function (t, i) {
                    var e = r.z$(r.oe, r.ue);
                    !function s(e) {
                        to(e, function (t, i) {
                            i.De(e.oe + 2 * e.B.cellWidth, e.ue)
                        })
                    }(r), function h(t, i, e, s) {
                        if (s && t.length) {
                            var n = Math.ceil((e.x - i.x) / s);
                            t.length > n + 1 && t.splice(0, t.length - n - 1)
                        }
                    }(t, e.start, e.end, o.cellWidth), "add" == i && function n(i) {
                        var t = i.B.cellWidth;
                        i.H$ != t && (i.H$ = t, i.render());
                        i.H$ = 0, i.R$ = null, window.requestAnimationFrame && !document.hidden && window.requestAnimationFrame(function (t) {
                            !function h(i, t) {
                                var e, s = i.B.animateDuration, n = i.B.cellWidth;
                                n && 1 < i.count() && (i.R$ || (i.R$ = t), e = t - i.R$, i.H$ = Math.min(Math.max(e / s * n, 1), n), i.render(), e < s && window.requestAnimationFrame(function (t) {
                                    h(i, t)
                                }))
                            }(i, t)
                        });
                        i.B$ || (i.B$ = i.attachEvent("onAfterRender", function (t) {
                            !function h(t, c) {
                                var f = t.count(), e = t.z$(t.oe, t.ue), l = t.B.cellWidth, d = t.H$ || 0,
                                    i = c.length < f || (c.length - 1) * l > e.end.x - e.start.x;

                                function s(t, i, e, s) {
                                    var n = t.getCanvas(), h = t.Ce, r = t.ye, o = t.Me
                                    ;
                                    if (d && (c.length < f || (c.length - 1) * l > e - i) ? (h.style.left = -d + "px", 1 < c.length && (!function u(t, i, e) {
                                        if (t.length) {
                                            lt(t[0]);
                                            for (var s = 1; s < t.length; s++) Qr(e, t[s]) || (t[s].style.left = t[s].offsetLeft - i + "px")
                                        }
                                    }(r, d, o), n.clearRect(0, 0, i + d, h.offsetHeight), n.clearRect(e + d, 0, h.offsetWidth, h.offsetHeight))) : (h.style.left = "0px", s || d == l || n.clearRect(i + (c.length - 1) * l - l + d, 0, h.offsetWidth, h.offsetHeight)), 1 < r.length && d && d != l) {
                                        var a = r.length - 1;
                                        Qr(o, r[a]) && (a -= 1), r[a].style.display = "none"
                                    }
                                }

                                to(t, function (t, i) {
                                    s(i, e.start.x, e.end.x, "x" == t)
                                }), function n(t, i, e) {
                                    t.Vi.Ai.style.left = i.start.x - e + "px", t.Vi.Ai.style.width = i.end.x - i.start.x + e + "px"
                                }(t, e, i ? d : 0)
                            }(i, t)
                        }))
                    }(r)
                }), r.P$ = r.attachEvent("onBeforeXAxis", function (t, i, e, s, n, h) {
                    return function _(t, i, e, s, n, h, r) {
                        var o, a, u, c, f = t.B, l = s.x - .5, d = parseInt(r || n.y, 10) + .5, v = n.x;
                        if (!f.dynamic) return !1;
                        for (u = (e.length - 1) * h > v - l || e.length < t.count(), a = 0; a < e.length; a++) c = l + a * h, o = u ? 1 < a : !!a, c = Math.ceil(c) - .5, t.j$(c, d, e[a], o), a && f.xAxis.lines.call(t, e[a]) && t.E$(i, c, n.y, s.y, e[a]);
                        t.canvases.x.renderTextAt(!0, !1, l, n.y + f.padding.bottom - 3, f.xAxis.title, "webix_axis_title_x", n.x - s.x), t.SC(i, l, d, v + (u ? t.H$ : 0), d, f.xAxis.color, 1)
                    }(r, t, i, e, s, n, h), !1
                })
            }(this), t
        }
    };

    function Qr(t, i) {
        return "axis_x" === t && -1 !== i.className.indexOf("webix_axis_title_x")
    }

    function to(t, i) {
        if (t.canvases) {
            for (var e = 0; e < t.jC.length; e++) t.canvases[e] && i(e, t.canvases[e]);
            t.canvases.x && i("x", t.canvases.x)
        }
    }

    var io = {
        name: "chart",
        $init: function (t) {
            if (this.jC = [this.B], this.N$ = [], this.Vi.className += " webix_chart", this.$ready.push(this.Gh), t.preset && this.L$(t), t.series) {
                var i = t.series;
                delete t.series, t.series = i
            }
            this.data.provideApi(this, !0)
        },
        Gh: function () {
            this.data.attachEvent("onStoreUpdated", S(function () {
                this.render.apply(this, arguments)
            }, this))
        },
        defaults: {
            ariaLabel: "chart",
            color: "default",
            alpha: "1",
            radius: 0,
            label: !1,
            value: "{obj.value}",
            padding: {},
            type: "pie",
            lineColor: "#ffffff",
            cant: .5,
            barWidth: 30,
            line: {width: 2, color: "#1ca1c1"},
            item: {
                radius: 3,
                borderColor: "#1ca1c1",
                borderWidth: 2,
                color: "#ffffff",
                alpha: 1,
                type: "r",
                shadow: !1
            },
            shadow: !1,
            gradient: !1,
            border: !1,
            labelOffset: 20,
            origin: "auto",
            scale: "linear"
        },
        Eo: "webix_area_id",
        on_click: {
            webix_chart_legend_item: function (t, i, e) {
                var s = e.getAttribute("series_id");
                if (this.callEvent("onLegendClick", [t, s, e]) && void 0 !== s && 1 < this.jC.length) {
                    var n = this.B, h = n.legend.values;
                    (h && h[s].toggle || n.legend.toggle) && (-1 != e.className.indexOf("hidden") ? this.showSeries(s) : this.hideSeries(s))
                }
            }
        },
        on_dblclick: {},
        on_mouse_move: {},
        locate: function (t) {
            return vt(t, this.Eo)
        },
        $setSize: function (t, i) {
            var e = zi.api.$setSize.call(this, t, i);
            if (e) {
                for (var s in this.canvases) this.canvases[s].De(this.oe, this.ue);
                this.render()
            }
            return e
        },
        type_setter: function (t) {
            return this["$render_" + t], "undefined" == typeof this.B.offset && (this.B.offset = !(-1 != t.toLowerCase().indexOf("area"))), "radar" != t || this.B.yAxis || this.define("yAxis", {}), "scatter" == t && (this.B.yAxis || this.define("yAxis", {}), this.B.xAxis || this.define("xAxis", {})), t
        },
        destructor: function () {
            this.removeAllSeries(), Mi.destructor.apply(this, arguments)
        },
        removeAllSeries: function () {
            this.clearCanvas(), this.O$ && (this.O$.innerHTML = "", this.O$.parentNode.removeChild(this.O$), this.O$ = null), this.canvases && (this.canvases = {}), this.Vi.innerHTML = "", this.jC = []
        },
        clearCanvas: function () {
            if (this.canvases && "object" == M(this.canvases)) for (var t in this.canvases) this.canvases[t].clearCanvas()
        },
        render: function (t, i, e) {
            var s, n, h, r;
            if (this.isVisible(this.B.id) && (n = this.U$(), this.callEvent("onBeforeRender", [n, e]))) {
                if (this.canvases && "object" == M(this.canvases)) for (var o in this.canvases) this.canvases[o].clearCanvas(); else this.canvases = {};
                if (this.B.legend && (this.canvases.legend || (this.canvases.legend = this.o$("legend")), this.W$(this.data.getRange(), this.oe, this.ue)), this.tu = h = new Ce(this.Eo), r = this.B, s = this.z$(this.oe, this.ue), this.jC) for (var a = 0; a < this.jC.length; a++) this.B = this.jC[a], this.canvases[a] || (this.canvases[a] = this.o$(this.name + " " + a, "z-index:" + (2 + a), null, a, this.B.ariaLabel)), this["$render_" + this.B.type](this.canvases[a].getCanvas(), n, s.start, s.end, a, h);
                if (h.render(this.Vi), this.Vi.lastChild.style.zIndex = 80, this.Y$(this.Vi.lastChild, s), this.callEvent(
                    "onAfterRender", [n]), this.B = r, this.B.legend && this.B.legend.values) for (var u = this.B.legend.values, c = 0; c < u.length; c++) u[c].$hidden && this.hideSeries(c)
            }
        },
        Y$: function (t, i) {
            var e = {};
            for (var s in e.left = i.start.x, e.top = i.start.y, e.width = i.end.x - i.start.x, e.height = i.end.y - i.start.y, e) t.style[s] = e[s] + "px"
        },
        U$: function () {
            var t, i, e, s, n, h, r, o, a, u;
            if (s = this.data.getRange(), t = -1 != this.B.type.toLowerCase().indexOf("barh") ? "yAxis" : "xAxis", (i = this.B[t]) && i.units && "object" == M(i.units)) {
                if (o = [], "undefined" != typeof (e = i.units).start && "undefined" != typeof e.end && "undefined" != typeof e.next) for (r = e.start; r <= e.end;) o.push(r), r = e.next.call(this, r); else "[object Array]" === Object.prototype.toString.call(e) && (o = e);
                if (h = [], o.length) {
                    for (a = i.value, u = {}, n = 0; n < s.length; n++) u[a(s[n])] = n;
                    for (n = 0; n < o.length; n++) "undefined" != typeof u[o[n]] ? (s[u[o[n]]].$unit = o[n], h.push(s[u[o[n]]])) : h.push({$unit: o[n]})
                }
                return h
            }
            return s
        },
        series_setter: function (t) {
            if (t && "object" == M(t)) {
                this.Rt(t.length ? t[0] : t), this.jC = [this.B];
                for (var i = 1; i < t.length; i++) this.addSeries(t[i])
            } else ;
            return t
        },
        value_setter: Wt,
        xValue_setter: Wt,
        yValue_setter: function (t) {
            this.define("value", t)
        },
        alpha_setter: Wt,
        label_setter: Wt,
        lineColor_setter: Wt,
        borderColor_setter: Wt,
        pieInnerText_setter: Wt,
        gradient_setter: function (t) {
            return "function" != typeof t && t && !0 === t && (t = "light"), t
        },
        colormap: {
            RAINBOW: function (t) {
                var i = Math.floor(this.getIndexById(t.id) / this.count() * 1536);
                return 1536 == i && (i -= 1), this.q$[Math.floor(i / 256)](i % 256)
            }, "default": function (t) {
                var i = this.count(), e = this.Hc.length, s = this.getIndexById(t.id);
                return i < e ? (s && (s = s < e - i ? this.zc + 2 : this.zc + 1), this.zc = s) : s %= e, this.Hc[s]
            }
        },
        color_setter: function (t) {
            return this.colormap[t] || Wt(t)
        },
        fill_setter: function (t) {
            return !(!t || "0" == t) && Wt(t)
        },
        L$: function (t) {
            this.define("preset", t.preset), delete t.preset
        },
        preset_setter: function (t) {
            var i, e, s;
            if (this.defaults = P.extend({}, this.defaults), "object" != M(s = this.presets[t])) return !1;
            for (i in s) if ("object" == M(s[i])) if (this.defaults[i] && "object" == M(this.defaults[i])) for (e in this.defaults[i] = P.extend({}, this.defaults[i]), s[i]) this.defaults[i][e] = s[i][e]; else this.defaults[i] = P.extend({}, s[i]); else this.defaults[i] = s[i];
            return t
        },
        legend_setter: function (t) {
            return t ? ("object" != M(t) && (t = {template: t}), this.$i(t, {
                width: 150,
                height: 18,
                layout: "y",
                align: "left",
                valign: "bottom",
                template: "",
                toggle: -1 != this.B.type.toLowerCase().indexOf("stacked") ? "" : "hide",
                marker: {type: "square", width: 15, height: 15, radius: 3},
                margin: 4,
                padding: 3
            }), t.template = Wt(t.template), t) : (this.O$ && (this.O$.innerHTML = "", this.O$ = null), !1)
        },
        item_setter: function (t) {
            "object" != M(t) && (t = {color: t, borderColor: t}), this.$i(t, P.extend({}, this.defaults.item));
            return this.G$(["alpha", "borderColor", "color", "radius", "type"], t), t
        },
        line_setter: function (t) {
            return "object" != M(t) && (t = {color: t}), (t = P.extend(t, this.defaults.line)).color = Wt(t.color), t
        },
        padding_setter: function (t) {
            return "object" != M(t) && (t = {left: t, right: t, top: t, bottom: t}), this.$i(t, {
                left: 50,
                right: 20,
                top: 35,
                bottom: 40
            }), t
        },
        xAxis_setter: function (t) {
            if (!t) return !1;
            "object" != M(t) && (t = {template: t}), this.$i(t, {
                title: "",
                color: "#edeff0",
                lineColor: "#edeff0",
                template: "{obj}",
                lines: !0
            });
            return this.G$(["lineColor", "template", "lines"], t), this.f$ = P.extend({}, t), t
        },
        yAxis_setter: function (t) {
            this.$i(t, {
                title: "",
                color: "#edeff0",
                lineColor: "#edeff0",
                template: "{obj}",
                lines: !0,
                bg: "#ffffff"
            });
            return this.G$(["lineColor", "template", "lines", "bg"], t), this.x$ = P.extend({}, t), t
        },
        G$: function (t, i) {
            for (var e = 0; e < t.length; e++) i[t[e]] = Wt(i[t[e]])
        },
        o$: function (t, i, e, s, n) {
            var h = {
                container: e || this.Vi,
                name: t,
                title: j(n) ? t : n || "",
                series: s,
                style: i || "",
                width: this.oe,
                height: this.ue
            };
            return new Pi(h)
        },
        RC: function (t, i, e, s, n, h) {
            var r, o = 0;
            return this.B.yAxis && (this.canvases.y || (this.canvases.y = this.o$("axis_y")), o = this.S$(this.canvases.y.getCanvas(), t, i, e, s, n)), this.B.xAxis && (this.canvases.x || (this.canvases.x = this.o$("axis_x")), r = this.canvases.x.getCanvas(), this.callEvent("onBeforeXAxis", [r, t, i, e, h, o]) && this.PC(r, t, i, e, h, o)), o
        },
        PC: function (t, i, e, s, n, h) {
            var r, o, a = this.B, u = e.x - .5, c = parseInt(h || s.y, 10) + .5, f = s.x, l = !0,
                d = "stackedBar" == a.type ? s.y + .5 : c;
            for (r = 0; r < i.length; r++) {
                !0 === a.offset ? o = u + n / 2 + r * n : (o = r != i.length - 1 || a.cellWidth ? u + r * n : s.x, l = !!r), o = Math.ceil(o) - .5;
                var v = "auto" != a.origin && "bar" == a.type && parseFloat(a.value(i[r])) < a.origin;
                this.j$(o, d, i[r], l, v), (a.offset || r || a.cellWidth) && a.xAxis.lines.call(this, i[r]) && this.E$(t, o, s.y, e.y, i[r])
            }
            this.canvases.x.renderTextAt(!0, !1, u, s.y + a.padding.bottom - 3, a.xAxis.title, "webix_axis_title_x", s.x - e.x), this.SC(t, u, c, f, c, a.xAxis.color, 1), a.xAxis.lines.call(this, {}) && a.offset && this.SC(t, f + .5, s.y, f + .5, e.y + .5, a.xAxis.lineColor.call(this, {}), 1)
        },
        S$: function (t, i, e, s, n, h) {
            var r, o = {};
            if (this.B.yAxis) {
                var a = e.x - .5, u = s.y, c = e.y, f = s.y + .5;
                if (this.B.yAxis.step && (r = parseFloat(this.B.yAxis.step)), "undefined" == typeof this.x$.step || "undefined" == typeof this.x$.start || "undefined" == typeof this.x$.end ? (n = (o = this.l$(n, h)).start, h = o.end, r = o.step, this.B.yAxis.end = h, this.B.yAxis.start = n) : "logarithmic" == this.config.scale && (this.EC = !0), this.c$(e, s), 0 !== r) {
                    if (h == n) return u;
                    for (var l = (u - c) * r / (h - n), d = 0, v = n; v <= h; v += r) {
                        var _ = this.EC ? Math.pow(10, v) : v;
                        o.fixNum && (_ = parseFloat(_).toFixed(o.fixNum));
                        var p = Math.floor(u - d * l) + .5;
                        if (v == n && "auto" == this.B.origin || !this.B.yAxis.lines.call(this, v) || this.SC(t, a, p, s.x, p, this.B.yAxis.lineColor.call(this, v), 1), v == this.B.origin && (f = p), r < 1 && !this.EC) {
                            var m = Math.min(Math.floor(this.NC(r)), n <= 0 ? 0 : Math.floor(this.NC(n))),
                                b = Math.pow(10, -m);
                            v = _ = Math.round(_ * b) / b
                        }
                        this.canvases.y.renderText(0, p - 5, this.B.yAxis.template(_.toString()), "webix_axis_item_y", e.x - 5), d++
                    }
                    return this.SC(t, a, u + 1, a, c, this.B.yAxis.color, 1), f
                }
            }
        },
        c$: function (t, i) {
            var e = this.canvases.y.renderTextAt("middle", !1, 0, parseInt((i.y - t.y) / 2 + t.y, 10), this.B.yAxis.title, "webix_axis_title_y");
            e && (e.style.left = (Y.transform ? (e.offsetHeight - e.offsetWidth) / 2 : 0) + "px")
        },
        X$: function (t, i) {
            return {start: Math.floor(this.NC(t)), step: 1, end: Math.ceil(this.NC(i))}
        },
        J$: function (t) {
            var i = Math.floor(this.NC(t)), e = Math.pow(10, i), s = t / e;
            return s = 5 < s ? 10 : 5, parseInt(s, 10) * e
        },
        l$: function (t, i) {
            if (this.EC = !1, "logarithmic" == this.B.scale) {
                var e = Math.floor(this.NC(t)), s = Math.ceil(this.NC(i));
                if (0 < t && 0 < i && 1 < s - e) return this.EC = !0, this.X$(t, i)
            }
            var n, h;
            "auto" != this.B.origin && this.B.origin < t && (t = this.B.origin);
            var r = this.J$((i - t) / 8 || 1), o = Math.floor(this.NC(r));
            if (r > Math.abs(t)) n = t < 0 ? -r : 0; else {
                var a = Math.abs(t), u = Math.floor(this.NC(a)), c = a / Math.pow(10, u);
                for (n = 0 != u || .1 <= r ? Math.ceil(10 * c) / 10 * Math.pow(10, u) - r : a, 1 < a && .1 < r && (n = Math.ceil(n)); t < 0 ? n <= t : t <= n;) n -= r;
                t < 0 && (n = -n - 2 * r), n -= n % r, n = parseFloat((1 * n).toFixed(Math.abs(o)))
            }
            for (10 < i - n && (r = this.J$((i - n) / 8 || 1)), h = n, 0 == i && i == t && (i = r); h < i;) h += r, h = parseFloat((1 * h).toFixed(Math.abs(o)));
            return {start: n, end: h, step: r, fixNum: o < 0 ? Math.abs(o) : 0}
        },
        HC: function (t, i) {
            var e, s, n = this.data.Yr(), h = arguments.length && "h" == t ? this.f$ : this.x$;
            if (i = i || "value", h && "undefined" != typeof h.end && "undefined" != typeof h.start && h.step) e = parseFloat(h.end), s = parseFloat(h.start); else if (e = ye.max(this.jC[0][i], n), s = h && "undefined" != typeof h.start ? parseFloat(h.start) : ye.min(this.jC[0][i], n), 1 < this.jC.length) for (var r = 1; r < this.jC.length; r++) {
                var o = ye.max(this.jC[r][i], n), a = ye.min(this.jC[r][i], n);
                e < o && (e = o), a < s && (s = a)
            }
            return {max: e, min: s}
        },
        NC: function (t) {
            return Math.log(t) / Math.LN10
        },
        j$: function (t, i, e, s, n) {
            if (this.B.xAxis) {
                var h = this.canvases.x.renderTextAt(n, s, t, i - (n ? 2 : 0), this.B.xAxis.template(e));
                h && (h.className += " webix_axis_item_x")
            }
        },
        E$: function (t, i, e, s, n) {
            this.B.xAxis && this.B.xAxis.lines && this.SC(t, i, e, i, s, this.B.xAxis.lineColor.call(this, n), 1)
        },
        SC: function (t, i, e, s, n, h, r) {
            t.strokeStyle = h, t.lineWidth = r, t.beginPath(), t.moveTo(i, e), t.lineTo(s, n), t.stroke(), t.lineWidth = 1
        },
        BC: function (t, i) {
            return [i != t ? i - t : t, 1]
        },
        q$: [function (t) {
            return "#FF" + Pe.toHex(t / 2, 2) + "00"
        }, function (t) {
            return "#FF" + Pe.toHex(t / 2 + 128, 2) + "00"
        }, function (t) {
            return "#" + Pe.toHex(255 - t, 2) + "FF00"
        }, function (t) {
            return "#00FF" + Pe.toHex(t, 2)
        }, function (t) {
            return "#00" + Pe.toHex(255 - t, 2) + "FF"
        }, function (t) {
            return "#" + Pe.toHex(t, 2) + "00FF"
        }],
        Hc: ["#f55b50", "#ff6d3f", "#ffa521", "#ffc927", "#ffee54", "#d3e153", "#9acb61", "#63b967", "#21a497", "#21c5da", "#3ea4f5", "#5868bf", "#7b53c0", "#a943ba", "#ec3b77", "#9eb0b8"],
        zc: 0,
        addSeries: function (t) {
            var i = this.B;
            this.B = P.extend({}, i), this.Rt(t), this.jC.push(
                this.B), this.B = i
        },
        $tooltipIn: function (t) {
            return t
        },
        xe: function (t, i) {
            var e = this.locate(i);
            if (!e) return null;
            var s = this.K$(i), n = P.extend({
                dx: 20,
                dy: 0,
                template: "{obj.value}",
                css: ""
            }, this.jC[s].tooltip || {template: ""}, !0);
            return oi.Et.define(n), this.getItem(e)
        },
        K$: function (t) {
            var i, e, s, n, h, r, o, a;
            for (e = this.tu.iu, n = _t(this.Vi.Ai), o = (h = mt(t)).x - n.x, a = h.y - n.y, s = 0; s < e.length; s++) o <= (i = e[s].points)[2] && o >= i[0] && a <= i[3] && a >= i[1] && (r ? e[s].index > r.index && (r = e[s]) : r = e[s]);
            return r ? r.index : 0
        },
        hideSeries: function (t) {
            this.canvases[t].hideCanvas();
            var i = this.B.legend;
            i && i.values && i.values[t] && (i.values[t].$hidden = !0, this.W$()), this.tu.hide(this.Vi, t, !0)
        },
        showSeries: function (t) {
            this.canvases[t].showCanvas();
            var i = this.B.legend;
            i && i.values && i.values[t] && (delete i.values[t].$hidden, this.W$()), this.tu.hide(this.Vi, t, !1)
        },
        W$: function (t, i) {
            var e, s, n, h, r, o, a, u, c, f, l, d = 0, v = 0;
            if (t = t || [], i = i || this.oe, u = this.canvases.legend.getCanvas(), s = this.B.legend, a = "x" != this.B.legend.layout ? "width:" + s.width + "px" : "", this.O$ && (this.O$.innerHTML = "", this.O$.parentNode.removeChild(this.O$)), this.canvases.legend.clearCanvas(!0), n = ct("DIV", {
                "class": "webix_chart_legend",
                style: "left:" + d + "px; top:" + v + "px;" + a
            }, ""), s.padding && (n.style.padding = s.padding + "px"), this.O$ = n, this.Vi.appendChild(n), r = [], s.values) for (e = 0; e < s.values.length; e++) r.push(this.Z$(n, s.values[e].text, "undefined" != typeof s.values[e].id ? M(s.values[e].id) : e, s.values[e].$hidden)); else for (e = 0; e < t.length; e++) r.push(this.Z$(n, s.template(t[e]), t[e].id));
            for (0 === n.offsetWidth && (n.style.width = "auto"), o = n.offsetWidth, h = n.offsetHeight, o < i && ("x" == s.layout && "center" == s.align && (d = (i - o) / 2), "right" == s.align && (d = i - o), s.margin && "center" != s.align && (d += ("left" == s.align ? 1 : -1) * s.margin)), h < this.ue && ("middle" == s.valign && "center" != s.align && "x" != s.layout ? v = (this.ue - h) / 2 : "bottom" == s.valign && (v = this.ue - h), s.margin && "middle" != s.valign && (v += ("top" == s.valign ? 1 : -1) * s.margin)), n.style.left = d + "px", n.style.top = v + "px", u.save(), e = 0; e < r.length; e++) l = r[e], c = s.values && s.values[e].$hidden ? (f = !0, s.values[e].disableColor ? s.values[e].disableColor : "#edeff0") : (f = !1, s.values ? s.values[e].color : this.B.color.call(this, t[e])), this.Q$(u, l.offsetLeft + d, l.offsetTop + v, c, l.offsetHeight, f, e);
            u.restore(), r = null
        },
        Z$: function (t, i, e, s) {
            var n = "";
            "x" == this.B.legend.layout && (n = "float:left;");
            var h = ct("DIV", {
                style: n + "padding-left:" + (10 + this.B.legend.marker.width) + "px",
                "class": "webix_chart_legend_item" + (s ? " hidden" : ""),
                role: "button",
                tabindex: "0",
                "aria-label": $.aria[(s ? "show" : "hide") + "Chart"] + " " + i
            }, i);
            return 2 < arguments.length && h.setAttribute("series_id", e), t.appendChild(h), h
        },
        Q$: function (t, i, e, s, n, h, r) {
            var o = [], a = this.B.legend.marker, u = this.B.legend.values,
                c = u && u[r].markerType ? u[r].markerType : a.type;
            if (s && (t.strokeStyle = t.fillStyle = s), "round" != c && a.radius) if ("item" == c) {
                if (this.B.line && "scatter" != this.B.type && !this.B.disableLines) {
                    t.beginPath(), t.lineWidth = this.jC[r].line.width, t.strokeStyle = h ? s : this.jC[r].line.color.call(this, {});
                    var f = i + 5, l = e + n / 2;
                    t.moveTo(f, l);
                    var d = f + a.width;
                    t.lineTo(d, l), t.stroke()
                }
                var v = this.jC[r].item, _ = parseInt(v.radius.call(this, {}), 10) || 0, p = v.type.call(this, {});
                _ && (t.beginPath(), h ? (t.lineWidth = v.borderWidth, t.strokeStyle = s, t.fillStyle = s) : (t.lineWidth = v.borderWidth, t.fillStyle = v.color.call(this, {}), t.strokeStyle = v.borderColor.call(this, {}), t.globalAlpha = v.alpha.call(this, {})), t.beginPath(), i += a.width / 2 + 5, e += n / 2, this.QC(t, i, e, _ + 1, p), t.fill(), t.stroke()), t.globalAlpha = 1
            } else t.beginPath(), t.lineWidth = 1, i += 5, e += n / 2 - a.height / 2, o = [[i + a.radius, e + a.radius, a.radius, Math.PI, 3 * Math.PI / 2, !1], [i + a.width - a.radius, e], [i + a.width - a.radius, e + a.radius, a.radius, -Math.PI / 2, 0, !1], [i + a.width, e + a.height - a.radius], [i + a.width - a.radius, e + a.height - a.radius, a.radius, 0, Math.PI / 2, !1], [i + a.radius, e + a.height], [i + a.radius, e + a.height - a.radius, a.radius, Math.PI / 2, Math.PI, !1], [i, e + a.radius]], this.t$(t, o), t.stroke(), t.fill(); else {
                t.beginPath(), t.lineWidth = a.height, t.lineCap = a.type, i += t.lineWidth / 2 + 5, e += n / 2, t.moveTo(i, e);
                var m = i + a.width - a.height + 1;
                t.lineTo(m, e), t.stroke(), t.fill()
            }
        },
        z$: function (t, i) {
            var e, s, n, h;
            if (e = this.B.padding.left, s = this.B.padding.top, n = t - this.B.padding.right,
                h = i - this.B.padding.bottom, this.B.legend) {
                var r = this.B.legend, o = this.B.legend.width, a = this.B.legend.height;
                "x" == r.layout ? "center" == r.valign ? "right" == r.align ? n -= o : "left" == r.align && (e += o) : "bottom" == r.valign ? h -= a : s += a : "right" == r.align ? n -= o : "left" == r.align && (e += o)
            }
            return {start: {x: e, y: s}, end: {x: n, y: h}}
        },
        i$: function (t) {
            var i, e, s, n, h;
            if (this.B.yAxis && "undefined" != typeof this.B.yAxis.end && "undefined" != typeof this.B.yAxis.start && this.B.yAxis.step) s = parseFloat(this.B.yAxis.end), n = parseFloat(this.B.yAxis.start); else {
                for (i = 0; i < t.length; i++) for (t[i].$sum = 0, t[i].$min = Infinity, e = 0; e < this.jC.length; e++) h = Math.abs(parseFloat(this.jC[e].value(t[i]) || 0)), isNaN(h) || (-1 != this.jC[e].type.toLowerCase().indexOf("stacked") && (t[i].$sum += h), h < t[i].$min && (t[i].$min = h));
                for (s = -Infinity, n = Infinity, i = 0; i < t.length; i++) t[i].$sum > s && (s = t[i].$sum), t[i].$min < n && (n = t[i].$min);
                0 < n && (n = 0)
            }
            return {max: s, min: n}
        },
        qC: function (t, i, e, s, n, h, r, o) {
            var a, u, c, f, l, d;
            return "light" == h ? (a = "x" == o ? t.createLinearGradient(i, e, s, e) : t.createLinearGradient(i, e, i, n), d = [[0, "#FFFFFF"], [.9, r], [1, r]], u = 2) : "falling" == h || "rising" == h ? (a = "x" == o ? t.createLinearGradient(i, e, s, e) : t.createLinearGradient(i, e, i, n), c = Pe.toRgb(r), (f = Pe.rgbToHsv(c[0], c[1], c[2]))[1] *= .5, l = "rgb(" + Pe.hsvToRgb(f[0], f[1], f[2]) + ")", "falling" == h ? d = [[0, l], [.7, r], [1, r]] : "rising" == h && (d = [[0, r], [.3, r], [1, l]]), u = 0) : (t.globalAlpha = .37, u = 0, a = "x" == o ? t.createLinearGradient(i, n, i, e) : t.createLinearGradient(i, e, s, e), d = [[0, "#9d9d9d"], [.3, "#e8e8e8"], [.45, "#ffffff"], [.55, "#ffffff"], [.7, "#e8e8e8"], [1, "#9d9d9d"]]), this.tD(a, d), {
                gradient: a,
                offset: u
            }
        },
        TC: function (t, i, e, s) {
            return t *= -1, {x: i += Math.cos(t) * s, y: e -= Math.sin(t) * s}
        },
        tD: function (t, i) {
            for (var e = 0; e < i.length; e++) t.addColorStop(i[e][0], i[e][1])
        },
        t$: function (t, i) {
            var e, s;
            for (e = 0; e < i.length; e++) s = e ? "lineTo" : "moveTo", 2 < i[e].length && (s = "arc"), t[s].apply(t, i[e])
        },
        iD: function (t, i, e, s, n) {
            t.addRect(i, [e[0].x - s.x, e[0].y - s.y, e[1].x - s.x, e[1].y - s.y], n)
        }
    }, eo = {
        api: io, view: P.protoUI(io, Lr, Or, Ur, Wr, Yr, qr, {
            $render_spline: function (t, i, e, s, n, h) {
                var r, o, a, u, c, f, l, d, v, _, p, m, b;
                if (c = this.GC(t, i, e, s, n), r = this.B, this.KC = e, a = [], i.length) {
                    for (d = r.offset ? e.x + .5 * c.cellWidth : e.x, o = 0; o < i.length; o++) ((p = this.XC(i[o], e, s, c)) || "0" == p) && (l = o ? c.cellWidth * o - .5 + d : d, a.push({
                        x: l,
                        y: p,
                        v: this.B.value(i[o]),
                        index: o
                    }));
                    for (f = this.F$(a), o = 0; o < a.length; o++) {
                        if (v = a[o].x, m = a[o].y, o < a.length - 1) {
                            for (_ = a[o + 1].x, b = a[o + 1].y, u = v; u < _; u++) {
                                var g = this.T$(u, v, o, f.a, f.b, f.c, f.d);
                                g < e.y && (g = e.y), g > s.y && (g = s.y);
                                var w = this.T$(u + 1, v, o, f.a, f.b, f.c, f.d);
                                w < e.y && (w = e.y), w > s.y && (w = s.y), this.SC(t, u, g, u + 1, w, r.line.color(i[o]), r.line.width)
                            }
                            this.SC(t, _ - 1, this.T$(u, v, o, f.a, f.b, f.c, f.d), _, b, r.line.color(i[o]), r.line.width)
                        }
                        this.ZC(t, v, m, i[a[o].index], r.label(i[a[o].index]), n, h)
                    }
                }
            }, F$: function (t) {
                var i, e, s, n, h, r, o, a, u = [], c = [], f = t.length;
                for (h = 0; h < f - 1; h++) u[h] = t[h + 1].x - t[h].x, c[h] = (t[h + 1].y - t[h].y) / u[h];
                for (a = [], (o = [])[0] = 0, o[1] = 2 * (u[0] + u[1]), a[0] = 0, a[1] = 6 * (c[1] - c[0]), h = 2; h < f - 1; h++) o[h] = 2 * (u[h - 1] + u[h]) - u[h - 1] * u[h - 1] / o[h - 1], a[h] = 6 * (c[h] - c[h - 1]) - u[h - 1] * a[h - 1] / o[h - 1];
                for ((r = [])[f - 1] = r[0] = 0, h = f - 2; 1 <= h; h--) r[h] = (a[h] - u[h] * r[h + 1]) / o[h];
                for (i = [], e = [], s = [], n = [], h = 0; h < f - 1; h++) i[h] = t[h].y, e[h] = -u[h] * r[h + 1] / 6 - u[h] * r[h] / 3 + (t[h + 1].y - t[h].y) / u[h], s[h] = r[h] / 2, n[h] = (r[h + 1] - r[h]) / (6 * u[h]);
                for (h = 0; h < t.length - 1; h++) 0 === t[h].v && 0 === t[h + 1].v && (i[h] = t[h].y, n[h] = s[h] = e[h] = 0);
                return {a: i, b: e, c: s, d: n}
            }, T$: function (t, i, e, s, n, h, r) {
                return s[e] + (t - i) * (n[e] + (t - i) * (h[e] + (t - i) * r[e]))
            }
        }, Gr, Xr, Jr, {
            presets: {
                simple: {
                    item: {borderColor: "#ffffff", color: "#2b7100", shadow: !1, borderWidth: 2},
                    line: {color: "#8ecf03", width: 2}
                },
                plot: {
                    color: "#8664C6",
                    item: {borderColor: "#8664C6", borderWidth: 1, color: "#ffffff", type: "r", shadow: !1},
                    line: {color: "#8664C6", width: 2}
                },
                diamond: {
                    color: "#FF5C4C",
                    item: {borderColor: "#FF5C4C", color: "#FF5C4C", type: "d", radius: 3, shadow: !0},
                    line: {color: "#FF5C4C", width: 2}
                },
                point: {
                    color: "#1ca1c1",
                    disableLines: !0,
                    fill: !1,
                    disableItems: !1,
                    item: {color: "#1ca1c1", borderColor: "#1ca1c1", radius: 2, borderWidth: 2, type: "r"},
                    alpha: 1
                },
                line: {
                    line: {color: "#1ca1c1", width: 2},
                    item: {color: "#ffffff", borderColor: "#1ca1c1", radius: 2, borderWidth: 2, type: "d"},
                    fill: !1,
                    disableItems: !1,
                    disableLines: !1,
                    alpha: 1
                },
                area: {
                    fill: "#1ca1c1",
                    line: {color: "#1ca1c1", width: 1}, disableItems: !0, alpha: .2, disableLines: !1
                },
                round: {
                    item: {
                        radius: 3,
                        borderColor: "#1ca1c1",
                        borderWidth: 1,
                        color: "#1ca1c1",
                        type: "r",
                        shadow: !1,
                        alpha: .6
                    }
                },
                square: {
                    item: {
                        radius: 3,
                        borderColor: "#00a497",
                        borderWidth: 2,
                        color: "#ffffff",
                        type: "s",
                        shadow: !1,
                        alpha: 1
                    }, line: {color: "#00a497"}
                },
                column: {color: "RAINBOW", gradient: !1, barWidth: 45, radius: 0, alpha: 1, border: !0},
                stick: {barWidth: 5, gradient: !1, color: "#1ca1c1", radius: 2, alpha: 1, border: !1},
                alpha: {color: "#b9a8f9", barWidth: 70, gradient: "falling", radius: 0, alpha: .5, border: !0}
            }
        }, Kr, Zr, Se, Bi, le, Ae, c, zi.view)
    }, so = {
        name: "rangechart", $init: function () {
            this.attachEvent("onAfterRender", this.eD), this.sD()
        }, eD: function () {
            if (-1 === this.B.type.indexOf("pie") && "radar" !== this.B.type && this.B.type, this.tu.iu.length && !this.nD) {
                this.hD(), this.rD = (this.tu.iu[0].points[2] - this.tu.iu[0].points[0]) / 2;
                var t = {webix_disable_drag: "true", tabindex: "0", role: "button", "aria-label": $.aria.resizeChart};
                this.oD = ct("div", P.extend({"class": "webix_chart_resizer right"}, t)), this.aD = ct("div", P.extend({"class": "webix_chart_resizer left"}, t)), this.nD = ct("div", {
                    "class": "webix_chart_frame",
                    webix_disable_drag: "true"
                }), this.Tt.appendChild(this.aD), this.Tt.appendChild(this.nD), this.Tt.appendChild(this.oD), this.uD(), Jt(this.oD, Y.mouse.down, this.cD, {bind: this}), Jt(this.aD, Y.mouse.down, this.cD, {bind: this}), Jt(this.nD, Y.mouse.down, this.cD, {bind: this}), Jt(C(this.oD), "keydown", this.fD, {bind: this}), Jt(C(this.aD), "keydown", this.fD, {bind: this}), this.Ak && (this.B.range = this.sD(this.Ak)), this.lD(), this.callEvent("onAfterRangeChange", [this.Ak]), this.data.attachEvent("onStoreUpdated", S(this.lD, this))
            } else this.uD(!0)
        }, $setSize: function (t, i) {
            eo.api.$setSize.call(this, t, i) && (this.hD(), this.lD())
        }, uD: function (t) {
            this.oD && !this.dD && (this.dD = this.oD.clientWidth / 2, t && this.lD())
        }, hD: function () {
            var t = this.z$(this.oe, this.ue);
            this.KC = t.start, this.vD = t.end
        }, removeAllSeries: function () {
            this.nD = this.oD = this.aD = null, eo.api.removeAllSeries.apply(this, arguments)
        }, fD: function (t) {
            var i = t.which || t.keyCode;
            if (37 === i || 39 === i) {
                bt(t);
                var e = -1 !== t.target.className.indexOf("right") ? "eindex" : "sindex",
                    s = -1 !== t.target.className.indexOf("right") ? "end" : "start", n = this.Ak;
                n[e] = n[e] + (37 === i ? -1 : 1), this.tu.iu[n[e]] && (n[s] = this._D(n[e]), this.setFrameRange(n))
            }
        }, cD: function (t) {
            if (-1 !== t.target.className.indexOf("webix_chart_resizer")) this.pD = t.target; else if (this.tu.iu.length) {
                var i = this.tu.iu[this.Ak.sindex].points[2] - this.rD,
                    e = this.tu.iu[this.Ak.eindex].points[2] - this.rD;
                this.mD = {ex: mt(t).x, fx: i + this.KC.x, fw: e - i}
            }
            xt(this.Tt, "webix_noselect webix_wresize_cursor"), this.bD(), this.gD = Kt(document.body, Y.mouse.move, this.wD, {bind: this}), this.xD = Kt(document.body, Y.mouse.up, this.yD, {bind: this})
        }, bD: function () {
            ti.xt[this.gD] && (Zt(this.gD), Zt(this.xD))
        }, wD: function (t) {
            if (this.pD) {
                var i = mt(t).x - _t(this.$view).x;
                i >= this.KC.x && i <= this.vD.x && (-1 !== this.pD.className.indexOf("left") ? i < this.oD.offsetLeft && (this.pD.style.left = i - this.dD + "px", this.nD.style.left = i + "px", this.nD.style.width = this.oD.offsetLeft - this.aD.offsetLeft - 1 + "px") : i > this.aD.offsetLeft + this.dD && (this.pD.style.left = i - this.dD + "px", this.nD.style.width = this.oD.offsetLeft - this.aD.offsetLeft - 1 + "px"))
            } else if (this.mD) {
                var e = mt(t).x - this.mD.ex, s = this.mD.fx + e, n = s + this.mD.fw;
                this.KC.x <= s && this.vD.x >= n && (P.extend(this.mD, {
                    lx: s,
                    rx: n
                }, !0), this.aD.style.left = s - this.dD + "px", this.oD.style.left = n - this.dD + "px", this.nD.style.left = s + "px")
            }
        }, yD: function (t) {
            if (this.bD(), yt(this.Tt, "webix_noselect"), yt(this.Tt, "webix_wresize_cursor"), this.count()) {
                if (this.pD) {
                    var i = Y.touch ? t.changedTouches[0].pageX : mt(t).x;
                    i -= _t(this.$view).x + this.KC.x;
                    var e = this.MD(i), s = this._D(e);
                    this.pD === this.aD ? (e >= this.Ak.eindex && (e = this.Ak.eindex, s = this._D(e)), this.Ak.start = s, this.Ak.sindex = e) : (e <= this.Ak.sindex && (e = this.Ak.sindex, s = this._D(e)), this.Ak.end = s, this.Ak.eindex = e), this.pD = null
                } else if (this.mD && this.mD.lx) {
                    var n = this.Ak.sindex = this.MD(this.mD.lx - this.KC.x),
                        h = this.Ak.eindex = this.MD(this.mD.rx - this.KC.x);
                    this.Ak.start = this._D(n), this.Ak.end = this._D(h), this.mD = null
                }
                this.lD(), this.callEvent("onAfterRangeChange", [this.Ak.start, this.Ak.end])
            }
        }, _D: function (t
        ) {
            return t >= this.data.order.length && (t = this.data.order.length - 1), this.getItem(this.data.order[t])[this.B.frameId || "id"]
        }, MD: function (t) {
            for (var i = this.tu.iu, e = 0; e < i.length; e++) if (t <= i[e].points[2] - this.rD) return e;
            return i.length - 1
        }, SD: function (t) {
            for (var i = this.B.frameId || "id", e = 0; e < this.data.order.length; e++) if (this.getItem(this.data.order[e])[i] == t) return e;
            return -1
        }, sD: function (t) {
            t ? (t.start && (t.sindex = this.SD(t.start)), t.end && (t.eindex = this.SD(t.end)), t.start = t.start || this._D(t.sindex), t.end = t.end || this._D(t.eindex)) : t = {
                start: 0,
                end: 0,
                sindex: 0,
                eindex: 0
            }, this.Ak = t
        }, range_setter: function (t) {
            return this.sD(t), this.Ak
        }, getFrameData: function () {
            for (var t = [], i = this.Ak.sindex; i <= this.Ak.eindex; i++) {
                var e = this.getItem(this.data.order[i]);
                e && t.push(e)
            }
            return t
        }, setFrameRange: function (t) {
            this.sD(t), this.lD(), this.callEvent("onAfterRangeChange", [t])
        }, lD: function () {
            if (this.tu) {
                var t = this.tu.iu;
                if (t.length) {
                    var i = t[this.Ak.sindex].points[0] + this.KC.x + this.rD - 1,
                        e = t[this.Ak.eindex].points[0] + this.KC.x + this.rD - 1;
                    this.aD.style.left = i - this.dD + "px", this.oD.style.left = e - this.dD + "px", this.nD.style.left = i + "px", this.nD.style.width = e - i + "px", this.B.range = this.Ak
                }
            }
        }, getFrameRange: function () {
            return this.B.range
        }
    }, no = (P.protoUI(so, eo.view), {
        name: "grouplist", defaults: {animate: {}}, Em: "webix_grouplist", $init: function () {
            P.extend(this.data, as, !0), this.data.count = function () {
                return this.order.length
            }, this.data.provideApi(this, !0), this.data.attachEvent("onClearAll", S(this.kD, this)), this.kD()
        }, kD: function () {
            this.CD = [], this.$D = []
        }, $setSize: function () {
            zi.api.$setSize.apply(this, arguments) && (this.Q.style.width = this.oe)
        }, on_click: {
            webix_list_item: function (t, i) {
                if (this.jv) return !1;
                for (var e = 0; e < this.$D.length; e++) if (this.$D[e] == i) {
                    for (var s = e; s < this.$D.length; s++) this.data.getItem(this.$D[s]).$template = "";
                    return e ? (this.CD = this.data.branch[this.$D[e - 1]], this.$D.splice(e)) : (this.CD = this.data.branch[0], this.$D = []), this.DD = !1, this.render()
                }
                var n = this.getItem(i);
                if (n.$count) return this.DD = !0, this.$D.push(i), n.$template = "Back", this.CD = this.data.branch[n.id], this.render();
                this.B.select && (this.Lm = !0, "multiselect" == this.B.select || this.B.multiselect ? this.select(i, !1, "touch" == this.B.multiselect || t.ctrlKey || t.metaKey, t.shiftKey) : this.select(i), this.Lm = !1)
            }
        }, getOpenState: function () {
            return {parents: this.$D, branch: this.CD}
        }, render: function (t, i, e) {
            var s, n, h = this, r = arguments;
            if (this.$D = _(this.$D), this.CD = _(this.CD), this.$D.length) for (s = 0; s < this.$D.length; s++) this.data.branch[this.$D[s]] || (this.$D.splice(s, 1), s--);
            if (n = this.$D.length ? this.$D[this.$D.length - 1] : 0, this.CD = _(this.data.branch[n]), !this.CD.length && this.$D.length && (this.CD = [n], this.$D.pop()), this.jv) return this.jv.then(function () {
                return h.render.apply(h, r)
            });
            for (s = 0; s < this.CD.length; s++) this.data.getItem(this.CD[s]).$template = "";
            if (this.CD.length || (this.CD = this.data.branch[0]), this.data.order = g([].concat(this.$D).concat(this.CD)), this.callEvent("onBeforeRender", [this.data])) {
                if (!this.Lm && this.Q.innerHTML && ji.isSupported() && this.B.animate && this.ID != this.$D.length) {
                    if (this.callEvent("onBeforeRender", [this.data])) {
                        this.AD || (this.AD = []);
                        var o = this.Q.cloneNode(!1);
                        o.innerHTML = this.data.getRange().map(this.Z, this).join("");
                        var a = P.extend({}, this.B.animate);
                        a.direction = this.DD ? "left" : "right";
                        var u, c = [l(a), l(a)];
                        this.DD ? this.AD.push(this.getScrollState()) : u = this.AD.pop();
                        var f = ji.formLine(o, this.Q, a);
                        a.master = this, a.callback = function () {
                            this.Q = o, this.DD ? this.scrollTo(0, 0) : u && this.scrollTo(0, u.y), ji.breakLine(f), a.master = a.callback = null, this.Ai = this.jv = null, a.wait_animation.resolve(), this.callEvent("onAfterRender", [])
                        }, ji(f, c), this.jv = a.wait_animation = m.defer()
                    }
                } else {
                    if (t && "delete" !== e && -1 === this.data.getIndexById(t)) return;
                    He.render.apply(this, arguments)
                }
                this.ID = this.$D.length
            }
        }, templateBack_setter: function (t) {
            this.type.templateBack = Wt(t)
        }, templateItem_setter: function (t) {
            this.type.templateItem = Wt(t)
        }, templateGroup_setter: function (t) {
            this.type.templateGroup = Wt(t)
        }, type: {
            template: function (t, i) {
                return t.$count ? i.templateGroup(t, i) : i.templateItem(t, i)
            },
            css: "group",
            classname: function (t, i, e) {
                return "webix_list_item webix_" + (
                    t.$count ? "group" : "item") + (t.$template ? "_back" : "") + (e && e.webix_selected ? " webix_selected" : "") + (i.css ? " " + i.css : "") + (t.$css ? " " + t.$css : "")
            },
            templateStart: Wt('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;" {common.aria()}>'),
            templateBack: Wt("#value#"),
            templateItem: Wt("#value#"),
            templateGroup: Wt("#value#"),
            templateEnd: function (t) {
                var i = "";
                return t.$count && (i += "<div class='webix_arrow_icon'></div>"), i += "</div>"
            }
        }, showItem: function (t) {
            var i, e;
            for (t && (e = (i = this.getItem(t)).$parent, i.$count && (e = i.id)), this.CD = this.data.branch[e || 0], this.$D = []; e;) this.getItem(e).$template = "Back", this.$D.unshift(e), e = this.getItem(e).$parent;
            this.Lm = !0, this.render(), this.Lm = !1, He.showItem.call(this, t)
        }
    });
    Qt(P.protoUI(no, Se, jh.view), {});
    var ho = {
        name: "unitlist", Eo: "webix_item_id", uniteBy_setter: Wt, render: function (t, i, e) {
            var s = this.B;
            if (this.isVisible(s.id) && s.uniteBy) {
                if (t) {
                    var n = this.getItemNode(t);
                    if (n && "update" == e && this.B.uniteBy.call(this, i) == this.getItem(t).$unitValue) return dt(this.Ai[t] = this.oc(i), n), void lt(n)
                }
                this.callEvent("onBeforeRender", [this.data]) && (this.units = null, this.FD(), this.units && (this.Q.innerHTML = this.TD().map(this.Z, this).join(""), this.Ai = null), this.callEvent("onAfterRender", []))
            }
        }, getUnits: function () {
            var t = [];
            if (this.units) for (var i in this.units) t.push(i);
            return t
        }, getUnitList: function (t) {
            return this.units ? this.units[t] : null
        }, Z: function (t) {
            var i = this.data.pr[t.id];
            return !t.$template || this.type["template" + t.$template], t.$template, this.callEvent("onItemRender", [t]), t.$unit ? this.type.templateStartHeader(t, this.type) + this.type.templateHeader.call(this, t.$unit) + this.type.templateEnd(t, this.type) : this.type.templateStart(t, this.type, i) + (t.$template ? this.type["template" + t.$template] : this.type.template)(t, this.type) + this.type.templateEnd(t, this.type)
        }, TD: function () {
            var t, i, e, s;
            t = [];
            var n = this.data.$min || 0, h = this.data.$max || Infinity, r = 0;
            for (e in this.units) for (t.push({$unit: e}), s = this.units[e], i = 0; i < s.length; i++) {
                if (r == n && (t = [{$unit: e}]), t.push(this.getItem(s[i])), r == h) return g(t);
                r++
            }
            return g(t)
        }, FD: function () {
            var e = this;
            this.units = {}, this.data.each(function (t) {
                var i = e.B.uniteBy.call(this, t);
                t.$unitValue = i, e.units[i] || (e.units[i] = []), e.units[i].push(t.id)
            })
        }, type: {
            headerHeight: 20, templateHeader: function (t) {
                return "<span class='webix_unit_header_inner'>" + t + "</span>"
            }, templateStart: function (t, i, e) {
                if (t.$unit) return i.templateStartHeader.apply(this, arguments);
                var s = "webix_list_item webix_list_" + i.css + "_item" + (e && e.webix_selected ? " webix_selected" : "") + (t.$css ? t.$css : ""),
                    n = "width:" + i.widthSize(t, i, e) + "; height:" + i.heightSize(t, i, e) + "; overflow:hidden;" + (i.layout && "x" == i.layout ? "float:left;" : "");
                return '<div webix_item_id="' + t.id + '" class="' + s + '" style="' + n + '" ' + i.aria(t, i, e) + ">"
            }, templateStartHeader: function (t, i, e) {
                var s = "webix_unit_header webix_unit_" + i.css + "_header" + (t.$selected ? "_selected" : ""),
                    n = "width:" + i.widthSize(t, i, e) + "; height:" + i.headerHeight + "px; overflow:hidden;";
                return '<div webix_unit_id="' + t.$unit + '" class="' + s + '" style="' + n + '">'
            }
        }, $skin: function () {
            jh.api.$skin.call(this), this.type.headerHeight = Ei.unitHeaderHeight
        }
    };
    P.protoUI(ho, jh.view);
    $.dbllist = {
        selectAll: "<span class='webix_icon wxi-angle-double-right'></span>",
        selectOne: "<span class='webix_icon wxi-angle-right'></span>",
        deselectAll: "<span class='webix_icon wxi-angle-double-left'></span>",
        deselectOne: "<span class='webix_icon wxi-angle-left'></span>"
    };
    var ro = {
        name: "dbllist", defaults: {borderless: !0}, $init: function () {
            this.VD = {}, this.zD = S(function (t) {
                return this.VD[t.id]
            }, this), this.HD = S(function (t) {
                return !this.VD[t.id]
            }, this), this.$view.className += " webix_dbllist", this.$ready.unshift(this.qb)
        }, $onLoad: function (t, i) {
            var e = this.$$("left"), s = this.$$("right");
            return this.RD(function () {
                e.data.driver = i, e.parse(t), s.data.driver = i, s.parse(t)
            }), this.BD = !0, this.Ik(), !0
        }, PD: function () {
            if (!1 === this.B.buttons) return {width: 10};
            var t = $.dbllist,
                i = [this.jD("deselect_all", t.deselectAll), this.jD("select_all", t.selectAll), this.jD("deselect_one", t.deselectOne), this.jD("select_one", t.selectOne)];
            return i = {
                width: 120, template: i.join(""), onClick: {
                    dbllist_button: function (t, i, e) {
                        this.getTopParentView().ED(e.getAttribute("action"))
                    }
                }
            }, this.B.buttons && (i.template = this.B.buttons), i
        }, jD: function (t, i) {
            return "<button class='dbllist_button' action='" + t + "'>" + i + "</button>"
        }, ND: function (t, i, e, s) {
            var n = {
                view: "list",
                select: "multiselect",
                multiselect: "touch",
                id: t,
                action: i,
                drag: !0,
                type: {margin: 3, id: t},
                on: {
                    onBeforeDrop: function (t) {
                        var i = t.from, e = t.to, s = i.getTopParentView();
                        if (s === this.getTopParentView()) {
                            var n = "select_one" != e.B.action;
                            s.select(t.source, n)
                        }
                        return !1
                    }, onItemDblClick: function () {
                        return this.getTopParentView().ED(this.config.action)
                    }
                }
            };
            return this.B.list && P.extend(n, this.B.list, !0), e && (n = {
                rows: [{
                    view: "label",
                    label: e,
                    css: "webix_inp_top_label"
                }, n]
            }), s ? {rows: [n, {view: "label", height: 20, label: s, css: "bottom_label"}]} : n
        }, qb: function () {
            var t = [{
                margin: 10,
                type: "clean",
                cols: [this.ND("left", "select_one", this.B.labelLeft, this.B.labelBottomLeft), this.PD(), this.ND("right", "deselect_one", this.B.labelRight, this.B.labelBottomRight)]
            }];
            this.cols_setter(t)
        }, ED: function (t) {
            var i = null, e = !1;
            "select_all" === t ? (i = this.$$("left").data.order, e = !0) : "select_one" === t ? (i = this.$$("left").getSelectedId(!0), e = !0) : "deselect_all" === t ? (i = this.$$("right").data.order, e = !1) : "deselect_one" === t && (i = this.$$("right").getSelectedId(!0), e = !1), this.select(i, e)
        }, select: function (t, i) {
            var e;
            if ("object" !== M(t) && (t = [t]), i) for (e = 0; e < t.length; e++) this.VD[t[e]] = !0; else for (e = 0; e < t.length; e++) delete this.VD[t[e]];
            this.Ik(), this.callEvent("onChange", [])
        }, RD: function (t, i) {
            fi(S(t, this), !1), i && (this.$$("left").B.autoheight || this.$$("right").B.autoheight) && this.resize()
        }, Ik: function () {
            var t = this.$$("left"), i = this.$$("right");
            t && this.RD(function () {
                t.filter(this.HD), i.filter(this.zD)
            }, !0)
        }, focus: function () {
            if (!xi.canFocus(this)) return !1;
            xi.setFocus(this)
        }, value_setter: function (t) {
            this.setValue(t)
        }, setValue: function (t) {
            if (this.VD = {}, t) {
                "object" !== M(t) && (t = t.toString().split(","));
                for (var i = 0; i < t.length; i++) this.VD[t[i]] = !0
            }
            this.Ik()
        }, getValue: function () {
            var t = [], i = this.$$("left");
            for (var e in this.VD) this.BD && !i.data.pull[e] || t.push(e);
            return t.join(",")
        }
    }, oo = (P.protoUI(ro, Ht, $e, pn.view), {
        name: "tree", defaults: {scroll: "auto", navigation: !0}, $init: function () {
            this.Tt.className += " webix_tree", P.extend(this.data, as, !0), P.extend(this.on_click, ss), this.data.provideApi(this, !0), this.Tt.setAttribute("role", "tree")
        }, Eo: "webix_tm_id", on_context: {}, on_dblclick: {
            webix_tree_checkbox: function () {
                if (this.on_click.webix_tree_checkbox) return this.on_click.webix_tree_checkbox.apply(this, arguments)
            }
        }, $fixEditor: function (t) {
            var i = this.getItemNode(t.id).querySelector("span");
            if (i) {
                "" === i.innerHTML && (i.innerHTML = "&nbsp;");
                var e = i.offsetLeft;
                t.node.style.width = this.$view.scrollWidth - e - 10 + "px", t.node.style.marginLeft = e + "px", t.node.style.left = "0px"
            }
        }, on_click: {
            webix_tree_item: function (t, i) {
                this.B.activeTitle && (this.getItem(i).open ? this.close(i) : this.open(i));
                if (this.B.select) if ("multiselect" == this.B.select || this.B.multiselect) {
                    var e = t.ctrlKey || t.metaKey || "touch" == this.B.multiselect;
                    if ("level" == this.B.multiselect && (e || t.shiftKey)) {
                        var s = this.getSelectedId(!0)[0];
                        if (s && this.getParentId(i) != this.getParentId(s)) return
                    }
                    this.select(i, !1, e, t.shiftKey)
                } else this.select(i)
            }
        }, On: {
            insert: function (t) {
                var i = this.getSelectedId() || "0";
                this.add({value: t}, null, i)
            }, modify: function (t) {
                for (var i = this.getSelectedId(!0), e = 0; e < i.length; e++) this.getItem(i[e]).value = t, this.refresh(i[e])
            }, custom: function () {
            }
        }, Ho: !0, $dragHTML: function (t, i, e) {
            var s = "<div class='webix_tree_item'>" + this.type.template(t, this.type) + "</div>";
            return b(e.source) && 1 < e.source.length && (s = this.Do(s, e.source.length)), s
        }, Vo: function (t) {
            for (var i = t.source, e = 0; e < i.length; e++) this.close(i[e])
        }, To: function (t, i) {
            var e = this.getItemNode(t);
            e ? e.parentNode.insertBefore(qi["in"][0], e) : i.children[0].children[0].appendChild(qi["in"][0])
        }, type: P.extend({
            template: function (t, i) {
                return (i["template" + t.level] || i.templateCommon).apply(this, arguments)
            },
            classname: function (t, i, e) {
                var s = "webix_tree_item";
                return t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css), e && e.$css && (s += " " + e.$css),
                i.css && (s += " " + i.css), s
            },
            aria: function (t, i, e) {
                return 'role="treeitem"' + (e && e.webix_selected ? ' aria-selected="true" tabindex="0"' : ' tabindex="-1"') + (t.$count ? 'aria-expanded="' + (t.open ? "true" : "false") + '"' : "") + 'aria-level="' + t.$level + '"'
            },
            templateCommon: Wt("{common.icon()} {common.folder()} <span>#value#</span>"),
            templateStart: Wt('<div webix_tm_id="#id#" class="{common.classname()}" {common.aria()}>'),
            templateEnd: Wt("</div>"),
            templateCopy: Wt("#value#")
        }, cs)
    }), ao = P.protoUI(oo, os, Se, es, ve, hs, Be, De, Ae, Re, ns, Bh.view, rs, ie, c), uo = {api: oo, view: ao};
    Qt(ao, {
        name: "lineTree", css: "webixLineTree", icon: function (t, i) {
            for (var e = "", s = "", n = 1; n <= t.$level; n++) {
                n == t.$level && (s = t.$count ? t.open ? "webix_tree_open " : "webix_tree_close " : "webix_tree_none ");
                var h = i.LD(t, i, n);
                h && (e += "<div class='" + s + "webix_tree_img webix_tree_" + h + "'></div>")
            }
            return e
        }, LD: function (t, i, e) {
            var s = i.hf, n = rs.Se;
            if (0 === s && n) {
                var h = t.$level, r = t.id;
                for (s = []; h;) {
                    var o = n.getParentId(r), a = n.data.branch[o];
                    a[a.length - 1] == r && (s[h] = !0), r = o, h--
                }
                i.hf = s
            }
            if (!s) return 0;
            if (e != t.$level) return s[e] ? "blank" : "line1";
            var u = 3;
            return t.$parent || 0 === t.$index && (u = 4), s[t.$level] && (u = 2), t.$count ? t.open ? "minus" + u : "plus" + u : "line" + u
        }
    });
    var co = {
        name: "treemap",
        defaults: {
            activeItem: !1,
            subRender: !0,
            header: !0,
            headerHeight: 35,
            value: Wt("#value#"),
            headerTemplate: "",
            navigation: !0
        },
        value_setter: Wt,
        headerTemplate_setter: Wt,
        header_setter: function (t) {
            return t && !0 !== t && (this.type.header = t), t
        },
        $init: function () {
            this.$view.className += " webix_treemap", this.Tt.setAttribute("role", "tree"), this.OD = document.createElement("DIV"), P.extend(this.data, as, !0), this.data.provideApi(this, !0), this.data.attachEvent("onClearAll", S(function () {
                this.Ti = "", this.$values = {}, this.$xy = {}
            }, this)), this.attachEvent("onKeyPress", this.ve)
        },
        ef: function (t) {
            var i = this.data.pr[t.id];
            this.callEvent("onItemRender", [t]);
            var e = t.$template ? this.type["template" + t.$template].call(this, t, this.type, i) : this.type.template.call(this, t, this.type, i);
            return this.type.templateStart.call(this, t, this.type, i) + e + this.type.templateEnd.call(this)
        },
        UD: function (t) {
            var i = this.getItem(t), e = this.B.headerHeight,
                s = "<div class='webix_treemap_header' style='height:" + e + "px;line-height:" + e + "px;'>";
            return s += this.type.header.call(this, i, this.type), s += "</div>"
        },
        _C: function (t) {
            var i, e, s, n, h = [];
            if (!this.$width || !this.count()) return this.Ti = "", !1;
            if (t || (t = this.config.branch || 0, this.Ti = "", this.$values = {}, this.$xy = {}, this.$xy[t] = {
                width: this.$width,
                height: this.$height,
                top: 0,
                left: 0
            }, t && this.B.header && (this.$xy[t].height -= this.B.headerHeight, this.$xy[t].top = this.B.headerHeight, this.Ti += this.UD(t)), n = 0, this.data.each(function (t) {
                var i = this.getParentId(t.id);
                if (!this.data.branch[t.id] && (s = 1 * this.config.value.call(this, t), !isNaN(s) && s)) for (this.$values[t.id] = s, n += s; i;) this.$values[i] || (this.$values[i] = 0), this.$values[i] += s, i = this.getParentId(i)
            }, this, !1, t)), this.data.eachChild(t, function (t) {
                this.$values[t.id] && h.push(_(t))
            }, this), n = n || this.$values[t], h.length && n) {
                (e = {
                    top: (i = this.$xy[t]).top,
                    left: i.left,
                    dx: i.width,
                    dy: i.height,
                    set: [],
                    sum: 0
                }).dim = Math.min(e.dx, e.dy);
                for (var r = e.dx * e.dy / n, o = 0; o < h.length; o++) h[o].$value = this.$values[h[o].id] * r;
                h.sort(function (t, i) {
                    return t.$value > i.$value ? -1 : 1
                });
                for (var a = Infinity, u = 0; h[u];) {
                    var c = this.WD(e, h[u]);
                    if (c < a) e.sum += h[u].$value, e.set.push(h[u]), a = c, u++; else {
                        this.YD(e);
                        var f = {top: e.top, left: e.left, dx: e.dx, dy: e.dy, set: [], sum: 0}, l = e.sum / e.dim;
                        e.dx > e.dy ? (f.left += l, f.dx -= l) : (f.top += l, f.dy -= l), (e = f).dim = Math.min(e.dx, e.dy), a = Infinity
                    }
                }
            }
            e && this.YD(e)
        },
        YD: function (t) {
            var i, e, s, n, h = t.top, r = t.left;
            for (t.mode = t.dy < t.dx, t.contra = t.sum / t.dim, i = 0; i < t.set.length; i++) e = t.set[i].id, n = t.mode ? (s = t.contra, t.set[i].$value / t.contra) : (s = t.set[i].$value / t.contra, t.contra), this.$xy[e] = {}, this.$xy[e].top = h, this.$xy[e].left = r, t.mode ? h += n : r += s, this.$xy[e].width = s, this.$xy[e].height = n, this.Ti += this.ef(this.getItem(e)), this.B.subRender && this.data.branch[e] && this._C(e)
        },
        WD: function (t, i) {
            var e = t.sum + i.$value, s = e * e / (t.dim * t.dim * i.$value);
            return t.set.length && (s = Math.max(t.dim * t.dim * t.set[0].$value / (e * e), s)), 1 < s ? s : 1 / s
        },
        oc: function (t) {
            return this.OD.innerHTML = this.ef(t), this.OD.firstChild
        },
        showBranch: function (t) {
            this.B.branch = t, this.refresh()
        },
        render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) {
                if ("update" == e) {
                    var s = this.getItemNode(t);
                    if (s) dt(this.Ai[t] = this.oc(i), s), lt(s)
                } else !this.data.branch || this.B.branch && !this.data.branch[this.B.branch] || (this.Ai = null, this.callEvent("onBeforeRender", []), this._C(), this.Q.innerHTML = this.Ti, this.callEvent("onAfterRender", []));
                return !0
            }
        },
        Eo: "webix_dm_id",
        on_click: {
            webix_treemap_item: function (t, i) {
                this.B.select && ("multiselect" == this.B.select || this.B.multiselect ? this.select(i, !1, t.ctrlKey || t.metaKey || "touch" == this.B.multiselect, t.shiftKey) : this.select(i)), this.B.activeItem && this.isBranch(i) && this.showBranch(i)
            }, webix_treemap_header_item: function (t) {
                var i = vt(t, "webix_dm_header_id");
                this.define("branch", i), this.refresh()
            }, webix_treemap_reset: function () {
                this.define("branch", 0), this.refresh()
            }
        },
        on_dblclick: {},
        on_mouse_move: {},
        qD: function (t) {
            var i = "";
            for (var e in t) i += e + ":" + t[e] + ";";
            return i
        },
        type: {
            template: Wt("#value#"), header: function (t, i) {
                for (var e = t.id, s = "<div role='button' tabindex='0' aria-label='" + $.aria.resetTreeMap + "' class='webix_treemap_reset'></div>", n = []; e;) t = this.getItem(e), n.push(i.headerItem.call(this, t, i)), e = this.getParentId(e);
                return n.reverse(), s + n.join("<span class='webix_icon wxi-angle-right webix_treemap_path_icon'></span>")
            }, headerItem: function (t) {
                var i = this.config.headerTemplate(t),
                    e = '<a role="button" tabindex="0" aria-label="' + i + '" webix_dm_header_id="' + t.id + '" class="webix_treemap_header_item">';
                return e += i, e += "</a>"
            }, classname: function (t, i, e) {
                var s = "webix_treemap_item";
                i.css && (s += " " + i.css), t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css);
                var n = this.$xy[t.id];
                e && e.$css && (s += " " + e.$css), s += " webix_treemap_level_" + this.getItem(t.id).$level;
                var h = this.getParentId(t.id);
                if (h && h != this.B.branch || (s += " webix_treemap_level_top"), this.$height - n.top - n.height < 1 && (s += " webix_treemap_item_bottom"), this.$width - n.left - n.width < 1 && (s += " webix_treemap_item_right"), i.cssClass) {
                    var r = i.cssClass.call(this, t, i, e);
                    r && ("object" == M(r) ? s += " " + ot(r) : s += " " + r)
                }
                return s
            }, templateStart: function (t, i, e) {
                var s = "";
                if (this.$xy) {
                    var n = this.$xy[t.id];
                    s += "width: " + n.width + "px; height: " + n.height + "px;", s += "top: " + n.top + "px; left: " + n.left + "px;"
                }
                return '<div role="treeitem" aria-level="' + t.$level + '" ' + (e && e.webix_selected ? 'aria-selected="true" tabindex="0"' : "") + ' webix_dm_id="' + t.id + '" class="' + i.classname.call(this, t, i, e) + '" style="' + s + '">'
            }, templateEnd: Wt("</div>")
        }
    }, fo = (P.protoUI(co, Se, es, Be, De, Ae, Re, ns, Bh.view, rs, ie, c), {
        name: "dataview",
        $init: function (t) {
            t.sizeToContent && this.$ready.unshift(this.Gh);
            var i = t.type || t.item;
            t.prerender || this.defaults.prerender || i && "auto" == i.width || "move" == t.drag || "order" == t.drag || t.autoheight || P.extend(this, vs, !0), t.autoheight && (t.scroll = !1), i && "tiles" == i.type && (this.Tt.firstChild.style.padding = "8px", this.GD = 8), this.Vi.className += " webix_dataview", this.Tt.setAttribute("role", "listbox")
        },
        Gh: function () {
            var t = ct("DIV", 0, this.type.template({}));
            t.style.position = "absolute", document.body.appendChild(t), this.type.width = t.offsetWidth, this.type.height = t.offsetHeight, lt(t)
        },
        defaults: {scroll: !0, datafetch: 50, navigation: !0},
        Eo: "webix_l_id",
        Zn: "webix_dataview_item",
        GD: 0,
        Bo: "x",
        on_click: {
            webix_dataview_item: function (t, i) {
                this.B.select && ("multiselect" == this.B.select || this.B.multiselect ? this.select(i, !1, "touch" == this.B.multiselect || t.ctrlKey || t.metaKey, t.shiftKey) : this.select(i))
            }
        },
        on_dblclick: {},
        on_mouse_move: {},
        type: {
            template: Wt("#value#"),
            templateLoading: Wt("Loading..."),
            width: 160,
            height: 50,
            classname: function (t, i, e) {
                var s = "webix_dataview_item";
                return i.css && (s += " " + i.css), i.type && "tiles" == i.type.toString() && (s += " tiles "), t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css), e && e.$css && (s += " " + e.$css), s
            },
            tilesStart: function (t, i) {
                return "tiles" == i.type ? '<div class="webix_dataview_inner_item" style="box-sizing:border-box; overflow:hidden;">' : ""
            },
            tilesEnd: function (t, i) {
                return "tiles" == i.type ? "</div>" : ""
            },
            aria: function (t, i, e) {
                return 'role="option"' + (e && e.webix_selected ? ' aria-selected="true" tabindex="0"' : ' tabindex="-1"')
            },
            templateStart: Wt('<div webix_l_id="#id#" class="{common.classname()}" {common.aria()} style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">{common.tilesStart()}'),
            templateEnd: Wt("{common.tilesEnd()}</div>")
        },
        XD: function (t) {
            return this.B.height = this.type.height * Math.ceil(this.data.count() / Math.floor(t / this.type.width))
        },
        autoheight_setter: function (t) {
            return t && (this.data.attachEvent("onStoreLoad", S(this.resize, this)), this.Vi.style.overflowY = "hidden"), t
        },
        $getSize: function (t, i) {
            this.B.xCount && "auto" != this.type.width && !this.JD && (this.B.width = this.type.width * this.B.xCount + (this.ae ? Y.scrollSize : 0)), this.B.yCount && "auto" != this.type.height && !this.KD && (this.B.height = this.type.height * this.B.yCount);
            var e = this.B.width || this.oe;
            return this.B.autoheight && e && (this.ZD(), this.XD(e), this.scroll_setter(!1)), zi.api.$getSize.call(this, t, i)
        },
        ZD: function () {
            return this.B.yCount && (this.KD || "auto" == this.type.height) && (this.type.height = Math.floor((this.ue - this.GD) / this.B.yCount), this.KD = this.B.yCount), this.B.xCount && (this.JD || "auto" == this.type.width) && (this.type.width = Math.floor((this.oe - 2 * this.GD) / this.B.xCount), this.JD = this.B.xCount), this.KD || this.JD
        },
        $setSize: function (t, i) {
            var e = this.B;
            if (zi.api.$setSize.call(this, t, i)) {
                if (e.autoheight && this.XD() != this.ue) return k(this.resize, this);
                (this.ZD() || this.Bf) && this.render()
            } else (e.yCount && e.yCount != this.KD || e.xCount && e.xCount != this.JD) && this.ZD() && this.render()
        }
    });
    P.protoUI(fo, he, ve, Ae, De, Be, Re, ee, Bh.view);
    $.pager = {
        first: "<span class='webix_icon wxi-angle-double-left'></span>",
        last: "<span class='webix_icon wxi-angle-double-right'></span>",
        next: "<span class='webix_icon wxi-angle-right'></span>",
        prev: "<span class='webix_icon wxi-angle-left'></span>"
    };
    var lo = {
        defaults: {
            size: 10,
            page: 0,
            group: 5,
            template: "{common.pages()}",
            maxWidth: 1e5,
            height: 30,
            borderless: !0
        }, name: "pager", on_click: {
            webix_pager_item: function (t, i) {
                this.select(i)
            }
        }, $init: function (t) {
            this.data = this.B, this.Q = this.Tt, this.Tt.className += " webix_pager" + (t.autowidth ? " webix_pager_auto" : ""), !1 !== t.master && 0 !== t.master || this.$ready.push(this.QD)
        }, QD: function () {
            this.refresh(), this.$master = {
                refresh: function () {
                }, select: function () {
                }
            }
        }, select: function (t) {
            if (this.$master && "pager" == this.$master.name) return this.$master.select(t);
            switch (t) {
                case"next":
                    t = this.B.page + 1;
                    break;
                case"prev":
                    t = this.B.page - 1;
                    break;
                case"first":
                    t = 0;
                    break;
                case"last":
                    t = this.B.limit - 1
            }
            t < 0 && (t = 0), t >= this.data.limit && (t = this.data.limit - 1);
            var i = this.data.page;
            this.callEvent("onBeforePageChange", [t, i]) && (this.data.page = 1 * t, this.refresh() && (this.B.animate && this.Tk(i, 1 * t, this.B.animate) || this.$master.refresh()), this.callEvent("onAfterPageChange", [t]))
        }, Eo: "webix_p_id", template_setter: Wt, type: {
            template: function (t, i) {
                return t.template.call(this, t, i)
            },
            pages: function (t) {
                var i = "";
                if (-1 == t.page) return "";
                t.$min = t.page - Math.round((t.group - 1) / 2), t.$max = t.$min + 1 * t.group - 1, t.$min < 0 && (t.$max += -1 * t.$min, t.$min = 0), t.$max >= t.limit && (t.$min -= Math.min(t.$min, t.$max - t.limit + 1), t.$max = t.limit - 1);
                for (var e = t.$min || 0; e <= t.$max; e++) i += this.button({
                    id: e,
                    index: e + 1,
                    selected: e == t.page ? "_selected" : "",
                    label: $.aria.page + " " + (e + 1)
                });
                return i
            },
            page: function (t) {
                return t.page + 1
            },
            first: function () {
                return this.button({id: "first", index: $.pager.first, selected: "", label: $.aria.pages[0]})
            },
            last: function () {
                return this.button({id: "last", index: $.pager.last, selected: "", label: $.aria.pages[3]})
            },
            prev: function () {
                return this.button({id: "prev", index: $.pager.prev, selected: "", label: $.aria.pages[1]})
            },
            next: function () {
                return this.button({id: "next", index: $.pager.next, selected: "", label: $.aria.pages[2]})
            },
            button: Wt("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>")
        }, clone: function (t) {
            t.$view || (t.view = "pager", t = ei(t)), ((this.iI = t).$master = this).tI()
        }, refresh: function () {
            var t = this.B;
            t.limit = Math.ceil(t.count / t.size) || 1;
            var i = Math.min(t.limit - 1, t.page);
            return i != t.page ? this.$master.setPage(i) : 0 <= (t.page = i) && i != t.old_page || t.limit != t.old_limit || t.old_count != t.count ? (this.render(), this.tI(), t.old_limit = t.limit, t.old_page = t.page,
                t.old_count = t.count, !0) : void 0
        }, apiOnly_setter: function (t) {
            return this.$apiOnly = t
        }, tI: function () {
            this.iI && (this.iI.B.count = this.B.count, this.iI.B.page = this.B.page, this.iI.refresh())
        }, Tk: function (t, i, e) {
            if (t == i) return !1;
            if (this.eI) return this.sI && window.clearTimeout(this.sI), this.sI = k(this.Tk, this, [t, i, e], 100);
            var s = t < i ? "left" : "right";
            "top" != e.direction && "bottom" != e.direction || (s = t < i ? "top" : "bottom"), e.flip && (s = "");
            var n = 0, h = this.$master.Q, r = !!this.$master.et;
            r && (n = (h = this.$master.et).offsetTop, xt(this.$master.$view, "webix_animation"));
            var o, a = h.cloneNode(!0);
            a.style.width = h.style.width = "100%", this.$master.refresh(), dt(a, h.nextSibling, h.parentNode), r && (a.childNodes[1].scrollLeft = h.childNodes[1].scrollLeft);
            var u = !0 !== e ? e : {}, c = P.extend({
                direction: s, callback: S(function () {
                    c.callback = null, ji.breakLine(o), this.eI = !1, this.$master.et && yt(this.$master.$view, "webix_animation")
                }, this), top: n, keepViews: r
            }, u);
            o = ji.formLine(h, a, c), ji([h, a], c), this.eI = !0
        }
    }, vo = (P.protoUI(lo, Ae, Hi, zi.view, c), {
        name: "comments", defaults: {sendAction: "click", mode: "comments", highlight: !0}, $init: function (t) {
            this.$view.className += " webix_comments", this.zt = [], t.rows = [this.nI(t)], t.moreButton || (t.moreButton = Wt($.comments.moreComments)), t.readonly || (t.rows.push(this.hI(t)), this.rI()), this.oI(t.users), this.$ready.push(this.vC)
        }, $exportView: function () {
            return this.aI
        }, vC: function () {
            var e = this;
            this.aI = this.queryView("list"), this.uI = this.queryView("form"), this.cI = this.queryView("button"), this.fI = this.queryView(this.B.highlight ? "texthighlight" : "textarea"), this.config.mentions && this.lI(this.config.mentions), this.aI.data.provideApi(this, !0), this.serialize = function () {
                var t = e.aI.serialize(), i = e.getIndexById("$more");
                return 0 <= i && t.splice(i, 1), t
            }, this.B.readonly || (this.dI = I("onClick", function (t) {
                var i = ri(t);
                i == e.fI ? (e.vI(!0), k(function () {
                    e.fI.focus()
                })) : i === e.cI || i === e._I || e.pI && i === e.pI.getList() || t && -1 !== (t.target.className || "").toString().indexOf("webix_comments_menu") || e.vI()
            }), this.attachEvent("onDestruct", function () {
                A(this.dI)
            }), this.aI.attachEvent("onAfterScroll", function () {
                e._I.hide()
            }))
        }, $onLoad: function (t, i) {
            this.mI(t, i)
        }, mI: function (t, i) {
            var e = this, s = this.aI || this.queryView({view: "list"});
            s.data.driver = i;
            var n = t.more;
            if (t = i.getRecords(t), this.bI) {
                if (this.bI = !1, t.length) {
                    var h = s.data.order, r = 1;
                    if ("chat" == this.B.mode) s.data.order = g([h[0]].concat(new Array(t.length), h.slice(1))); else {
                        var o = s.getIndexById("$more");
                        s.data.order = g(h.slice(0, o).concat(new Array(t.length), h.slice(o))), r = o
                    }
                    s.parse({data: t, pos: r}), n && ue(this.aI).ignore(function () {
                        e.aI.updateItem("$more", {value: n})
                    }), "chat" == this.B.mode && s.showItem(s.getIdByIndex(t.length))
                }
                t.length && n || ue(this.aI).ignore(function () {
                    e.aI.remove("$more")
                })
            } else n && !s.exists("$more") && (n = {
                id: "$more",
                value: n,
                $css: "webix_comments_more_item"
            }, "chat" == this.B.mode ? t.unshift(n) : t.push(n)), s.parse(t), "chat" == this.B.mode && s.waitData.then(function () {
                return s.showItem(s.getLastId())
            })
        }, $skin: function () {
            pn.api.$skin.call(this), this.Gp = Ei.inputHeight + 6
        }, getUsers: function () {
            return this.gI
        }, getMenu: function () {
            return this._I
        }, setCurrentUser: function (t) {
            this.config.currentUser = t, this.uI.clear(), this.aI.refresh()
        }, edit: function (t) {
            if (!this.config.readonly && this.callEvent("onBeforeEditStart", [t])) {
                this.vI(!0);
                var i = this.aI.getItem(t);
                this.uI.setValues(i), this.uI.focus();
                var e = this.uI.elements.text.getInputNode();
                e.scrollTop = e.scrollHeight, Ct(e, i.text.length), this.callEvent("onAfterEditStart", [t])
            }
        }, wI: function (t) {
            var i = this.uI.getValues();
            i.text && (i.id ? this.updateItem(i.id, i) : (this.config.currentUser && (i.user_id = this.config.currentUser), i.date = new Date, this.add(i), this.aI.scrollTo(0, this.aI.getLastId())), this.uI.clear(), t && (this.fI.getInputNode().value = ""))
        }, xI: function (t) {
            this.uI.getValues().id == t && this.uI.clear(), this.remove(t)
        }, vI: function (t) {
            if (!Y.touch && !t != !this.yI) {
                var i = this.fI;
                this.yI = t ? (this.cI.getParentView().show(), i.define({height: 84}), !0) : (xi.hasFocus(this.cI) && xi.setFocus(this.aI), this.cI.getParentView().hide(), i.define({height: this.Gp}), !1), i.resize()
            }
        }, MI: function (t) {
            t || (t = this.fI.getValue()), t && !this.cI.isEnabled(
            ) ? this.cI.enable() : !t && this.cI.isEnabled() && this.cI.disable()
        }, rI: function () {
            var e = this;
            this._I = ei({
                view: "contextmenu",
                autowidth: !0,
                point: !1,
                data: [{id: "edit", icon: "wxi-pencil", value: $.comments.edit}, {
                    id: "remove",
                    icon: "wxi-trash",
                    value: $.comments.remove
                }],
                on: {
                    onShow: function () {
                        var t = e._I.getContext();
                        e.aI.addCss(t.id, "active_menu")
                    }, onHide: function () {
                        var t = e._I.getContext();
                        e.aI.removeCss(t.id, "active_menu")
                    }, onItemClick: function (t) {
                        var i = e._I.getContext();
                        e.callEvent("onBeforeMenuAction", [t, i.id]) && ("edit" == t ? e.edit(i.id) : "remove" == t && ($.comments.confirmMessage ? Ls({
                            text: $.comments.confirmMessage,
                            callback: function (t) {
                                t && e.xI(i.id)
                            }
                        }) : e.xI(i.id)))
                    }
                }
            }), this.zt.push(this._I)
        }, hI: function (t) {
            var n = this, i = $.comments, e = {
                view: "textarea",
                css: "webix_comments_textarea",
                height: this.Gp,
                name: "text",
                placeholder: i.placeholder,
                keyPressTimeout: 100,
                on: {
                    onTimedKeyPress: function () {
                        n.MI()
                    }, onChange: function (t) {
                        n.MI(t)
                    }, onKeyPress: function (t, i) {
                        if (13 == t) {
                            var e = n.B.sendAction, s = i.shiftKey;
                            ("enter" == e && !s || "enter" !== e && s) && (bt(i), n.wI(!0))
                        }
                    }
                }
            };
            return !1 !== t.highlight && P.extend(e, {
                view: "texthighlight", type: "textarea", highlight: function (t) {
                    return n.SI(Wt.escape(t), !0)
                }
            }, !0), {
                view: "form",
                minHeight: 50,
                paddingX: 10,
                elements: [e, {
                    hidden: !Y.touch,
                    cols: [{}, {
                        view: "button",
                        disabled: !0,
                        css: "webix_comments_send webix_primary",
                        value: i.send,
                        autowidth: !0,
                        click: function () {
                            n.wI()
                        }
                    }]
                }]
            }
        }, SI: function (t, n) {
            var h, r = this;
            if (-1 === t.indexOf("@")) return t;
            "users" === this.B.highlight && (h = this.pI && this.pI.B.textValue || "value");
            var i = n ? this.kI : this.CI;
            return t.replace(i, function (t, i, e, s) {
                return r.$I(t, s || i, h, n)
            })
        }, $I: function (t, i, e, s) {
            return e && !this.gI.find(function (t) {
                return t[e] == i
            }, !0) ? t : '<span class="webix_comments_mention">'.concat(s ? t : "@" + i, "</span>")
        }, nI: function (t) {
            var r = this, o = "webix_comments_", e = {
                height: "auto", templateStatus: function (t) {
                    return "<span class = '" + o + "status " + t.status + "'></span>"
                }, templateUser: function (t) {
                    var i = r.getUsers(), e = i && i.exists(t.user_id) ? i.getItem(t.user_id) : {};
                    return "<span class = '" + o + "name'>" + (e.value || "") + "</span>"
                }, templateMenu: function () {
                    return r.config.readonly ? "" : "<span class='webix_icon wxi-dots " + o + "menu'></span>"
                }, templateDate: function (t) {
                    var i = Ys.dateToStr("%d %M, %H:%i");
                    return t.date ? "<span class='" + o + "date'>" + i(t.date) + "</span>" : ""
                }, templateLinks: function (t) {
                    return t.text.replace(/(https?:\/\/[^\s]+)/g, function (t) {
                        var i = "<a target='_blank' href='" + (t = Wt.escape(t)) + "'>";
                        return t.match(/.(jpg|jpeg|png|gif)$/) ? i += "<img class='webix_comments_image' src='" + t + "'/>" : i += t, i + "</a>"
                    })
                }, templateMentioned: function (t) {
                    return r.SI(t.text)
                }, templateText: function (t, i) {
                    return r.B.mentions && r.B.highlight && ((t = _(t)).text = i.templateMentioned(t, i)), "<div class = '" + o + "message'>" + i.templateLinks(t) + "</div>"
                }, templateAvatar: function (t, i) {
                    var e = "<div class='" + o + "avatar'>", s = r.getUsers(),
                        n = s && s.exists(t.user_id) ? s.getItem(t.user_id) : {};
                    if (n.status && (e += i.templateStatus(n)), e += "<div class='" + o + "avatar_image ", n.image) e += "'><img src = '" + n.image + "' class='" + o + "photo'>"; else {
                        var h = n.value ? n.value[0].toUpperCase() : "<span class='webix_icon wxi-user'></span>";
                        e += o + "avatar_text'>" + h
                    }
                    return e += "</div></div>"
                }, template: function (t, i) {
                    var e;
                    if ("$more" == t.id) e = "<div class='webix_comments_more'>" + r.B.moreButton(t) + "</div>"; else {
                        var s = i.templateAvatar(t, i), n = i.templateUser(t, i), h = i.templateDate(t, i);
                        e = s + n + i.templateMenu(t, i) + h + i.templateText(t, i)
                    }
                    return e
                }, classname: function (t, i, e) {
                    var s = jh.api.type.classname(t, i, e);
                    return (t.user_id && t.user_id == r.B.currentUser || !r.gI.count()) && (s += " webix_comments_current"), s
                }
            };
            e = P.extend(e, t.listItem || {}, !0);
            var i = {
                $init: function (t) {
                    t.date && (t.date = $.parseFormatDate(t.date))
                }
            };
            i = P.extend(i, t.scheme || {}, !0);
            var s = {
                view: "list", navigation: !1, type: e, scheme: i, onClick: {
                    webix_comments_menu: function (t, i) {
                        r._I.isVisible() ? r._I.hide() : (r._I.setContext({
                            obj: r,
                            id: i
                        }), r._I.show(t.target, e.menuPosition || {pos: "left", y: 30, x: 10}))
                    }, webix_comments_more: function () {
                        if (r.config.url && r.callEvent("onDataRequest", [])) {
                            r.bI = !0;
                            var t = r.aI.getItem("$more").value,
                                i = "chat" == r.B.mode ? t : r.aI.getIndexById("$more"), e = O.$parse(r.config.url),
                                s = {
                                    error: function () {
                                        r.bI = !1
                                    }
                                };
                            "string" == typeof e && (e = e + (e.indexOf("?") < 0 ? "?" : "&") + "pos=" + i + "&more=" + t), r.load(e, s, {
                                pos: i,
                                more: t
                            })
                        }
                    }
                }
            };
            return t.save && (s.save = t.save), s
        }, oI: function (t) {
            t && t.getItem ? this.gI = t : (this.gI = new mh, this.zt.push(this.gI), t && "string" == typeof t ? this.gI.load(t) : this.gI.parse(t || []))
        }, lI: function (t) {
            var s = this, i = this.config.readonly;
            i || this.DI(t), this.config.highlight && (i || (this.kI = new RegExp("@((&quot;(.*?)&quot;)|([^\\s]{1,}))", "g")), this.CI = new RegExp('@(("(.*?)")|([^\\s]{1,}))', "g")), m.all([this.aI.waitData, this.gI.waitData]).then(function () {
                s.aI.refresh()
            }), this.aI.data.attachEvent("onStoreUpdated", function (t, i, e) {
                !t || "add" !== e && "update" !== e || s.II(i)
            })
        }, DI: function (t) {
            var i = "object" != M(t) ? {} : t;
            "object" !== M(i.body) ? i.body = {data: this.gI} : i.body.data = this.gI, P.extend(i, {view: "mentionsuggest"}, !0);
            var e = this.fI.define("suggest", i);
            this.fI.setValueHere = function (t, i, e) {
                return -1 != t.indexOf(" ") && (t = '"'.concat(t, '"')), ph.api.setValueHere.apply(this, [t, i, e])
            }, this.pI = ri(e)
        }, II: function (r) {
            var o = this;
            if (-1 != r.text.indexOf("@")) {
                var a = this.pI && this.pI.B.textValue || "value", u = {};
                r.text.replace(this.CI, function (t, i, e, s) {
                    var n = s || i, h = o.gI.find(function (t) {
                        return t[a] == n
                    }, !0);
                    return h && !u[n] && (o.callEvent("onUserMentioned", [h.id, r.id]), u[n] = !0), t
                })
            }
        }
    }), _o = (P.protoUI(vo, Ht, pn.view), {
        name: "timeline", defaults: {scroll: "auto"}, $init: function () {
            var s = this;
            this.Tt.className += " webix_timeline", this.$blockRender = !0, this.data.provideApi(this, !0), this.data.attachEvent("onStoreUpdated", function (t, i, e) {
                return s.render(t, i, e)
            })
        }, Eo: "webix_tl_id", on_click: {}, $setSize: function (t, i) {
            this.$blockRender = !1, Fi.api.$setSize.call(this, t, i) && this.refresh()
        }, render: function (t, i, e) {
            if (this.isVisible(this.B.id) && !this.$blockRender) {
                if ("update" != e) return this.callEvent("onBeforeRender", [this.data]) && (this.Ai = null, this.Q.innerHTML = this.data.getRange().map(this.Z, this).join(""), this.callEvent("onAfterRender", [])), !0;
                var s = this.getItemNode(t);
                return dt(this.Ai[t] = this.oc(i), s), lt(s), !0
            }
        }, Z: function (t) {
            this.callEvent("onItemRender", [t]);
            var i = this.getIndexById(t.id);
            return this.type.templateStart.call(this, t, this.type, i) + this.type.template.call(this, t, this.type, i) + this.type.templateEnd.call(this)
        }, type: {
            type: "left", classname: function (t, i, e) {
                var s = "webix_timeline_item";
                return "alternate" !== i.type ? s += "  webix_timeline_" + i.type : s += " webix_timeline_" + (e % 2 ? "right" : "left"), i.css && (s += " " + i.css), t.$css && ("object" == M(t.$css) && (t.$css = ot(t.$css)), s += " " + t.$css), s
            }, lineColor: function (t) {
                return t.color
            }, templateValue: Wt("#value#"), templateDetails: function (t) {
                return t.details || ""
            }, templateDate: function (t) {
                return Ys.dateToStr("%d %M, %Y")(t.date)
            }, template: function (t, i, e) {
                var s = Ei.dataPadding, n = "string" == typeof i.lineColor ? i.lineColor : i.lineColor(t, i),
                    h = "stroke-width:".concat(2, "px; stroke:").concat(n || Ei.timelineColor, ";"),
                    r = this.B.scroll ? Y.scrollSize : 0, o = this.$width - 2 * s - r, a = i.type,
                    u = e + 1 == this.count(), c = s, f = Math.floor(.35 * o), l = Math.floor(.65 * o) - 14,
                    d = f + 14 + s, v = f - 14;
                return "right" == a ? (c = (f = o - d + 14 + s) + 14 + s, d = s) : "alternate" == a && (d = (f = Math.floor(.5 * o)) + 14 + s, v = l = f - 14, e % 2 && (c = d, d = s)), '<div style="left:'.concat(c, "px; width:").concat(v, 'px;" class="webix_timeline_date">').concat(i.templateDate(t, i), '</div>\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="').concat(f + 14, 'px" height="').concat(i.height + 14, 'px">\n\t\t\t\t\t\t').concat(u ? "" : '<line x1="'.concat(f, 'px" y1="').concat(15, '" x2="').concat(f, 'px" y2="').concat(i.height + 9 - 6, '" class="webix_timeline_node" style="').concat(h, '"/>'), '\n\t\t\t\t\t\t<circle cx="').concat(f, 'px" cy="').concat(9, '" r="').concat(6, '" class="webix_timeline_node webix_timeline_point" style="').concat(h, ' fill:transparent;" />\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div class="webix_timeline_event" style="left:').concat(d, "px; width:").concat(l, "px; height:").concat(i.height - s, 'px;">\n\t\t\t\t\t\t<div class="webix_timeline_value">').concat(i.templateValue(t, i), '</div>\n\t\t\t\t\t\t<div class="webix_timeline_details">').concat(i.templateDetails(t, i), "</div>\n\t\t\t\t\t</div>")
            }, templateStart: function (t, i, e) {
                return "<div ".concat("webix_tl_id", '="', t.id,
                    '" class="').concat(i.classname.call(this, t, i, e), '" style="height:').concat(i.height, 'px;">')
            }, templateEnd: Wt("</div>")
        }, templateValue_setter: function (t) {
            this.type.templateValue = Wt(t)
        }, templateDetails_setter: function (t) {
            this.type.templateDetails = Wt(t)
        }, templateDate_setter: function (t) {
            this.type.templateDate = Wt(t)
        }, $skin: function () {
            this.type.height = Ei.timelineItemHeight
        }
    }), po = (P.protoUI(_o, Re, He, le, Ae, c, Bi, Fi.view), {
        name: "menu", Em: "webix_menu", $init: function (t) {
            t.autowidth && (this.AI = !0, delete t.autowidth), this.data.attachEvent("onStoreUpdated", S(function () {
                this.cu()
            }, this)), this.attachEvent("onMouseMove", this.FI), this.attachEvent("onMouseOut", function (t) {
                this.TI() && "click" == this.B.openAction || !this.VI && t.relatedTarget && this.cu()
            }), this.attachEvent("onItemClick", function (t, i, e) {
                var s = this.getItem(t);
                if (s) {
                    if (s.$template) return;
                    var n = this.getTopMenu();
                    if (!n.callEvent("onMenuItemClick", [t, i, e])) return void (i.showpopup = n.B.id);
                    this != n && n.rc(t, i, e), this.type.zI(s) || n.HI ? ((Y.touch || this === n && "click" == n.B.openAction) && this.lu(t, e), i.showpopup = n.B.id) : (n.cu(!0), n.RI && n.hide())
                }
            }), this.attachEvent("onKeyPress", function (t) {
                if (9 === t) this.getTopMenu().cu(); else if (13 === t || 32 === t) {
                    var i, e = this.getSelectedId();
                    e && (i = this.getItemNode(e)), i && wt(i, "MouseEvents", "click")
                }
            }), this.data.attachEvent("onClearAll", function () {
                this.BI = []
            }), this.data.BI = [], this.Tt.setAttribute("role", "menubar"), this.zt = []
        }, sizeToContent: function () {
            if ("y" == this.B.layout) {
                var i = [], e = !1;
                this.data.each(function (t) {
                    i.push(this.Z(t)), t.submenu && (e = !0)
                }, this), this.config.width = Mt(i, this.$view.className).width + 16 + 2 + (e ? 15 : 0), this.resize()
            }
        }, getTopMenu: function () {
            for (var t = this; t.uu;) t = ri(t.uu);
            return t
        }, Um: function (t) {
            this.B.autoheight && (t = this.count());
            for (var i = this.count(), e = 0, s = 0; s < t; s++) {
                var n = this.data.pull[this.data.order[s]];
                n && "Separator" == n.$template ? (e += 4, this.B.autoheight || t++) : e += this.type.height
            }
            return this.lc(t && t < i, "y"), e
        }, on_mouse_move: {}, type: {
            zI: function (t) {
                return t.submenu || t.data || t.item
            }, css: "menu", width: "auto", aria: function (t, i, e) {
                return 'role="menuitem"' + (e && e.webix_selected ? ' aria-selected="true" tabindex="0"' : 'tabindex="-1"') + (i.zI(t) ? 'aria-haspopup="true"' : "") + (t.disabled ? ' aria-disabled="true"  webix_disabled="true"' : "")
            }, templateStart: function (t, i, e) {
                if ("Separator" === t.$template || "Spacer" === t.$template) return '<div webix_l_id="#id#" role="separator" tabindex="-1" class="webix_context_' + t.$template.toLowerCase() + '">';
                var s = (t.href ? " href='" + t.href + "' " : "") + (t.target ? " target='" + t.target + "' " : "");
                return jh.api.type.templateStart(t, i, e).replace(/^<div/, "<a " + s) + (i.zI(t) && i.subsign ? "<div class='webix_submenu_icon'></div>" : "")
            }, templateEnd: function (t) {
                return "Separator" === t.$template || "Spacer" === t.$template ? "</div>" : "</a>"
            }, templateSeparator: Wt("<div class='sep_line'></div>"), templateSpacer: Wt("<div></div>")
        }, getMenu: function (t) {
            if (this.data.pull[t]) return this;
            for (var i in this.data.pull) {
                var e = this.getItem(i);
                if (e.submenu) {
                    var s = this.jI(e).getMenu(t);
                    if (s) return s
                }
            }
        }, getSubMenu: function (t) {
            var i = this.getMenu(t), e = i.getItem(t);
            return e.submenu ? i.jI(e) : null
        }, getMenuItem: function (t) {
            return this.getMenu(t).getItem(t)
        }, jI: function (t) {
            var i = ri(t.submenu);
            return i || (t.submenu = this.EI(t), i = ri(t.submenu)), i
        }, FI: function (t, i, e) {
            this.TI() && this.lu(t, e)
        }, TI: function () {
            if (Y.touch) return !1;
            var t = this.getTopMenu();
            if ("click" != t.B.openAction) return !0;
            var i = t.NI;
            return !(!i || !ri(i).isVisible())
        }, lu: function (t, i) {
            var e = this.getItem(t);
            if (e && (this.VI = null, this.NI && e.submenu != this.NI && this.cu(!0), this.type.zI(e) && !this.config.hidden)) {
                var s = this.jI(e);
                if (!this.isItemEnabled(t)) return;
                s.show(i, {pos: this.B.subMenuPos}), s.uu = this.B.id, this.NI = e.submenu
            }
        }, disableItem: function (t) {
            var i = this.getMenu(t);
            i && i.Ym(t, !0)
        }, enableItem: function (t) {
            var i = this.getMenu(t);
            i && i.Ym(t, !1)
        }, isItemEnabled: function (t) {
            var i = this.getMenu(t);
            if (i) return jh.api.isItemEnabled.apply(i, arguments)
        }, LI: function (t, i) {
            var e = this.data;
            e.BI[t] != i && (e.BI[t] = i, e.filter(function (t) {
                return !e.BI[t.id]
            }), this.resize())
        }, hideItem: function (t) {
            var i = this.getMenu(t);
            i && i.LI(t, !0)
        }, showItem: function (t) {
            var i = this.getMenu(t);
            if (i) return i.LI(t, !1), jh.api.showItem.call(i, t)
        }, cu: function (t) {
            if (this.NI) {
                var i = ri(this.NI);
                i.cu && i.cu(t), !t && i.En || (i.hide(), this.NI = null)
            }
        }, EI: function (t) {
            var i = {view: "submenu", data: this.type.zI(t)}, e = this.getTopMenu().B.submenuConfig;
            e && P.extend(i, e, !0);
            var s = this.getMenuItem(t.id);
            s && s.config && P.extend(i, s.config, !0);
            var n = ei(i);
            return this.zt.push(n), n.uu = this, n.B.id
        }, fu: function (t, i, e) {
            var s = this.getItem(t);
            return "Separator" != s.$template && "Spacer" != s.$template && this.isItemEnabled(t) ? t : (t = this.getNextId(t, e) || null) && t != i ? this.fu(t, i, e) : i
        }, $skin: function () {
            jh.api.$skin.call(this), this.type.height = Ei.menuHeight
        }, defaults: {scroll: "", layout: "x", mouseEventDelay: 100, subMenuPos: "bottom"}
    }), mo = {api: po, view: P.protoUI(po, jh.view)}, bo = {
        name: "submenu",
        $init: function () {
            this.Ct = l(this.OI), (this.Ct.Ht = this).attachEvent("onMouseOut", function (t) {
                "click" != this.getTopMenu().B.openAction && (this.VI || this.En || !t.relatedTarget || this.hide())
            }), this.attachEvent("onMouseMoving", function () {
                this.uu && (ri(this.uu).VI = !0)
            }), this.attachEvent("onBeforeShow", function () {
                this.getTopMenu().AI && this.sizeToContent && !this.isVisible() && this.sizeToContent()
            }), this.Q.setAttribute("role", "menu")
        },
        $skin: function () {
            mo.api.$skin.call(this), Wn.api.$skin.call(this), this.type.height = Ei.menuHeight
        },
        OI: {
            $getSize: function (t, i) {
                var e = 1 * this.Ht.B.height, s = 1 * this.Ht.B.width, n = mo.api.$getSize.call(this.Ht, t, i);
                return this.Ht.B.height = e, this.Ht.B.width = s, n
            }, $setSize: function (t, i) {
                this.Ht.B.scroll && (this.Ht.xn.style.height = i + "px")
            }, destructor: function () {
                this.Ht = null
            }
        },
        body_setter: function () {
        },
        getChildViews: function () {
            return []
        },
        defaults: {width: 150, subMenuPos: "right", layout: "y", autoheight: !0},
        type: {height: Ei.menuHeight, subsign: !0}
    }, go = {api: bo, view: P.protoUI(bo, mo.view, Wn.view)}, wo = {
        name: "sidemenu", defaults: {animate: !0, position: "left", width: 200, borderless: !0}, $init: function () {
            this.$view.className += " webix_sidemenu"
        }, $skin: function () {
            Wn.api.$skin.call(this), this.defaults.padding = 0
        }, position_setter: function (t) {
            var i = this.B.position;
            return i && yt(this.$view, " webix_sidemenu_" + i), xt(this.$view, " webix_sidemenu_" + t), t
        }, $getSize: function () {
            var t = Zi.api.$getSize.apply(this, arguments);
            return this.UI = t
        }, $setSize: function (t, i) {
            zi.api.$setSize.call(this, t, i), t = this.oe - 2 * this.B.padding, i = this.ue - 2 * this.B.padding, this.Vi.style.padding = this.B.padding + "px", this.en.style.display = "none", this.xn.style.height = i + "px", this.Ct.$setSize(t, i)
        }, show: function () {
            if (!this.callEvent("onBeforeShow", arguments)) return !1;
            this.B.hidden = !1, this.Tt.style.zIndex = vi(this.B.zIndex), (this.B.modal || this.Mn) && (this.sn(!0), this.Mn = null), this.Tt.style.display = "block", this.le(), this.B.position && this.$n(), this.Dn = 1, k(function () {
                this.Dn = 0
            }, this, [], Y.touch ? 400 : 100), this.config.autofocus && (this.In = xi.getFocus(), xi.setFocus(this)), -1 == ti.St.find(this) && ti.St.push(this), this.callEvent("onShow", [])
        }, $n: function (t) {
            var i, e, s, n, h, r = 0, o = 0, a = {};
            this.$view.style.position = "fixed", s = document.documentElement.offsetWidth, n = document.documentElement.offsetHeight, i = this.UI[0] || s, e = this.UI[2] || n, "top" == (h = this.B.position) ? i = s : "right" == h ? (e = n, r = s - i) : "bottom" == h ? (i = s, o = n - e) : e = n, a = {
                left: r,
                top: o,
                width: i,
                height: e,
                maxWidth: s,
                maxHeight: n
            }, "function" == typeof this.B.state && this.B.state.call(this, a), this.WI = a, this.$setSize(a.width, a.height), void 0 === t && this.YI() ? (yt(this.$view, "webix_animate"), this.Tk[this.B.position].beforeShow.call(this, a), k(function () {
                xt(this.$view, "webix_animate", !0)
            }, this, null, 1), k(function () {
                this.Tk[this.B.position].show.call(this, a)
            }, this, null, 10)) : ("right" === this.B.position && (a.left = a.right ? s - a.width - a.right : s - a.width), this.setPosition(a.left, a.top))
        }, WI: {}, YI: function () {
            return ji.isSupported() && this.B.animate && !(Y.isIE && -1 != navigator.appVersion.indexOf("MSIE 9"))
        }, hidden_setter: function (t) {
            return t ? this.hide() : this.show(), !!t
        }, Tk: {
            left: {
                beforeShow: function (t) {
                    this.$view.style.left = -t.width + "px", this.$view.style.top = t.top + "px"
                }, show: function (t) {
                    this.$view.style.left = t.left ? t.left + "px" : "0px"
                }, hide: function (t) {
                    this.$view.style.left = -t.width + "px"
                }
            }, right: {
                beforeShow: function (t) {
                    this.$view.style.left = "auto", this.$view.style.right = -t.width + "px", this.$view.style.top = t.top + "px"
                }, show: function (t) {
                    this.$view.style.right = t.right ? t.right + "px" : "0px"
                }, hide: function (t) {
                    this.$view.style.right = -t.width + "px"
                }
            }, top: {
                beforeShow: function (t) {
                    this.setPosition(t.left, t.top), this.$view.style.height = "0px", this.xn.style.height = "0px"
                }, show: function (t) {
                    this.$view.style.height = t.height + "px", this.xn.style.height = t.height + "px"
                }, hide: function () {
                    this.$view.style.height = "0px", this.xn.style.height = "0px"
                }
            }, bottom: {
                beforeShow: function (t) {
                    this.$view.style.left = t.left + "px", this.$view.style.top = "auto";
                    var i = t.bottom != undefined ? t.bottom : t.maxHeight - t.top - t.height;
                    this.$view.style.bottom = i + "px", this.$view.style.height = "0px"
                }, show: function (t) {
                    this.$view.style.height = t.height + "px"
                }, hide: function () {
                    this.$view.style.height = "0px"
                }
            }
        }, Tn: function () {
            var t = document.documentElement.offsetWidth, i = document.documentElement.offsetHeight;
            if (this.YI() && t == this.WI.maxWidth && i == this.WI.maxHeight) {
                this.Tk[this.B.position].hide.call(this, this.WI);
                var e = Kt(this.$view, Y.transitionEnd, S(function () {
                    this.Vn(), Zt(e)
                }, this))
            } else this.Vn()
        }
    }, xo = (P.protoUI(wo, Wn.view), {
        name: "sidebar",
        defaults: {
            type: "sideBar",
            activeTitle: !0,
            select: !0,
            scroll: !1,
            collapsed: !1,
            collapsedWidth: 44,
            position: "left",
            width: 250,
            mouseEventDelay: 10
        },
        $skin: function () {
            this.defaults.titleHeight = Ei.sidebarTitleHeight
        },
        $init: function () {
            this.$view.className += " webix_sidebar", this.$ready.push(this.qI), this.$ready.push(this.GI), this.data.Cr = function (t) {
                t.data ? t.menu = _(t.data) : t.item && (t.menu = _(t.item.length ? t.item : [t.item]))
            }
        },
        on_context: {},
        on_mouse_move: {},
        qI: function () {
            this.XI = this.config.width, this.attachEvent("onBeforeOpen", function (t) {
                if (!this.config.multipleOpen) for (var i = this.getOpenItems(), e = 0; e < i.length; e++) this.getParentId(t) == this.getParentId(i[e]) && this.close(i[e]);
                return !this.config.collapsed
            }), this.attachEvent("onItemClick", function (t, i, e) {
                var s = this.getPopup();
                s && !s.config.hidden && (i.showpopup = s.config.id), Y.touch && this.JI(t, e)
            }), this.attachEvent("onBeforeSelect", function (t) {
                return !this.getItem(t).$count && (this.clearCss("webix_sidebar_selected"), !0)
            }), this.attachEvent("onAfterSelect", function (t) {
                this.KI(this, t, !Ei.sidebarMarkAll), this.getPopup().ZI(t)
            }), this.attachEvent("onAfterUnSelect", function () {
                this.clearCss("webix_sidebar_selected")
            }), this.attachEvent("onMouseMove", function (t, i, e) {
                this.JI(t, e)
            }), this.attachEvent("onMouseOut", function () {
                this.config.collapsed && (this.getPopup().masterId = null)
            }), this.config.collapsed && this.collapse()
        },
        JI: function (t, i) {
            if (this.config.collapsed) {
                var e = this.getPopup();
                e && (this.QI(t, e), this.tA(t, e), e.masterId = t, e.show(i, {
                    x: "left" == this.config.position ? this.config.collapsedWidth : -e.config.width,
                    y: -1
                }))
            }
        },
        QI: function (t, i) {
            var e = i.getBody().getChildViews()[0];
            e && i.masterId != t && (e.parse(this.getItem(t)), this.getSelectedId() == t ? xt(e.$view, "webix_selected", !0) : yt(e.$view, "webix_selected"))
        },
        tA: function (t, i) {
            var e = i.getBody().getChildViews()[1];
            if (e && i.masterId != t) {
                this.exists(i.masterId) && this.getItem(i.masterId).menu && this.updateItem(i.masterId, {menu: e.data.serialize()}), e.clearCss("webix_sidebar_selected"), e.unselectAll();
                var s = _(this.getItem(t).menu || []);
                if (s.length) {
                    e.show(), e.data.importData(s);
                    var n = this.getSelectedId();
                    e.exists(n) ? e.select(n) : n && this.KI(e, n)
                } else e.hide(), e.data.clearAll()
            }
        },
        GI: function () {
            var e, n = this, s = n.config;
            if (s.popup && (e = ri(s.popup)), !e) {
                var t = "left" == s.position ? "webix_sidebar_popup_left" : "webix_sidebar_popup_right",
                    i = "left" == s.position ? "right" : "left", h = function (t) {
                        var i = "wxi-angle-" + ("left" == s.position ? "right" : "left");
                        return (t.submenu || t.data || t.item ? '<div class="webix_icon ' + i + '"></div>' : "") + t.value
                    }, r = s.css ? " " + s.css : "", o = {
                        view: "popup",
                        css: "webix_sidebar_popup " + t + r,
                        autofit: !1,
                        width: this.XI - this.config.collapsedWidth,
                        borderless: !0,
                        padding: 0,
                        body: {
                            rows: [{
                                view: "template",
                                borderless: !0,
                                css: "webix_sidebar_popup_title",
                                template: "#value#",
                                height: this.config.titleHeight + 2,
                                onClick: {
                                    webix_template: function () {
                                        var t = this.getValues().id;
                                        n.getItem(t).$count || n.select(t)
                                    }
                                }
                            }, {
                                view: "menu",
                                submenu: "data",
                                layout: "y",
                                subMenuPos: i,
                                select: !0,
                                borderless: !0,
                                autoheight: !0,
                                css: "webix_sidebar_popup_list " + t + r,
                                template: h,
                                type: {subsign: !1},
                                submenuConfig: {
                                    padding: 0,
                                    subMenuPos: i,
                                    template: h,
                                    select: !0,
                                    type: {subsign: !1},
                                    css: "webix_sidebar_popup_list " + t + r,
                                    on: {
                                        onShow: function () {
                                            this.clearCss("webix_sidebar_selected"), this.unselectAll();
                                            var t = n.getSelectedId();
                                            t && this.exists(t) ? this.select(t) : t && n.KI(this, t)
                                        }, onBeforeSelect: function (t) {
                                            if (this.getSubMenu(t)) return !1
                                        }, onAfterSelect: function (t) {
                                            for (var i = n.getPopup().queryView({view: "menu"}), e = n.getParentId(t); e;) {
                                                var s = i.getMenu(e);
                                                s && (s.unselectAll(), n.KI(s, t)), e = n.getParentId(e)
                                            }
                                            n.KI(this, t)
                                        }
                                    }
                                },
                                on: {
                                    onBeforeSelect: function (t) {
                                        if (this.getSubMenu(t)) return !1
                                    }, onMenuItemClick: function (t) {
                                        this.getSubMenu(t) || n.select(t)
                                    }
                                }
                            }]
                        }
                    };
                P.extend(o, s.popup || {}, !0), (e = ei(o)).ZI = function (t) {
                    if (n.config.collapsed && 1 == n.getItem(t).$level) {
                        var i = e.getBody().getChildViews()[0];
                        i && xt(i.$view, "webix_selected", !0)
                    }
                }, e.queryView({view: "menu"}).HI = !0
            }
            e.attachEvent("onBeforeShow", function () {
                return s.collapsed
            }), this.zt = [e], s.popupId = e.config.id, Jt(document.body, "mousemove", function (t) {
                var i = t.target || t.srcElement;
                e.config.hidden || e.$view.contains(i) || this.$view.firstChild.contains(i) || e.queryView({view: "menu"}).NI || e.hide()
            }, {bind: this})
        },
        KI: function (i, e, s) {
            var n = "webix_sidebar_selected";
            i.data.each(function (t) {
                !this.iA(e, t.id) || s && "0" != this.getParentId(t.id) ? i.hasCss(t.id, n) && i.removeCss(t.id, n) : i.addCss(t.id, n)
            }, this)
        },
        iA: function (t, i) {
            var e = this.getParentId(t);
            return i == e || !!e && this.iA(e, i)
        },
        getPopup: function () {
            return ri(this.config.popupId)
        },
        position_setter: function (t) {
            var i = t, e = "left" == t ? "right" : "left";
            yt(this.$view, "webix_sidebar_" + e), xt(this.$view, "webix_sidebar_" + i, !0);
            var s = this.getPopup();
            if (s) {
                var n = s.$view;
                yt(n, "webix_sidebar_popup_" + e), xt(n, "webix_sidebar_popup_" + i, !0)
            }
            return t
        },
        collapse: function () {
            this.define("collapsed", !0)
        },
        expand: function () {
            this.define("collapsed", !1)
        },
        toggle: function () {
            var t = !this.config.collapsed;
            this.define("collapsed", t)
        },
        collapsed_setter: function (t) {
            var i;
            return t ? (i = this.config.collapsedWidth, this.closeAll(), this.type.collapsed = !0, yt(this.$view, "webix_sidebar_expanded")) : (i = this.XI, this.type.collapsed = !1, xt(this.$view, "webix_sidebar_expanded", !0)), this.define("width", i), this.resize(), t
        },
        getState: function () {
            var t = {collapsed: this.config.collapsed};
            return P.extend(t, es.getState.call(this)), t
        },
        setState: function (t) {
            es.setState.call(this, t), this.define("collapsed", t.collapsed)
        }
    });
    Qt(uo.view, {
        name: "sideBar", height: "auto", template: function (t, i) {
            return i.collapsed ? i.icon(t, i) : i.arrow(t, i) + i.icon(t, i) + "<span>" + t.value + "</span>"
        }, arrow: function (t) {
            for (var i = "", e = 1; e <= t.$level; e++) {
                if (e == t.$level && t.$count) i += "<span class='" + ("webix_sidebar_dir_icon webix_icon " + ("wxi-angle-" + (t.open ? "down" : "left"))) + "'></span>"
            }
            return i
        }, icon: function (t) {
            var i = "";
            return 2 < t.$level && (i = 'style="padding-left:' + 40 * (t.$level - 2) + 'px"'), t.icon ? "<span class='webix_icon webix_sidebar_icon " + t.icon + "' " + i + "></span>" : "<span " + i + "></span>"
        }
    });
    P.protoUI(xo, uo.view), P.protoUI({name: "context"}, Qi, Wn.view);
    var yo = {
        name: "contextmenu", RI: !0, $init: function (t) {
            t.submenuConfig && P.extend(t, t.submenuConfig)
        }
    }, Mo = (P.protoUI(yo, Qi, go.view), {
        name: "treetable", $init: function () {
            for (var t in P.extend(this.data, as, !0), P.extend(this.type, cs), P.extend(this, hs, !0), ss) this.on_click[t] || (this.on_click[t] = this.eA(ss[t]));
            this.type.treetable = Wt("{common.space()}{common.icon()} {common.folder()}"), this.type.treecheckbox = function (t) {
                return t.indeterminate && !t.nocheckbox ? "<div class='webix_tree_checkbox webix_indeterminate'></div>" : cs.checkbox.apply(this, arguments)
            }, this.data.provideApi(this, !0), this.Tt.setAttribute("role", "treegrid")
        }, Ho: !1, eA: function (e) {
            return function (t, i) {
                return i = i.row, e.call(this, t, i)
            }
        }, Vo: function (t) {
            for (var i = this.B.prerender ? t.source : [t.start], e = 0; e < i.length; e++) this.close(i[e])
        }, getState: function () {
            var t = de.getState.call(this);
            return P.extend(t, es.getState.call(this)), t
        }, setState: function (t) {
            es.setState.call(this, t) && de.setState.call(this, t)
        }, clipboard_setter: function (t) {
            return P.extend(this.On, us), is.clipboard_setter.call(this, t)
        }, Gf: function (t, i) {
            for (var e = 0; e < t.start; e++) {
                var s = this.data.order[e];
                s && 1 != this.getItem(s).$level && t.start--
            }
            return kr.api.Gf.call(this, t, i)
        }
    }), So = (P.protoUI(Mo, es, os, ns, kr.view), {
        name: "filter", $init: function (t) {
            t.type || (t.type = "number"), this.sA = t.conditions || this.nA(t.type), t.rows = this.hA(t), this.$ready.push(this.vC)
        }, $onLoad: function (t, i) {
            this.mI(t, i)
        }, mI: function (t, i) {
            var e = this;
            this.rA();
            var s = this.aI;
            s.data.driver = i;
            var n = [], h = {};
            t.data ? t.data.each(function (t) {
                return e.oA(t, n, h)
            }) : i.getRecords(t).forEach(function (t) {
                return e.oA(t, n, h)
            }), s.clearAll(), s.parse(n), this.aA(), this.uA()
        }, oA: function (t, i, e) {
            var s = t[this.B.field];
            e[s] || (e[s] = !0, i.push(t))
        }, rA: function () {
            this.aI || (this.aI = this.queryView("list"), this.Qd = this.queryView("toggle"), "date" == this.B.type ? this.fI = this.queryView("daterangepicker") : (this.fI = this.queryView("text"), this.wo = this.queryView("richselect")))
        }, vC: function () {
            var t = this;
            this.rA(), this.aI.data.provideApi(this, !0), this.aI.data.attachEvent("onSyncApply", function () {
                return t.mI(t.aI)
            }), "date" != this.B.type && Jt(this.fI.$view, "input", function () {
                return t.cA()
            }), this.setValue(this.B.value, !0)
        }, hA: function (t) {
            var i, e = this;
            if ("date" == t.type) i = {
                view: "daterangepicker", on: {
                    onChange: function () {
                        e.cA()
                    }
                }
            }; else {
                var s = this.sA;
                i = {
                    cols: [{
                        view: "richselect", value: s[0].id, width: 160, options: s, on: {
                            onChange: function () {
                                e.cA()
                            }
                        }
                    }, {view: "text"}]
                }
            }
            return [i, {
                view: "toggle",
                batch: "includes",
                onLabel: $.combo.unselectAll,
                offLabel: $.combo.selectAll,
                value: !0,
                on: {
                    onItemClick: function () {
                        e.fA(this.getValue()), e.callEvent("onChange", [])
                    }
                }
            }, {
                view: "list",
                batch: "includes",
                css: "webix_multilist",
                autoheight: !0,
                borderless: !0,
                yCount: 5,
                type: "checklist",
                template: t.template || "#".concat(t.field, "#"),
                on: {
                    onItemClick: function (t) {
                        var i = this.getItem(t);
                        i.$checked = !i.$checked, this.refresh(t), e.callEvent("onChange", []), e.Qd.setValue(e.Mg())
                    }
                }
            }]
        }, nA: function (t) {
            var i = $.filter;
            return "number" == t ? [{
                id: ">", value: i.greater, handler: function (t, i) {
                    return i < t
                }
            }, {
                id: "<", value: i.less, handler: function (t, i) {
                    return t < i
                }
            }, {
                id: ">=", value: i.greaterOrEqual, handler: function (t, i) {
                    return i <= t
                }
            }, {
                id: "<=", value: i.lessOrEqual, handler: function (t, i) {
                    return t <= i
                }
            }, {
                id: "=", value: i.equal, handler: function (t, i) {
                    return t == i
                }
            }, {
                id: "<>", value: i.notEqual, handler: function (t, i) {
                    return t != i
                }
            }] : [{
                id: "equal", value: i.equal, handler: function (t, i) {
                    return t.toLowerCase() == i.toLowerCase()
                }
            }, {
                id: "not equal", value: i.notEqual, handler: function (t, i) {
                    return t.toLowerCase() != i.toLowerCase()
                }
            }, {
                id: "contains", value: i.contains, handler: function (t, i) {
                    return -1 != t.toLowerCase().indexOf(i.toLowerCase())
                }
            }, {
                id: "not contains", value: i.notContains, handler: function (t, i) {
                    return -1 == t.toLowerCase().indexOf(i.toLowerCase())
                }
            }]
        }, lA: function (i) {
            return "date" == this.B.type ? function (t, i) {
                return (!i.start || t >= Date.parse(i.start)) && (!i.end || t <= Date.parse(i.end) + 864e5)
            } : this.sA.find(function (t) {
                return t.id == i
            }).handler
        }, getValue: function () {
            var i = this, e = [], t = {condition: {filter: this.fI.getValue()}};
            return this.aI.data.each(function (t) {
                t.$checked && e.push(t[i.B.field])
            }), e.length != this.aI.count() && (t.includes = e), "date" != this.B.type && (t.condition.type = this.wo.getValue()), t
        }, Mg: function () {
            return !this.aI.find(function (t) {
                return !t.$checked
            }, !0)
        }, setValue: function (t, i) {
            t = this.$prepareValue(t);
            var e = this.B.type, s = t.condition, n = t.includes;
            this.dA(this.fI, s.filter), this.dA(this.Qd, !!n), "date" != e && this.dA(this.wo, s.type), this.aA(), this.vA = n, this.uA(), i || this.callEvent("onChange")
        }, uA: function () {
            var i = this.vA, e = this.B.field;
            this.aI.data.each(function (t) {
                t.$checked = !i || -1 != i.indexOf(t[e])
            }), this.aI.refresh()
        }, dA: function (t, i) {
            t.blockEvent(), t.setValue(i), t.unblockEvent()
        }, $prepareValue: function (t) {
            if (!(t = t || {}).condition) {
                var i = this.B.type;
                t.condition = {filter: ""}, "date" != i && (t.condition.type = this.sA[0].id)
            }
            return t
        }, aA: function () {
            var s = this, n = {filter: this.fI.getValue(), type: this.wo ? this.wo.getValue() : ""};
            this.aI.filter(function (t) {
                var i = t[s.B.field], e = s.lA(n.type);
                return !n.filter || e(i, n.filter)
            })
        }, cA: function () {
            this.aA(), this.showBatch("includes", !!this.aI.count()), this.Qd.setValue(!0), this.fA(!0), this.callEvent("onChange")
        }, fA: function (i) {
            this.aI.data.each(function (t
            ) {
                t.$checked = i
            }), this.aI.refresh()
        }, getFilterFunction: function () {
            var t = this.getValue(), i = t.condition, e = this.B.field,
                s = "\n\t\t\tvar includes = ".concat(JSON.stringify(t.includes), ';\n\t\t\tvar text = value["').concat(e, '"];\n\t\t\tif(includes)\n\t\t\t\treturn includes.indexOf(text instanceof Date ? text.toISOString() : text) != -1;\n\t\t\telse{\n\t\t\t\tvar handler = ').concat(this.lA(i.type), ";\n\t\t\t\tvar filter = ").concat(JSON.stringify(i.filter), ";\n\t\t\t\treturn !filter || handler(text, filter);\n\t\t\t}");
            return new Function("value", s)
        }
    }), ko = (P.protoUI(So, Ht, pn.view), P.proto({
        name: "DataRecord", isVisible: function () {
            return !0
        }, $init: function (t) {
            this.data = t || {};
            var i = t && t.id ? t.id : V();
            this.B = {id: i}, ei.views[i] = this
        }, getValues: function () {
            return this.data
        }, setValues: function (t, i) {
            this.data = i ? P.extend(this.data, t, !0) : t, this.callEvent("onChange", [t])
        }, refresh: function () {
            this.callEvent("onBindRequest")
        }
    }, c, Di, Ht, yi)), Co = P.proto({
        name: "DataValue", isVisible: function () {
            return !0
        }, $init: function (t) {
            t && !j(t.value) || (this.data = t || "");
            var i = t && t.id ? t.id : V();
            this.B = {id: i}, ei.views[i] = this
        }, setValue: function (t) {
            this.data = t, this.callEvent("onChange", [t])
        }, getValue: function () {
            return this.data
        }, refresh: function () {
            this.callEvent("onBindRequest")
        }
    }, c, Di), $o = P.proto({
        name: "TreeCollection", $init: function () {
            P.extend(this.data, as, !0), this.data.provideApi(this, !0), P.extend(this, hs, !0)
        }
    }, ns, mh);
    P.Date = Ys, P.Number = qs, P.promise = m, P.DataCollection = mh, P.DataRecord = ko, P.DataValue = Co, P.TreeCollection = $o, P.AtomDataLoader = Ht, P.AtomRender = Yt, P.AutoScroll = qt, P.AutoTooltip = Bi, P.BaseBind = Di, P.BindSource = $i, P.Canvas = Pi, P.CodeParser = Rt, P.CollectionBind = Si, P.ContextHelper = Qi, P.CopyPaste = ie, P.CustomPrint = ee, P.CustomScroll = se, P.DataMarks = ne, P.DataMove = he, P.DataLoader = le, P.DataState = de, P.DataStore = fe, P.Destruction = Mi, P.DragControl = qi, P.DragItem = ve, P.DragOrder = _e, P.EditAbility = we, P.EventSystem = c, P.FlexLayout = xe, P.Group = Se, P.GroupMethods = ye, P.GroupStore = Me, P.HTMLOptions = ke, P.HtmlMap = Ce, P.IdSpace = $e, P.KeysNavigation = De, P.MapCollection = Ie, P.Modality = Xi, P.MouseEvents = Ae, P.Movable = Gi, P.NavigationButtons = Fe, P.OverlayBox = Te, P.PagingAbility = Ve, P.ProgressBar = ze, P.RecordBind = Ci, P.RenderStack = He, P.ResizeArea = Ji, P.SingleRender = Hi, P.Scrollable = Re, P.SelectionModel = Be, P.Settings = yi, P.Sparklines = Qe, P.TablePaste = is, P.TooltipControl = oi, P.Touch = Ui, P.TreeAPI = es, P.TreeClick = ss, P.TreeDataLoader = ns, P.TreeDataMove = hs, P.TreeRenderStack = rs, P.TreeStateCheckbox = os, P.TreeStore = as, P.TreeTablePaste = us, P.TreeType = cs, P.UIManager = xi, P.Undo = pe, P.UploadDriver = fs, P.ValidateCollection = ls, P.ValidateData = oe, P.ValueBind = ki, P.Values = ds, P.VirtualRenderStack = vs, P.VRenderStack = _s, P.html = hn, P.skin = Oi, P.debug = function zo(t) {
        if (t) if ("object" !== M(t)) r = {events: !0}; else for (var i in t) r[i] = t[i]; else r = {}
    }, P.i18n = $, P.ready = _i, P.env = Y, P.color = Pe, P.csv = ts, P.clipbuffer = te, P.storage = Xs, P.template = Wt, P.type = Qt, P.editors = ge, P.animate = ji, P.print = function (t, i) {
        var e = ri(t);
        e && e.$printView && (e = e.$printView()), e && (e.callEvent && e.callEvent("onBeforePrint", [i]), function s(t) {
            xt(document.body, "webix_print"), t.docHeader && en("Header", t), t.docFooter && en("Footer", t), at("@media print { @page{ size:" + t.paper + " " + t.mode + ";margin-top:" + t.margin.top + "px;margin-bottom:" + t.margin.bottom + "px;margin-right:" + t.margin.right + "px;margin-left:" + t.margin.left + "px;}}", "print")
        }(i = function n(t) {
            return (t = t || {}).paper = Ks[(t.paper || "").toLowerCase()] || "A4", t.mode = Qs[t.mode] ? t.mode : "portrait", t.fit = Zs[t.fit] ? t.fit : "page", t.scroll = t.scroll || !1, t.size = tn[t.paper], t.margin = t.margin || 0 === t.margin ? t.margin : {}, Js = isNaN(1 * t.margin) ? Js : t.margin, t.margin = {
                top: t.margin.top || 0 === t.margin.top ? t.margin.top : Js,
                bottom: t.margin.bottom || 0 === t.margin.bottom ? t.margin.bottom : Js,
                right: t.margin.right || 0 === t.margin.right ? t.margin.right : Js,
                left: t.margin.left || 0 === t.margin.left ? t.margin.left : Js
            }, t
        }(i)), e.$customPrint && !0 !== e.$customPrint(i) || function r(t, i) {
            var e = t.$view.cloneNode(!0), s = t.$view.getElementsByTagName("canvas");
            if (s.length) for (var n = s.length - 1; 0 <= n; n--) {
                var h = e.getElementsByTagName("canvas")[n].getContext("2d");
                h.drawImage(s[n], 0, 0)
            }
            dt(e, i.docFooter,
                document.body), xt(e, "webix_ui_print"), !i.scroll && (t.Q && t.data && t.data.pull || t.getBody) && xt(e, "webix_print_noscroll"), window.print(), lt(e)
        }(e, i), function h(t) {
            yt(document.body, "webix_print"), ut("print"), t.docHeader && lt(t.docHeader), t.docFooter && lt(t.docFooter)
        }(i))
    }, P.rules = re, P.patterns = sn, P.fullscreen = nn, P.version = "7.1.1", P.name = "core", P.level_in = function Ho() {
        0
    }, P.level_out = function Ro() {
        0
    }, P.clone = l, P.copy = _, P.single = function Bo(t) {
        var i = null;
        return function () {
            return i || (i = new t({})), i._A && i._A.apply(i, arguments), i
        }
    },P.bind = S,P.exec = p,P.wrap = function Po(i, e) {
        return i ? function () {
            var t = i.apply(this, arguments);
            return e.apply(this, arguments), t
        } : e
    },P.isUndefined = j,P.delay = k,P.once = o,P.uid = V,P.toNode = C,P.toFunctor = v,P.isArray = b,P.isDate = y,P.pA = g,P.mA = x,P.bA = Xt,P.gA = Jt,P.event = Kt,P.eventRemove = Zt,P.callEvent = D,P.attachEvent = I,P.detachEvent = A,P.blockEvent = function () {
        return w.blockEvent()
    },P.unblockEvent = function () {
        return w.unblockEvent()
    },P.mapEvent = function (t) {
        return w.mapEvent(t)
    },P.hasEvent = function (t) {
        return w.hasEvent(t)
    },P.stringify = u,P.toPNG = function (s, n) {
        var h = m.defer();
        return Ft(Y.cdn + "/extras/html2canvas-1.0.min.js").then(function () {
            "string" == typeof n && (n = {filename: n}), n = n || {};
            var t = ri(s);
            if (t && t.$exportView && (t = t.$exportView(n)), !t) return h.reject(ps);
            var i = t ? t.$view : C(s), e = (n.filename || "Data") + ".png";
            return window.html2canvas(i, {background: "#fff", logging: !1, useCORS: !0}).then(function (i) {
                var t = function (t) {
                    !1 !== n.download && St(t, e), i.remove(), h.resolve(t)
                };
                i.msToBlob ? t(i.msToBlob()) : i.toBlob(t, "image/png")
            }), h
        })
    },P.toCSV = function (t, i) {
        i = i || {};
        var e = ri(t);
        if (e && e.$exportView && (e = e.$exportView(i)), !e) return m.reject(ps);
        i.export_mode = "csv", i.filterHTML = !0;
        var s = bs(e, i), n = function o(t) {
            return ts.stringify(t)
        }(gs(e, i, s)), h = (i.filename || "Data") + ".csv", r = new Blob(["\ufeff" + n], {type: "text/csv"});
        return !1 !== i.download && St(r, h), m.resolve(r)
    },P.toPDF = function (r, o) {
        return Ft([Y.cdn + "/extras/pdfjs.js", Y.cdn + "/extras/html2canvas-1.0.min.js"]).then(function () {
            (o = o || {}).export_mode = "pdf", o.tl = ws, o.fontName = o.fontName || "pt-sans.regular", o.display = o.display || "table", r = b(r) ? r : [r];
            for (var e = [], t = 0; t < r.length; t++) {
                r[t].id || (r[t] = {id: r[t]});
                var i = ri(r[t].id), s = P.extend(r[t].options || {}, o);
                if (i && i.$exportView && (i = i.$exportView(s)), i && ("table" !== s.display && (e.push({
                    node: i.$view,
                    viewOptions: s
                }), o.autowidth && (o.width = Math.max(o.width || 0, i.$view.$width))), "image" !== s.display && i.data && i.data.pull)) {
                    var n = bs(i, s);
                    e.push({scheme: n, data: gs(i, s, n), viewOptions: s}), o.autowidth && Ss(n, o)
                }
            }
            if (0 == e.length) return m.reject(ps);
            if (ws[o.fontName]) return o.tl = ws[o.fontName], ys(e, o).then(function (t) {
                return xs(t, o)
            });
            var h = m.defer();
            return pdfjs.load(o.fontURL || Y.cdn + "/extras/" + o.fontName + ".ttf", function (t, i) {
                if (t) throw t;
                o.tl = ws[o.fontName] = new pdfjs.TTFFont(i), h.resolve(ys(e, o).then(function (t) {
                    return xs(t, o)
                }))
            }), h
        })
    },P.toExcel = Cs,P.alert = function jo() {
        var t = Ns.apply(this, arguments);
        return t.type = t.type || "alert", Ps(t)
    },P.confirm = Ls,P.modalbox = Os,P.message = Us,P.editStop = function Eo() {
        D("onEditEnd", [])
    },P.ajax = z,P.DataDriver = Vt,P.dp = ue,P.DataProcessor = ce,P.remote = un,P.require = Ft,P.proxy = O,P.send = function No(t, i, e, s) {
        var n = ct("FORM", {target: s || "_self", action: t, method: e || "POST"}, "");
        for (var h in i) {
            var r = ct("INPUT", {type: "hidden", name: h, value: i[h]}, "");
            n.appendChild(r)
        }
        n.style.display = "none", document.body.appendChild(n), n.submit(), document.body.removeChild(n)
    },P.ui = ei,P.$$ = ri,Object.defineProperty(P, "wA", {value: !0})
});
//# sourceMappingURL=webix.js.map
